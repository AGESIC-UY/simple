/*
 * GoJS™ v1.1.11 JavaScript Library for HTML Canvas Diagrams
 * Northwoods Software®, http://www.nwoods.com/
 *
 * Copyright © 1998-2013 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.1.11/doc/license.html.
 */
(function(window) { var f=void 0,h=!0,n=null,p=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}function ca(a){return function(){return a}}var da,ea={};
if(document.createElement("canvas").getContext===f)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)});Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}});Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});Object.isFrozen||(Object.isFrozen=function(a){return a.jF===h});
Object.freeze||(Object.freeze=function(a){a.jF=h});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
for(var fa=0,ga=["ms","moz","webkit","o"],ia=0;ia<ga.length&&!window.requestAnimationFrame;++ia)window.requestAnimationFrame=window[ga[ia]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ga[ia]+"CancelAnimationFrame"]||window[ga[ia]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(8,16-(b-fa)),d=window.setTimeout(function(){a(b+c)},c);fa=b+c;return d});
window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});var u={lC:p,mK:p,RD:p,gD:p,qI:p,trace:aa(),cG:p,assert:p,NJ:n,cK:aa(),eK:aa(),dK:aa(),bK:aa(),jK:aa(),fK:aa(),hK:aa(),gK:aa(),SJ:p,OL:p,JL:p,KL:p,xG:p,iK:aa()},u=n;ea.Debug=n;
var w={mx:{},WA:0,iF:{},Du:document.createElement("canvas").getContext("2d"),Eu:"",xy:[],uu:n,NA:[],jy:"ontouchstart"in window,IB:"ongesturestart"in window,IA:p,m:function(a){u&&u.cG&&alert(a);throw Error(a);},H:function(a,b){if(a.ab){var c="The object is frozen, so its properties cannot be set: "+a.toString();b!==f&&(c+="  to value: "+b);w.m(c)}},i:function(a,b,c,d){a instanceof b||(c=w.Ch(c),d!==f&&(c+="."+d),w.ic(a,b,c))},k:function(a,b,c,d){typeof a!==b&&(c=w.Ch(c),d!==f&&(c+="."+d),w.ic(a,b,
c))},o:function(a,b,c){isFinite(a)||(b=w.Ch(b),c!==f&&(b+="."+c),w.m(b+" must be a real number and not NaN or Infinity: "+a))},ib:function(a,b,c,d){if(!(a instanceof ja)||a.me!==b)c=w.Ch(c),d!==f&&(c+="."+d),w.ic(a,"a constant of class "+w.Uk(b),c)},ic:function(a,b,c,d){b=w.Ch(b);c=w.Ch(c);d!==f&&(c+="."+d);w.m(c+" value is not an instance of "+b+": "+a)},ra:function(a,b,c,d){c=w.Ch(c);d!==f&&(c+="."+d);w.m(c+" is not in the range "+b+": "+a)},trace:function(a){window&&window.console&&window.console.log(a);
u&&u.qI&&w.m(a)},lb:function(a){return"object"===typeof a&&a!==n},isArray:function(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection},Lr:function(a,b,c){w.isArray(a)||w.ic(a,"Array or NodeList or HTMLCollection",b,c)},Sb:function(a){return a.length},Eb:function(a,b){return a[b]},gC:function(a,b,c){Array.isArray(a)?a[b]=c:w.m("Cannot replace an object in an HTMLCollection or NodeList at "+b)},Ky:function(a,b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=
0;d<c;d++)if(a[d]===b)return d;return-1},xi:function(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):w.m("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},yi:function(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):w.m("Cannot remove an object from an HTMLCollection or NodeList at "+b)},rA:1,jc:function(a){a.__gohashid=w.rA++},es:function(a){var b=a.__gohashid;b===f&&(b=w.rA++,a.__gohashid=b);return b},ec:function(a){return a.__gohashid},g:function(a,
b,c){"name"!==b&&"length"!==b&&(a[b]=c)},Q:function(a,b){b.zA=a;ea[a]=b},Ea:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},defineProperty:function(a,b,c,d,e){w.k(a,"function","Util.defineProperty:classfunc");w.k(b,"object","Util.defineProperty:propobj");w.k(c,"function","Util.defineProperty:getter");w.k(d,"function","Util.defineProperty:setter");for(var g in b){b=b[g];c={get:c,set:d};if(e!==f)for(var i in e)c[i]=e[i];Object.defineProperty(a.prototype,
g,c);e=Object.getOwnPropertyDescriptor(a.prototype,g);b&&e&&Object.defineProperty(a.prototype,b,e);break}},u:function(a,b,c,d){w.k(a,"function","Util.defineReadOnlyProperty:classfunc");w.k(b,"object","Util.defineReadOnlyProperty:propobj");w.k(c,"function","Util.defineReadOnlyProperty:getter");for(var e in b){var g=b[e],b={get:c,set:function(a){w.m('The property "'+g+'" is read-only and cannot be set to '+a)}};if(d!==f)for(var i in d)b[i]=d[i];Object.defineProperty(a.prototype,e,b);d=Object.getOwnPropertyDescriptor(a.prototype,
e);g&&d&&Object.defineProperty(a.prototype,g,d);break}},Pd:function(a,b){for(var c in b)b[c]=h;a.prototype.lF=b},Ch:function(a){return a===f?"":"string"===typeof a?a:"function"===typeof a?w.Uk(a):a===n?"*":""},Uk:function(a){return"function"===typeof a?a.zA:"object"===typeof a&&a.constructor?a.constructor.zA:typeof a},s:function(a,b,c){w.k(a,"function","Util.defineEnumValue:classfunc");w.k(b,"string","Util.defineEnumValue:name");w.k(c,"number","Util.defineEnumValue:num");c=new ja(a,b,c);Object.freeze(c);
a[b]=c;var d=a.qA;d||(d=new ka("string",ja),a.qA=d);d.add(b,c);return c},dm:function(a,b){if(!b)return n;w.k(a,"function","Util.findEnumValueForName:classfunc");w.k(b,"string","Util.findEnumValueForName:name");var c=a.qA;return!c?n:c.qa(b)},lG:function(a,b,c,d){var e={},g;for(g in a){for(var i=p,j=1;j<arguments.length;j++)if(arguments[j]===g){i=h;break}i||(e[g]=a[g])}return e},Va:function(a,b){if(!a||!b)return n;var c=f;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),
c===n&&(c=f)):c=a[b]}catch(d){u&&w.trace("property get error: "+d.toString())}return c},Ka:function(a,b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){u&&w.trace("property set error: "+d.toString())}},Wz:function(a,b){w.k(a,"object","Setting properties requires Objects as arguments");w.k(b,"object","Setting properties requires Objects as arguments");var c=u;c||(u=w);var d=a instanceof x,e;for(e in b){var g=a,i=e;if(d){var j=e.indexOf(".");
if(0<j){var k=e.substring(0,j),g=a.Pe(k);g!==n?i=e.substr(j+1):w.m("Unable to find object named: "+k+" in panel "+a.toString()+" when trying to set property: "+e)}}"_"!==i[0]&&!w.nz(g,i)&&w.m('Trying to set undefined property "'+i+'" on object: '+g.toString());g[i]=b[e];"_"===i[0]&&(j=g.ql,j||(j=[],g.ql=j),j.push(i))}u=c;return a},nz:function(a,b){for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return h;var d=c.lF;if(d&&d[b])return h;c=Object.getPrototypeOf(c)}return p},
mC:function(a,b){if(!w.lb(b)||b instanceof Element||b instanceof CanvasRenderingContext2D)return"";var c="",d;for(d in b)if("string"!==typeof d)""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=w.Va(b,d);e!==n&&("function"!==typeof e&&!w.nz(b,d))&&(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}return c},dv:function(a,b){if(b&&!("number"===typeof b||"string"===typeof b||"boolean"===typeof b||"function"===typeof b))if(w.ec(b)!==
f){if(!w.Au.contains(b))if(w.Au.add(b),w.$t.add(w.mC(a,b)),b instanceof z||b instanceof ma||b instanceof ka)for(var c=b.l;c.next();)w.dv(a+"["+c.key+"]",c.value);else for(c in b){var d=w.Va(b,c);if(!(d===f||d===n||!w.lb(d))&&"_ownProperties"!==c){if(b instanceof na){if("_lines"===c)continue}else if(b instanceof x){if("data"===c||"_data"===c)continue;if("itemArray"===c||"_itemArray"===c)continue}else if(!(b instanceof A))if(b instanceof pa){if("archetypeGroupData"===c||"_archetypeGroupData"===c)continue}else if(b instanceof
qa){if("archetypeLinkData"===c||"_archetypeLinkData"===c)continue;if("archetypeLabelNodeData"===c||"_archetypeLabelNodeData"===c)continue}else if(b instanceof ra){if("archetypeNodeData"===c||"_archetypeNodeData"===c)continue}else if(b instanceof B){if("nodeDataArray"===c||"_nodeDataArray"===c)continue;if("linkDataArray"===c||"_linkDataArray"===c||"_linkDataSet"===c)continue;if("_mapKeyNodeData"===c||"_delayedNodeReferences"===c)continue}w.dv(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)w.dv(a+
"["+c+"]",b[c]);else w.$t.add(w.mC(a,b))},eG:function(a){w.Au===f?w.Au=new ma:w.Au.clear();w.$t=new sa;w.dv("",a);a=w.$t.toString();w.$t=n;return a},KH:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d=0,e,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,g="",i=0;i<a.length;i++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,g+=String.fromCharCode(a.charCodeAt(i)^b[(b[c]+b[d])%256]);return g},OG:function(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+
"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");return""===a?"0":a},Na:function(a){return w.KH(w.OG(a))},Ss:n,Hy:"7da71ca0ad381e90",fG:"@COLOR1",gG:"@COLOR2"},ua=w,xa=document.createElement("canvas"),za=xa.getContext("2d");za[w.Na("7ca11abfd022028846")]=w.Na("398c3597c01238");
for(var Ca=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22472913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],Da=1;5>Da;Da++)za[w.Na("7ca11abfd7330390")](w.Na(Ca[Da-1]),10,15*Da+0);za[w.Na("7ca11abfd022028846")]=w.Na("39f046ebb36e4b");for(Da=1;5>Da;Da++)za[w.Na("7ca11abfd7330390")](w.Na(Ca[Da-1]),10,15*Da+0);ua.Ss=xa;function ja(a,b,c){w.jc(this);this.yA=a;this.Bb=b;this.vF=c}
ja.prototype.toString=function(){return w.Uk(this.yA)+"."+this.Bb};w.u(ja,{me:"classType"},t("yA"));w.u(ja,{name:"name"},t("Bb"));w.u(ja,{value:"value"},t("vF"));function sa(){this.xA=[];this.vI=0;this.zI="  "}sa.prototype.toString=function(){return this.xA.join("")};sa.prototype.add=function(a){a&&this.xA.push(a)};function Fa(){}w.u(Fa,{l:"iterator"},function(){return this});Fa.prototype.reset=Fa.prototype.reset=aa();Fa.prototype.next=Fa.prototype.next=ca(p);Fa.prototype.first=Fa.prototype.zb=ca(n);
w.u(Fa,{count:"count"},ca(0));Fa.prototype.zg=aa();Fa.prototype.toString=ca("EmptyIterator");w.If=new Fa;function Ia(a){this.key=-1;this.value=a}w.Pd(Ia,{key:h,value:h});w.u(Ia,{l:"iterator"},function(){return this});Ia.prototype.reset=Ia.prototype.reset=function(){this.key=-1};Ia.prototype.next=Ia.prototype.next=function(){return-1===this.key?(this.key=0,h):p};Ia.prototype.first=Ia.prototype.zb=function(){this.key=0;return this.value};w.u(Ia,{count:"count"},ca(1));
Ia.prototype.zg=function(){this.value=n};Ia.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Ja(a){this.gf=a;this.hn=n;this.reset()}w.Pd(Ja,{key:h,value:h});w.u(Ja,{l:"iterator"},function(){return this});w.g(Ja,"predicate",Ja.prototype.Uv);w.defineProperty(Ja,{Uv:"predicate"},t("hn"),ba("hn"));Ja.prototype.reset=Ja.prototype.reset=function(){var a=this.gf;a.hh=n;this.Xa=a.Jb;this.ea=-1};
Ja.prototype.next=Ja.prototype.next=function(){var a=this.gf;a.Jb!==this.Xa&&w.m("the List has been modified during iteration");var a=a.n,b=a.length,c=++this.ea,d=this.hn;if(d!==n)for(;c<b;){var e=a[c];if(d(e))return this.key=this.ea=c,this.value=e,h;c++}else{if(c<b)return this.key=c,this.value=a[c],h;this.zg()}return p};
Ja.prototype.first=Ja.prototype.zb=function(){var a=this.gf;this.Xa=a.Jb;this.ea=0;var a=a.n,b=a.length,c=this.hn;if(c!==n){for(var d=0;d<b;){var e=a[d];if(c(e))return this.key=this.ea=d,this.value=e;d++}return n}return 0<b?(e=a[0],this.key=0,this.value=e):n};w.u(Ja,{count:"count"},function(){var a=this.hn;if(a!==n){for(var b=0,c=this.gf.n,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.gf.n.length});Ja.prototype.zg=function(){this.key=-1;this.value=n;this.Xa=-1;this.hn=n;this.gf.hh=this};
Ja.prototype.toString=function(){return"ListIterator@"+this.ea+"/"+this.gf.count};function Ka(a){this.gf=a;this.reset()}w.Pd(Ka,{key:h,value:h});w.u(Ka,{l:"iterator"},function(){return this});Ka.prototype.reset=Ka.prototype.reset=function(){var a=this.gf;a.Cx=n;this.Xa=a.Jb;this.ea=a.n.length};Ka.prototype.next=Ka.prototype.next=function(){var a=this.gf;a.Jb!==this.Xa&&w.m("the List has been modified during iteration");var b=--this.ea;if(0<=b)return this.key=b,this.value=a.n[b],h;this.zg();return p};
Ka.prototype.first=Ka.prototype.zb=function(){var a=this.gf;this.Xa=a.Jb;var b=a.n;this.ea=a=b.length-1;return 0<=a?(b=b[a],this.key=a,this.value=b):n};w.u(Ka,{count:"count"},function(){return this.gf.n.length});Ka.prototype.zg=function(){this.key=-1;this.value=n;this.Xa=-1;this.gf.Cx=this};Ka.prototype.toString=function(){return"ListIteratorBackwards("+this.ea+"/"+this.gf.count+")"};
function z(a){w.jc(this);this.ab=p;this.n=[];this.Jb=0;this.Cx=this.hh=n;a===f||a===n?this.T=n:"string"===typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.T=a:w.ra(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.T=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:w.ra(a,"null, a primitive type name, or a class type","List constructor: type")}
w.Q("List",z);z.prototype.ug=function(a){this.T!==n&&("string"===typeof this.T?(typeof a!==this.T||a===n)&&w.ic(a,this.T):a instanceof this.T||w.ic(a,this.T))};z.prototype.sd=function(){var a=this.Jb;a++;999999999<a&&(a=0);this.Jb=a};z.prototype.freeze=z.prototype.freeze=function(){this.ab=h;return this};z.prototype.thaw=z.prototype.Ia=function(){this.ab=p;return this};z.prototype.toString=function(){return"List("+w.Ch(this.T)+")#"+w.ec(this)};
z.prototype.add=z.prototype.add=function(a){a!==n&&(u&&this.ug(a),w.H(this,a),this.n.push(a),this.sd())};z.prototype.addAll=z.prototype.Le=function(a){if(a===n)return this;w.H(this);var b=this.n;if(w.isArray(a))for(var c=w.Sb(a),d=0;d<c;d++){var e=w.Eb(a,d);u&&this.ug(e);b.push(e)}else for(a=a.l;a.next();)e=a.value,u&&this.ug(e),b.push(e);this.sd();return this};z.prototype.clear=z.prototype.clear=function(){w.H(this);this.n=[];this.sd()};
z.prototype.contains=z.prototype.contains=function(a){if(a===n)return p;u&&this.ug(a);return-1!==this.n.indexOf(a)};z.prototype.indexOf=z.prototype.indexOf=function(a){if(a===n)return-1;u&&this.ug(a);return this.n.indexOf(a)};z.prototype.elt=z.prototype.oa=function(a){u&&w.o(a,z,"elt:i");var b=this.n;(0>a||a>=b.length)&&w.ra(a,"0 <= i < length",z,"elt:i");return b[a]};
z.prototype.setElt=z.prototype.cw=function(a,b){u&&(this.ug(b),w.o(a,z,"setElt:i"));var c=this.n;(0>a||a>=c.length)&&w.ra(a,"0 <= i < length",z,"setElt:i");w.H(this,a);c[a]=b};z.prototype.first=z.prototype.zb=function(){var a=this.n;return 0===a.length?n:a[0]};z.prototype.insertAt=z.prototype.yc=function(a,b){u&&(this.ug(b),w.o(a,z,"insertAt:i"));0>a&&w.ra(a,">= 0",z,"insertAt:i");w.H(this,a);var c=this.n;a>=c.length?c.push(b):c.splice(a,0,b);this.sd();return h};
z.prototype.remove=z.prototype.remove=function(a){if(a===n)return p;u&&this.ug(a);w.H(this,a);var b=this.n,a=b.indexOf(a);if(-1===a)return p;a===b.length-1?b.pop():b.splice(a,1);this.sd();return h};z.prototype.removeAt=z.prototype.Ye=function(a){u&&w.o(a,z,"removeAt:i");var b=this.n;(0>a||a>=b.length)&&w.ra(a,"0 <= i < length",z,"removeAt:i");w.H(this,a);a===b.length-1?b.pop():b.splice(a,1);this.sd()};
z.prototype.removeRange=z.prototype.removeRange=function(a,b){u&&(w.o(a,z,"removeRange:from"),w.o(b,z,"removeRange:to"));var c=this.n;(0>a||a>=c.length)&&w.ra(a,"0 <= from < length",z,"elt:from");(0>b||b>=c.length)&&w.ra(b,"0 <= to < length",z,"elt:to");w.H(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.sd()};z.prototype.copy=z.prototype.copy=function(){for(var a=new z(this.T),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};
z.prototype.toArray=z.prototype.sg=function(){for(var a=[],b=this.n,c=this.count,d=0;d<c;d++)a.push(b[d]);return a};z.prototype.toSet=z.prototype.oI=function(){for(var a=new ma(this.T),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};z.prototype.sort=z.prototype.sort=function(a){u&&w.k(a,"function",z,"sort:sortfunc");w.H(this);this.n.sort(a);this.sd();return this};
z.prototype.sortRange=z.prototype.Io=function(a,b,c){var d=this.n,e=d.length;b===f&&(b=0);c===f&&(c=e);u&&(w.k(a,"function",z,"sortRange:sortfunc"),w.o(b,z,"sortRange:from"),w.o(c,z,"sortRange:to"));w.H(this);var g=c-b;if(1>=g)return this;(0>b||b>=e-1)&&w.ra(b,"0 <= from < length",z,"sortRange:from");if(2===g)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.sd()),this;if(0===b)if(c>=e)d.sort(a);else{g=d.slice(0,c);g.sort(a);for(a=0;a<c;a++)d[a]=g[a]}else if(c>=e){g=d.slice(b);g.sort(a);for(a=
b;a<e;a++)d[a]=g[a-b]}else{g=d.slice(b,c);g.sort(a);for(a=b;a<c;a++)d[a]=g[a-b]}this.sd();return this};z.prototype.reverse=z.prototype.reverse=function(){w.H(this);this.n.reverse();this.sd();return this};w.u(z,{count:"count"},function(){return this.n.length});w.u(z,{length:"length"},function(){return this.n.length});w.u(z,{l:"iterator"},function(){if(0>=this.n.length)return w.If;var a=this.hh;return a!==n?(a.reset(),a):new Ja(this)});
w.u(z,{ko:"iteratorBackwards"},function(){if(0>=this.n.length)return w.If;var a=this.Cx;return a!==n?(a.reset(),a):new Ka(this)});function La(a){this.U=a;this.reset()}w.Pd(La,{key:h,value:h});w.u(La,{l:"iterator"},function(){return this});La.prototype.reset=La.prototype.reset=function(){var a=this.U;a.hh=n;this.Xa=a.Jb;this.Hd=n};
La.prototype.next=La.prototype.next=function(){var a=this.U;a.Jb!==this.Xa&&w.m("the Set has been modified during iteration");var b=this.Hd,b=b===n?a.ge:b.kj;if(b!==n)return this.Hd=b,this.value=b.value,this.key=b.key,h;this.zg();return p};La.prototype.first=La.prototype.zb=function(){var a=this.U;this.Xa=a.Jb;a=a.ge;if(a!==n){this.Hd=a;var b=a.value;this.key=a.key;return this.value=b}return n};w.u(La,{count:"count"},function(){return this.U.Be});
La.prototype.zg=function(){this.value=n;this.Xa=-1;this.U.hh=this};La.prototype.toString=function(){return this.Hd!==n?"SetIterator@"+this.Hd.value:"SetIterator"};
function ma(a){w.jc(this);this.ab=p;a===f||a===n?this.T=n:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.T=a:w.ra(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.T=a===Object?"object":a===String?"string":a===Number?"number":a:w.ra(a,"null, a primitive type name, or a class type","Set constructor: type");this.Hc={};this.Be=0;this.hh=n;this.Jb=0;this.ih=this.ge=n}w.Q("Set",ma);
ma.prototype.ug=function(a){this.T!==n&&("string"===typeof this.T?(typeof a!==this.T||a===n)&&w.ic(a,this.T):a instanceof this.T||w.ic(a,this.T))};ma.prototype.sd=function(){var a=this.Jb;a++;999999999<a&&(a=0);this.Jb=a};ma.prototype.freeze=ma.prototype.freeze=function(){this.ab=h;return this};ma.prototype.thaw=ma.prototype.Ia=function(){this.ab=p;return this};ma.prototype.toString=function(){return"Set("+w.Ch(this.T)+")#"+w.ec(this)};
ma.prototype.add=ma.prototype.add=function(a){if(a===n)return p;u&&this.ug(a);w.H(this,a);var b=a;w.lb(a)&&(b=w.es(a));return this.Hc[b]===f?(this.Be++,a=new Ma(a,a),this.Hc[b]=a,b=this.ih,b===n?this.ge=a:(a.jn=b,b.kj=a),this.ih=a,this.sd(),h):p};ma.prototype.addAll=ma.prototype.Le=function(a){if(a===n)return this;w.H(this);if(w.isArray(a))for(var b=w.Sb(a),c=0;c<b;c++)this.add(w.Eb(a,c));else for(a=a.l;a.next();)this.add(a.value);return this};
ma.prototype.contains=ma.prototype.contains=function(a){if(a===n)return p;u&&this.ug(a);var b=a;return w.lb(a)&&(b=w.ec(a),b===f)?p:this.Hc[b]!==f};ma.prototype.containsAll=ma.prototype.EJ=function(a){if(a===n)return h;for(a=a.l;a.next();)if(!this.contains(a.value))return p;return h};ma.prototype.containsAny=ma.prototype.FJ=function(a){if(a===n)return h;for(a=a.l;a.next();)if(this.contains(a.value))return h;return p};ma.prototype.first=ma.prototype.zb=function(){var a=this.ge;return a===n?n:a.value};
ma.prototype.remove=ma.prototype.remove=function(a){if(a===n)return p;u&&this.ug(a);w.H(this,a);var b=a;if(w.lb(a)&&(b=w.ec(a),b===f))return p;a=this.Hc[b];if(a===f)return p;var c=a.kj,d=a.jn;c!==n&&(c.jn=d);d!==n&&(d.kj=c);this.ge===a&&(this.ge=c);this.ih===a&&(this.ih=d);delete this.Hc[b];this.Be--;this.sd();return h};ma.prototype.removeAll=ma.prototype.UL=function(a){if(a===n)return this;w.H(this);for(a=a.l;a.next();)this.remove(a.value);return this};
ma.prototype.retainAll=ma.prototype.aM=function(a){if(a===n||0===this.count)return this;w.H(this);var b=new ma(this.T);b.Le(a);for(var a=new z(this.T),c=this.l;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.l;b.next();)this.remove(b.value);return this};ma.prototype.clear=ma.prototype.clear=function(){w.H(this);this.Hc={};this.Be=0;this.ih=this.ge=n;this.sd()};ma.prototype.copy=ma.prototype.copy=function(){var a=new ma(this.T),b=this.Hc,c;for(c in b)a.add(b[c].value);return a};
ma.prototype.toArray=ma.prototype.sg=function(){var a=[],b=this.Hc,c;for(c in b)a.push(b[c].value);return a};ma.prototype.toList=ma.prototype.nI=function(){var a=new z(this.T),b=this.Hc,c;for(c in b)a.add(b[c]);return a};w.u(ma,{count:"count"},t("Be"));w.u(ma,{l:"iterator"},function(){if(0>=this.Be)return w.If;var a=this.hh;return a!==n?(a.reset(),a):new La(this)});function Oa(a){this.Uc=a;this.reset()}w.Pd(Oa,{key:h,value:h});w.u(Oa,{l:"iterator"},function(){return this});
Oa.prototype.reset=Oa.prototype.reset=function(){this.Xa=this.Uc.Jb;this.Hd=n};Oa.prototype.next=Oa.prototype.next=function(){var a=this.Uc;a.Jb!==this.Xa&&w.m("the Map has been modified during iteration");var b=this.Hd,b=b===n?a.ge:b.kj;if(b!==n)return this.Hd=b,this.value=b.key,h;this.zg();return p};Oa.prototype.first=Oa.prototype.zb=function(){var a=this.Uc;this.Xa=a.Jb;a=a.ge;if(a!==n){this.Hd=a;var b=a.value;this.key=a.key;return this.value=b}return n};w.u(Oa,{count:"count"},function(){return this.Uc.Be});
Oa.prototype.zg=function(){this.value=n;this.Xa=-1};Oa.prototype.toString=function(){return this.Hd!==n?"MapKeySetIterator@"+this.Hd.value:"MapKeySetIterator"};function Qa(a){w.jc(this);this.Uc=a}w.Ea(Qa,ma);Qa.prototype.freeze=function(){return this};Qa.prototype.Ia=function(){return this};Qa.prototype.toString=function(){return"MapKeySet("+this.Uc.toString()+")"};Qa.prototype.add=Qa.prototype.add=function(){w.m("This Set is read-only: "+this.toString());return p};
Qa.prototype.contains=Qa.prototype.contains=function(a){return this.Uc.contains(a)};Qa.prototype.remove=Qa.prototype.remove=function(){w.m("This Set is read-only: "+this.toString());return p};Qa.prototype.clear=Qa.prototype.clear=function(){w.m("This Set is read-only: "+this.toString())};Qa.prototype.copy=Qa.prototype.copy=function(){return new Qa(this.Uc)};Qa.prototype.toSet=Qa.prototype.oI=function(){var a=new ma(this.Uc.T),b=this.Uc.Hc,c;for(c in b)a.add(b[c].key);return a};
Qa.prototype.toArray=Qa.prototype.sg=function(){var a=[],b=this.Uc.Hc,c;for(c in b)a.push(b[c].key);return a};Qa.prototype.toList=Qa.prototype.nI=function(){var a=new z(this.T),b=this.Uc.Hc,c;for(c in b)a.add(b[c].key);return a};w.u(Qa,{count:"count"},function(){return this.Uc.Be});w.u(Qa,{l:"iterator"},function(){return 0>=this.Uc.Be?w.If:new Oa(this.Uc)});function Ma(a,b){this.key=a;this.value=b;this.jn=this.kj=n}w.Pd(Ma,{key:h,value:h});
Ma.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Ra(a){this.Uc=a;this.reset()}w.Pd(Ra,{key:h,value:h});w.u(Ra,{l:"iterator"},function(){return this});Ra.prototype.reset=Ra.prototype.reset=function(){var a=this.Uc;a.hh=n;this.Xa=a.Jb;this.Hd=n};
Ra.prototype.next=Ra.prototype.next=function(){var a=this.Uc;a.Jb!==this.Xa&&w.m("the Map has been modified during iteration");var b=this.Hd,b=b===n?a.ge:b.kj;if(b!==n)return this.Hd=b,this.key=b.key,this.value=b.value,h;this.zg();return p};Ra.prototype.first=Ra.prototype.zb=function(){var a=this.Uc;this.Xa=a.Jb;a=a.ge;if(a!==n){this.Hd=a;var b=a.key;this.key=b;this.value=a.value;return b}return n};w.u(Ra,{count:"count"},function(){return this.Uc.Be});
Ra.prototype.zg=function(){this.value=this.key=n;this.Xa=-1;this.Uc.hh=this};Ra.prototype.toString=function(){return this.Hd!==n?"MapIterator@"+this.Hd:"MapIterator"};
function ka(a,b){w.jc(this);this.ab=p;a===f||a===n?this.di=n:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.di=a:w.ra(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.di=a===Object?"object":a===String?"string":a===Number?"number":a:w.ra(a,"null, a primitive type name, or a class type","Map constructor: keytype");b===f||b===n?this.wi=n:"string"===typeof b?"object"===b||"string"===b||"boolean"===b||"number"===b||"function"===b?this.wi=
b:w.ra(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"===typeof b?this.wi=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:w.ra(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.Hc={};this.Be=0;this.hh=n;this.Jb=0;this.ih=this.ge=n}w.Q("Map",ka);
function Sa(a,b){a.di!==n&&("string"===typeof a.di?(typeof b!==a.di||b===n)&&w.ic(b,a.di):b instanceof a.di||w.ic(b,a.di))}ka.prototype.sd=function(){var a=this.Jb;a++;999999999<a&&(a=0);this.Jb=a};ka.prototype.freeze=ka.prototype.freeze=function(){this.ab=h;return this};ka.prototype.thaw=ka.prototype.Ia=function(){this.ab=p;return this};ka.prototype.toString=function(){return"Map("+w.Ch(this.di)+","+w.Ch(this.wi)+")#"+w.ec(this)};
ka.prototype.add=ka.prototype.add=function(a,b){u&&(Sa(this,a),this.wi!==n&&("string"===typeof this.wi?(typeof b!==this.wi||b===n)&&w.ic(b,this.wi):b instanceof this.wi||w.ic(b,this.wi)));w.H(this,a);var c=a;w.lb(a)&&(c=w.es(a));var d=this.Hc[c];if(d===f)return this.Be++,d=new Ma(a,b),this.Hc[c]=d,c=this.ih,c===n?this.ge=d:(d.jn=c,c.kj=d),this.ih=d,this.sd(),h;d.value=b;return p};
ka.prototype.addAll=ka.prototype.Le=function(a){if(a===n)return this;u&&w.i(a,ka,ka,"addAll:map");for(a=a.l;a.next();)this.add(a.key,a.value);return this};ka.prototype.contains=ka.prototype.contains=function(a){u&&Sa(this,a);var b=a;return w.lb(a)&&(b=w.ec(a),b===f)?p:this.Hc[b]!==f};ka.prototype.getValue=ka.prototype.qa=function(a){u&&Sa(this,a);var b=a;if(w.lb(a)&&(b=w.ec(a),b===f))return n;a=this.Hc[b];return a===f?n:a.value};
ka.prototype.remove=ka.prototype.remove=function(a){if(a===n)return p;u&&Sa(this,a);w.H(this,a);var b=a;if(w.lb(a)&&(b=w.ec(a),b===f))return p;a=this.Hc[b];if(a===f)return p;var c=a.kj,d=a.jn;c!==n&&(c.jn=d);d!==n&&(d.kj=c);this.ge===a&&(this.ge=c);this.ih===a&&(this.ih=d);delete this.Hc[b];this.Be--;this.sd();return h};ka.prototype.clear=ka.prototype.clear=function(){w.H(this);this.Hc={};this.Be=0;this.ih=this.ge=n;this.sd()};
ka.prototype.copy=ka.prototype.copy=function(){var a=new ka(this.di,this.wi),b=this.Hc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};ka.prototype.toArray=ka.prototype.sg=function(){var a=[],b=this.Hc,c;for(c in b){var d=b[c];a.push(new Ma(d.key,d.value))}return a};ka.prototype.toKeySet=ka.prototype.Oj=function(){return new Qa(this)};w.u(ka,{count:"count"},t("Be"));w.u(ka,{l:"iterator"},function(){if(0>=this.count)return w.If;var a=this.hh;return a!==n?(a.reset(),a):new Ra(this)});
function F(a,b){a===f?this.y=this.x=0:"number"===typeof a&&"number"===typeof b?(this.x=a,this.y=b):w.m("Invalid arguments to Point constructor")}w.Q("Point",F);w.Pd(F,{x:h,y:h});F.prototype.Ua=function(a){u&&w.i(a,F,F,"assign:p");this.x=a.x;this.y=a.y};F.prototype.U=function(a,b){this.x=a;this.y=b};F.prototype.setTo=F.prototype.Ho=function(a,b){u&&(w.k(a,"number",F,"setTo:x"),w.k(b,"number",F,"setTo:y"));w.H(this);this.x=a;this.y=b;return this};
F.prototype.set=F.prototype.set=function(a){u&&w.i(a,F,F,"set:p");w.H(this);this.x=a.x;this.y=a.y;return this};F.prototype.copy=F.prototype.copy=function(){var a=new F;a.x=this.x;a.y=this.y;return a};F.prototype.Ya=function(){this.ab=h;Object.freeze(this);return this};F.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};F.prototype.freeze=function(){this.ab=h;return this};F.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.ab=p;return this};
F.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new F(c,e)}return new F};F.stringify=function(a){return a instanceof F?a.x.toString()+" "+a.y.toString():a.toString()};F.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};F.prototype.equals=F.prototype.I=function(a){return!(a instanceof F)?p:this.x===a.x&&this.y===a.y};
F.prototype.equalTo=F.prototype.gz=function(a,b){return this.x===a&&this.y===b};F.prototype.Gj=function(a){return Ta(this.x,a.x)&&Ta(this.y,a.y)};F.prototype.Fi=function(a){return Ua(this.x,a.x)&&Ua(this.y,a.y)};F.prototype.add=F.prototype.add=function(a){u&&w.i(a,F,F,"add:p");w.H(this);this.x+=a.x;this.y+=a.y;return this};F.prototype.subtract=F.prototype.Ls=function(a){u&&w.i(a,F,F,"subtract:p");w.H(this);this.x-=a.x;this.y-=a.y;return this};
F.prototype.offset=F.prototype.offset=function(a,b){u&&(w.o(a,F,"offset:dx"),w.o(b,F,"offset:dy"));w.H(this);this.x+=a;this.y+=b;return this};F.prototype.rotate=F.prototype.rotate=function(a){u&&w.o(a,F,"rotate:angle");w.H(this);if(0===a)return this;var b=this.x,c=this.y;if(0===b&&0===c)return this;var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d);this.x=a*b-d*c;this.y=d*b+a*c;return this};
F.prototype.scale=F.prototype.scale=function(a,b){u&&(w.o(a,F,"scale:sx"),w.o(b,F,"scale:sy"));this.x*=a;this.y*=b;return this};F.prototype.distanceSquaredPoint=F.prototype.am=function(a){u&&w.i(a,F,F,"distanceSquaredPoint:p");var b=a.x-this.x,a=a.y-this.y;return b*b+a*a};F.prototype.distanceSquared=F.prototype.TJ=function(a,b){u&&(w.o(a,F,"distanceSquared:px"),w.o(b,F,"distanceSquared:py"));var c=a-this.x,d=b-this.y;return c*c+d*d};
F.prototype.normalize=F.prototype.normalize=function(){w.H(this);var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);0<c&&(this.x=a/c,this.y=b/c);return this};F.prototype.directionPoint=F.prototype.Bi=function(a){u&&w.i(a,F,F,"directionPoint:p");return Va(a.x-this.x,a.y-this.y)};F.prototype.direction=F.prototype.direction=function(a,b){u&&(w.o(a,F,"direction:px"),w.o(b,F,"direction:py"));return Va(a-this.x,b-this.y)};
function Va(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}F.prototype.setRectSpot=F.prototype.Go=function(a,b){u&&(w.i(a,G,F,"setRectSpot:r"),w.i(b,H,F,"setRectSpot:spot"));w.H(this);this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};
F.prototype.setSpot=F.prototype.pm=function(a,b,c,d,e){u&&(w.o(a,F,"setSpot:x"),w.o(b,F,"setSpot:y"),w.o(c,F,"setSpot:w"),w.o(d,F,"setSpot:h"),(0>c||0>d)&&w.m("Point.setSpot:Width and height cannot be negative"),w.i(e,H,F,"setSpot:spot"));w.H(this);this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};F.prototype.transform=function(a){u&&w.i(a,Wa,F,"transform:t");a.Ta(this);return this};function Za(a,b){u&&w.i(b,Wa,F,"transformInverted:t");b.Ji(a);return a}var $a;
F.distanceLineSegmentSquared=$a=function(a,b,c,d,e,g){u&&(w.o(a,F,"distanceLineSegmentSquared:px"),w.o(b,F,"distanceLineSegmentSquared:py"),w.o(c,F,"distanceLineSegmentSquared:ax"),w.o(d,F,"distanceLineSegmentSquared:ay"),w.o(e,F,"distanceLineSegmentSquared:bx"),w.o(g,F,"distanceLineSegmentSquared:by"));var i=e-c,j=g-d,k=i*i+j*j,c=c-a,d=d-b,l=-c*i-d*j;if(0>=l||l>=k)return i=e-a,j=g-b,Math.min(c*c+d*d,i*i+j*j);a=i*d-j*c;return a*a/k};
F.distanceSquared=function(a,b,c,d){u&&(w.o(a,F,"distanceSquared:px"),w.o(b,F,"distanceSquared:py"),w.o(c,F,"distanceSquared:qx"),w.o(d,F,"distanceSquared:qy"));a=c-a;b=d-b;return a*a+b*b};var ab;
F.direction=ab=function(a,b,c,d){u&&(w.o(a,F,"direction:px"),w.o(b,F,"direction:py"),w.o(c,F,"direction:qx"),w.o(d,F,"direction:qy"));a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};F.prototype.isReal=F.prototype.P=function(){return isFinite(this.x)&&isFinite(this.y)};
function bb(a,b){a===f?this.height=this.width=0:"number"===typeof a&&(0<=a||isNaN(a))&&"number"===typeof b&&(0<=b||isNaN(b))?(this.width=a,this.height=b):w.m("Invalid arguments to Size constructor")}w.Q("Size",bb);w.Pd(bb,{width:h,height:h});bb.prototype.Ua=function(a){u&&w.i(a,bb,bb,"assign:s");this.width=a.width;this.height=a.height};bb.prototype.U=function(a,b){this.width=a;this.height=b};
bb.prototype.setTo=bb.prototype.Ho=function(a,b){u&&(w.k(a,"number",bb,"setTo:w"),w.k(b,"number",bb,"setTo:h"));0>a&&w.ra(a,">= 0",bb,"setTo:w");0>b&&w.ra(b,">= 0",bb,"setTo:h");w.H(this);this.width=a;this.height=b;return this};bb.prototype.set=bb.prototype.set=function(a){u&&w.i(a,bb,bb,"set:s");w.H(this);this.width=a.width;this.height=a.height;return this};bb.prototype.copy=bb.prototype.copy=function(){var a=new bb;a.width=this.width;a.height=this.height;return a};
bb.prototype.Ya=function(){this.ab=h;Object.freeze(this);return this};bb.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};bb.prototype.freeze=function(){this.ab=h;return this};bb.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.ab=p;return this};
bb.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new bb(c,e)}return new bb};bb.stringify=function(a){return a instanceof bb?a.width.toString()+" "+a.height.toString():a.toString()};bb.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};
bb.prototype.equals=bb.prototype.I=function(a){return!(a instanceof bb)?p:this.width===a.width&&this.height===a.height};bb.prototype.equalTo=bb.prototype.gz=function(a,b){return this.width===a&&this.height===b};bb.prototype.Gj=function(a){return Ta(this.width,a.width)&&Ta(this.height,a.height)};bb.prototype.Fi=function(a){return Ua(this.width,a.width)&&Ua(this.height,a.height)};bb.prototype.isReal=bb.prototype.P=function(){return isFinite(this.width)&&isFinite(this.height)};
function G(a,b,c,d){a===f?this.height=this.width=this.y=this.x=0:a instanceof F?b instanceof F?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof bb?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):w.m("Incorrect arguments supplied"):!u||"number"===typeof a&&"number"===typeof b&&"number"===typeof c&&(0<=c||isNaN(c))&&"number"===typeof d&&(0<=d||isNaN(d))?(this.x=a,this.y=b,this.width=c,this.height=d):w.m("Invalid arguments to Rect constructor")}
w.Q("Rect",G);w.Pd(G,{x:h,y:h,width:h,height:h});G.prototype.Ua=function(a){u&&w.i(a,G,G,"assign:r");this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};G.prototype.U=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d};function db(a,b,c){a.width=b;a.height=c}
G.prototype.setTo=G.prototype.Ho=function(a,b,c,d){u&&(w.k(a,"number",G,"setTo:x"),w.k(b,"number",G,"setTo:y"),w.k(c,"number",G,"setTo:w"),w.k(d,"number",G,"setTo:h"));0>c&&w.ra(c,">= 0",G,"setTo:w");0>d&&w.ra(d,">= 0",G,"setTo:h");w.H(this);this.x=a;this.y=b;this.width=c;this.height=d;return this};G.prototype.set=G.prototype.set=function(a){u&&w.i(a,G,G,"set:r");w.H(this);this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};
G.prototype.setPoint=G.prototype.J=function(a){u&&w.i(a,F,G,"setPoint:p");w.H(this);this.x=a.x;this.y=a.y;return this};G.prototype.setSize=G.prototype.$H=function(a){u&&w.i(a,bb,G,"setSize:s");w.H(this);this.width=a.width;this.height=a.height;return this};G.prototype.copy=G.prototype.copy=function(){var a=new G;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};G.prototype.Ya=function(){this.ab=h;Object.freeze(this);return this};
G.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};G.prototype.freeze=function(){this.ab=h;return this};G.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.ab=p;return this};
G.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new G(c,e,g,i)}return new G};G.stringify=function(a){return a instanceof G?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};
G.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};G.prototype.equals=G.prototype.I=function(a){return!(a instanceof G)?p:this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height};G.prototype.equalTo=G.prototype.gz=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};G.prototype.Gj=function(a){return Ta(this.x,a.x)&&Ta(this.y,a.y)&&Ta(this.width,a.width)&&Ta(this.height,a.height)};
G.prototype.Fi=function(a){return Ua(this.x,a.x)&&Ua(this.y,a.y)&&Ua(this.width,a.width)&&Ua(this.height,a.height)};G.prototype.containsPoint=G.prototype.ua=function(a){u&&w.i(a,F,G,"containsPoint:p");return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};G.prototype.containsRect=G.prototype.Xl=function(a){u&&w.i(a,G,G,"containsRect:r");return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
G.prototype.contains=G.prototype.contains=function(a,b,c,d){u?(w.o(a,G,"contains:x"),w.o(b,G,"contains:y"),c===f?c=0:w.o(c,G,"contains:w"),d===f?d=0:w.o(d,G,"contains:h"),(0>c||0>d)&&w.m("Rect.contains:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};G.prototype.reset=function(){w.H(this);this.height=this.width=this.y=this.x=0};
G.prototype.offset=G.prototype.offset=function(a,b){u&&(w.o(a,G,"offset:dx"),w.o(b,G,"offset:dy"));w.H(this);this.x+=a;this.y+=b;return this};G.prototype.inflate=G.prototype.Pg=function(a,b){u&&(w.o(a,G,"inflate:w"),w.o(b,G,"inflate:h"));return fb(this,b,a,b,a)};G.prototype.addMargin=G.prototype.Fn=function(a){u&&w.i(a,hb,G,"addMargin:m");return fb(this,a.top,a.right,a.bottom,a.left)};
G.prototype.subtractMargin=G.prototype.iI=function(a){u&&w.i(a,hb,G,"subtractMargin:m");return fb(this,-a.top,-a.right,-a.bottom,-a.left)};G.prototype.grow=G.prototype.UK=function(a,b,c,d){u&&(w.o(a,G,"grow:t"),w.o(b,G,"grow:r"),w.o(c,G,"grow:b"),w.o(d,G,"grow:l"));return fb(this,a,b,c,d)};function fb(a,b,c,d,e){w.H(a);var g=a.width;c+e<=-g?(a.x+=g/2,a.width=0):(a.x-=e,a.width+=c+e);c=a.height;b+d<=-c?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d);return a}
G.prototype.intersectRect=G.prototype.gL=function(a){u&&w.i(a,G,G,"intersectRect:r");return ib(this,a.x,a.y,a.width,a.height)};G.prototype.intersect=G.prototype.fL=function(a,b,c,d){u&&(w.o(a,G,"intersect:x"),w.o(b,G,"intersect:y"),w.o(c,G,"intersect:w"),w.o(d,G,"intersect:h"),(0>c||0>d)&&w.m("Rect.intersect:Width and height cannot be negative"));return ib(this,a,b,c,d)};
function ib(a,b,c,d,e){w.H(a);var g=Math.max(a.x,b),i=Math.max(a.y,c),b=Math.min(a.x+a.width,b+d),c=Math.min(a.y+a.height,c+e);a.x=g;a.y=i;a.width=Math.max(0,b-g);a.height=Math.max(0,c-i);return a}G.prototype.intersectsRect=G.prototype.Se=function(a){u&&w.i(a,G,G,"intersectsRect:r");return this.UG(a.x,a.y,a.width,a.height)};
G.prototype.intersects=G.prototype.UG=function(a,b,c,d){u&&(w.o(a,G,"intersects:x"),w.o(b,G,"intersects:y"),w.o(a,G,"intersects:w"),w.o(b,G,"intersects:h"),(0>c||0>d)&&w.m("Rect.intersects:Width and height cannot be negative"));var e=this.width,g=this.x;if(Infinity!==e&&Infinity!==c&&(e+=g,c+=a,isNaN(c)||isNaN(e)||g>c||a>e))return p;a=this.height;e=this.y;return Infinity!==a&&Infinity!==d&&(a+=e,d+=b,isNaN(d)||isNaN(a)||e>d||b>a)?p:h};
G.prototype.unionPoint=G.prototype.jw=function(a){u&&w.i(a,F,G,"unionPoint:p");return this.Wb(a.x,a.y,0,0)};G.prototype.unionRect=G.prototype.Oi=function(a){u&&w.i(a,G,G,"unionRect:r");return this.Wb(a.x,a.y,a.width,a.height)};
G.prototype.union=G.prototype.vM=function(a,b,c,d){w.H(this);u?(w.o(a,G,"union:x"),w.o(b,G,"union:y"),c===f?c=0:w.o(c,G,"union:w"),d===f?d=0:w.o(d,G,"union:h"),(0>c||0>d)&&w.m("Rect.union:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return this.Wb(a,b,c,d)};G.prototype.Wb=function(a,b,c,d){var e=Math.min(this.x,a),g=Math.min(this.y,b),a=Math.max(this.x+this.width,a+c),b=Math.max(this.y+this.height,b+d);this.x=e;this.y=g;this.width=a-e;this.height=b-g;return this};
G.prototype.setSpot=G.prototype.pm=function(a,b,c){u&&(w.o(a,G,"setSpot:x"),w.o(b,G,"setSpot:y"),w.i(c,H,G,"setSpot:spot"));w.H(this);this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var jb;
G.contains=jb=function(a,b,c,d,e,g,i,j){u?(w.o(a,G,"contains:rx"),w.o(b,G,"contains:ry"),w.o(c,G,"contains:rw"),w.o(d,G,"contains:rh"),w.o(e,G,"contains:x"),w.o(g,G,"contains:y"),i===f?i=0:w.o(i,G,"contains:w"),j===f?j=0:w.o(j,G,"contains:h"),(0>c||0>d||0>i||0>j)&&w.m("Rect.contains:Width and height cannot be negative")):(i===f&&(i=0),j===f&&(j=0));return a<=e&&e+i<=a+c&&b<=g&&g+j<=b+d};
G.intersects=function(a,b,c,d,e,g,i,j){u&&(w.o(a,G,"intersects:rx"),w.o(b,G,"intersects:ry"),w.o(c,G,"intersects:rw"),w.o(d,G,"intersects:rh"),w.o(e,G,"intersects:x"),w.o(g,G,"intersects:y"),w.o(i,G,"intersects:w"),w.o(j,G,"intersects:h"),(0>c||0>d||0>i||0>j)&&w.m("Rect.intersects:Width and height cannot be negative"));c+=a;i+=e;if(a>i||e>c)return p;a=d+b;j+=g;return b>j||g>a?p:h};w.g(G,"left",G.prototype.left);
w.defineProperty(G,{left:"left"},t("x"),function(a){w.H(this,a);u&&w.k(a,"number",G,"left");this.x=a});w.g(G,"top",G.prototype.top);w.defineProperty(G,{top:"top"},t("y"),function(a){w.H(this,a);u&&w.k(a,"number",G,"top");this.y=a});w.g(G,"right",G.prototype.right);w.defineProperty(G,{right:"right"},function(){return this.x+this.width},function(a){w.H(this,a);u&&w.o(a,G,"right");this.x+=a-(this.x+this.width)});w.g(G,"bottom",G.prototype.bottom);
w.defineProperty(G,{bottom:"bottom"},function(){return this.y+this.height},function(a){w.H(this,a);u&&w.o(a,G,"top");this.y+=a-(this.y+this.height)});w.g(G,"position",G.prototype.position);w.defineProperty(G,{position:"position"},function(){return new F(this.x,this.y)},function(a){w.H(this,a);u&&w.i(a,F,G,"position");this.x=a.x;this.y=a.y});w.g(G,"size",G.prototype.size);
w.defineProperty(G,{size:"size"},function(){return new bb(this.width,this.height)},function(a){w.H(this,a);u&&w.i(a,bb,G,"size");this.width=a.width;this.height=a.height});w.g(G,"center",G.prototype.cv);w.defineProperty(G,{cv:"center"},function(){return new F(this.x+this.width/2,this.y+this.height/2)},function(a){w.H(this,a);u&&w.i(a,F,G,"center");this.x=a.x-this.width/2;this.y=a.y-this.height/2});w.g(G,"centerX",G.prototype.pa);
w.defineProperty(G,{pa:"centerX"},function(){return this.x+this.width/2},function(a){w.H(this,a);u&&w.o(a,G,"centerX");this.x=a-this.width/2});w.g(G,"centerY",G.prototype.ta);w.defineProperty(G,{ta:"centerY"},function(){return this.y+this.height/2},function(a){w.H(this,a);u&&w.o(a,G,"centerY");this.y=a-this.height/2});G.prototype.isReal=G.prototype.P=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};
G.prototype.isEmpty=G.prototype.hL=function(){return 0===this.width&&0===this.height};function hb(a,b,c,d){a===f?this.left=this.bottom=this.right=this.top=0:b===f?this.left=this.bottom=this.right=this.top=a:c===f?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):d!==f?(this.top=a,this.right=b,this.bottom=c,this.left=d):w.m("Invalid arguments to Margin constructor")}w.Q("Margin",hb);w.Pd(hb,{top:h,right:h,bottom:h,left:h});
hb.prototype.Ua=function(a){u&&w.i(a,hb,hb,"assign:m");this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};hb.prototype.setTo=hb.prototype.Ho=function(a,b,c,d){u&&(w.k(a,"number",hb,"setTo:t"),w.k(b,"number",hb,"setTo:r"),w.k(c,"number",hb,"setTo:b"),w.k(d,"number",hb,"setTo:l"));w.H(this);this.top=a;this.right=b;this.bottom=c;this.left=d;return this};
hb.prototype.set=hb.prototype.set=function(a){u&&w.i(a,hb,hb,"assign:m");w.H(this);this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};hb.prototype.copy=hb.prototype.copy=function(){var a=new hb;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};hb.prototype.Ya=function(){this.ab=h;Object.freeze(this);return this};hb.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};
hb.prototype.freeze=function(){this.ab=h;return this};hb.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.ab=p;return this};hb.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new hb(c,e,g,i)}return new hb};
hb.stringify=function(a){return a instanceof hb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};hb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};hb.prototype.equals=hb.prototype.I=function(a){return!(a instanceof hb)?p:this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left};
hb.prototype.equalTo=hb.prototype.gz=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};hb.prototype.Gj=function(a){return Ta(this.top,a.top)&&Ta(this.right,a.right)&&Ta(this.bottom,a.bottom)&&Ta(this.left,a.left)};hb.prototype.Fi=function(a){return Ua(this.top,a.top)&&Ua(this.right,a.right)&&Ua(this.bottom,a.bottom)&&Ua(this.left,a.left)};hb.prototype.isReal=hb.prototype.P=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};
function Wa(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}w.Pd(Wa,{m11:h,m12:h,m21:h,m22:h,dx:h,dy:h});Wa.prototype.set=Wa.prototype.set=function(a){u&&w.i(a,Wa,Wa,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy;return this};Wa.prototype.copy=Wa.prototype.copy=function(){var a=new Wa;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a};
Wa.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};Wa.prototype.equals=Wa.prototype.I=function(a){return!(a instanceof Wa)?p:this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy};Wa.prototype.reset=Wa.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0};
Wa.prototype.multiply=Wa.prototype.multiply=function(a){u&&w.i(a,Wa,Wa,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,g=this.m12*a.dx+this.m22*a.dy+this.dy;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g;return this};
Wa.prototype.multiplyInverted=Wa.prototype.tH=function(a){u&&w.i(a,Wa,Wa,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,i=b*(a.m21*a.dy-a.m22*a.dx),j=b*(a.m12*a.dx-a.m11*a.dy),a=this.m12*c+this.m22*d,b=this.m11*e+this.m21*g,e=this.m12*e+this.m22*g,g=this.m11*i+this.m21*j+this.dx,i=this.m12*i+this.m22*j+this.dy;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.dx=g;this.dy=i;return this};
Wa.prototype.invert=Wa.prototype.pD=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),g=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g};
Wa.prototype.rotate=Wa.prototype.rotate=function(a,b,c){u&&(w.o(a,Wa,"rotate:angle"),w.o(b,Wa,"rotate:rx"),w.o(c,Wa,"rotate:ry"));this.translate(b,c);var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d),e=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,i=this.m12*-d+this.m22*a;this.m11=this.m11*a+this.m21*d;this.m12=e;this.m21=g;this.m22=i;this.translate(-b,-c)};
Wa.prototype.translate=Wa.prototype.translate=function(a,b){u&&(w.o(a,Wa,"translate:x"),w.o(b,Wa,"translate:y"));this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b};Wa.prototype.scale=Wa.prototype.scale=function(a,b){b===f&&(b=a);u&&(w.o(a,Wa,"translate:sx"),w.o(b,Wa,"translate:sy"));this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b};
Wa.prototype.transformPoint=Wa.prototype.Ta=function(a){u&&w.i(a,F,Wa,"transformPoint:p");var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.dx;a.y=b*this.m12+c*this.m22+this.dy;return a};Wa.prototype.invertedTransformPoint=Wa.prototype.Ji=function(a){u&&w.i(a,F,Wa,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),g=a.x,i=a.y;a.x=g*this.m22*b+i*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx);a.y=g*c+i*d+e;return a};
Wa.prototype.transformRect=Wa.prototype.PE=function(a){u&&w.i(a,G,Wa,"transformRect:rect");var b=a.x,c=a.y,d=b+a.width,e=c+a.height,g=this.m11,i=this.m12,j=this.m21,k=this.m22,l=this.dx,m=this.dy,q=b*g+c*j+l,r=b*i+c*k+m,s=d*g+c*j+l,c=d*i+c*k+m,v=b*g+e*j+l,b=b*i+e*k+m,g=d*g+e*j+l,d=d*i+e*k+m,e=q,i=r,q=Math.min(q,s),e=Math.max(e,s),i=Math.min(i,c),r=Math.max(r,c),q=Math.min(q,v),e=Math.max(e,v),i=Math.min(i,b),r=Math.max(r,b),q=Math.min(q,g),e=Math.max(e,g),i=Math.min(i,d),r=Math.max(r,d);a.x=q;a.y=
i;a.width=e-q;a.height=r-i};function kb(a,b){return new F(b.x*a.m11+b.y*a.m21+a.dx,b.x*a.m12+b.y*a.m22+a.dy)}Wa.prototype.isIdentity=Wa.prototype.is=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};function H(a,b,c,d){a===f?this.offsetY=this.offsetX=this.y=this.x=0:(b===f&&(b=0),c===f&&(c=0),d===f&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d)}w.Q("Spot",H);w.Pd(H,{x:h,y:h,offsetX:h,offsetY:h});
H.prototype.Ua=function(a){u&&w.i(a,H,H,"assign:s");this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};H.prototype.setTo=H.prototype.Ho=function(a,b,c,d){u&&(mb(a,"setTo:x"),mb(b,"setTo:y"),ob(c,"setTo:offx"),ob(d,"setTo:offy"));w.H(this);this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};H.prototype.set=H.prototype.set=function(a){u&&w.i(a,H,H,"set:s");w.H(this);this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};
H.prototype.copy=H.prototype.copy=function(){var a=new H;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};H.prototype.Ya=function(){this.ab=h;Object.freeze(this);return this};H.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};H.prototype.freeze=function(){this.ab=h;return this};H.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.ab=p;return this};function pb(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}
function mb(a,b){(isNaN(a)||1<a||0>a)&&w.ra(a,"0 <= "+b+" <= 1",H,b)}function ob(a,b){(isNaN(a)||Infinity===a||-Infinity===a)&&w.ra(a,"real number, not NaN or Infinity",H,b)}var qb;
H.parse=qb=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return w.NONE;if("TopLeft"===a)return w.Fw;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return w.Po;if("TopRight"===a)return w.Hw;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return w.No;if("Center"===a)return w.vw;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return w.Oo;if("BottomLeft"===a)return w.qw;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return w.Mo;if("BottomRight"===a)return w.sw;if("TopSide"===
a)return w.Jw;if("LeftSide"===a)return w.yw;if("RightSide"===a)return w.Dw;if("BottomSide"===a)return w.uw;if("TopBottomSides"===a)return w.Ew;if("LeftRightSides"===a)return w.xw;if("TopLeftSides"===a)return w.Gw;if("TopRightSides"===a)return w.Iw;if("BottomLeftSides"===a)return w.rw;if("BottomRightSides"===a)return w.tw;if("NotTopSide"===a)return w.Cw;if("NotLeftSide"===a)return w.Aw;if("NotRightSide"===a)return w.Bw;if("NotBottomSide"===a)return w.zw;if("AllSides"===a)return w.pw;if("Default"===
a)return w.ww;for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new H(c,e,g,i)}return new H};H.stringify=function(a){return a instanceof H?tb(a)?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
H.prototype.toString=function(){return tb(this)?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.I(w.NONE)?"None":this.I(w.Fw)?"TopLeft":this.I(w.Po)?"Top":this.I(w.Hw)?"TopRight":this.I(w.No)?"Left":this.I(w.vw)?"Center":this.I(w.Oo)?"Right":this.I(w.qw)?"BottomLeft":this.I(w.Mo)?"Bottom":this.I(w.sw)?"BottomRight":this.I(w.Jw)?"TopSide":this.I(w.yw)?"LeftSide":this.I(w.Dw)?"RightSide":this.I(w.uw)?"BottomSide":
this.I(w.Ew)?"TopBottomSides":this.I(w.xw)?"LeftRightSides":this.I(w.Gw)?"TopLeftSides":this.I(w.Iw)?"TopRightSides":this.I(w.rw)?"BottomLeftSides":this.I(w.tw)?"BottomRightSides":this.I(w.Cw)?"NotTopSide":this.I(w.Aw)?"NotLeftSide":this.I(w.Bw)?"NotRightSide":this.I(w.zw)?"NotBottomSide":this.I(w.pw)?"AllSides":this.I(w.ww)?"Default":"None"};
H.prototype.equals=H.prototype.I=function(a){return!(a instanceof H)?p:(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY};H.prototype.opposite=H.prototype.IL=function(){return new H(0.5-(this.x-0.5),0.5-(this.y-0.5),-this.offsetX,-this.offsetY)};H.prototype.includesSide=H.prototype.ZK=function(a){if(!ub(this)||!ub(a))return p;a=a.offsetY;return(this.offsetY&a)===a};
function tb(a){return!isNaN(a.x)&&!isNaN(a.y)}function zb(a){return isNaN(a.x)||isNaN(a.y)}function ub(a){return zb(a)&&1===a.offsetX&&0!==a.offsetY}function Eb(a){return isNaN(a.x)&&isNaN(a.y)&&-1===a.offsetX&&0===a.offsetY}w.nd=1;w.Sc=2;w.cd=4;w.bd=8;w.NONE=pb(new H(0,0,0,0),0).Ya();w.ww=pb(new H(0,0,-1,0),-1).Ya();w.Fw=(new H(0,0,0,0)).Ya();w.Po=(new H(0.5,0,0,0)).Ya();w.Hw=(new H(1,0,0,0)).Ya();w.No=(new H(0,0.5,0,0)).Ya();w.vw=(new H(0.5,0.5,0,0)).Ya();w.Oo=(new H(1,0.5,0,0)).Ya();
w.qw=(new H(0,1,0,0)).Ya();w.Mo=(new H(0.5,1,0,0)).Ya();w.sw=(new H(1,1,0,0)).Ya();w.Jw=pb(new H(0,0,1,w.nd),1).Ya();w.yw=pb(new H(0,0,1,w.Sc),1).Ya();w.Dw=pb(new H(0,0,1,w.cd),1).Ya();w.uw=pb(new H(0,0,1,w.bd),1).Ya();w.Ew=pb(new H(0,0,1,w.nd|w.bd),1).Ya();w.xw=pb(new H(0,0,1,w.Sc|w.cd),1).Ya();w.Gw=pb(new H(0,0,1,w.nd|w.Sc),1).Ya();w.Iw=pb(new H(0,0,1,w.nd|w.cd),1).Ya();w.rw=pb(new H(0,0,1,w.bd|w.Sc),1).Ya();w.tw=pb(new H(0,0,1,w.bd|w.cd),1).Ya();w.Cw=pb(new H(0,0,1,w.Sc|w.cd|w.bd),1).Ya();
w.Aw=pb(new H(0,0,1,w.nd|w.cd|w.bd),1).Ya();w.Bw=pb(new H(0,0,1,w.nd|w.Sc|w.bd),1).Ya();w.zw=pb(new H(0,0,1,w.nd|w.Sc|w.cd),1).Ya();w.pw=pb(new H(0,0,1,w.nd|w.Sc|w.cd|w.bd),1).Ya();var Gb;H.None=Gb=w.NONE;var Hb;H.Default=Hb=w.ww;var Jb;H.TopLeft=Jb=w.Fw;var Kb;H.TopCenter=Kb=w.Po;var Lb;H.TopRight=Lb=w.Hw;H.LeftCenter=w.No;var Ob;H.Center=Ob=w.vw;H.RightCenter=w.Oo;var Pb;H.BottomLeft=Pb=w.qw;var Qb;H.BottomCenter=Qb=w.Mo;var Rb;H.BottomRight=Rb=w.sw;var Sb;H.MiddleTop=Sb=w.Po;var Tb;
H.MiddleLeft=Tb=w.No;var Zb;H.MiddleRight=Zb=w.Oo;var $b;H.MiddleBottom=$b=w.Mo;H.Top=w.Po;var ac;H.Left=ac=w.No;var bc;H.Right=bc=w.Oo;H.Bottom=w.Mo;var dc;H.TopSide=dc=w.Jw;var ec;H.LeftSide=ec=w.yw;var fc;H.RightSide=fc=w.Dw;var gc;H.BottomSide=gc=w.uw;H.TopBottomSides=w.Ew;H.LeftRightSides=w.xw;H.TopLeftSides=w.Gw;H.TopRightSides=w.Iw;H.BottomLeftSides=w.rw;H.BottomRightSides=w.tw;H.NotTopSide=w.Cw;H.NotLeftSide=w.Aw;H.NotRightSide=w.Bw;H.NotBottomSide=w.zw;var hc;H.AllSides=hc=w.pw;
var ic=4*((Math.sqrt(2)-1)/3),jc=(new F(0,0)).Ya(),kc=(new bb(Infinity,Infinity)).Ya(),nc=(new F(-Infinity,-Infinity)).Ya(),oc=(new F(Infinity,Infinity)).Ya(),pc=(new bb(0,0)).Ya(),qc=(new F(NaN,NaN)).Ya(),rc=n;function sc(a){if(0>=a)return 0;var b=rc;if(b===n){for(var b=[],c=0;2E3>=c;c++)b[c]=Math.sqrt(c);rc=b}return 1>a?(c=1/a,2E3>=c?1/b[c|0]:Math.sqrt(a)):2E3>=a?b[a|0]:Math.sqrt(a)}function Ua(a,b){var c=a-b;return 0.5>c&&-0.5<c}function Ta(a,b){var c=a-b;return 5E-8>c&&-5E-8<c}
function uc(a,b,c,d,e,g,i){0>=e&&(e=1E-6);var j,k,l,m;a<c?(k=a,j=c):(k=c,j=a);b<d?(m=b,l=d):(m=d,l=b);if(a===c)return m<=i&&i<=l&&a-e<=g&&g<=a+e;if(b===d)return k<=g&&g<=j&&b-e<=i&&i<=b+e;j+=e;k-=e;if(k<=g&&g<=j&&(l+=e,m-=e,m<=i&&i<=l))if(j-k>l-m)if(a-c>e||c-a>e){if(g=(d-b)/(c-a)*(g-a)+b,g-e<=i&&i<=g+e)return h}else return h;else if(b-d>e||d-b>e){if(i=(c-a)/(d-b)*(i-b)+a,i-e<=g&&g<=i+e)return h}else return h;return p}
function vc(a,b,c,d,e,g,i,j,k,l,m,q){if(!uc(a,b,i,j,q,c,d)||!uc(a,b,i,j,q,e,g)){var r=(a+c)/2,s=(b+d)/2,v=(c+e)/2,y=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(r+v)/2,c=(s+y)/2,v=(v+e)/2,y=(y+g)/2,C=(d+v)/2,E=(c+y)/2;return vc(a,b,r,s,d,c,C,E,k,l,m,q)||vc(C,E,v,y,e,g,i,j,k,l,m,q)}return uc(a,b,i,j,q,l,m)}
function wc(a,b,c,d,e,g,i,j,k,l){if(!uc(a,b,i,j,k,c,d)||!uc(a,b,i,j,k,e,g)){var m=(a+c)/2,q=(b+d)/2,r=(c+e)/2,s=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(m+r)/2,c=(q+s)/2,r=(r+e)/2,s=(s+g)/2,v=(d+r)/2,y=(c+s)/2;wc(a,b,m,q,d,c,v,y,k,l);wc(v,y,r,s,e,g,i,j,k,l)}else l.Wb(a,b,0,0),l.Wb(i,j,0,0)}
function Cc(a,b,c,d,e,g,i,j,k,l){if(!uc(a,b,i,j,k,c,d)||!uc(a,b,i,j,k,e,g)){var m=(a+c)/2,q=(b+d)/2,r=(c+e)/2,s=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(m+r)/2,c=(q+s)/2,r=(r+e)/2,s=(s+g)/2,v=(d+r)/2,y=(c+s)/2;Cc(a,b,m,q,d,c,v,y,k,l);Cc(v,y,r,s,e,g,i,j,k,l)}else 0===l.length&&l.push([a,b]),l.push([i,j])}function Dc(a,b,c,d,e,g,i,j,k,l){if(uc(a,b,e,g,l,c,d))return uc(a,b,e,g,l,j,k);var m=(a+c)/2,q=(b+d)/2,c=(c+e)/2,d=(d+g)/2,r=(m+c)/2,s=(q+d)/2;return Dc(a,b,m,q,r,s,i,j,k,l)||Dc(r,s,c,d,e,g,i,j,k,l)}
function Ec(a,b,c,d,e,g,i,j){if(uc(a,b,e,g,i,c,d))j.Wb(a,b,0,0),j.Wb(e,g,0,0);else{var k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+g)/2,m=(k+c)/2,q=(l+d)/2;Ec(a,b,k,l,m,q,i,j);Ec(m,q,c,d,e,g,i,j)}}function Hc(a,b,c,d,e,g,i,j){if(uc(a,b,e,g,i,c,d))0===j.length&&j.push([a,b]),j.push([e,g]);else{var k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+g)/2,m=(k+c)/2,q=(l+d)/2;Hc(a,b,k,l,m,q,i,j);Hc(m,q,c,d,e,g,i,j)}}
function Ic(a,b,c,d,e,g,i,j,k,l,m,q,r,s){0>=r&&(r=1E-6);if(!uc(a,b,i,j,r,c,d)||!uc(a,b,i,j,r,e,g)){var v=(a+c)/2,y=(b+d)/2,c=(c+e)/2,d=(d+g)/2,e=(e+i)/2,g=(g+j)/2,C=(v+c)/2,E=(y+d)/2,c=(c+e)/2,d=(d+g)/2,I=(C+c)/2,D=(E+d)/2,M=(m-k)*(m-k)+(q-l)*(q-l),N=p;Ic(a,b,v,y,C,E,I,D,k,l,m,q,r,s)&&(a=(s.x-k)*(s.x-k)+(s.y-l)*(s.y-l),a<M&&(M=a,N=h));b=s.x;v=s.y;Ic(I,D,c,d,e,g,i,j,k,l,m,q,r,s)&&(a=(s.x-k)*(s.x-k)+(s.y-l)*(s.y-l),a<M?N=h:(s.x=b,s.y=v));return N}v=(a-i)*(l-q)-(b-j)*(k-m);if(!v)return p;r=((a*j-b*i)*
(k-m)-(a-i)*(k*q-l*m))/v;v=((a*j-b*i)*(l-q)-(b-j)*(k*q-l*m))/v;if((k>m?k-m:m-k)<(l>q?l-q:q-l)){if(b<j?(k=b,i=j):(k=j,i=b),v<k||v>i)return p}else if(a<i?k=a:(k=i,i=a),r<k||r>i)return p;s.x=r;s.y=v;return h}
function Jc(a,b,c,d,e,g,i,j,k,l,m,q,r){var s=0;0>=r&&(r=1E-6);if(!uc(a,b,i,j,r,c,d)||!uc(a,b,i,j,r,e,g))var v=(a+c)/2,y=(b+d)/2,C=(c+e)/2,E=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(v+C)/2,c=(y+E)/2,C=(C+e)/2,E=(E+g)/2,I=(d+C)/2,D=(c+E)/2,s=s+Jc(a,b,v,y,d,c,I,D,k,l,m,q,r),s=s+Jc(I,D,C,E,e,g,i,j,k,l,m,q,r);else{r=(a-i)*(l-q)-(b-j)*(k-m);if(!r)return s;v=((a*j-b*i)*(k-m)-(a-i)*(k*q-l*m))/r;y=((a*j-b*i)*(l-q)-(b-j)*(k*q-l*m))/r;if(v>=m)return s;if((k>m?k-m:m-k)<(l>q?l-q:q-l)){if(b<j?(k=b,a=j):(k=j,a=b),y<k||y>
a)return s}else if(a<i?(k=a,a=i):k=i,v<k||v>a)return s;0<r?s++:0>r&&s--}return s}function Kc(a,b,c,d,e,g,i){if(Ta(a,c)){var j;b<d?(j=b,c=d):(j=d,c=b);d=g;if(d<j)return i.x=a,i.y=j,p;if(d>c)return i.x=a,i.y=c,p;i.x=a;i.y=d;return h}if(Ta(b,d)){a<c?j=a:(j=c,c=a);d=e;if(d<j)return i.x=j,i.y=b,p;if(d>c)return i.x=c,i.y=b,p;i.x=d;i.y=b;return h}j=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>j)return i.x=a,i.y=b,p;if(1.000005<j)return i.x=c,i.y=d,p;i.x=a+j*(c-a);i.y=b+j*(d-b);return h}
function Lc(a,b,c,d,e,g,i,j,k){if(Ua(a,c)&&Ua(b,d))return k.x=a,k.y=b,p;if(Ta(e,i)){if(Ta(a,c))return Kc(a,b,c,d,e,g,k),p;g=(d-b)/(c-a)*(e-a)+b;return Kc(a,b,c,d,e,g,k)}j=(j-g)/(i-e);if(Ta(a,c)){g=j*(a-e)+g;b<d?(i=b,c=d):(i=d,c=b);if(g<i)return k.x=a,k.y=i,p;if(g>c)return k.x=a,k.y=c,p;k.x=a;k.y=g;return h}i=(d-b)/(c-a);if(Ta(j,i))return Kc(a,b,c,d,e,g,k),p;e=(i*a-j*e+g-b)/(i-j);if(Ta(i,0)){a<c?i=a:(i=c,c=a);if(e<i)return k.x=i,k.y=b,p;if(e>c)return k.x=c,k.y=b,p;k.x=e;k.y=b;return h}g=i*(e-a)+b;
return Kc(a,b,c,d,e,g,k)}
function Rc(a,b,c,d,e,g,i,j,k){function l(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);e<m&&(m=e,k.x=c,k.y=d)}var m=Infinity;l(k.x,k.y);var q,r,s,v;e<i?(q=e,r=i):(q=i,r=e);g<j?(s=e,v=i):(s=i,v=e);q=(r-q)/2+0;s=(v-s)/2+0;e=(e+i)/2;g=(g+j)/2;0===q||0===s||(0.5>(c>a?c-a:a-c)?(q=1-(c-e)*(c-e)/(q*q),0>q||(q=Math.sqrt(q),d=-s*q+g,l(c,s*q+g),l(c,d))):(c=(d-b)/(c-a),d=1/(q*q)+c*c/(s*s),j=2*c*(b-c*a)/(s*s)-2*c*g/(s*s)-2*e/(q*q),s=j*j-4*d*(2*c*a*g/(s*s)-2*b*g/(s*s)+g*g/(s*s)+e*e/(q*q)-1+(b-c*a)*(b-c*a)/(s*s)),0>s||(q=
Math.sqrt(s),s=(-j+q)/(2*d),l(s,c*s-c*a+b),s=(-j-q)/(2*d),l(s,c*s-c*a+b))))}function Sc(a,b,c,d,e,g,i,j,k){var l=1E21,m=a,q=b;if(Lc(a,b,a,d,e,g,i,j,k)){var r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g);r<l&&(l=r,m=k.x,q=k.y)}Lc(c,b,c,d,e,g,i,j,k)&&(r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g),r<l&&(l=r,m=k.x,q=k.y));Lc(a,b,c,b,e,g,i,j,k)&&(r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g),r<l&&(l=r,m=k.x,q=k.y));Lc(a,d,c,d,e,g,i,j,k)&&(r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g),r<l&&(l=r,m=k.x,q=k.y));k.x=m;k.y=q;return 1E21>l}
function Tc(a,b,c){var d=b.x,e=b.y,g=c.x,i=c.y,j=a.left,k=a.right,l=a.top,m=a.bottom;return d===g?(e<i?(a=e,g=i):(a=i,g=e),j<=d&&d<=k&&a<=m&&g>=l):e===i?(d<g?a=d:(a=g,g=d),l<=e&&e<=m&&a<=k&&g>=j):a.ua(b)||a.ua(c)||Uc(j,l,k,l,d,e,g,i)||Uc(k,l,k,m,d,e,g,i)||Uc(k,m,j,m,d,e,g,i)||Uc(j,m,j,l,d,e,g,i)?h:p}function Uc(a,b,c,d,e,g,i,j){return 0>=cd(a,b,c,d,e,g)*cd(a,b,c,d,i,j)&&0>=cd(e,g,i,j,a,b)*cd(e,g,i,j,c,d)}
function cd(a,b,c,d,e,g){c-=a;d-=b;a=e-a;b=g-b;g=a*d-b*c;0===g&&(g=a*c+b*d,0<g&&(g=(a-c)*c+(b-d)*d,0>g&&(g=0)));return 0>g?-1:0<g?1:0}function dd(a){0>a&&(a+=360);360<=a&&(a-=360);return a}
function ed(a,b,c,d,e,g){var i=Math.PI;g||(d*=i/180,e*=i/180);for(var g=d<e?1:-1,j=[],k=i/2,l=d,d=Math.min(2*i+1E-5,Math.abs(e-d));1E-5<d;){var e=l+g*Math.min(d,k),m=(e-l)/2,q=c*Math.cos(m),r=c*Math.sin(m),s=0.5522847498*Math.tan(m),i=q+s*r,q=-r+s*q,r=-q,s=m+l,m=Math.cos(s),s=Math.sin(s);j.push({x1:a+c*Math.cos(l),y1:b+c*Math.sin(l),x2:a+i*m-q*s,y2:b+i*s+q*m,Gf:a+i*m-r*s,Hf:b+i*s+r*m,$c:a+c*Math.cos(e),ad:b+c*Math.sin(e)});d-=Math.abs(e-l);l=e}return j}
function fd(a,b,c,d,e,g){var c=Math.floor((a-c)/e)*e+c,d=Math.floor((b-d)/g)*g+d,i=c;c+e-a<e/2&&(i=c+e);a=d;d+g-b<g/2&&(a=d+g);return new F(i,a)}function gd(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do e=c%d,c=g=d,d=e;while(0<e);return g}
function hd(a){w.jc(this);a===f?a=id:u&&w.ib(a,hd,hd,"constructor:type");this.T=a;this.Ic=this.Bc=this.Ob=this.Cb=0;this.lk=new z(jd);this.yt=this.lk.Jb;this.kt=(new G).freeze();this.Ma=h;this.sF=new F;this.ri=Jb;this.si=Rb;this.Kt=this.Lt=NaN;this.Ud=pc;this.Zb=kd}w.Q("Geometry",hd);
hd.prototype.copy=hd.prototype.copy=function(){var a=new hd;a.T=this.T;a.Cb=this.Cb;a.Ob=this.Ob;a.Bc=this.Bc;a.Ic=this.Ic;for(var b=this.lk,c=b.length,d=a.lk,e=0;e<c;e++){var g=b.n[e].copy();d.add(g)}a.yt=this.yt;a.kt.Ua(this.kt);a.Ma=this.Ma;a.ri=this.ri.O();a.si=this.si.O();a.Lt=this.Lt;a.Kt=this.Kt;a.Ud=this.Ud.O();a.Zb=this.Zb;return a};var md;hd.Line=md=w.s(hd,"Line",0);var qd;hd.Rectangle=qd=w.s(hd,"Rectangle",1);var rd;hd.Ellipse=rd=w.s(hd,"Ellipse",2);var id;hd.Path=id=w.s(hd,"Path",3);
hd.prototype.Ya=function(){this.freeze();Object.freeze(this);return this};hd.prototype.freeze=function(){this.ab=h;var a=this.sb;a.freeze();for(var b=a.length,c=0;c<b;c++)a.n[c].freeze();return this};hd.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.ab=p;var a=this.sb;a.Ia();for(var b=a.length,c=0;c<b;c++)a.n[c].Ia();return this};
hd.prototype.equalsApprox=hd.prototype.Gj=function(a){if(!(a instanceof hd))return p;if(this.type!==a.type)return this.type===md&&a.type===id?sd(this,a):a.type===md&&this.type===id?sd(a,this):p;if(this.type===id){var b=this.sb,a=a.sb,c=b.length;if(c!==a.length)return p;for(var d=0;d<c;d++)if(!b.n[d].Gj(a.n[d]))return p;return h}return Ua(this.ma,a.ma)&&Ua(this.na,a.na)&&Ua(this.C,a.C)&&Ua(this.D,a.D)};
function sd(a,b){if(a.type!==md||b.type!==id)return p;if(1===b.sb.count){var c=b.sb.oa(0);if(1===c.Aa.count&&(Ua(a.ma,c.ma)&&Ua(a.na,c.na))&&(c=c.Aa.oa(0),c.type===td&&Ua(a.C,c.C)&&Ua(a.D,c.D)))return h}return p}var ud;hd.stringify=ud=function(a){return a.toString()};
hd.prototype.toString=function(a){switch(this.type){case md:return a===f?"M"+this.ma.toString()+" "+this.na.toString()+"L"+this.C.toString()+" "+this.D.toString():"M"+this.ma.toFixed(a)+" "+this.na.toFixed(a)+"L"+this.C.toFixed(a)+" "+this.D.toFixed(a);case qd:var b=new G(this.ma,this.na,0,0);b.Wb(this.C,this.D,0,0);return a===f?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+
"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case rd:b=new G(this.ma,this.na,0,0);b.Wb(this.C,this.D,0,0);if(a===f){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/
2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case id:for(var b="",c=this.sb,d=c.length,e=0;e<d;e++){var g=c.n[e];0<e&&(b+=" x ");g.ho&&(b+="F ");b+=g.toString(a)}return b;default:return this.type.toString()}};var wd;
hd.fillPath=wd=function(a){"string"!==typeof a&&w.ic(a,"string",hd,"fillPath:str");for(var a=a.split(/[Xx]/),b=a.length,c="",d=0;d<b;d++)var e=a[d],c=e.match(/[Ff]/)!==n?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var xd;
hd.parse=xd=function(a,b){function c(){return l>=y-1?h:k[l+1].match(/[A-Za-z]/)!==n}function d(){l++;return k[l]}function e(){var a=new F(parseFloat(d()),parseFloat(d()));m===m.toLowerCase()&&(a.x=v.x+a.x,a.y=v.y+a.y);return a}function g(){return v=e()}function i(){return s=e()}function j(){return"c"!==q.toLowerCase()&&"s"!==q.toLowerCase()?v:new F(2*v.x-s.x,2*v.y-s.y)}b===f&&(b=p);"string"!==typeof a&&w.ic(a,"string",hd,"parse:str");for(var a=a.replace(/,/gm," "),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=a.replace(/[\s\r\t\n]+/gm," "),a=a.replace(/^\s+|\s+$/g,""),k=a.split(" "),l=-1,m="",q="",r=new F(0,0),s=new F(0,0),v=new F(0,0),y=
k.length,C=new J,E,I=p,D=p,M=h;!(l>=y-1);)if(q=m,m=d(),""!==m)switch(m.toUpperCase()){case "X":M=h;D=I=p;break;case "M":E=g();C.Mb===n||M===h?(K(C,E.x,E.y,I,p,!D),M=p):C.moveTo(E.x,E.y);for(r=v;!c();)E=g(),C.lineTo(E.x,E.y);break;case "L":for(;!c();)E=g(),C.lineTo(E.x,E.y);break;case "H":for(;!c();)v=E=new F((m===m.toLowerCase()?v.x:0)+parseFloat(d()),v.y),C.lineTo(v.x,v.y);break;case "V":for(;!c();)v=E=new F(v.x,(m===m.toLowerCase()?v.y:0)+parseFloat(d())),C.lineTo(v.x,v.y);break;case "C":for(;!c();){var N=
e(),Z=i();E=g();L(C,N.x,N.y,Z.x,Z.y,E.x,E.y)}break;case "S":for(;!c();)N=j(),Z=i(),E=g(),L(C,N.x,N.y,Z.x,Z.y,E.x,E.y);break;case "Q":for(;!c();)Z=i(),E=g(),Dd(C,Z.x,Z.y,E.x,E.y);break;case "T":for(;!c();)s=Z=j(),E=g(),Dd(C,Z.x,Z.y,E.x,E.y);break;case "B":for(;!c();)E=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())],c()||(E.push(parseFloat(d())),c()||E.push(parseFloat(d()))),m===m.toLowerCase()&&(E[2]+=v.x,E[3]+=v.y),C.arcTo(E[0],E[1],E[2],E[3],E[4],E[5],E[6]);break;
case "A":for(;!c();){var Z=Math.abs(parseFloat(d())),va=Math.abs(parseFloat(d())),la=parseFloat(d()),ta=!!parseFloat(d()),Ea=!!parseFloat(d());E=g();var N=C,Ha=E.x;E=E.y;N.q===n&&w.m("StreamGeometryContext has been closed");N.Mb===n&&w.m("Need to call beginFigure first");E=new Ed(Fd,Ha,E,Z,va,la,ta,Ea);N.Mb.Aa.add(E)}break;case "Z":Gd(C);v=r;break;case "F":E=n;for(N=1;k[l+N];)if(k[l+N].match(/[Uu]/)!==n)N++;else if(k[l+N].match(/[A-Za-z]/)===n)N++;else{E=k[l+N];break}E.match(/[Mm]/)?I=h:(E=C,E.q===
n&&w.m("StreamGeometryContext has been closed"),E.Mb===n&&w.m("Need to call beginFigure first"),0<E.Mb.Aa.length&&(E.Mb.ho=h));break;case "U":E=n;for(N=1;k[l+N];)if(k[l+N].match(/[Ff]/)!==n)N++;else if(k[l+N].match(/[A-Za-z]/)===n)N++;else{E=k[l+N];break}E.match(/[Mm]/)?D=h:Hd(C)}r=C.q;if(b)for(C=r.sb.l;C.next();)C.value.ho=h;return r};hd.prototype.rz=function(){if(this.Ma)return h;var a=this.sb;if(this.yt!==a.Jb)return h;for(var b=a.length,c=0;c<b;c++)if(a.n[c].rz())return h;return p};
hd.prototype.jA=function(){this.Ma=p;var a=this.sb;this.yt=a.Jb;for(var b=a.length,c=0;c<b;c++)a.n[c].jA()};hd.prototype.oe=function(){var a=this.kt;a.Ia();a.reset();a.$H(this.Ud);Id(this,a,p);a.Wb(0,0,0,0);a.freeze()};hd.prototype.computeBoundsWithoutOrigin=hd.prototype.jG=function(){var a=new G;Id(this,a,h);return a};
function Id(a,b,c){switch(a.type){case md:case qd:case rd:c?b.U(a.Cb,a.Ob,0,0):b.Wb(a.Cb,a.Ob,0,0);b.Wb(a.Bc,a.Ic,0,0);break;case id:for(var a=a.sb,d=a.length,e=0;e<d;e++){var g=a.n[e];c&&0===e?b.U(g.ma,g.na,0,0):b.Wb(g.ma,g.na,0,0);for(var i=g.Aa,j=i.length,k=g.ma,l=g.na,m=0;m<j;m++){var q=i.n[m];switch(q.type){case td:case Jd:k=q.C;l=q.D;b.Wb(k,l,0,0);break;case Kd:wc(k,l,q.Ub,q.Ac,q.lg,q.mg,q.C,q.D,0.5,b);k=q.C;l=q.D;break;case Ld:Ec(k,l,q.Ub,q.Ac,q.C,q.D,0.5,b);k=q.C;l=q.D;break;case Md:case Fd:for(var q=
q.type===Md?Od(q,g):Pd(q,g,k,l),r=q.length,s=n,v=0;v<r;v++)s=q[v],wc(s.x1,s.y1,s.x2,s.y2,s.Gf,s.Hf,s.$c,s.ad,0.5,b);s!==n&&(k=s.$c,l=s.ad);break;default:w.m("Unknown Segment type: "+q.type)}}}break;default:w.m("Unknown Geometry type: "+a.type)}}hd.prototype.normalize=hd.prototype.normalize=function(){w.H(this);var a=this.jG();this.offset(-a.x,-a.y);return new F(-a.x,-a.y)};
hd.prototype.offset=hd.prototype.offset=function(a,b){w.H(this);u&&(w.o(a,hd,"offset"),w.o(b,hd,"offset"));var c=new Wa;c.translate(a,b);this.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy)};hd.prototype.scale=hd.prototype.scale=function(a,b){w.H(this);u&&(w.o(a,hd,"scale:x"),w.o(b,hd,"scale:y"),0>=a&&w.ra(a,"scale must be greater than zero",hd,"scale:x"),0>=b&&w.ra(b,"scale must be greater than zero",hd,"scale:y"));var c=new Wa;c.scale(a,b);this.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy)};
hd.prototype.rotate=hd.prototype.rotate=function(a,b,c){w.H(this);b===f&&(b=0);c===f&&(c=0);u&&(w.o(a,hd,"rotate:angle"),w.o(b,hd,"rotate:x"),w.o(c,hd,"rotate:y"));var d=new Wa;d.rotate(a,b,c);this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy)};
hd.prototype.transform=hd.prototype.transform=function(a,b,c,d,e,g){var i,j;switch(this.type){case md:case qd:case rd:i=this.Cb;j=this.Ob;this.Cb=i*a+j*c+e;this.Ob=i*b+j*d+g;i=this.Bc;j=this.Ic;this.Bc=i*a+j*c+e;this.Ic=i*b+j*d+g;break;case id:for(var k=this.sb,l=k.length,m=0;m<l;m++){var q=k.n[m];i=q.ma;j=q.na;q.ma=i*a+j*c+e;q.na=i*b+j*d+g;for(var q=q.Aa,r=q.length,s=0;s<r;s++){var v=q.n[s];switch(v.type){case td:case Jd:i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;break;case Kd:i=v.lf;j=v.mf;v.lf=i*
a+j*c+e;v.mf=i*b+j*d+g;i=v.oi;j=v.pi;v.oi=i*a+j*c+e;v.pi=i*b+j*d+g;i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;break;case Ld:i=v.lf;j=v.mf;v.lf=i*a+j*c+e;v.mf=i*b+j*d+g;i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;break;case Md:i=v.pa;j=v.ta;v.pa=i*a+j*c+e;v.ta=i*b+j*d+g;v.radiusX*=Math.sqrt(a*a+c*c);v.radiusY!==f&&(v.radiusY*=Math.sqrt(b*b+d*d));break;case Fd:i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;v.radiusX*=Math.sqrt(a*a+c*c);v.radiusY*=Math.sqrt(b*b+d*d);break;default:w.m("Unknown Segment type: "+v.type)}}}}this.Ma=
h};hd.prototype.wr=function(a,b){var c=this.Cb,d=this.Ob,e=this.Bc,g=this.Ic,i=Math.min(c,e),j=Math.min(d,g),c=Math.abs(e-c),d=Math.abs(g-d),g=this.sF;g.x=i;g.y=j;b.Ta(g);e=new jd(g.x,g.y);g.x=i+c;g.y=j;b.Ta(g);e.Aa.add(new Ed(td,g.x,g.y));g.x=i+c;g.y=j+d;b.Ta(g);e.Aa.add(new Ed(td,g.x,g.y));g.x=i;g.y=j+d;b.Ta(g);e.Aa.add((new Ed(td,g.x,g.y)).close());a.type=id;a.sb.add(e);return a};
hd.prototype.ua=function(a,b,c,d){for(var e=a.x,g=a.y,i=this.Fb.x-20,a=a.y,j=0,k,l,m,q,r,s,v,y=this.sb.n,C=y.length,E=0;E<C;E++){var I=y[E];if(I.ho){if(c&&I.ua(e,g,b))return h;var D=I.Aa;k=I.ma;l=I.na;for(var M=k,N=l,Z=0;Z<=D.length;Z++){Z!==D.length?(m=D.n[Z],q=m.type,s=m.C,v=m.D):(q=td,s=M,v=N);switch(q){case Jd:r=Yd(e,g,i,a,k,l,M,N);if(r===h)return h;j+=r;M=s;N=v;break;case td:r=Yd(e,g,i,a,k,l,s,v);if(r===h)return h;j+=r;break;case Kd:r=Jc(k,l,m.Ub,m.Ac,m.lg,m.mg,s,v,i,a,e,g,0.5);j+=r;break;case Ld:r=
Jc(k,l,(k+2*m.Ub)/3,(l+2*m.Ac)/3,(m.Ub+2*s)/3,(m.Ub+2*s)/3,s,v,i,a,e,g,0.5);j+=r;break;case Md:case Fd:q=m.type===Md?Od(m,I):Pd(m,I,k,l);for(var va=q.length,la=n,ta=0;ta<va;ta++){la=q[ta];if(0===ta){r=Yd(e,g,i,a,k,l,la.x1,la.y1);if(r===h)return h;j+=r}r=Jc(la.x1,la.y1,la.x2,la.y2,la.Gf,la.Hf,la.$c,la.ad,i,a,e,g,0.5);j+=r}la!==n&&(s=la.$c,v=la.ad);break;default:w.m("Unknown Segment type: "+m.type)}k=s;l=v}if(0!==j)return h;j=0}else if(I.ua(e,g,d?b:b+2))return h}return 0!==j};
function Yd(a,b,c,d,e,g,i,j){if(uc(e,g,i,j,0.05,a,b))return h;var k=(a-c)*(g-j);if(0===k)return 0;var l=((a*d-b*c)*(e-i)-(a-c)*(e*j-g*i))/k,b=(a*d-b*c)*(g-j)/k;if(l>=a)return 0;if((e>i?e-i:i-e)<(g>j?g-j:j-g)){if(g<j?(a=g,e=j):(a=j,e=g),b<a||b>e)return 0}else if(e<i?(a=e,e=i):a=i,l<a||l>e)return 0;return 0<k?1:-1}function Zd(a,b,c,d){for(var e=a.sb.length,g=0;g<e;g++)if(a.sb.n[g].ua(b,c,d))return h;return p}w.g(hd,"type",hd.prototype.type);
w.defineProperty(hd,{type:"type"},t("T"),function(a){this.T!==a&&(u&&w.ib(a,hd,hd,"type"),w.H(this,a),this.T=a,this.Ma=h)});w.g(hd,"startX",hd.prototype.ma);w.defineProperty(hd,{ma:"startX"},t("Cb"),function(a){this.Cb!==a&&(u&&w.o(a,hd,"startX"),w.H(this,a),this.Cb=a,this.Ma=h)});w.g(hd,"startY",hd.prototype.na);w.defineProperty(hd,{na:"startY"},t("Ob"),function(a){this.Ob!==a&&(u&&w.o(a,hd,"startY"),w.H(this,a),this.Ob=a,this.Ma=h)});w.g(hd,"endX",hd.prototype.C);
w.defineProperty(hd,{C:"endX"},t("Bc"),function(a){this.Bc!==a&&(u&&w.o(a,hd,"endX"),w.H(this,a),this.Bc=a,this.Ma=h)});w.g(hd,"endY",hd.prototype.D);w.defineProperty(hd,{D:"endY"},t("Ic"),function(a){this.Ic!==a&&(u&&w.o(a,hd,"endY"),w.H(this,a),this.Ic=a,this.Ma=h)});w.g(hd,"figures",hd.prototype.sb);w.defineProperty(hd,{sb:"figures"},t("lk"),function(a){this.lk!==a&&(u&&w.i(a,z,hd,"figures"),w.H(this,a),this.lk=a,this.Ma=h)});
w.defineProperty(hd,{v:"spot1"},t("ri"),function(a){u&&w.i(a,H,hd,"spot1");w.H(this,a);this.ri=a.O()});w.defineProperty(hd,{w:"spot2"},t("si"),function(a){u&&w.i(a,H,hd,"spot2");w.H(this,a);this.si=a.O()});w.u(hd,{Fb:"bounds"},function(){this.rz()&&(this.jA(),this.oe());return this.kt});w.g(hd,"minSize",hd.prototype.we);
w.defineProperty(hd,{we:"minSize"},t("Ud"),function(a){this.Ud.I(a)||(u&&w.i(a,bb,hd,"minSize"),a=a.O(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Ud=a)});function jd(a,b,c){w.jc(this);c===f&&(c=h);this.wl=c;this.Lf=h;a!==f?(u&&w.o(a,jd,"sx"),this.Cb=a):this.Cb=0;b!==f?(u&&w.o(b,jd,"sy"),this.Ob=b):this.Ob=0;this.ar=new z(Ed);this.Bu=this.ar.Jb;this.Ma=h}w.Q("PathFigure",jd);
jd.prototype.copy=jd.prototype.copy=function(){var a=new jd;a.wl=this.wl;a.Lf=this.Lf;a.Cb=this.Cb;a.Ob=this.Ob;for(var b=this.ar,c=b.length,d=a.ar,e=0;e<c;e++){var g=b.n[e].copy();d.add(g)}a.Bu=this.Bu;a.Ma=this.Ma;return a};jd.prototype.equalsApprox=jd.prototype.Gj=function(a){if(!(a instanceof jd)||!Ua(this.ma,a.ma)||!Ua(this.na,a.na))return p;var b=this.Aa,a=a.Aa,c=b.length;if(c!==a.length)return p;for(var d=0;d<c;d++)if(!b.n[d].Gj(a.n[d]))return p;return h};da=jd.prototype;
da.toString=function(a){for(var b=a===f?"M"+this.ma.toString()+" "+this.na.toString():"M"+this.ma.toFixed(a)+" "+this.na.toFixed(a),c=this.Aa,d=c.length,e=0;e<d;e++)b+=" "+c.n[e].toString(a);return b};da.freeze=function(){this.ab=h;var a=this.Aa;a.freeze();for(var b=a.length,c=0;c<b;c++)a.n[c].freeze();return this};da.Ia=function(){this.ab=p;var a=this.Aa;a.Ia();for(var b=a.length,c=0;c<b;c++)a.n[c].Ia();return this};
da.rz=function(){if(this.Ma)return h;var a=this.Aa;if(this.Bu!==a.Jb)return h;for(var b=a.length,c=0;c<b;c++)if(a.n[c].Ma)return h;return p};da.jA=function(){this.Ma=p;var a=this.Aa;this.Bu=a.Jb;for(var b=a.length,c=0;c<b;c++){var d=a.n[c];d.Ma=p;d.Ri&&(d.Ri=n)}};w.g(jd,"isFilled",jd.prototype.ho);w.defineProperty(jd,{ho:"isFilled"},t("wl"),function(a){u&&w.k(a,"boolean",jd,"isFilled");w.H(this,a);this.wl=a});w.g(jd,"isShadowed",jd.prototype.jo);
w.defineProperty(jd,{jo:"isShadowed"},t("Lf"),function(a){u&&w.k(a,"boolean",jd,"isShadowed");w.H(this,a);this.Lf=a});w.g(jd,"startX",jd.prototype.ma);w.defineProperty(jd,{ma:"startX"},t("Cb"),function(a){u&&w.o(a,jd,"startX");w.H(this,a);this.Cb=a;this.Ma=h});w.g(jd,"startY",jd.prototype.na);w.defineProperty(jd,{na:"startY"},t("Ob"),function(a){u&&w.o(a,jd,"startY");w.H(this,a);this.Ob=a;this.Ma=h});w.g(jd,"segments",jd.prototype.Aa);
w.defineProperty(jd,{Aa:"segments"},t("ar"),function(a){u&&w.i(a,z,jd,"segments");w.H(this,a);this.ar=a;this.Ma=h});
jd.prototype.ua=function(a,b,c){for(var d=this.ma,e=this.na,g=d,i=e,j=this.Aa.n,k=j.length,l=0;l<k;l++){var m=j[l];switch(m.type){case Jd:g=m.C;i=m.D;d=m.C;e=m.D;break;case td:if(uc(d,e,m.C,m.D,c,a,b))return h;d=m.C;e=m.D;break;case Kd:if(vc(d,e,m.Ub,m.Ac,m.lg,m.mg,m.C,m.D,0.5,a,b,c))return h;d=m.C;e=m.D;break;case Ld:if(Dc(d,e,m.Ub,m.Ac,m.C,m.D,0.5,a,b,c))return h;d=m.C;e=m.D;break;case Md:case Fd:for(var q=m.type===Md?Od(m,this):Pd(m,this,d,e),r=q.length,s=n,v=0;v<r;v++)if(s=q[v],0===v&&uc(d,e,
s.x1,s.y1,c,a,b)||vc(s.x1,s.y1,s.x2,s.y2,s.Gf,s.Hf,s.$c,s.ad,0.5,a,b,c))return h;s!==n&&(d=s.$c,e=s.ad);break;default:w.m("Unknown Segment type: "+m.type)}if(m.ai&&(d!==g||e!==i)&&uc(d,e,g,i,c,a,b))return h}return p};
function Ed(a,b,c,d,e,g,i,j){w.jc(this);a===f?a=td:u&&w.ib(a,Ed,Ed,"constructor:type");this.T=a;a===Md?(b!==f?(u&&w.o(b,Ed,"ex"),this.Wd=b):this.Wd=0,c!==f?(u&&w.o(c,Ed,"ey"),this.Xd=c):this.Xd=0,d!==f&&(u&&w.o(d,Ed,"x1"),this.Cm=d),e!==f&&(u&&w.o(e,Ed,"y1"),this.Dm=e),g!==f&&(u&&w.o(g,Ed,"x2"),this.oj=Math.max(g||0,0)),i!==f&&"number"===typeof i?(u&&w.o(i,Ed,"y2"),this.pj=Math.max(i||0,0)):this.pj=this.oj):a===Fd?(b!==f&&u&&w.o(b,Ed,"ex"),c!==f&&u&&w.o(c,Ed,"ey"),d!==f&&u&&w.o(d,Ed,"x1"),e!==f&&
u&&w.o(e,Ed,"y1"),this.Rf=b||0,this.Sf=c||0,this.oj=Math.max(d||0,0),this.pj=Math.max(e||0,0),this.Wd=i?1:0,this.Xd=j?1:0,a=(g||0)%360,0>a&&(a+=360),this.Cn=a):(b!==f?(u&&w.o(b,Ed,"ex"),this.Rf=b):this.Rf=0,c!==f?(u&&w.o(c,Ed,"ey"),this.Sf=c):this.Sf=0,d!==f&&(u&&w.o(d,Ed,"x1"),this.lf=d),e!==f&&(u&&w.o(e,Ed,"y1"),this.mf=e),g!==f&&(u&&w.o(g,Ed,"x2"),this.oi=g),i!==f&&"number"===typeof i&&(u&&w.o(i,Ed,"y2"),this.pi=i));this.Ma=h;this.ai=p}w.Q("PathSegment",Ed);
Ed.prototype.copy=Ed.prototype.copy=function(){var a=new Ed;a.T=this.T;this.T===Md?(a.Wd=this.Wd,a.Xd=this.Xd,a.Cm=this.Cm,a.Dm=this.Dm,a.oj=this.oj,a.pj=this.pj):this.T===Fd?(a.Wd=this.Wd,a.Xd=this.Xd,a.Rf=this.Rf,a.Sf=this.Sf,a.oj=this.oj,a.pj=this.pj,a.Cn=this.Cn):(a.Rf=this.Rf,a.Sf=this.Sf,a.lf=this.lf,a.mf=this.mf,a.oi=this.oi,a.pi=this.pi);a.Ma=this.Ma;a.ai=this.ai;return a};
Ed.prototype.equalsApprox=Ed.prototype.Gj=function(a){if(!(a instanceof Ed)||this.type!==a.type||this.Gv!==a.Gv)return p;switch(this.type){case Jd:case td:return Ua(this.C,a.C)&&Ua(this.D,a.D);case Kd:return Ua(this.C,a.C)&&Ua(this.D,a.D)&&Ua(this.Ub,a.Ub)&&Ua(this.Ac,a.Ac)&&Ua(this.lg,a.lg)&&Ua(this.mg,a.mg);case Ld:return Ua(this.C,a.C)&&Ua(this.D,a.D)&&Ua(this.Ub,a.Ub)&&Ua(this.Ac,a.Ac);case Md:return Ua(this.og,a.og)&&Ua(this.Kh,a.Kh)&&Ua(this.pa,a.pa)&&Ua(this.ta,a.ta)&&Ua(this.radiusX,a.radiusX)&&
Ua(this.radiusY,a.radiusY);case Fd:return this.Fv===a.Fv&&this.Iv===a.Iv&&Ua(this.ow,a.ow)&&Ua(this.C,a.C)&&Ua(this.D,a.D)&&Ua(this.radiusX,a.radiusX)&&Ua(this.radiusY,a.radiusY);default:return p}};
Ed.prototype.toString=function(a){switch(this.type){case Jd:a=a===f?"M"+this.C.toString()+" "+this.D.toString():"M"+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case td:a=a===f?"L"+this.C.toString()+" "+this.D.toString():"L"+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case Kd:a=a===f?"C"+this.Ub.toString()+" "+this.Ac.toString()+" "+this.lg.toString()+" "+this.mg.toString()+" "+this.C.toString()+" "+this.D.toString():"C"+this.Ub.toFixed(a)+" "+this.Ac.toFixed(a)+" "+this.lg.toFixed(a)+" "+this.mg.toFixed(a)+
" "+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case Ld:a=a===f?"Q"+this.Ub.toString()+" "+this.Ac.toString()+" "+this.C.toString()+" "+this.D.toString():"Q"+this.Ub.toFixed(a)+" "+this.Ac.toFixed(a)+" "+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case Md:a=a===f?"B"+this.og.toString()+" "+this.Kh.toString()+" "+this.pa.toString()+" "+this.ta.toString()+" "+this.radiusX:"B"+this.og.toFixed(a)+" "+this.Kh.toFixed(a)+" "+this.pa.toFixed(a)+" "+this.ta.toFixed(a)+" "+this.radiusX;break;case Fd:a=
a===f?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.ow.toString()+" "+(this.Iv?1:0)+" "+(this.Fv?1:0)+" "+this.C.toString()+" "+this.D.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.ow.toFixed(a)+" "+(this.Iv?1:0)+" "+(this.Fv?1:0)+" "+this.C.toFixed(a)+" "+this.D.toFixed(a);break;default:a=this.type.toString()}return a+(this.ai?"z":"")};var Jd;Ed.Move=Jd=w.s(Ed,"Move",0);var td;Ed.Line=td=w.s(Ed,"Line",1);var Kd;Ed.Bezier=Kd=w.s(Ed,"Bezier",2);var Ld;
Ed.QuadraticBezier=Ld=w.s(Ed,"QuadraticBezier",3);var Md;Ed.Arc=Md=w.s(Ed,"Arc",4);var Fd;Ed.SvgArc=Fd=w.s(Ed,"SvgArc",4);Ed.prototype.freeze=function(){this.ab=h;return this};Ed.prototype.Ia=function(){this.ab=p;return this};Ed.prototype.close=Ed.prototype.close=function(){this.ai=h;return this};
function Od(a,b){if(a.Ri&&b.Ma===p)return a.Ri;var c=a.radiusX,d=a.radiusY;d===f&&(d=c);var e=ed(a.Cm,a.Dm,c<d?c:d,a.og,a.og+a.Kh);if(c!==d){var g=new Wa;c<d?g.scale(1,d/c):g.scale(c/d,1);for(var c=e.length,d=new F,i=0,j=0,k=0;k<c;k++){var l=e[k];0===k&&(i=l.x1,j=l.y1);l.x1-=i;l.y1-=j;l.x2-=i;l.y2-=j;l.Gf-=i;l.Hf-=j;l.$c-=i;l.ad-=j}for(k=0;k<c;k++)l=e[k],d.x=l.x1,d.y=l.y1,g.Ta(d),l.x1=d.x+i,l.y1=d.y+j,d.x=l.x2,d.y=l.y2,g.Ta(d),l.x2=d.x+i,l.y2=d.y+j,d.x=l.Gf,d.y=l.Hf,g.Ta(d),l.Gf=d.x+i,l.Hf=d.y+j,
d.x=l.$c,d.y=l.ad,g.Ta(d),l.$c=d.x+i,l.ad=d.y+j}a.Ri=e;return a.Ri}
function Pd(a,b,c,d){function e(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(g(a,b))}function g(a,b){return(a[0]*b[0]+a[1]*b[1])/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)))}if(a.Ri&&b.Ma===p)return a.Ri;var b=a.oj,i=a.pj,j=a.Cn*(Math.PI/180),k=a.og,l=a.Xd,m=a.Rf,q=a.Sf,r=new F(Math.cos(j)*(c-m)/2+Math.sin(j)*(d-q)/2,-Math.sin(j)*(c-m)/2+Math.cos(j)*(d-q)/2),s=Math.pow(r.x,2)/Math.pow(b,2)+Math.pow(r.y,2)/Math.pow(i,2);1<s&&(b*=Math.sqrt(s),i*=Math.sqrt(s));
k=(k==l?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(i,2)-Math.pow(b,2)*Math.pow(r.y,2)-Math.pow(i,2)*Math.pow(r.x,2))/(Math.pow(b,2)*Math.pow(r.y,2)+Math.pow(i,2)*Math.pow(r.x,2)));isNaN(k)&&(k=0);k=new F(k*b*r.y/i,k*-i*r.x/b);c=new F((c+m)/2+Math.cos(j)*k.x-Math.sin(j)*k.y,(d+q)/2+Math.sin(j)*k.x+Math.cos(j)*k.y);d=e([1,0],[(r.x-k.x)/b,(r.y-k.y)/i]);j=[(r.x-k.x)/b,(r.y-k.y)/i];m=[(-r.x-k.x)/b,(-r.y-k.y)/i];r=e(j,m);-1>=g(j,m)&&(r=Math.PI);1<=g(j,m)&&(r=0);0==l&&0<r&&(r-=2*Math.PI);1==l&&0>r&&(r+=2*Math.PI);
l=b>i?1:b/i;j=b>i?i/b:1;b=ed(0,0,b>i?b:i,d,d+r,h);i=new Wa;i.translate(c.x,c.y);i.rotate(a.Cn,0,0);i.scale(l,j);l=b.length;r=new F;for(c=0;c<l;c++)d=b[c],r.x=d.x1,r.y=d.y1,i.Ta(r),d.x1=r.x,d.y1=r.y,r.x=d.x2,r.y=d.y2,i.Ta(r),d.x2=r.x,d.y2=r.y,r.x=d.Gf,r.y=d.Hf,i.Ta(r),d.Gf=r.x,d.Hf=r.y,r.x=d.$c,r.y=d.ad,i.Ta(r),d.$c=r.x,d.ad=r.y;a.Ri=b;return a.Ri}w.g(Ed,"isClosed",Ed.prototype.Gv);w.defineProperty(Ed,{Gv:"isClosed"},t("ai"),function(a){this.ai!==a&&(this.ai=a,this.Ma=h)});w.g(Ed,"type",Ed.prototype.type);
w.defineProperty(Ed,{type:"type"},t("T"),function(a){u&&w.ib(a,Ed,Ed,"type");w.H(this,a);this.T=a;this.Ma=h});w.g(Ed,"endX",Ed.prototype.C);w.defineProperty(Ed,{C:"endX"},t("Rf"),function(a){u&&w.o(a,Ed,"endX");w.H(this,a);this.Rf=a;this.Ma=h});w.g(Ed,"endY",Ed.prototype.D);w.defineProperty(Ed,{D:"endY"},t("Sf"),function(a){u&&w.o(a,Ed,"endY");w.H(this,a);this.Sf=a;this.Ma=h});w.defineProperty(Ed,{Ub:"point1X"},t("lf"),function(a){u&&w.o(a,Ed,"point1X");w.H(this,a);this.lf=a;this.Ma=h});
w.defineProperty(Ed,{Ac:"point1Y"},t("mf"),function(a){u&&w.o(a,Ed,"point1Y");w.H(this,a);this.mf=a;this.Ma=h});w.defineProperty(Ed,{lg:"point2X"},t("oi"),function(a){u&&w.o(a,Ed,"point2X");w.H(this,a);this.oi=a;this.Ma=h});w.defineProperty(Ed,{mg:"point2Y"},t("pi"),function(a){u&&w.o(a,Ed,"point2Y");w.H(this,a);this.pi=a;this.Ma=h});w.defineProperty(Ed,{pa:"centerX"},t("Cm"),function(a){u&&w.o(a,Ed,"centerX");w.H(this,a);this.Cm=a;this.Ma=h});
w.defineProperty(Ed,{ta:"centerY"},t("Dm"),function(a){u&&w.o(a,Ed,"centerY");w.H(this,a);this.Dm=a;this.Ma=h});w.defineProperty(Ed,{radiusX:"radiusX"},t("oj"),function(a){u&&w.o(a,Ed,"radiusX");0>a&&w.ra(a,">= zero",Ed,"radiusX");w.H(this,a);this.oj=a;this.Ma=h});w.defineProperty(Ed,{radiusY:"radiusY"},t("pj"),function(a){u&&w.o(a,Ed,"radiusY");0>a&&w.ra(a,">= zero",Ed,"radiusY");w.H(this,a);this.pj=a;this.Ma=h});
w.defineProperty(Ed,{og:"startAngle"},t("Wd"),function(a){this.Wd!==a&&(w.H(this,a),u&&w.o(a,Ed,"startAngle"),a%=360,0>a&&(a+=360),this.Wd=a,this.Ma=h)});w.defineProperty(Ed,{Kh:"sweepAngle"},t("Xd"),function(a){u&&w.o(a,Ed,"sweepAngle");w.H(this,a);360<a&&(a=360);-360>a&&(a=-360);this.Xd=a;this.Ma=h});w.defineProperty(Ed,{Fv:"isClockwiseArc"},function(){return!!this.Xd},function(a){w.H(this,a);this.Xd=a?1:0;this.Ma=h});
w.defineProperty(Ed,{Iv:"isLargeArc"},function(){return!!this.Wd},function(a){w.H(this,a);this.Wd=a?1:0;this.Ma=h});w.defineProperty(Ed,{ow:"xAxisRotation"},t("Cn"),function(a){u&&w.o(a,Ed,"xAxisRotation");a%=360;0>a&&(a+=360);w.H(this,a);this.Cn=a;this.Ma=h});function $d(){this.ba=n;this.Ay=(new F(0,0)).freeze();this.ex=(new F(0,0)).freeze();this.et=this.cu=0;this.Qt="";this.Su=this.vt=p;this.st=this.ht=0;this.Ti=this.Ct=p;this.Zi=n;this.Qu=0;this.Uf=this.Nu=n}w.Q("InputEvent",$d);
$d.prototype.copy=$d.prototype.copy=function(){var a=new $d;a.ba=this.ba;a.Ay=this.Zc.copy().freeze();a.ex=this.M.copy().freeze();a.cu=this.cu;a.et=this.et;a.Qt=this.Qt;a.vt=this.vt;a.Su=this.Su;a.ht=this.ht;a.st=this.st;a.Ct=this.Ct;a.Ti=this.Ti;a.Zi=this.Zi;a.Qu=this.Qu;a.Nu=this.Nu;a.Uf=this.Uf;return a};
$d.prototype.toString=function(){var a="^";this.Fh&&(a+="M:"+this.Fh);this.button&&(a+="B:"+this.button);this.key&&(a+="K:"+this.key);this.Od&&(a+="C:"+this.Od);this.Dj&&(a+="D:"+this.Dj);this.ae&&(a+="h");this.bubbles&&(a+="b");this.M!==n&&(a+="@"+this.M.toString());return a};w.g($d,"diagram",$d.prototype.h);w.defineProperty($d,{h:"diagram"},t("ba"),ba("ba"));w.g($d,"viewPoint",$d.prototype.Zc);w.defineProperty($d,{Zc:"viewPoint"},t("Ay"),function(a){w.i(a,F,$d,"viewPoint");this.Ay.Ua(a)});
w.g($d,"documentPoint",$d.prototype.M);w.defineProperty($d,{M:"documentPoint"},t("ex"),function(a){w.i(a,F,$d,"documentPoint");this.ex.Ua(a)});w.g($d,"modifiers",$d.prototype.Fh);w.defineProperty($d,{Fh:"modifiers"},t("cu"),ba("cu"));w.g($d,"button",$d.prototype.button);w.defineProperty($d,{button:"button"},t("et"),ba("et"));w.g($d,"key",$d.prototype.key);w.defineProperty($d,{key:"key"},t("Qt"),ba("Qt"));w.g($d,"down",$d.prototype.Fj);w.defineProperty($d,{Fj:"down"},t("vt"),ba("vt"));
w.g($d,"up",$d.prototype.Pi);w.defineProperty($d,{Pi:"up"},t("Su"),ba("Su"));w.g($d,"clickCount",$d.prototype.Od);w.defineProperty($d,{Od:"clickCount"},t("ht"),ba("ht"));w.g($d,"delta",$d.prototype.Dj);w.defineProperty($d,{Dj:"delta"},t("st"),ba("st"));w.g($d,"handled",$d.prototype.ae);w.defineProperty($d,{ae:"handled"},t("Ct"),ba("Ct"));w.g($d,"bubbles",$d.prototype.bubbles);w.defineProperty($d,{bubbles:"bubbles"},t("Ti"),ba("Ti"));w.g($d,"event",$d.prototype.event);
w.defineProperty($d,{event:"event"},t("Zi"),ba("Zi"));w.g($d,"timestamp",$d.prototype.timestamp);w.defineProperty($d,{timestamp:"timestamp"},t("Qu"),ba("Qu"));w.g($d,"targetDiagram",$d.prototype.pg);w.defineProperty($d,{pg:"targetDiagram"},t("Nu"),ba("Nu"));w.g($d,"targetObject",$d.prototype.Bd);w.defineProperty($d,{Bd:"targetObject"},t("Uf"),ba("Uf"));w.u($d,{Qk:"control"},function(){return 0!==(this.Fh&1)});w.u($d,{shift:"shift"},function(){return 0!==(this.Fh&4)});
w.u($d,{alt:"alt"},function(){return 0!==(this.Fh&2)});w.u($d,{EL:"meta"},function(){return 0!==(this.Fh&8)});w.u($d,{left:"left"},function(){return 0===this.button});w.u($d,{FL:"middle"},function(){return 1===this.button});w.u($d,{right:"right"},function(){return 2===this.button});function be(){this.ba=n;this.Bb="";this.su=this.Iu=n;this.ft=p}w.Q("DiagramEvent",be);be.prototype.copy=be.prototype.copy=function(){var a=new be;a.ba=this.ba;a.Bb=this.Bb;a.Iu=this.Iu;a.su=this.su;a.ft=this.ft;return a};
be.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");this.hw!==n&&(a+=":"+this.hw.toString());this.Tv!==n&&(a+="("+this.Tv.toString()+")");return a};w.g(be,"diagram",be.prototype.h);w.defineProperty(be,{h:"diagram"},t("ba"),ba("ba"));w.g(be,"name",be.prototype.name);w.defineProperty(be,{name:"name"},t("Bb"),ba("Bb"));w.g(be,"subject",be.prototype.hw);w.defineProperty(be,{hw:"subject"},t("Iu"),ba("Iu"));w.g(be,"parameter",be.prototype.Tv);
w.defineProperty(be,{Tv:"parameter"},t("su"),ba("su"));w.g(be,"cancel",be.prototype.cancel);w.defineProperty(be,{cancel:"cancel"},t("ft"),ba("ft"));function fe(){this.clear()}w.Q("ChangedEvent",fe);var ge;fe.Transaction=ge=w.s(fe,"Transaction",-1);var he;fe.Property=he=w.s(fe,"Property",0);var ie;fe.Insert=ie=w.s(fe,"Insert",1);var je;fe.Remove=je=w.s(fe,"Remove",2);
fe.prototype.clear=fe.prototype.clear=function(){this.gt=he;this.wu=this.bu="";this.fu=this.gu=this.nu=this.ou=this.mu=this.ba=this.Kd=n};
fe.prototype.copy=fe.prototype.copy=function(){var a=new fe;a.Kd=this.Kd;a.ba=this.ba;a.gt=this.gt;a.bu=this.bu;a.wu=this.wu;a.mu=this.mu;var b=this.ou;a.ou=w.lb(b)&&"function"===typeof b.O?b.O():b;b=this.nu;a.nu=w.lb(b)&&"function"===typeof b.O?b.O():b;b=this.gu;a.gu=w.lb(b)&&"function"===typeof b.O?b.O():b;b=this.fu;a.fu=w.lb(b)&&"function"===typeof b.O?b.O():b;return a};
fe.prototype.toString=function(){var a="",a=this.md===ge?a+"* ":this.md===he?a+(this.V!==n?"!m":"!d"):a+((this.V!==n?"!m":"!d")+this.md);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.Ve&&this.Ve!==this.propertyName&&(a+=" "+this.Ve);a+=": ";this.md===ge?this.oldValue!==n&&(a+=" "+this.oldValue):(this.object!==n&&(a+=ke(this.object)),this.oldValue!==n&&(a+="  old: "+ke(this.oldValue)),this.Ef!==n&&(a+=" "+this.Ef),this.newValue!==n&&(a+="  new: "+ke(this.newValue)),
this.Df!==n&&(a+=" "+this.Df));return a};fe.prototype.getValue=fe.prototype.qa=function(a){return a?this.oldValue:this.newValue};fe.prototype.getParam=fe.prototype.PK=function(a){return a?this.Ef:this.Df};fe.prototype.canUndo=fe.prototype.Ok=function(){return this.V!==n||this.h!==n?h:p};fe.prototype.undo=fe.prototype.il=function(){this.Ok()&&(this.V!==n?this.V.Kr(this,h):this.h!==n&&this.h.Kr(this,h))};fe.prototype.canRedo=fe.prototype.Mk=function(){return this.V!==n||this.h!==n?h:p};
fe.prototype.redo=fe.prototype.Co=function(){this.Mk()&&(this.V!==n?this.V.Kr(this,p):this.h!==n&&this.h.Kr(this,p))};w.g(fe,"model",fe.prototype.V);w.defineProperty(fe,{V:"model"},t("Kd"),ba("Kd"));w.g(fe,"diagram",fe.prototype.h);w.defineProperty(fe,{h:"diagram"},t("ba"),ba("ba"));w.g(fe,"change",fe.prototype.md);w.defineProperty(fe,{md:"change"},t("gt"),function(a){u&&w.ib(a,fe,fe,"change");this.gt=a});w.g(fe,"modelChange",fe.prototype.Ve);
w.defineProperty(fe,{Ve:"modelChange"},t("bu"),function(a){u&&w.k(a,"string",fe,"modelChange");this.bu=a});w.g(fe,"propertyName",fe.prototype.propertyName);w.defineProperty(fe,{propertyName:"propertyName"},t("wu"),function(a){u&&"string"!==typeof a&&w.i(a,Function,fe,"propertyName");this.wu=a});w.g(fe,"object",fe.prototype.object);w.defineProperty(fe,{object:"object"},t("mu"),ba("mu"));w.g(fe,"oldValue",fe.prototype.oldValue);w.defineProperty(fe,{oldValue:"oldValue"},t("ou"),ba("ou"));
w.g(fe,"oldParam",fe.prototype.Ef);w.defineProperty(fe,{Ef:"oldParam"},t("nu"),ba("nu"));w.g(fe,"newValue",fe.prototype.newValue);w.defineProperty(fe,{newValue:"newValue"},t("gu"),ba("gu"));w.g(fe,"newParam",fe.prototype.Df);w.defineProperty(fe,{Df:"newParam"},t("fu"),ba("fu"));
function B(a){1<arguments.length&&w.m("Model constructor can only take one optional argument, the Array of node data.");w.jc(this);this.Xw=this.Bb="";this.uk=p;this.jf=[];this.kc=new ka(n,Object);this.Jl="key";this.nt=this.Ut=n;this.Bq="category";this.yg=new ka(n,ma);this.fj=n;this.vl=this.qi=p;this.wy=n;this.sa=new le;a!==f&&(this.gg=a)}w.Q("Model",B);B.prototype.clear=B.prototype.clear=function(){this.jf=[];this.kc.clear();this.yg.clear();this.sa.clear()};
B.prototype.writeJsonProtected=B.prototype.mw=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.Zl&&(a+=',\n  "dataFormat": '+this.quote(this.Zl));this.eb&&(a+=',\n  "isReadOnly": '+this.eb);"key"!==this.al&&"string"===typeof this.al&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.al));"category"!==this.$k&&"string"===typeof this.$k&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.$k));return a};
B.prototype.mA=function(){return',\n  "nodeDataArray": '+me(this,this.gg,h)};B.prototype.readJsonProtected=B.prototype.Vv=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.Zl=a.dataFormat);a.isReadOnly&&(this.eb=a.isReadOnly);a.nodeKeyProperty&&(this.al=a.nodeKeyProperty);a.nodeCategoryProperty&&(this.$k=a.nodeCategoryProperty)};B.prototype.Nz=function(a){a.nodeDataArray&&(a=a.nodeDataArray,oe(this,a),this.gg=a)};
B.prototype.toString=function(a){a===f&&(a=0);if(1<a)return this.dA();var b=(""!==this.name?this.name:"")+" Model";if(0<a){var b=b+"\n node data:",a=this.gg,c=w.Sb(a),d;for(d=0;d<c;d++)var e=w.Eb(a,d),b=b+(" "+this.kb(e)+":"+ke(e))}return b};B.prototype.toJson=B.prototype.dA=function(a){a===f&&(a=this.constructor===B?"go.Model":this.constructor===O?"go.GraphLinksModel":this.constructor===De?"go.TreeModel":w.Uk(this));return'{ "class": '+this.quote(a)+this.writeJsonProtected()+this.mA()+"}"};
B.fromJson=function(a,b){b===f&&(b=n);b&&w.i(b,B,B,"fromJson:model");var c=n;if("string"===typeof a)if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){u&&w.trace("JSON.parse error: "+d.toString())}else w.trace("WARNING: no JSON.parse available");else"object"==typeof a?c=a:w.m("Unable to construct a Model from: "+a);if(b===n){var e;e=n;var g=c["class"];if("string"===typeof g)try{var i=n;0===g.indexOf("go.")?(g=g.substr(3),i=ea[g]):(i=ea[g])||(i=window[g]);"function"===typeof i&&
(e=new i)}catch(j){}e===n||e instanceof B?b=e:w.m("Unable to construct a Model of declared class: "+c["class"])}b===n&&(b=new O);b.readJsonProtected(c);b.Nz(c);return b};
function oe(a,b){if(w.isArray(b))for(var c=w.Sb(b),d=0;d<c;d++){var e=w.Eb(b,d);w.lb(e)&&w.gC(b,d,oe(a,e))}else if(w.lb(b)){for(d in b)if(e=b[d],w.lb(e)&&(e=oe(a,e),b[d]=e,"points"===d&&Array.isArray(e))){for(var g=h,i=0;i<e.length;i++)if("number"!==typeof e[i]){g=p;break}if(g){g=new z(F);for(i=0;i<e.length/2;i++){var j=new F(e[2*i],e[2*i+1]);g.add(j)}g.freeze();b[d]=g}}if("object"!==typeof b)c=b;else{d=b;e=b["class"];if("NaN"===e)d=NaN;else if("go.Point"===e)d=new F(Ee(b.x),Ee(b.y));else if("go.Size"===
e)d=new bb(Ee(b.width),Ee(b.height));else if("go.Rect"===e)d=new G(Ee(b.x),Ee(b.y),Ee(b.width),Ee(b.height));else if("go.Margin"===e)d=new hb(Ee(b.top),Ee(b.right),Ee(b.bottom),Ee(b.left));else if("go.Spot"===e)d="string"===typeof b["enum"]?qb(b["enum"]):new H(Ee(b.x),Ee(b.y),Ee(b.offsetX),Ee(b.offsetY));else if("go.Brush"===e){if(d=new Fe,d.type=w.dm(Fe,b.type),b.start instanceof H&&(d.start=b.start),b.end instanceof H&&(d.end=b.end),"number"===typeof b.startRadius&&(d.Jo=Ee(b.startRadius)),"number"===
typeof b.endRadius&&(d.Yn=Ee(b.endRadius)),e=b.colorStops)for(c in e)d.addColorStop(parseFloat(c),e[c])}else"go.Geometry"===e&&(d="string"===typeof b.path?xd(b.path):new hd,d.type=w.dm(hd,b.type),"number"===typeof b.startX&&(d.ma=Ee(b.startX)),"number"===typeof b.startY&&(d.na=Ee(b.startY)),"number"===typeof b.endX&&(d.C=Ee(b.endX)),"number"===typeof b.endY&&(d.D=Ee(b.endY)),b.spot1 instanceof H&&(d.v=b.spot1),b.spot2 instanceof H&&(d.w=b.spot2));c=d}return c}return b}
B.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"\t"===e?b+"\\t":b+e;return'"'+b+'"'};
B.prototype.writeJsonValue=B.prototype.nw=function(a){var b;if(a===f)b="undefined";else if(a===n)b="null";else if(a===h)b="true";else if(a===p)b="false";else if("string"===typeof a)b=this.quote(a);else if("number"===typeof a)b=Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString();else if(w.isArray(a))b=me(this,a);else if(w.lb(a)){var c=a;if(c instanceof F)a={"class":"go.Point",x:Ge(c.x),y:Ge(c.y)};else if(c instanceof bb)a={"class":"go.Size",width:Ge(c.width),height:Ge(c.height)};
else if(c instanceof G)a={"class":"go.Rect",x:Ge(c.x),y:Ge(c.y),width:Ge(c.width),height:Ge(c.height)};else if(c instanceof hb)a={"class":"go.Margin",top:Ge(c.top),right:Ge(c.right),bottom:Ge(c.bottom),left:Ge(c.left)};else if(c instanceof H)a=tb(c)?{"class":"go.Spot",x:Ge(c.x),y:Ge(c.y),offsetX:Ge(c.offsetX),offsetY:Ge(c.offsetY)}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof Fe){a={"class":"go.Brush",type:c.type.name};if(c.type===He)a.color=c.color;else if(c.type===Ie||c.type===Je)a.start=
c.start,a.end=c.end,c.type===Je&&(0!==c.Jo&&(a.startRadius=Ge(c.Jo)),isNaN(c.Yn)||(a.endRadius=Ge(c.Yn)));if(c.Sn!==n){for(var d={},c=c.Sn.l;c.next();)d[c.key.toString()]=c.value;a.colorStops=d}}else c instanceof hd&&(a={"class":"go.Geometry",type:c.type.name},0!==c.ma&&(a.startX=Ge(c.ma)),0!==c.na&&(a.startY=Ge(c.na)),0!==c.C&&(a.endX=Ge(c.C)),0!==c.D&&(a.endY=Ge(c.D)),c.v.I(Jb)||(a.spot1=c.v),c.w.I(Rb)||(a.spot2=c.w),c.type===id&&(a.path=ud(c)));var d="{",e=h;for(b in a)if(c=w.Va(a,b),!(c===f||
"__gohashid"===b||"_"===b[0]||"function"===typeof c))if(e?e=p:d+=", ",d+='"'+b+'":',"points"===b&&c instanceof z&&c.T===F){for(var g="[",c=c.l;c.next();){var i=c.value;1<g.length&&(g+=",");g+=this.nw(i.x);g+=",";g+=this.nw(i.y)}g+="]";d+=g}else d+=this.nw(c);b=d+"}"}else b="function"===typeof a?"null":a.toString();return b};function me(a,b,c){var d=w.Sb(b),e="[ ";c&&1<d&&(e+="\n");for(var g=0;g<d;g++){var i=w.Eb(b,g);i!==f&&(0<g&&(e+=",",c&&(e+="\n")),e+=a.nw(i))}c&&1<d&&(e+="\n");return e+" ]"}
function Ge(a){return isNaN(a)?"NaN":Infinity===a?"9e9999":-Infinity===a?"-9e9999":a}function Ee(a){return"number"===typeof a?a:"NaN"===a?NaN:"9e9999"===a?Infinity:"-9e9999"===a?-Infinity:parseFloat(a)}w.g(B,"name",B.prototype.name);w.defineProperty(B,{name:"name"},t("Bb"),function(a){var b=this.Bb;b!==a&&(w.k(a,"string",B,"name"),this.Bb=a,this.j("name",b,a))});w.g(B,"dataFormat",B.prototype.Zl);
w.defineProperty(B,{Zl:"dataFormat"},t("Xw"),function(a){var b=this.Xw;b!==a&&(w.k(a,"string",B,"dataFormat"),this.Xw=a,this.j("dataFormat",b,a))});w.g(B,"isReadOnly",B.prototype.eb);w.defineProperty(B,{eb:"isReadOnly"},t("uk"),function(a){var b=this.uk;b!==a&&(w.k(a,"boolean",B,"isReadOnly"),this.uk=a,this.j("isReadOnly",b,a))});B.prototype.addChangedListener=B.prototype.Gy=function(a){w.k(a,"function",B,"addChangedListener:listener");this.fj===n&&(this.fj=new z("function"));this.fj.add(a)};
B.prototype.removeChangedListener=B.prototype.Pz=function(a){w.k(a,"function",B,"removeChangedListener:listener");this.fj!==n&&(this.fj.remove(a),0===this.fj.count&&(this.fj=n))};B.prototype.bv=function(a){this.ub||this.sa.fD(a);if(this.fj!==n)for(var b=this.fj.l;b.next();){var c=b.value;c(a)}};B.prototype.raiseChangedEvent=B.prototype.Rc=function(a,b,c,d,e,g,i){Ke(this,"",a,b,c,d,e,g,i)};B.prototype.raiseChanged=B.prototype.j=function(a,b,c,d,e){Ke(this,"",he,a,this,b,c,d,e)};
B.prototype.raiseDataChanged=B.prototype.Mz=function(a,b,c,d,e,g){Ke(this,"",he,b,a,c,d,e,g)};function Ke(a,b,c,d,e,g,i,j,k){j===f&&(j=n);k===f&&(k=n);var l=new fe;l.V=a;l.md=c;l.Ve=b;l.propertyName=d;l.object=e;l.oldValue=g;l.Ef=j;l.newValue=i;l.Df=k;a.bv(l)}w.g(B,"undoManager",B.prototype.sa);w.defineProperty(B,{sa:"undoManager"},t("wy"),function(a){var b=this.wy;b!==a&&(w.i(a,le,B,"undoManager"),b!==n&&b.PH(this),this.wy=a,a!==n&&a.GF(this))});w.g(B,"skipsUndoManager",B.prototype.ub);
w.defineProperty(B,{ub:"skipsUndoManager"},t("qi"),function(a){w.k(a,"boolean",B,"skipsUndoManager");this.qi=a});B.prototype.Kr=function(a,b){if(a!==n&&a.V===this){var c=this.vl;try{this.vl=h,this.Ny(a,b)}finally{this.vl=c}}};
B.prototype.Ny=function(a,b){if(a.md===he){var c=a.object,d=a.propertyName,e=a.qa(b);w.Ka(c,d,e)}else a.md===ie?"nodeDataArray"===a.Ve?(c=a.newValue,w.lb(c)&&(d=this.kb(c),d!==f&&(b?(w.yi(this.jf,a.Df),this.kc.remove(d)):(w.xi(this.jf,a.Df,c),this.kc.add(d,c))))):""===a.Ve?(c=a.object,!w.isArray(c)&&a.propertyName&&(c=w.Va(a.object,a.propertyName)),w.isArray(c)&&(d=a.newValue,e=a.Df,b?w.yi(c,e):w.xi(c,e,d))):w.m("unknown ChangedEvent.Insert object: "+a.toString()):a.md===je?"nodeDataArray"===a.Ve?
(c=a.oldValue,w.lb(c)&&(d=this.kb(c),d!==f&&(b?(w.xi(this.jf,a.Ef,c),this.kc.add(d,c)):(w.yi(this.jf,a.Ef),this.kc.remove(d))))):""===a.Ve?(c=a.object,!w.isArray(c)&&a.propertyName&&(c=w.Va(a.object,a.propertyName)),w.isArray(c)&&(d=a.oldValue,e=a.Ef,b?w.xi(c,e,d):w.yi(c,e))):w.m("unknown ChangedEvent.Remove object: "+a.toString()):a.md!==ge&&w.m("unknown ChangedEvent: "+a.toString())};B.prototype.startTransaction=B.prototype.hc=function(a){return this.sa.hc(a)};
B.prototype.commitTransaction=B.prototype.ne=function(a){return this.sa.ne(a)};B.prototype.rollbackTransaction=B.prototype.Bs=function(){return this.sa.Bs()};B.prototype.updateTargetBindings=B.prototype.vb=function(a,b){b===f&&(b="");Ke(this,"SourceChanged",ge,b,a,n,n)};w.g(B,"nodeKeyProperty",B.prototype.al);
w.defineProperty(B,{al:"nodeKeyProperty"},t("Jl"),function(a){var b=this.Jl;b!==a&&(Le(a,B,"nodeKeyProperty"),0<this.kc.count&&w.m("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Jl=a,this.j("nodeKeyProperty",b,a))});function Le(a,b,c){"string"!==typeof a&&"function"!==typeof a&&w.ic(a,"string or function",b,c)}
B.prototype.getKeyForNodeData=B.prototype.kb=function(a){if(a!==n){var b=this.Jl;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Me(b))return b;u&&w.trace("Key value for node data "+a+" is not a number or a string: "+b)}}};
B.prototype.setKeyForNodeData=B.prototype.Yz=function(a,b){b===n&&(b=f);b!==f&&!Me(b)&&w.ic(b,"number or string",B,"setKeyForNodeData:key");if(a!==n){var c=this.Jl;if(""!==c)if(this.pe(a)){var d=w.Va(a,c);d!==b&&this.Oe(b)===n&&(w.Ka(a,c,b),this.kc.remove(d),this.kc.add(b,a),Ke(this,"nodeKey",he,c,a,d,b),"string"===typeof c&&this.vb(a,c),this.As(d,b))}else w.Ka(a,c,b)}};w.g(B,"makeUniqueKeyFunction",B.prototype.nH);
w.defineProperty(B,{nH:"makeUniqueKeyFunction"},t("Ut"),function(a){var b=this.Ut;b!==a&&(a!==n&&w.k(a,"function",B,"makeUniqueKeyFunction"),this.Ut=a,this.j("makeUniqueKeyFunction",b,a))});function Me(a){return"number"===typeof a||"string"===typeof a}B.prototype.containsNodeData=B.prototype.pe=function(a){a=this.kb(a);return a===f?p:this.kc.contains(a)};B.prototype.findNodeDataForKey=B.prototype.Oe=function(a){a===n&&w.m("Model.findNodeDataForKey:key must not be null");return a===f||!Me(a)?n:this.kc.qa(a)};
w.g(B,"nodeDataArray",B.prototype.gg);
w.defineProperty(B,{gg:"nodeDataArray"},t("jf"),function(a){var b=this.jf;if(b!==a){w.Lr(a,B,"nodeDataArray");this.kc.clear();this.hA();for(var c=w.Sb(a),d=0;d<c;d++){var e=w.Eb(a,d);if(!w.lb(e)){w.m("Model.nodeDataArray must only contain Objects, not: "+e);return}w.es(e)}this.jf=a;for(var g=new z(Object),d=0;d<c;d++){var e=w.Eb(a,d),i=this.kb(e);i===f?g.add(e):this.kc.qa(i)!==n?g.add(e):this.kc.add(i,e)}for(d=g.l;d.next();)e=d.value,this.ED(e),g=this.kb(e),this.kc.add(g,e);Ke(this,"nodeDataArray",
he,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=w.Eb(a,d),this.Fo(e),this.Eo(e);this.yg.clear();Array.isArray(a)||(this.eb=h)}});
B.prototype.makeNodeDataKeyUnique=B.prototype.ED=function(a){if(a!==n){var b=this.Jl;if(""!==b){var c=this.kb(a);if(c===f||this.kc.contains(c)){var d=this.Ut;if(d!==n&&(c=d(this,a),c!==f&&c!==n&&!this.kc.contains(c))){w.Ka(a,b,c);return}if("string"===typeof c){for(d=2;this.kc.contains(c+d);)d++;w.Ka(a,b,c+d)}else if(c===f||"number"===typeof c){for(d=-this.kc.count-1;this.kc.contains(d);)d--;w.Ka(a,b,d)}else w.m("Model.getKeyForNodeData returned something other than a string or a number: "+c)}}}};
B.prototype.addNodeData=B.prototype.Er=function(a){if(a!==n){w.es(a);var b=this.kb(a);b!==f&&this.kc.qa(b)===a||(this.ED(a),b=this.kb(a),this.kc.add(b,a),b=w.Sb(this.jf),w.xi(this.jf,b,a),Ke(this,"nodeDataArray",ie,"nodeDataArray",this,n,a,n,b),this.Fo(a),this.Eo(a))}};B.prototype.removeNodeData=B.prototype.eE=function(a){if(a!==n){var b=this.kb(a);b!==f&&this.kc.contains(b)&&(this.kc.remove(b),b=w.Ky(this.jf,a),0>b||(w.yi(this.jf,b),Ke(this,"nodeDataArray",je,"nodeDataArray",this,a,n,b,n),this.Rs(a)))}};
da=B.prototype;da.As=function(a,b){var c=Ne(this,a);c instanceof ma&&this.yg.add(b,c)};da.hA=aa();da.Fo=aa();da.Eo=aa();da.Rs=aa();function Oe(a,b,c){if(b!==f){var d=a.yg.qa(b);d===n&&(d=new ma,a.yg.add(b,d));d.add(c)}}function bf(a,b,c){if(b!==f){var d=a.yg.qa(b);d instanceof ma&&(c===f||c===n?a.yg.remove(b):(d.remove(c),0===d.count&&a.yg.remove(b)))}}
B.prototype.dumpDelayedReferences=B.prototype.nK=function(){w.trace("DelayedReferences ("+this.yg.count+")");for(var a=this.yg.l;a.next();){for(var b="",c=a.value.l;c.next();)b+=ke(c.value)+", ";w.trace("  "+a.key+": "+b)}};function Ne(a,b){if(b===f)return n;var c=a.yg.qa(b);return c instanceof ma?c:n}w.g(B,"copyNodeDataFunction",B.prototype.nG);
w.defineProperty(B,{nG:"copyNodeDataFunction"},t("nt"),function(a){var b=this.nt;b!==a&&(a!==n&&w.k(a,"function",B,"copyNodeDataFunction"),this.nt=a,this.j("copyNodeDataFunction",b,a))});B.prototype.copyNodeData=B.prototype.Aj=function(a){if(a===n)return n;var b=n,b=this.nt;if(b!==n)b=b(a,this);else{var b=new a.constructor,c;for(c in a)w.Ka(b,c,w.Va(a,c))}b&&w.jc(b);return b};
B.prototype.setDataProperty=B.prototype.bw=function(a,b,c){u&&(w.k(a,"object",B,"setDataProperty:data"),w.k(b,"string",B,"setDataProperty:propname"),""===b&&w.m("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.pe(a))if(b===this.al)this.Yz(a,c);else if(b===this.$k){this.aw(a,c);return}var d=w.Va(a,b);d!==c&&(w.Ka(a,b,c),this.Mz(a,b,d,c))};B.prototype.addArrayItem=B.prototype.CI=function(a,b){this.TG(a,-1,b)};
B.prototype.insertArrayItem=B.prototype.TG=function(a,b,c){u&&(w.Lr(a,B,"insertArrayItem:arr"),w.o(b,B,"insertArrayItem:idx"));a===this.jf&&w.m("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>b&&(b=w.Sb(a));w.xi(a,b,c);Ke(this,"",ie,"",a,n,c,n,b)};
B.prototype.removeArrayItem=B.prototype.VL=function(a,b){b===f&&(b=-1);u&&(w.Lr(a,B,"removeArrayItem:arr"),w.o(b,B,"removeArrayItem:idx"));a===this.jf&&w.m("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===b&&(b=w.Sb(a)-1);var c=w.Eb(a,b);w.yi(a,b);Ke(this,"",je,"",a,c,n,b,n)};w.g(B,"nodeCategoryProperty",B.prototype.$k);
w.defineProperty(B,{$k:"nodeCategoryProperty"},t("Bq"),function(a){var b=this.Bq;b!==a&&(Le(a,B,"nodeCategoryProperty"),this.Bq=a,this.j("nodeCategoryProperty",b,a))});B.prototype.getCategoryForNodeData=B.prototype.YC=function(a){if(a===n)return"";var b=this.Bq;if(""===b)return"";b=w.Va(a,b);if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
B.prototype.setCategoryForNodeData=B.prototype.aw=function(a,b){w.k(b,"string",B,"setCategoryForNodeData:cat");if(a!==n){var c=this.Bq;if(""!==c)if(this.pe(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ke(this,"nodeCategory",he,c,a,d,b))}else w.Ka(a,c,b)}};
function O(a,b){2<arguments.length&&w.m("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");B.call(this);this.wk=[];this.an=new ma(Object);this.ck=this.mt=n;this.cj="from";this.ej="to";this.iq=this.hq="";this.eq="category";this.kh=this.iu="";this.hu="isGroup";this.lj="group";a!==f&&(this.gg=a);b!==f&&(this.Rg=b)}w.Q("GraphLinksModel",O);w.Ea(O,B);
O.prototype.clear=O.prototype.clear=function(){B.prototype.clear.call(this);this.wk=[];this.an.clear()};O.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.dA();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){var b=b+"\n node data:",a=this.gg,c=w.Sb(a),d;for(d=0;d<c;d++)var e=w.Eb(a,d),b=b+(" "+this.kb(e)+":"+ke(e));b+="\n link data:";a=this.Rg;c=w.Sb(a);for(d=0;d<c;d++)e=w.Eb(a,d),b+=" "+this.fm(e)+"--\>"+this.gm(e)}return b};
O.prototype.writeJsonProtected=O.prototype.mw=function(){var a=B.prototype.mw.call(this),b="";"category"!==this.mo&&"string"===typeof this.mo&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.mo));"from"!==this.no&&"string"===typeof this.no&&(b+=',\n "linkFromKeyProperty": '+this.quote(this.no));"to"!==this.ro&&"string"===typeof this.ro&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.ro));""!==this.oo&&"string"===typeof this.oo&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.oo));""!==
this.so&&"string"===typeof this.so&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.so));""!==this.Ao&&"string"===typeof this.Ao&&(b+=',\n "nodeIsLinkLabelProperty": '+this.quote(this.Ao));""!==this.po&&"string"===typeof this.po&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.po));"isGroup"!==this.zo&&"string"===typeof this.zo&&(b+=',\n "nodeIsGroupProperty": '+this.quote(this.zo));"group"!==this.yo&&"string"===typeof this.yo&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.yo));return a+
b};O.prototype.mA=function(){var a=B.prototype.mA.call(this),b=',\n  "linkDataArray": '+me(this,this.Rg,h);return a+b};
O.prototype.readJsonProtected=O.prototype.Vv=function(a){B.prototype.Vv.call(this,a);a.linkFromKeyProperty&&(this.no=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.ro=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.oo=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.so=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.mo=a.linkCategoryProperty);a.nodeIsLinkLabelProperty&&(this.Ao=a.nodeIsLinkLabelProperty);a.linkLabelKeysProperty&&(this.po=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&
(this.zo=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&(this.yo=a.nodeGroupKeyProperty)};O.prototype.Nz=function(a){B.prototype.Nz.call(this,a);a.linkDataArray&&(a=a.linkDataArray,oe(this,a),this.Rg=a)};
O.prototype.Ny=function(a,b){if(a.md===ie){var c=n;"linkDataArray"===a.Ve?c=this.Rg:"linkLabelKeys"===a.Ve&&(c=this.Wk(a.object));if(w.isArray(c)){b?w.yi(c,a.Df):w.xi(c,a.Df,a.newValue);return}}else if(a.md===je&&(c=n,"linkDataArray"===a.Ve?c=this.Rg:"linkLabelKeys"===a.Ve&&(c=this.Wk(a.object)),w.isArray(c))){b?w.xi(c,a.Ef,a.oldValue):w.yi(c,a.Ef);return}B.prototype.Ny.call(this,a,b)};w.g(O,"archetypeNodeData",O.prototype.Ir);
w.defineProperty(O,{Ir:"archetypeNodeData"},t("ck"),function(a){var b=this.ck;b!==a&&(a!==n&&w.i(a,Object,O,"archetypeNodeData"),this.ck=a,this.j("archetypeNodeData",b,a))});O.prototype.lm=function(a){if(a!==f){var b=this.ck;if(b!==n){var c=this.Oe(a);c===n&&(c=this.Aj(b),w.Ka(c,this.Jl,a),this.Er(c))}return a}};w.g(O,"linkFromKeyProperty",O.prototype.no);
w.defineProperty(O,{no:"linkFromKeyProperty"},t("cj"),function(a){var b=this.cj;b!==a&&(Le(a,O,"linkFromKeyProperty"),this.cj=a,this.j("linkFromKeyProperty",b,a))});O.prototype.getFromKeyForLinkData=O.prototype.fm=function(a){if(a!==n){var b=this.cj;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Me(b))return b;u&&w.trace("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
O.prototype.setFromKeyForLinkData=O.prototype.dw=function(a,b){b===n&&(b=f);b!==f&&!Me(b)&&w.ic(b,"number or string",O,"setFromKeyForLinkData:key");if(a!==n){var c=this.cj;if(""!==c)if(b=this.lm(b),this.Ai(a)){var d=w.Va(a,c);d!==b&&(bf(this,d,a),w.Ka(a,c,b),this.Oe(b)===n&&Oe(this,b,a),Ke(this,"linkFromKey",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"linkToKeyProperty",O.prototype.ro);
w.defineProperty(O,{ro:"linkToKeyProperty"},t("ej"),function(a){var b=this.ej;b!==a&&(Le(a,O,"linkToKeyProperty"),this.ej=a,this.j("linkToKeyProperty",b,a))});O.prototype.getToKeyForLinkData=O.prototype.gm=function(a){if(a!==n){var b=this.ej;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Me(b))return b;u&&w.trace("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
O.prototype.setToKeyForLinkData=O.prototype.ew=function(a,b){b===n&&(b=f);b!==f&&!Me(b)&&w.ic(b,"number or string",O,"setToKeyForLinkData:key");if(a!==n){var c=this.ej;if(""!==c)if(b=this.lm(b),this.Ai(a)){var d=w.Va(a,c);d!==b&&(bf(this,d,a),w.Ka(a,c,b),this.Oe(b)===n&&Oe(this,b,a),Ke(this,"linkToKey",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"linkFromPortIdProperty",O.prototype.oo);
w.defineProperty(O,{oo:"linkFromPortIdProperty"},t("hq"),function(a){var b=this.hq;b!==a&&(Le(a,O,"linkFromPortIdProperty"),this.hq=a,this.j("linkFromPortIdProperty",b,a))});O.prototype.getFromPortIdForLinkData=O.prototype.HG=function(a){if(a===n)return"";var b=this.hq;if(""===b)return"";a=w.Va(a,b);return a===f?"":a};
O.prototype.setFromPortIdForLinkData=O.prototype.Gs=function(a,b){w.k(b,"string",O,"setFromPortIdForLinkData:portname");if(a!==n){var c=this.hq;if(""!==c)if(this.Ai(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ke(this,"linkFromPortId",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"linkToPortIdProperty",O.prototype.so);
w.defineProperty(O,{so:"linkToPortIdProperty"},t("iq"),function(a){var b=this.iq;b!==a&&(Le(a,O,"linkToPortIdProperty"),this.iq=a,this.j("linkToPortIdProperty",b,a))});O.prototype.getToPortIdForLinkData=O.prototype.KG=function(a){if(a===n)return"";var b=this.iq;if(""===b)return"";a=w.Va(a,b);return a===f?"":a};
O.prototype.setToPortIdForLinkData=O.prototype.Hs=function(a,b){w.k(b,"string",O,"setToPortIdForLinkData:portname");if(a!==n){var c=this.iq;if(""!==c)if(this.Ai(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ke(this,"linkToPortId",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"nodeIsLinkLabelProperty",O.prototype.Ao);
w.defineProperty(O,{Ao:"nodeIsLinkLabelProperty"},t("iu"),function(a){var b=this.iu;b!==a&&(Le(a,O,"nodeIsLinkLabelProperty"),this.iu=a,this.j("nodeIsLinkLabelProperty",b,a))});O.prototype.isLinkLabelForNodeData=O.prototype.tz=function(a){if(a===n)return p;var b=this.iu;return""===b?p:w.Va(a,b)?h:p};w.g(O,"linkLabelKeysProperty",O.prototype.po);
w.defineProperty(O,{po:"linkLabelKeysProperty"},t("kh"),function(a){var b=this.kh;b!==a&&(Le(a,O,"linkLabelKeysProperty"),this.kh=a,this.j("linkLabelKeysProperty",b,a))});O.prototype.getLabelKeysForLinkData=O.prototype.Wk=function(a){if(a===n)return[];var b=this.kh;if(""===b)return[];a=w.Va(a,b);return a===f?[]:a};
O.prototype.setLabelKeysForLinkData=O.prototype.xE=function(a,b){w.Lr(b,O,"setLabelKeysForLinkData:arr");if(a!==n){var c=this.kh;if(""!==c)if(this.Ai(a)){var d=w.Va(a,c);d===f&&(d=[]);if(d!==b){for(var e=w.Sb(d),g=0;g<e;g++){var i=w.Eb(d,g);bf(this,i,a)}w.Ka(a,c,b);e=w.Sb(b);for(g=0;g<e;g++)i=w.Eb(b,g),this.Oe(i)===n&&Oe(this,i,a);Ke(this,"linkLabelKeys",he,c,a,d,b);"string"===typeof c&&this.vb(a,c)}}else w.Ka(a,c,b)}};
O.prototype.addLabelKeyForLinkData=O.prototype.ZB=function(a,b){if(!(b===n||b===f))if(Me(b)||w.ic(b,"number or string",O,"addLabelKeyForLinkData:key"),a!==n){var c=this.kh;if(""!==c){var d=w.Va(a,c);d===f?this.xE(a,[b]):w.isArray(d)?0<=w.Ky(d,b)||(w.xi(d,Infinity,b),this.Ai(a)&&(this.Oe(b)===n&&Oe(this,b,a),Ke(this,"linkLabelKeys",ie,c,a,n,b))):w.m(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
O.prototype.removeLabelKeyForLinkData=O.prototype.NH=function(a,b){if(!(b===n||b===f))if(Me(b)||w.ic(b,"number or string",O,"removeLabelKeyForLinkData:key"),a!==n){var c=this.kh;if(""!==c){var d=w.Va(a,c);if(w.isArray(d)){var e=w.Ky(d,b);0>e||(w.yi(d,e),this.Ai(a)&&(bf(this,b,a),Ke(this,"linkLabelKeys",je,c,a,b,n)))}else d!==f&&w.m(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};w.g(O,"linkDataArray",O.prototype.Rg);
w.defineProperty(O,{Rg:"linkDataArray"},t("wk"),function(a){var b=this.wk;if(b!==a){w.Lr(a,O,"linkDataArray");for(var c=w.Sb(a),d=0;d<c;d++){var e=w.Eb(a,d);if(!w.lb(e)){w.m("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}w.es(e)}this.wk=a;for(var g=new ma(Object),d=0;d<c;d++)e=w.Eb(a,d),g.add(e);this.an=g;Ke(this,"linkDataArray",he,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=w.Eb(a,d),cf(this,e)}});
O.prototype.containsLinkData=O.prototype.Ai=function(a){return a===n?p:this.an.contains(a)};O.prototype.addLinkData=O.prototype.$B=function(a){if(a!==n){if(w.ec(a)===f)w.jc(a);else if(this.Ai(a))return;this.an.add(a);var b=w.Sb(this.wk);w.xi(this.wk,b,a);Ke(this,"linkDataArray",ie,"linkDataArray",this,n,a,n,b);cf(this,a)}};
O.prototype.removeLinkData=O.prototype.OH=function(a){if(a!==n){this.an.remove(a);var b=this.wk.indexOf(a);if(!(0>b)){w.yi(this.wk,b);Ke(this,"linkDataArray",je,"linkDataArray",this,a,n,b,n);b=this.fm(a);bf(this,b,a);b=this.gm(a);bf(this,b,a);for(var c=this.Wk(a),d=w.Sb(c),e=0;e<d;e++)b=w.Eb(c,e),bf(this,b,a)}}};function cf(a,b){var c=a.fm(b),c=a.lm(c);a.Oe(c)===n&&Oe(a,c,b);c=a.gm(b);c=a.lm(c);a.Oe(c)===n&&Oe(a,c,b);for(var d=a.Wk(b),e=w.Sb(d),g=0;g<e;g++)c=w.Eb(d,g),a.Oe(c)===n&&Oe(a,c,b)}
w.g(O,"copyLinkDataFunction",O.prototype.mG);w.defineProperty(O,{mG:"copyLinkDataFunction"},t("mt"),function(a){var b=this.mt;b!==a&&(a!==n&&w.k(a,"function",O,"copyLinkDataFunction"),this.mt=a,this.j("copyLinkDataFunction",b,a))});
O.prototype.copyLinkData=O.prototype.wC=function(a){if(a===n)return n;var b=n,b=this.mt;if(b!==n)b=b(a,this);else{var b=new a.constructor,c;for(c in a)w.Ka(b,c,w.Va(a,c))}b&&(w.jc(b),""!==this.cj&&w.Ka(b,this.cj,f),""!==this.ej&&w.Ka(b,this.ej,f),""!==this.kh&&w.Ka(b,this.kh,[]));return b};w.g(O,"nodeIsGroupProperty",O.prototype.zo);w.defineProperty(O,{zo:"nodeIsGroupProperty"},t("hu"),function(a){var b=this.hu;b!==a&&(Le(a,O,"nodeIsGroupProperty"),this.hu=a,this.j("nodeIsGroupProperty",b,a))});
O.prototype.isGroupForNodeData=O.prototype.qz=function(a){if(a===n)return p;var b=this.hu;return""===b?p:w.Va(a,b)?h:p};w.g(O,"nodeGroupKeyProperty",O.prototype.yo);w.defineProperty(O,{yo:"nodeGroupKeyProperty"},t("lj"),function(a){var b=this.lj;b!==a&&(Le(a,O,"nodeGroupKeyProperty"),this.lj=a,this.j("nodeGroupKeyProperty",b,a))});
O.prototype.getGroupKeyForNodeData=O.prototype.co=function(a){if(a!==n){var b=this.lj;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Me(b))return b;u&&w.trace("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
O.prototype.setGroupKeyForNodeData=O.prototype.Xz=function(a,b){b===n&&(b=f);b!==f&&!Me(b)&&w.ic(b,"number or string",O,"setGroupKeyForNodeData:key");if(a!==n){var c=this.lj;if(""!==c)if(this.pe(a)){var d=w.Va(a,c);d!==b&&(bf(this,d,a),w.Ka(a,c,b),this.Oe(b)===n&&Oe(this,b,a),Ke(this,"nodeGroupKey",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};O.prototype.copyNodeData=O.prototype.Aj=function(a){if(a===n)return n;a=B.prototype.Aj.call(this,a);""!==this.lj&&w.Ka(a,this.lj,f);return a};
O.prototype.setDataProperty=O.prototype.bw=function(a,b,c){u&&(w.k(a,"object",O,"setDataProperty:data"),w.k(b,"string",O,"setDataProperty:propname"),""===b&&w.m("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.pe(a))if(b===this.al)this.Yz(a,c);else{if(b===this.$k){this.aw(a,c);return}if(b===this.yo){this.Xz(a,c);return}b===this.zo?w.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b):b===this.Ao&&
w.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: "+b)}else if(this.Ai(a)){if(b===this.no){this.dw(a,c);return}if(b===this.ro){this.ew(a,c);return}if(b===this.oo){this.Gs(a,c);return}if(b===this.so){this.Hs(a,c);return}if(b===this.mo){this.wE(a,c);return}if(b===this.po){this.xE(a,c);return}}var d=w.Va(a,b);d!==c&&(w.Ka(a,b,c),this.Mz(a,b,d,c))};da=O.prototype;
da.As=function(a,b){B.prototype.As.call(this,a,b);for(var c=this.kc.l;c.next();)this.Rz(c.value,a,b);for(c=this.an.l;c.next();){var d=c.value,e=a,g=b;if(this.fm(d)===e){var i=this.cj;w.Ka(d,i,g);Ke(this,"linkFromKey",he,i,d,e,g);"string"===typeof i&&this.vb(d,i)}this.gm(d)===e&&(i=this.ej,w.Ka(d,i,g),Ke(this,"linkToKey",he,i,d,e,g),"string"===typeof i&&this.vb(d,i));for(var j=this.Wk(d),k=w.Sb(j),i=this.kh,l=0;l<k;l++)w.Eb(j,l)===e&&(w.gC(j,l,g),Ke(this,"linkLabelKeys",ie,i,d,e,g))}};
da.Rz=function(a,b,c){if(this.co(a)===b){var d=this.lj;w.Ka(a,d,c);Ke(this,"nodeGroupKey",he,d,a,b,c);"string"===typeof d&&this.vb(a,d)}};da.hA=function(){B.prototype.hA.call(this);for(var a=this.Rg,b=w.Sb(a),c=0;c<b;c++)cf(this,w.Eb(a,c))};
da.Fo=function(a){B.prototype.Fo.call(this,a);var a=this.kb(a),b=Ne(this,a);if(b!==n){for(var c=new z(Object),b=b.l;b.next();){var d=b.value;if(this.pe(d)){if(this.co(d)===a){var e=this.lj;Ke(this,"nodeGroupKey",he,e,d,a,a);"string"===typeof e&&this.vb(d,e);c.add(d)}}else{this.fm(d)===a&&(e=this.cj,Ke(this,"linkFromKey",he,e,d,a,a),"string"===typeof e&&this.vb(d,e),c.add(d));this.gm(d)===a&&(e=this.ej,Ke(this,"linkToKey",he,e,d,a,a),"string"===typeof e&&this.vb(d,e),c.add(d));for(var g=this.Wk(d),
i=w.Sb(g),e=this.kh,j=0;j<i;j++)w.Eb(g,j)===a&&(Ke(this,"linkLabelKeys",ie,e,d,a,a),c.add(d))}}for(c=c.l;c.next();)bf(this,a,c.value)}};da.Eo=function(a){B.prototype.Eo.call(this,a);var b=this.co(a);this.Oe(b)===n&&Oe(this,b,a)};da.Rs=function(a){B.prototype.Rs.call(this,a);var b=this.co(a);bf(this,b,a)};w.g(O,"linkCategoryProperty",O.prototype.mo);
w.defineProperty(O,{mo:"linkCategoryProperty"},t("eq"),function(a){var b=this.eq;b!==a&&(Le(a,O,"linkCategoryProperty"),this.eq=a,this.j("linkCategoryProperty",b,a))});O.prototype.getCategoryForLinkData=O.prototype.XC=function(a){if(a===n)return"";var b=this.eq;if(""===b)return"";b=w.Va(a,b);if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("getCategoryForLinkData found a non-string category for "+a+": "+b);return b};
O.prototype.setCategoryForLinkData=O.prototype.wE=function(a,b){w.k(b,"string",O,"setCategoryForLinkData:cat");if(a!==n){var c=this.eq;if(""===c)return"";if(this.Ai(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ke(this,"linkCategory",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};
function De(a){1<arguments.length&&w.m("TreeModel constructor can only take one optional argument, the Array of node data.");B.call(this);this.mj="parent";this.Fq="parentLinkCategory";a!==f&&(this.gg=a)}w.Q("TreeModel",De);w.Ea(De,B);De.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.dA();var b=(""!==this.name?this.name:"")+" TreeModel";if(0<a){var b=b+"\n node data:",a=this.gg,c=w.Sb(a),d;for(d=0;d<c;d++)var e=w.Eb(a,d),b=b+(" "+this.kb(e)+":"+ke(e))}return b};
De.prototype.writeJsonProtected=De.prototype.mw=function(){var a=B.prototype.mw.call(this),b="";"parent"!==this.Bo&&"string"===typeof this.Bo&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.Bo));return a+b};De.prototype.readJsonProtected=De.prototype.Vv=function(a){B.prototype.Vv.call(this,a);a.nodeParentKeyProperty&&(this.Bo=a.nodeParentKeyProperty)};De.prototype.lm=function(a){return a};w.g(De,"nodeParentKeyProperty",De.prototype.Bo);
w.defineProperty(De,{Bo:"nodeParentKeyProperty"},t("mj"),function(a){var b=this.mj;b!==a&&(Le(a,De,"nodeParentKeyProperty"),this.mj=a,this.j("nodeParentKeyProperty",b,a))});De.prototype.getParentKeyForNodeData=De.prototype.eo=function(a){if(a!==n){var b=this.mj;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Me(b))return b;u&&w.trace("ParentKey value for node data "+a+" is not a number or a string: "+b)}}};
De.prototype.setParentKeyForNodeData=De.prototype.Ff=function(a,b){b===n&&(b=f);b!==f&&!Me(b)&&w.ic(b,"number or string",De,"setParentKeyForNodeData:key");if(a!==n){var c=this.mj;if(""!==c)if(b=this.lm(b),this.pe(a)){var d=w.Va(a,c);d!==b&&(bf(this,d,a),w.Ka(a,c,b),this.Oe(b)===n&&Oe(this,b,a),Ke(this,"nodeParentKey",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(De,"parentLinkCategoryProperty",De.prototype.FH);
w.defineProperty(De,{FH:"parentLinkCategoryProperty"},t("Fq"),function(a){var b=this.Fq;b!==a&&(Le(a,De,"parentLinkCategoryProperty"),this.Fq=a,this.j("parentLinkCategoryProperty",b,a))});De.prototype.getParentLinkCategoryForNodeData=De.prototype.JG=function(a){if(a===n)return"";var b=this.Fq;if(""===b)return"";b=w.Va(a,b);if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b);return b};
De.prototype.setParentLinkCategoryForNodeData=De.prototype.ZH=function(a,b){w.k(b,"string",De,"setParentLinkCategoryForNodeData:cat");if(a!==n){var c=this.Fq;if(""===c)return"";if(this.pe(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ke(this,"parentLinkCategory",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};De.prototype.copyNodeData=De.prototype.Aj=function(a){if(a===n)return n;a=B.prototype.Aj.call(this,a);""!==this.mj&&w.Ka(a,this.mj,f);return a};
De.prototype.setDataProperty=De.prototype.bw=function(a,b,c){u&&(w.k(a,"object",B,"setDataProperty:data"),w.k(b,"string",B,"setDataProperty:propname"),""===b&&w.m("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.pe(a))if(b===this.al)this.Yz(a,c);else{if(b===this.$k){this.aw(a,c);return}if(b===this.Bo){this.Ff(a,c);return}}var d=w.Va(a,b);d!==c&&(w.Ka(a,b,c),this.Mz(a,b,d,c))};da=De.prototype;
da.As=function(a,b){B.prototype.As.call(this,a,b);for(var c=this.kc.l;c.next();)this.Rz(c.value,a,b)};da.Rz=function(a,b,c){if(this.eo(a)===b){var d=this.mj;w.Ka(a,d,c);Ke(this,"nodeParentKey",he,d,a,b,c);"string"===typeof d&&this.vb(a,d)}};
da.Fo=function(a){B.prototype.Fo.call(this,a);var a=this.kb(a),b=Ne(this,a);if(b!==n){for(var c=new z(Object),b=b.l;b.next();){var d=b.value;if(this.pe(d)&&this.eo(d)===a){var e=this.mj;Ke(this,"nodeParentKey",he,e,d,a,a);"string"===typeof e&&this.vb(d,e);c.add(d)}}for(c=c.l;c.next();)bf(this,a,c.value)}};da.Eo=function(a){B.prototype.Eo.call(this,a);var b=this.eo(a),b=this.lm(b);this.Oe(b)===n&&Oe(this,b,a)};da.Rs=function(a){B.prototype.Rs.call(this,a);var b=this.eo(a);bf(this,b,a)};
function df(a,b,c){w.jc(this);a===f?a="":w.k(a,"string",df,"constructor:targetprop");b===f?b=a:w.k(b,"string",df,"constructor:sourceprop");c===f?c=n:c!==n&&w.k(c,"function",df,"constructor:conv");this.KB="";this.Uf=n;this.Ou=a;this.Mu=this.ly=0;this.BB=n;this.Gu=b;this.Uw=c;this.Hx=ef;this.Qw=n}w.Q("Binding",df);var ef;df.OneWay=ef=w.s(df,"OneWay",1);var ff;df.TwoWay=ff=w.s(df,"TwoWay",2);
df.parseEnum=function(a,b){w.k(a,"function",df,"parseEnum:ctor");w.ib(b,a,df,"parseEnum:defval");return function(c){return w.dm(a,c)||b}};var ke;df.toString=ke=function(a){var b=a;w.lb(a)&&(a.text?b=a.text:a.Text?b=a.Text:a.name?b=a.name:a.Name?b=a.Name:a.key!==f?b=a.key:a.Key!==f?b=a.Key:a.id!==f?b=a.id:a.Id!==f?b=a.Id:a.ID!==f&&(b=a.ID));return b===f?"undefined":b===n?"null":b.toString()};df.prototype.toString=function(){return"Binding("+this.rm+" "+this.bA+":"+this.$z+")"};
df.prototype.freeze=function(){this.ab=h;return this};df.prototype.Ia=function(){this.ab=p;return this};w.g(df,"targetId",df.prototype.rm);w.defineProperty(df,{rm:n},t("KB"),function(a){w.H(this);w.k(a,"string",df,"targetId");this.KB=a});w.g(df,"targetProperty",df.prototype.bA);w.defineProperty(df,{bA:"targetProperty"},t("Ou"),function(a){w.H(this);w.k(a,"string",df,"targetProperty");this.Ou=a});w.g(df,"sourceName",df.prototype.Ks);
w.defineProperty(df,{Ks:"sourceName"},t("BB"),function(a){w.H(this);w.k(a,"string",df,"sourceName");this.BB=a});w.g(df,"sourceProperty",df.prototype.$z);w.defineProperty(df,{$z:"sourceProperty"},t("Gu"),function(a){w.H(this);w.k(a,"string",df,"sourceProperty");this.Gu=a});w.g(df,"converter",df.prototype.tC);w.defineProperty(df,{tC:"converter"},t("Uw"),function(a){w.H(this);a!==n&&w.k(a,"function",df,"converter");this.Uw=a});w.g(df,"backConverter",df.prototype.kC);
w.defineProperty(df,{kC:"backConverter"},t("Qw"),function(a){w.H(this);a!==n&&w.k(a,"function",df,"backConverter");this.Qw=a});w.g(df,"mode",df.prototype.mode);w.defineProperty(df,{mode:"mode"},t("Hx"),function(a){w.H(this);w.ib(a,df,df,"mode");this.Hx=a});df.prototype.makeTwoWay=df.prototype.wL=function(a){a===f&&(a=n);this.mode=ff;this.kC=a;return this};df.prototype.ofObject=df.prototype.Kz=function(a){a===f&&(a="");u&&w.k(a,"string",df,"ofObject:srcname");this.Ks=a;return this};
df.prototype.updateTarget=df.prototype.VE=function(a,b,c){var d=this.Gu;if(!(c&&d!==c)){var c=this.Ou,e=this.Uw;if(!(e===n&&""===c)){u&&("string"===typeof c&&"function"!==typeof a.setAttribute&&!w.nz(a,c))&&w.trace("Binding error: undefined target property: "+c+" on "+a.toString());var g=b;""!==d&&(g=w.Va(b,d));if(g!==f)if(e===n)""!==c&&w.Ka(a,c,g);else try{if(""!==c){var i=e(g,a);w.Ka(a,c,i)}else e(g,a)}catch(j){u&&w.trace("Binding error: "+j.toString())}}}};
df.prototype.updateSource=df.prototype.UE=function(a,b,c,d){if(this.Hx===ff){var e=this.Ou;if(!(c&&e!==c)){var c=this.Gu,g=this.Qw;if(!(g===n&&""===c)){var i=a;""!==e&&(i=w.Va(a,e));if(i!==f)if(g===n)d&&d.V?d.V.bw(b,c,i):w.Ka(b,c,i);else try{if(""!==c){var j=g(i,b);d&&d.V?d.V.bw(b,c,j):w.Ka(b,c,j)}else g(i,b)}catch(k){u&&w.trace("Binding error: "+k.toString())}}}}};function gf(){this.eF=(new z(fe)).freeze();this.Bb="";this.bB=p}w.Q("Transaction",gf);
gf.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.xh.count.toString()+(this.fo?"":", incomplete");if(a!==f&&0<a)for(var c=this.xh.count,d=0;d<c;d++){var e=this.xh.oa(d);e!==n&&(b+="\n  "+e.toString(a-1))}return b};gf.prototype.clear=gf.prototype.clear=function(){var a=this.xh;a.Ia();for(var b=a.count-1;0<=b;b--){var c=a.oa(b);c!==n&&c.clear()}a.clear();a.freeze()};gf.prototype.canUndo=gf.prototype.Ok=t("fo");
gf.prototype.undo=gf.prototype.il=function(){if(this.Ok())for(var a=this.xh.count-1;0<=a;a--){var b=this.xh.oa(a);b!==n&&b.il()}};gf.prototype.canRedo=gf.prototype.Mk=t("fo");gf.prototype.redo=gf.prototype.Co=function(){if(this.Mk())for(var a=this.xh.count,b=0;b<a;b++){var c=this.xh.oa(b);c!==n&&c.Co()}};w.u(gf,{xh:"changes"},t("eF"));w.g(gf,"name",gf.prototype.name);w.defineProperty(gf,{name:"name"},t("Bb"),ba("Bb"));w.g(gf,"isComplete",gf.prototype.fo);
w.defineProperty(gf,{fo:"isComplete"},t("bB"),ba("bB"));function le(){this.Ix=new ma(B);this.bi=p;this.hF=(new z(gf)).freeze();this.pk=-1;this.iB=999;this.ci=p;this.rt=n;this.Fk=0;this.Rw=p;u&&(this.Rw=h);this.Gg=(new z("string")).freeze();this.fn=new z("number");this.lx=h}w.Q("UndoManager",le);
le.prototype.toString=function(a){for(var b="UndoManager "+this.Ij+"<"+this.history.count+"<="+this.Bz,b=b+"[",c=this.QD.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.QD.oa(d);b+="]";if(a!==f&&0<a){c=this.history.count;for(d=0;d<c;d++)b+="\n "+this.history.oa(d).toString(a-1)}return b};
le.prototype.clear=le.prototype.clear=function(){var a=this.history;a.Ia();for(var b=a.count-1;0<=b;b--){var c=a.oa(b);c!==n&&c.clear()}a.clear();this.pk=-1;a.freeze();this.ci=p;this.rt=n;this.Fk=0;this.Gg.Ia();this.Gg.clear();this.Gg.freeze();this.fn.clear()};le.prototype.addModel=le.prototype.GF=function(a){this.Ix.add(a)};le.prototype.removeModel=le.prototype.PH=function(a){this.Ix.remove(a)};
le.prototype.startTransaction=le.prototype.hc=function(a){a===n&&(a="");if(this.tb)return p;this.lx===h&&(this.lx=p,this.Fk++,this.Vd("StartingFirstTransaction",a,this.Yl),0<this.Fk&&this.Fk--);this.isEnabled&&(this.Gg.Ia(),this.Gg.add(a),this.Gg.freeze(),this.Yl===n?this.fn.add(0):this.fn.add(this.Yl.xh.count));this.Fk++;var b=1===this.hl;b&&this.Vd("StartedTransaction",a);return b};le.prototype.commitTransaction=le.prototype.ne=function(a){return hf(this,h,a)};
le.prototype.rollbackTransaction=le.prototype.Bs=function(){return hf(this,p,"")};
function hf(a,b,c){if(a.tb)return p;a.Oy&&1>a.hl&&w.trace("Ending transaction without having started a transaction: "+c);var d=1===a.hl;d&&(b&&a.isEnabled)&&a.Vd("CommittingTransaction",c,a.Yl);var e=0;if(0<a.hl&&(a.Fk--,a.isEnabled)){var g=a.Gg.count;0<g&&(""===c&&(c=a.Gg.oa(0)),a.Gg.Ia(),a.Gg.Ye(g-1),a.Gg.freeze());g=a.fn.count;0<g&&(e=a.fn.oa(g-1),a.fn.Ye(g-1))}g=a.Yl;if(d){if(b){if(a.isEnabled&&g!==n){b=g;b.fo=h;b.name=c;d=a.history;d.Ia();for(e=d.count-1;e>a.Ij;e--)g=d.oa(e),g!==n&&g.clear(),
d.Ye(e);e=a.Bz;0===e&&(e=1);0<e&&d.count>=e&&(g=d.oa(0),g!==n&&g.clear(),d.Ye(0),a.pk--);d.add(b);a.pk++;d.freeze();g=b}a.Vd("CommittedTransaction",c,g)}else{a.ci=h;try{a.isEnabled&&g!==n&&(g.fo=h,g.il())}finally{a.Vd("RolledBackTransaction",c,g),a.ci=p}g!==n&&g.clear()}a.rt=n;return h}if(a.isEnabled&&!b&&g!==n){a=e;c=g.xh;for(b=c.count-1;b>=a;b--)d=c.oa(b),d!==n&&d.il(),c.Ia(),c.Ye(b);c.freeze()}return p}
le.prototype.canUndo=le.prototype.Ok=function(){if(!this.isEnabled||0<this.hl||this.tb)return p;var a=this.OE;return a!==n&&a.Ok()?h:p};le.prototype.undo=le.prototype.il=function(){if(this.Ok()){var a=this.OE;try{this.Vd("StartingUndo","Undo",a),this.ci=h,this.pk--,a.il()}catch(b){w.trace("undo error: "+b.toString())}finally{this.ci=p,this.Vd("FinishedUndo","Undo",a)}}};
le.prototype.canRedo=le.prototype.Mk=function(){if(!this.isEnabled||0<this.hl||this.tb)return p;var a=this.NE;return a!==n&&a.Mk()?h:p};le.prototype.redo=le.prototype.Co=function(){if(this.Mk()){var a=this.NE;try{this.Vd("StartingRedo","Redo",a),this.ci=h,this.pk++,a.Co()}catch(b){w.trace("redo error: "+b.toString())}finally{this.ci=p,this.Vd("FinishedRedo","Redo",a)}}};
le.prototype.Vd=function(a,b,c){c===f&&(c=n);var d=new fe;d.md=ge;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.rH;a.next();)b=a.value,d.V=b,b.bv(d)};le.prototype.handleChanged=le.prototype.fD=function(a){if(this.isEnabled&&!this.tb&&!this.skipsEvent(a)){var b=this.Yl;b===n&&(this.rt=b=new gf);var c=a.copy(),b=b.xh;b.Ia();b.add(c);b.freeze();this.Oy&&(0>=this.hl&&!this.lx)&&(a=a.h,a!==n&&a.Bg===p||w.trace("Change not within a transaction: "+c.toString()))}};
le.prototype.skipsEvent=le.prototype.iM=function(a){if(a===n||0>a.md.value)return h;a=a.object;if(a instanceof P){if(a=a.Oa,a!==n&&a.zc)return h}else if(a instanceof jf&&a.zc)return h;return p};w.u(le,{rH:"models"},function(){return this.Ix.l});w.g(le,"isEnabled",le.prototype.isEnabled);w.defineProperty(le,{isEnabled:"isEnabled"},t("bi"),ba("bi"));w.u(le,{OE:"transactionToUndo"},function(){return 0<=this.Ij&&this.Ij<=this.history.count-1?this.history.oa(this.Ij):n});
w.u(le,{NE:"transactionToRedo"},function(){return this.Ij<this.history.count-1?this.history.oa(this.Ij+1):n});w.u(le,{tb:"isUndoingRedoing"},t("ci"));w.u(le,{history:"history"},t("hF"));w.g(le,"maxHistoryLength",le.prototype.Bz);w.defineProperty(le,{Bz:"maxHistoryLength"},t("iB"),ba("iB"));w.u(le,{Ij:"historyIndex"},t("pk"));w.u(le,{Yl:"currentTransaction"},t("rt"));w.u(le,{hl:"transactionLevel"},t("Fk"));w.u(le,{XG:"isInTransaction"},function(){return 0<this.Fk});
w.defineProperty(le,{Oy:"checksTransactionLevel"},t("Rw"),ba("Rw"));w.u(le,{QD:"nestedTransactionNames"},t("Gg"));function pa(){this.ba=n;this.MA=this.EA=p;this.yk=this.wA=n;this.TB=1.05;this.Dx=NaN;this.fB=n;this.UB=NaN;this.AF=n}w.Q("CommandHandler",pa);var kf=n,lf="";pa.prototype.toString=ca("CommandHandler");w.u(pa,{h:"diagram"},t("ba"));pa.prototype.ee=function(a){u&&a!==n&&w.i(a,A,pa,"setDiagram");this.ba=a};
pa.prototype.doKeyDown=pa.prototype.az=function(){var a=this.h;if(a!==n){var b=a.N,c=b.Qk,d=b.shift,e=b.alt,g=b.key;c&&("C"===g||"Insert"===g)?this.canCopySelection()&&this.copySelection():c&&"X"===g||d&&"Del"===g?this.canCutSelection()&&this.cutSelection():"Del"===g?this.canDeleteSelection()&&this.deleteSelection():c&&"V"===g||d&&"Insert"===g?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===g||e&&d&&"Backspace"===g?this.canRedo()&&this.redo():c&&"Z"===g||e&&"Backspace"===g?this.canUndo()&&
this.undo():c&&"A"===g?this.canSelectAll()&&this.selectAll():"Esc"===g?this.canStopCommand()&&this.stopCommand():"Up"===g?a.vf&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===g?a.vf&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===g?a.uf&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===g?a.uf&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===g?d&&a.uf?a.scroll("page","left"):a.vf&&a.scroll("page","up"):"PageDown"===g?d&&a.uf?a.scroll("page",
"right"):a.vf&&a.scroll("page","down"):"Home"===g?(b=a.wc,c&&a.vf?a.position=new F(a.position.x,b.y):!c&&a.uf&&(a.position=new F(b.x,a.position.y))):"End"===g?(b=a.wc,d=a.$a,c&&a.vf?a.position=new F(d.x,b.bottom-d.height):!c&&a.uf&&(a.position=new F(b.right-d.width,d.y))):"Subtract"===g?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===g?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===g?this.canResetZoom()&&this.resetZoom():d&&"Z"===g?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===g?this.canGroupSelection()&&
this.groupSelection():c&&d&&"G"===g?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.bubbles=h}};pa.prototype.doKeyUp=pa.prototype.bz=function(){var a=this.h;a!==n&&(a.N.bubbles=h)};pa.prototype.stopCommand=pa.prototype.pM=function(){var a=this.h;if(a!==n){var b=a.Fa;b instanceof mf&&a.ke&&a.Qy();b!==n&&b.doCancel()}};pa.prototype.canStopCommand=pa.prototype.lJ=ca(h);
pa.prototype.selectAll=pa.prototype.cM=function(){var a=this.h;if(a!==n)try{a.vc="wait";a.za("ChangingSelection");for(var b=a.cl;b.next();)b.value.Qa=h;for(b=a.bl;b.next();)b.value.Qa=h;for(b=a.links;b.next();)b.value.Qa=h}finally{a.za("ChangedSelection"),a.vc=""}};pa.prototype.canSelectAll=pa.prototype.kJ=function(){var a=this.h;return a!==n&&a.ke};
pa.prototype.deleteSelection=pa.prototype.RJ=function(){var a=this.h;if(a!==n&&!a.za("SelectionDeleting",a.selection))try{a.vc="wait";a.hc("Delete");a.za("ChangingSelection");for(var b=new ma(S),c=a.selection.l;c.next();)nf(b,c.value,h,this.LC,function(a){return a.canDelete()});a.Qz(b,h);a.za("SelectionDeleted",b)}finally{a.za("ChangedSelection"),a.ne("Delete"),a.vc=""}};
pa.prototype.canDeleteSelection=pa.prototype.UI=function(){var a=this.h;return a===n||(a.eb||a.ue)||!a.Jk||0===a.selection.count?p:h};
function nf(a,b,c,d,e){if(!a.contains(b)&&(e===f&&(e=n),(e===n||e(b))&&!(b instanceof of)))if(a.add(b),b instanceof T){if(c&&b instanceof vf)for(var g=b.Gc;g.next();){var i=g.value;nf(a,i,c,d,e)}for(i=b.ve;i.next();)if(g=i.value,!a.contains(g)){var j=g.ga,k=g.la;j!==n&&a.contains(j)&&k!==n&&a.contains(k)?nf(a,g,c,d,e):(j===n||k===n)&&nf(a,g,c,d,e)}if(d){i=h;g=b.h;g!==n&&(i=g.Yc);for(b=i?b.QC():b.PC();b.next();)i=b.value,nf(a,i,c,d,e)}}else if(b instanceof U)for(i=b.Jj;i.next();)nf(a,i.value,c,d,e)}
pa.prototype.copyParts=pa.prototype.Tn=function(a,b,c){for(var d=new ka(S,S),a=a.l;a.next();){var e=a.value;wf(this,e,b,d,c)}if(b!==n){for(var c=b.V,a=new ma(U),g=new ka(U,U),i=d.l;i.next();)if(e=i.value,e instanceof U)(e.ga===n||e.la===n)&&a.add(e);else if(c instanceof De&&e instanceof T&&e.data!==n){var j=e,e=i.key,k=e.SC();k!==n&&((k=d.qa(k))?(c.Ff(j.data,c.kb(k.data)),j=b.Af(j.data),e=e.zv(),e!==n&&j!==n&&g.add(e,j)):c.Ff(j.data,f))}0<a.count&&b.Qz(a,p);if(0<g.count)for(b=g.l;b.next();)d.add(b.key,
b.value)}for(b=d.l;b.next();)b.value.vb();return d};
function wf(a,b,c,d,e){if(b===n||e&&!b.canCopy())return n;if(d.contains(b))return a=d.qa(b),a instanceof S?a:n;var g=n,i=b.data;if(i!==n&&c!==n){var j=c.V;b instanceof U?j instanceof O&&(i=j.wC(i),w.lb(i)&&(j.$B(i),g=c.Af(i))):(i=j.Aj(i),w.lb(i)&&(j.Er(i),g=c.Hj(i)))}else xf(b),g=b.copy(),c!==n&&g instanceof S&&c.add(g);if(!(g instanceof S))return n;g.Qa=p;d.add(b,g);if(b instanceof T){for(j=b.ve;j.next();){i=j.value;if(i.ga===b){var k=d.qa(i);k!==n&&(k.ga=g)}i.la===b&&(k=d.qa(i),k!==n&&(k.la=g))}if(b instanceof
vf&&g instanceof vf)for(b=b.Gc;b.next();)j=wf(a,b.value,c,d,e),!(j instanceof U)&&j!==n&&(j.cb=g)}else if(b instanceof U){j=b.ga;j!==n&&(j=d.qa(j),j!==n&&(g.ga=j));j=b.la;j!==n&&(j=d.qa(j),j!==n&&(g.la=j));for(b=b.Jj;b.next();)j=wf(a,b.value,c,d,e),j!==n&&(j.zd=g)}return g}pa.prototype.copySelection=pa.prototype.HJ=function(){var a=this.h;if(a!==n){for(var b=new ma(S),a=a.selection.l;a.next();)nf(b,a.value,h,this.vC,function(a){return a.canCopy()});this.copyToClipboard(b)}};
pa.prototype.canCopySelection=pa.prototype.QI=function(){var a=this.h;return a===n||(!a.vj||!a.Zu)||0===a.selection.count?p:h};pa.prototype.cutSelection=pa.prototype.LJ=function(){this.copySelection();this.deleteSelection()};pa.prototype.canCutSelection=pa.prototype.RI=function(){var a=this.h;return a===n||(a.eb||a.ue)||(!a.vj||!a.Jk||!a.Zu)||0===a.selection.count?p:h};
pa.prototype.copyToClipboard=pa.prototype.IJ=function(a){var b=this.h;if(b!==n){var c=n;a===n?(kf=n,lf=""):(a=b.Tn(a,n,h),c=new z(S),c.Le(a),kf=c,lf=b.V.Zl);b.za("ClipboardChanged",c)}};pa.prototype.pasteFromClipboard=pa.prototype.ML=function(){var a=kf;if(a===n)return w.If;var b=this.h;if(b===n||lf!==b.V.Zl)return w.If;b=b.Tn(a,b,p);a=new ma(S);for(b=b.l;b.next();){var c=b.value;c.location.P()||(c.location=b.key.location.copy());c.position.P()||(c.position=b.key.position.copy());a.add(c)}return a};
pa.prototype.pasteSelection=pa.prototype.NL=function(a){var b=this.h;if(b!==n)try{b.vc="wait";b.hc("Paste");b.za("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&yf(b);for(var d=c.l;d.next();)d.value.Qa=h;b.za("ChangedSelection");if(a instanceof F){var e=b.computePartsBounds(b.selection);if(e){var g=b.Rb.re,i=g.computeEffectiveCollection(b.selection);g.moveParts(i,new F(a.x-e.pa,a.y-e.ta),p)}}b.za("ClipboardPasted",c)}finally{b.ne("Paste"),b.vc=""}};
pa.prototype.canPasteSelection=pa.prototype.cJ=function(){var a=this.h;return a===n||(a.eb||a.ue)||(!a.Jn||!a.Zu)||kf===n||lf!==a.V.Zl?p:h};pa.prototype.undo=pa.prototype.il=function(){var a=this.h;a!==n&&a.sa.il()};pa.prototype.canUndo=pa.prototype.Ok=function(){var a=this.h;return a===n||a.eb||a.ue?p:a.Iy&&a.sa.Ok()};pa.prototype.redo=pa.prototype.Co=function(){var a=this.h;a!==n&&a.sa.Co()};pa.prototype.canRedo=pa.prototype.Mk=function(){var a=this.h;return a===n||a.eb||a.ue?p:a.Iy&&a.sa.Mk()};
pa.prototype.decreaseZoom=pa.prototype.MJ=function(a){a===f&&(a=1/this.Ts);var b=this.h;b!==n&&b.Tl===zf&&(a*=b.scale,a<b.cg||a>b.Cf||(b.scale=a,b.yb()))};pa.prototype.canDecreaseZoom=pa.prototype.SI=function(a){a===f&&(a=1/this.Ts);var b=this.h;if(b===n||b.Tl!==zf)return p;a*=b.scale;return a<b.cg||a>b.Cf?p:b.Pn};pa.prototype.increaseZoom=pa.prototype.$K=function(a){a===f&&(a=this.Ts);var b=this.h;b!==n&&b.Tl===zf&&(a*=b.scale,a<b.cg||a>b.Cf||(b.scale=a,b.yb()))};
pa.prototype.canIncreaseZoom=pa.prototype.aJ=function(a){a===f&&(a=this.Ts);var b=this.h;if(b===n||b.Tl!==zf)return p;a*=b.scale;return a<b.cg||a>b.Cf?p:b.Pn};pa.prototype.resetZoom=pa.prototype.YL=function(a){a===f&&(a=1);var b=this.h;if(b!==n&&!(a<b.cg||a>b.Cf))b.scale=a,b.yb()};pa.prototype.canResetZoom=pa.prototype.gJ=function(a){a===f&&(a=1);var b=this.h;return b===n||a<b.cg||a>b.Cf?p:b.Pn};
pa.prototype.zoomToFit=pa.prototype.ZE=function(){var a=this.h;if(a!==n){var b=a.scale,c=a.position;b===this.UB&&!isNaN(this.Dx)?(a.scale=this.Dx,a.position=this.fB,a.yb()):(this.Dx=b,this.fB=c.copy(),a.ZE(),a.Eh(),this.UB=a.scale,this.AF=a.position.copy())}};pa.prototype.canZoomToFit=pa.prototype.oJ=function(){var a=this.h;return a===n?p:a.Pn};
pa.prototype.collapseTree=pa.prototype.fv=function(a){a===f&&(a=n);var b=this.h;if(b===n)return p;b.hc("Collapse Tree");var c=new z(T);if(a instanceof T&&a.yd)a.fv(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof T&&d.yd&&(d.fv(),c.add(d))}b.za("TreeCollapsed",c);b.ne("Collapse Tree")};
pa.prototype.canCollapseTree=pa.prototype.NI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.eb)return p;if(a instanceof T){if(!a.yd)return p;if(0<a.yv().count)return h}else for(a=b.selection.l;a.next();)if(b=a.value,b instanceof T&&b.yd&&0<b.yv().count)return h;return p};
pa.prototype.expandTree=pa.prototype.uv=function(a){a===f&&(a=n);var b=this.h;if(b===n)return p;b.hc("Expand Tree");var c=new z(T);if(a instanceof T&&!a.yd)a.uv(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof T&&!d.yd&&(d.uv(),c.add(d))}b.za("TreeExpanded",c);b.ne("Expand Tree")};
pa.prototype.canExpandTree=pa.prototype.YI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.eb)return p;if(a instanceof T){if(a.yd)return p;if(0<a.yv().count)return h}else for(a=b.selection.l;a.next();)if(b=a.value,b instanceof T&&!b.yd&&0<b.yv().count)return h;return p};
pa.prototype.groupSelection=pa.prototype.TK=function(){var a=this.h;if(a!==n){var b=a.V;if(b!==n&&b instanceof O){var c=this.Jy;if(c!==n)try{a.vc="wait";a.hc("Group");a.za("ChangingSelection");for(var d=new z(S),e=a.selection.l;e.next();){var g=e.value;g.be()&&g.canGroup()&&d.add(g)}for(var i=new z(S),j=d.l;j.next();){for(var k=j.value,g=p,e=d.l;e.next();)if(k.js(e.value)){g=h;break}g||i.add(k)}if(0<i.count){e=i.l;e.next();var l=e.value.cb;if(l!==n)for(;l!==n;){e=i.l;e.next();for(d=p;e.next();)if(k=
e.value,!k.js(l)){d=h;break}if(d)l=l.cb;else break}var m=n;if(c instanceof vf)xf(c),m=c.copy(),m instanceof vf&&a.add(m);else if(b.qz(c)){var q=b.Aj(c);w.lb(q)&&(b.Er(q),m=a.Vr(q))}if(m instanceof vf){l!==n&&this.isValidMember(l,m)&&(m.cb=l);for(e=i.l;e.next();)k=e.value,this.isValidMember(m,k)&&(k.cb=m);a.select(m)}}a.za("ChangedSelection");a.za("SelectionGrouped",m)}finally{a.ne("Group"),a.vc=""}}}};
pa.prototype.canGroupSelection=pa.prototype.$I=function(){var a=this.h;if(a===n||a.eb||a.ue||!a.Jn||!a.In)return p;var b=a.V;if(b===n||!(b instanceof O)||this.Jy===n)return p;for(a=a.selection.l;a.next();)if(b=a.value,b.be()&&b.canGroup())return h;return p};pa.prototype.findUnnestedNodes=pa.prototype.GK=function(a){for(var b=[],a=a.l;a.next();){var c=a.value;c instanceof U||b.push(c)}for(var a=new ma(S),c=b.length,d=0;d<c;d++){for(var e=b[d],g=h,i=0;i<c;i++)if(e.js(b[i])){g=p;break}g&&a.add(e)}return a};
pa.prototype.isValidMember=pa.prototype.pL=function(a,b){if(b===n||a===b||b instanceof U)return p;if(a!==n){if(a===b||a.js(b))return p;var c=a.ps;if(c!==n&&!c(a,b)||a.data===n&&b.data!==n||a.data!==n&&b.data===n)return p}c=this.ps;return c!==n?c(a,b):h};
pa.prototype.ungroupSelection=pa.prototype.uM=function(a){a===f&&(a=n);var b=this.h;if(b!==n){var c=b.V;if(c!==n&&c instanceof O)try{b.vc="wait";b.hc("Ungroup");b.za("ChangingSelection");var d=new z(vf);if(a instanceof vf)d.add(a);else for(var e=b.selection.l;e.next();){var g=e.value;g instanceof vf&&g.canUngroup()&&d.add(g)}if(0<d.count){b.Qy();for(e=d.l;e.next();){var i=e.value,j=i.data,k=i.cb,l=k!==n&&k.data!==n?c.kb(k.data):f,m=new z(S);m.Le(i.Gc);for(var q=m.l;q.next();){var r=q.value;if(!(r instanceof
U)){var s=r.data;s!==n?c.Xz(s,l):r.cb=k;r.Qa=h}}j!==n?c.eE(j):b.remove(i)}}b.za("ChangedSelection");b.za("SelectionUngrouped",d)}finally{b.ne("Ungroup"),b.vc=""}}};pa.prototype.canUngroupSelection=pa.prototype.nJ=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.eb||b.ue||!b.Jk||!b.On)return p;var c=b.V;if(c===n||!(c instanceof O))return p;if(a instanceof vf){if(a.canUngroup())return h}else for(a=b.selection.l;a.next();)if(b=a.value,b instanceof vf&&b.canUngroup())return h;return p};
pa.prototype.addTopLevelParts=pa.prototype.GI=function(a,b){for(var c=h,d=this.findUnnestedNodes(a).l;d.next();){var e=d.value;e.cb!==n&&(!b||this.isValidMember(n,e)?e.cb=n:c=p)}return c};pa.prototype.collapseSubGraph=pa.prototype.ev=function(a){a===f&&(a=n);var b=this.h;if(b===n)return p;b.hc("Collapse SubGraph");var c=new z(vf);if(a instanceof vf&&a.Te)a.ev(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof vf&&d.Te&&(d.ev(),c.add(d))}b.za("SubGraphCollapsed",c);b.ne("Collapse SubGraph")};
pa.prototype.canCollapseSubGraph=pa.prototype.MI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.eb)return p;if(a instanceof vf)return!a.Te?p:h;for(a=b.selection.l;a.next();)if(b=a.value,b instanceof vf&&b.Te)return h;return p};
pa.prototype.expandSubGraph=pa.prototype.tv=function(a){a===f&&(a=n);var b=this.h;if(b===n)return p;b.hc("Expand SubGraph");var c=new z(vf);if(a instanceof vf&&!a.Te)a.tv(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof vf&&!d.Te&&(d.tv(),c.add(d))}b.za("SubGraphExpanded",c);b.ne("Expand SubGraph")};
pa.prototype.canExpandSubGraph=pa.prototype.XI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.eb)return p;if(a instanceof vf)return a.Te?p:h;for(a=b.selection.l;a.next();)if(b=a.value,b instanceof vf&&!b.Te)return h;return p};
pa.prototype.editTextBlock=pa.prototype.oK=function(a){a===f&&(a=n);var b=this.h;if(b!==n&&b.Rb!==n){var c=b.Rb.iw;if(c!==n){if(a===n){for(var a=b.selection.l,d=n;a.next();){var e=a.value;if(e.canEdit()){d=e;break}}if(d===n)return;a=d;d=function(a){return a instanceof na&&a.rv};a=d(a)?a:Af(a,d)}a!==n&&a instanceof na&&(c.rg=a,b.Fa=c)}}};
pa.prototype.canEditTextBlock=pa.prototype.WI=function(a){a===f&&(a=n);var b=this.h;if(b===n||(b.eb||b.ue)||!b.Nn||b.Rb===n||b.Rb.iw===n)return p;if(a instanceof na){if(a=a.ca,a!==n&&a.canEdit())return h}else for(b=b.selection.l;b.next();)if(a=b.value,a.canEdit()){var c=function(a){return a instanceof na&&a.rv},a=c(a)?a:Af(a,c);if(a!==n)return h}return p};w.g(pa,"copiesTree",pa.prototype.vC);w.defineProperty(pa,{vC:"copiesTree"},t("EA"),ba("EA"));w.g(pa,"deletesTree",pa.prototype.LC);
w.defineProperty(pa,{LC:"deletesTree"},t("MA"),ba("MA"));w.g(pa,"archetypeGroupData",pa.prototype.Jy);w.defineProperty(pa,{Jy:"archetypeGroupData"},t("wA"),function(a){a!==n&&w.i(a,Object,pa,"archetypeGroupData");var b=this.h;b!==n&&(b=b.V,b instanceof O&&!(a instanceof vf)&&!b.qz(a)&&w.m("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a));this.wA=a});w.g(pa,"memberValidation",pa.prototype.ps);
w.defineProperty(pa,{ps:"memberValidation"},t("yk"),function(a){a!==n&&w.k(a,"function",pa,"memberValidation");this.yk=a});w.g(pa,"zoomFactor",pa.prototype.Ts);w.defineProperty(pa,{Ts:"zoomFactor"},t("TB"),function(a){w.k(a,"number",pa,"zoomFactor");1<a||w.m("zoomFactor must be larger than 1.0, not: "+a);this.TB=a});function Bf(){w.jc(this);this.ba=n;this.Bb="";this.bi=h;this.$A=p;this.RB=n;this.Vu=-1}w.Q("Tool",Bf);Bf.prototype.ee=function(a){u&&a!==n&&w.i(a,A,Bf,"setDiagram");this.ba=a};
Bf.prototype.toString=function(){return""!==this.name?this.name+" Tool":w.Uk(Object.getPrototypeOf(this))};Bf.prototype.updateAdornments=Bf.prototype.Qi=aa();Bf.prototype.canStart=Bf.prototype.wf=t("isEnabled");Bf.prototype.doStart=Bf.prototype.cz=aa();Bf.prototype.doActivate=Bf.prototype.Bh=function(){this.Y=h};Bf.prototype.doDeactivate=Bf.prototype.Di=function(){this.Y=p};Bf.prototype.doStop=Bf.prototype.Sk=aa();Bf.prototype.doCancel=Bf.prototype.Ej=function(){this.stopTool()};
Bf.prototype.stopTool=Bf.prototype.qM=function(){var a=this.h;a!==n&&a.Fa===this&&(a.Fa=n,a.vc="")};Bf.prototype.doMouseDown=Bf.prototype.Qr=function(){!this.Y&&this.canStart()&&this.doActivate()};Bf.prototype.doMouseMove=Bf.prototype.Og=aa();Bf.prototype.doMouseUp=Bf.prototype.qe=function(){this.stopTool()};Bf.prototype.doMouseWheel=Bf.prototype.vG=aa();Bf.prototype.doKeyDown=Bf.prototype.az=function(){var a=this.h;a!==n&&"Esc"===a.N.key&&this.doCancel()};Bf.prototype.doKeyUp=Bf.prototype.bz=aa();
Bf.prototype.startTransaction=Bf.prototype.hc=function(a){this.bf=n;var b=this.h;return b===n?p:b.hc(a)};Bf.prototype.stopTransaction=Bf.prototype.Nj=function(){var a=this.h;return a===n?p:this.bf===n?a.Bs():a.ne(this.bf)};
Bf.prototype.standardMouseSelect=Bf.prototype.dI=function(){var a=this.h;if(a!==n&&a.ke){var b=a.N,c=a.Wr(b.M,p);if(c!==n)if(b.Qk){a.za("ChangingSelection");for(b=c;b!==n&&!b.Nk();)b=b.cb;b.Qa=!b.Qa;a.za("ChangedSelection")}else if(b.shift){if(!c.Qa){a.za("ChangingSelection");for(b=c;b!==n&&!b.Nk();)b=b.cb;b.Qa=h;a.za("ChangedSelection")}}else{if(!c.Qa){for(b=c;b!==n&&!b.Nk();)b=b.cb;a.select(b)}}else b.left&&(!b.Qk&&!b.shift)&&a.Qy()}};
Bf.prototype.standardMouseClick=Bf.prototype.lM=function(a,b){a===f&&(a=n);b===f&&(b=function(a){return!a.Oa.zc});var c=this.h;if(c!==n){var d=c.N,e=c.xd(d.M,a,b);d.Bd=e;Cf(e,d,c)}};
function Cf(a,b,c){var d=0;b.left?d=1===b.Od?1:2===b.Od?2:1:b.right&&1===b.Od&&(d=3);var e="";if(a!==n){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.za(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.za(e)}if(a!==n)for(;a!==n;){e=n;switch(d){case 1:e=a.click;break;case 2:e=a.bm?a.bm:a.click;break;case 3:e=a.Mr}if(e!==n&&
(e(b,a),b.ae))break;a=a.fa}else{e=n;switch(d){case 1:e=c.click;break;case 2:e=c.bm?c.bm:c.click;break;case 3:e=c.Mr}e!==n&&e(b)}}
Bf.prototype.standardMouseOver=Bf.prototype.mM=function(){var a=this.h;if(a!==n){var b=a.N,c=a.xd(b.M,n,n);b.Bd=c;var d=a.ub;a.ub=h;var e=p;if(c!==a.Fm){var g=a.Fm;a.Wx=g;a.Fm=c;for(this.doCurrentObjectChanged(g,c);g!==n;){var i=g.Fz;if(i!==n){if(c===g)break;if(c!==n&&c.Ki(g))break;i(b,g,c);e=h;if(b.ae)break}g=g.fa}for(g=a.Wx;c!==n;){i=c.Ez;if(i!==n){if(g===c)break;if(g!==n&&g.Ki(c))break;i(b,c,g);e=h;if(b.ae)break}c=c.fa}c=a.Fm}if(c!==n){g=c;for(i="";g!==n;){i=g.cursor;if(""!==i)break;g=g.fa}a.vc=
i;for(g=c;g!==n;){i=g.ts;if(i!==n&&(i(b,g),e=h,b.ae))break;g=g.fa}}else a.vc="",i=a.ts,i!==n&&(i(b),e=h);e&&a.Eh();a.ub=d}};Bf.prototype.doCurrentObjectChanged=Bf.prototype.uG=aa();
Bf.prototype.standardMouseWheel=Bf.prototype.nM=function(){var a=this.h;if(a!==n){var b=a.N,c=b.Dj;if(0!==c){var d=a.Rb.mm;if(a.Pn&&(d===Df&&!b.shift||d===Ef&&b.Qk)){d=a.Oh;a.Oh=b.Zc;var e=a.Yf;e!==n?0<c?e.increaseZoom():e.decreaseZoom():a.scale=0<c?1.05*a.scale:a.scale/1.05;a.Oh=d;b.bubbles=p}else if(d===Df&&b.shift||d===Ef&&!b.Qk)d=a.position.copy(),!b.shift&&a.vf?0<c?a.scroll("line","up",3):a.scroll("line","down",3):b.shift&&a.uf&&(0<c?a.scroll("line","left",3):a.scroll("line","right",3)),a.position.I(d)||
(b.bubbles=p)}}};Bf.prototype.standardWaitAfter=Bf.prototype.oM=function(a){w.k(a,"number",Bf,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.Vu=window.setTimeout(function(){b.doWaitAfter()},a)};Bf.prototype.cancelWaitAfter=Bf.prototype.pJ=function(){-1!==this.Vu&&window.clearTimeout(this.Vu);this.Vu=-1};Bf.prototype.doWaitAfter=Bf.prototype.wG=aa();
Bf.prototype.findToolHandleAt=Bf.prototype.CK=function(a,b){var c=this.h;if(c===n)return n;c=c.xd(a,n,function(a){a=a.ca;return a===n?p:a.Cc!==n});if(c===n)return n;var d=c.ca;return d===n||d.Nc!==b?n:c};Bf.prototype.isBeyondDragSize=Bf.prototype.WG=function(a,b){var c=this.h;if(c===n)return p;a===f&&(a=c.xc.Zc);b===f&&(b=c.N.Zc);c=2;w.jy&&(c+=4);return Math.abs(b.x-a.x)>c||Math.abs(b.y-a.y)>c};w.u(Bf,{h:"diagram"},t("ba"));w.g(Bf,"name",Bf.prototype.name);
w.defineProperty(Bf,{name:"name"},t("Bb"),ba("Bb"));w.g(Bf,"isEnabled",Bf.prototype.isEnabled);w.defineProperty(Bf,{isEnabled:"isEnabled"},t("bi"),ba("bi"));w.g(Bf,"isActive",Bf.prototype.Y);w.defineProperty(Bf,{Y:"isActive"},t("$A"),ba("$A"));w.g(Bf,"transactionResult",Bf.prototype.bf);w.defineProperty(Bf,{bf:"transactionResult"},t("RB"),ba("RB"));
function Ff(){Bf.call(this);this.name="Dragging";this.DA=h;this.xl=this.TA=p;this.yx=h;this.px=(new bb(NaN,NaN)).freeze();this.qx=Jb;this.sx=(new F(NaN,NaN)).freeze();this.QA=p;this.RA=this.CA=this.SA=this.GA=n;this.sp=this.PA=p;this.rn=new F(NaN,NaN);this.ti=new F;this.Ju=p;this.Fu=h;this.Jm=100;this.rl=this.vu=n}w.Q("DraggingTool",Ff);w.Ea(Ff,Bf);w.g(Ff,"copiesEffectiveCollection",Ff.prototype.uC);w.defineProperty(Ff,{uC:"copiesEffectiveCollection"},t("DA"),ba("DA"));w.g(Ff,"dragsTree",Ff.prototype.NC);
w.defineProperty(Ff,{NC:"dragsTree"},t("TA"),ba("TA"));w.g(Ff,"isGridSnapEnabled",Ff.prototype.io);w.defineProperty(Ff,{io:"isGridSnapEnabled"},t("xl"),function(a){this.xl!==a&&(w.k(a,"boolean",Ff,"isGridSnapEnabled"),this.xl=a)});w.g(Ff,"isGridSnapRealtime",Ff.prototype.sD);w.defineProperty(Ff,{sD:"isGridSnapRealtime"},t("yx"),function(a){this.yx!==a&&(w.k(a,"boolean",Ff,"isGridSnapRealtime"),this.yx=a)});w.g(Ff,"gridSnapCellSize",Ff.prototype.lz);
w.defineProperty(Ff,{lz:"gridSnapCellSize"},t("px"),function(a){this.px.I(a)||(w.i(a,bb,Ff,"gridSnapCellSize"),this.px=a=a.O())});w.g(Ff,"gridSnapCellSpot",Ff.prototype.bD);w.defineProperty(Ff,{bD:"gridSnapCellSpot"},t("qx"),function(a){this.qx.I(a)||(w.i(a,H,Ff,"gridSnapCellSpot"),this.qx=a=a.O())});w.g(Ff,"gridSnapOrigin",Ff.prototype.cD);w.defineProperty(Ff,{cD:"gridSnapOrigin"},t("sx"),function(a){this.sx.I(a)||(w.i(a,F,Ff,"gridSnapOrigin"),this.sx=a=a.O())});w.g(Ff,"draggableLinks",Ff.prototype.cm);
w.defineProperty(Ff,{cm:"draggableLinks"},t("QA"),ba("QA"));w.g(Ff,"currentPart",Ff.prototype.Vn);w.defineProperty(Ff,{Vn:"currentPart"},t("GA"),ba("GA"));w.g(Ff,"copiedParts",Ff.prototype.Oc);w.defineProperty(Ff,{Oc:"copiedParts"},t("CA"),ba("CA"));w.g(Ff,"draggedParts",Ff.prototype.dc);w.defineProperty(Ff,{dc:"draggedParts"},t("SA"),ba("SA"));w.g(Ff,"draggedLink",Ff.prototype.cc);w.defineProperty(Ff,{cc:"draggedLink"},t("RA"),ba("RA"));w.g(Ff,"dragOutStarted",Ff.prototype.ez);
w.defineProperty(Ff,{ez:"dragOutStarted"},t("PA"),ba("PA"));w.g(Ff,"delay",Ff.prototype.pv);w.defineProperty(Ff,{pv:"delay"},t("Jm"),ba("Jm"));Ff.prototype.canStart=Ff.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;if(a===n||!a.Kk&&!a.vj&&!a.$u||!a.ke)return p;var b=a.N;return!b.left||a.Fa!==this&&(!this.isBeyondDragSize()||window.TouchEvent&&(b.Zi!==n&&b.Zi instanceof window.TouchEvent)&&b.timestamp-a.xc.timestamp<this.Jm)?p:this.findDraggablePart()!==n};
Ff.prototype.findDraggablePart=Ff.prototype.uK=function(){var a=this.h;if(a===n)return n;a=a.Wr(a.xc.M,p);if(a===n)return n;for(;a!==n&&!a.Nk();)a=a.cb;return a!==n&&(a.canMove()||a.canCopy())?a:n};Ff.prototype.standardMouseSelect=Ff.prototype.dI=function(){var a=this.h;if(a!==n&&a.ke){var b=a.Wr(a.xc.M,p);if(b!==n){for(;b!==n&&!b.Nk();)b=b.cb;this.Vn=b;this.Vn.Qa||(a.za("ChangingSelection"),b=a.N,!b.Qk&&!b.shift&&yf(a),this.Vn.Qa=h,a.za("ChangedSelection"))}}};
Ff.prototype.doActivate=Ff.prototype.Bh=function(){var a=this.h;if(a!==n){this.standardMouseSelect();var b=this.Vn;b===n||!b.canMove()&&!b.canCopy()||(this.Y=h,this.rn.set(a.position),Gf(this,a.selection),this.rl=this.vu=n,this.dc=this.computeEffectiveCollection(a.selection),Hf(this,this.dc),this.hc("Drag"),this.ti.set(a.xc.M),a.$u?(this.ez=h,this.sp=p,If=this,this.h.Fc=h):a.Fc=h)}};
function Gf(a,b){if(a.cm){var c=a.h;c!==n&&c.wj&&(1===b.count?(c=b.l,c.next(),a.cc=c.value,a.cc!==n&&(a.cc.canRelinkFrom()&&a.cc.canRelinkTo())&&a.cc.yh()):a.cc=n)}}
Ff.prototype.computeEffectiveCollection=Ff.prototype.uJ=function(a){var b=this.h!==n&&this.h.Fa===this,c=new ka(S,Object);if(a===n)return c;for(var d=a.l;d.next();){var e=d.value;Jf(this,c,e,b)}if(this.cc!==n&&this.cm)return c;for(d=a.l;d.next();)e=d.value,e instanceof U&&(a=e,b=a.ga,b!==n&&!c.contains(b)?c.remove(a):(b=a.la,b!==n&&!c.contains(b)&&c.remove(a)));return c};function Kf(a){return a===f?{point:new F}:{point:a}}
function Jf(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof T){b.add(c,Kf(c.location));if(c instanceof vf)for(var e=c.Gc;e.next();){var g=e.value;Jf(a,b,g,d)}for(g=c.ve;g.next();)if(e=g.value,!b.contains(e)){var i=e.ga,j=e.la;i!==n&&(b.contains(i)&&j!==n&&b.contains(j))&&Jf(a,b,e,d)}if(a.NC){g=h;e=c.h;e!==n&&(g=e.Yc);for(c=g?c.QC():c.PC();c.next();)g=c.value,Jf(a,b,g,d)}}else if(c instanceof U){e=c;b.add(e,Kf());for(g=e.Jj;g.next();)Jf(a,b,g.value,d)}else c instanceof of||
b.add(c,Kf(c.location))}Ff.prototype.doDeactivate=Ff.prototype.Di=function(){this.Y=p;var a=this.h;a!==n&&Lf(a);Mf(this);Nf(this,this.dc);this.dc=n;this.sp=this.ez=p;if(0<Of.count){for(var b=Of.length,c=0;c<b;c++){var d=Of.n[c];d.cc!==n&&(d.cc=n);Pf(d);Mf(d);d.h!==n&&Lf(d.h)}Of.clear()}this.cc!==n&&(this.cc=n);this.rn.Ho(NaN,NaN);If=Qf=n;Pf(this);a.Fc=p;this.Nj()};
function Mf(a){var b=a.h;if(b!==n){var c=b.ub;b.ub=h;for(var d=b.N,e=a.rl;e!==n;){var g=e.Dz;if(g!==n&&(g(d,e,n),d.ae))break;e=e.fa}b.ub=c}a.vu=n;a.rl=n}Ff.prototype.doCancel=Ff.prototype.Ej=function(){Pf(this);Zf(this);var a=this.h;a!==n&&this.rn.P()&&(a.position=this.rn);this.stopTool()};function Hf(a,b){if(b!==n){a.Ju=h;for(var c=b.l;c.next();){var d=c.key;d instanceof U&&(d.vn=h)}}}
function Nf(a,b){if(b!==n&&a.Ju){for(var c=b.l;c.next();){var d=c.key;d instanceof U&&(d.vn=p,d.Gh===$f?d.Tb():d.R())}a.Ju=p}}Ff.prototype.doKeyDown=Ff.prototype.az=function(){var a=this.h;a!==n&&(a=a.N,a!==n&&this.Y&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};Ff.prototype.doKeyUp=Ff.prototype.bz=function(){var a=this.h;a!==n&&(a.N!==n&&this.Y)&&this.doMouseMove()};
function ag(a){for(var b=Infinity,c=Infinity,d=-Infinity,e=-Infinity,a=a.l;a.next();){var g=a.value;if(g.be()){var i=g.location,g=i.x,i=i.y;!isNaN(g)&&!isNaN(i)&&(g<b&&(b=g),i<c&&(c=i),g>d&&(d=g),i>e&&(e=i))}}return Infinity===b?new G(0,0,0,0):new G(b,c,d-b,e-c)}
function bg(a,b){if(a.Oc===n){var c=a.h;if(!(c===n||c.eb||c.ue)&&a.dc!==n){c.ub=!b;c.Gr=!b;Zf(a);a.ti.set(c.xc.M);for(var c=a.uC?c.Tn(a.dc.Oj(),c,h):c.Tn(c.selection,c,h),d=c.l;d.next();)d.value.location=d.key.location.copy();d=ag(c);new F(d.x+d.width/2,d.y+d.height/2);for(var d=new ka(S,Object),e=a.dc.l;e.next();){var g=e.key;g.be()&&g.canCopy()&&(g=c.qa(g),g!==n&&(g.Ei(),d.add(g,Kf(g.location))))}for(c=c.l;c.next();)e=c.value,e instanceof U&&e.canCopy()&&d.add(e,Kf());a.Oc=d;Gf(a,d.Oj());a.cc!==
n&&(c=a.cc,d=c.Yh(),c.Zk(a.ti.x-(d.x+d.width/2),a.ti.y-(d.y+d.height/2)))}}}function Pf(a){var b=a.h;b!==n&&(a.Oc!==n&&(b.Qz(a.Oc.Oj(),p),a.Oc=n),b.ub=p,b.Gr=p,a.ti.set(b.xc.M))}function cg(a,b){var c=a.h;if(c!==n){var d=a.ti;a.moveParts(b,c.N.M.copy().Ls(d),h)}}
Ff.prototype.moveParts=Ff.prototype.sH=function(a,b,c){if(!(a===n||0===a.count)){var d=b.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);var e=this.Ju;e||Hf(this,a);for(var g=new z,i=new z(Ma),j=a.l;j.next();){var k=j.key;if(k.be()){var l=dg(this,k,a);if(l!==n)g.add({Ug:k,info:j.value,LG:l});else if(!c||k.canMove()){var l=j.value.point,m=this.computeMove(k,l.copy().add(d),a);k.location=m;j.value.oF=m.copy().Ls(l)}}else j.key instanceof U&&i.add(j.Hd)}for(c=g.l;c.next();)g=c.value,l=g.info.point,m=
l.copy().add(g.LG.oF),g.Ug.location=m;for(i=i.l;i.next();)if(j=i.value,l=j.key,l instanceof U)if(l.vn)if(c=l.ga,g=l.la,this.cc!==n&&this.cm)j=j.value.point,a.add(l,Kf(d)),m=b.x-j.x,c=b.y-j.y,l.Zk(m,c);else{m=new F(0,0);if(c!==n){m.set(c.location);var q=a.qa(c);q!==n&&m.Ls(q.point)}k=new F(0,0);g!==n&&(k.set(g.location),q=a.qa(g),q!==n&&k.Ls(q.point));c!==n&&g!==n?m.Fi(k)?(j=j.value.point,c=m.copy(),c.Ls(j),a.add(l,Kf(m)),l.Zk(c.x,c.y)):(l.vn=p,l.Tb()):(j=j.value.point,a.add(l,Kf(c!==n?m:g!==n?k:b)),
m=d.x-j.x,c=d.y-j.y,l.Zk(m,c))}else if(l.ga===n||l.la===n)j=j.value.point,a.add(l,Kf(b)),m=d.x-j.x,c=d.y-j.y,l.Zk(m,c);e||Nf(this,a)}};function dg(a,b,c){b=b.cb;if(b!==n){a=dg(a,b,c);if(a!==n)return a;a=c.qa(b);if(a!==n)return a}return n}
function Zf(a){if(a.dc!==n){var b=a.h,c=p;b!==n&&(c=b.ub,b.ub=h);for(var d=a.dc.l;d.next();){var e=d.key;e.be()&&(e.location=d.value.point)}for(d=a.dc.l;d.next();)if(e=d.key,e instanceof U&&e.vn){var g=d.value.point;a.dc.add(e,Kf());e.Zk(-g.x,-g.y)}b!==n&&(b.ub=c,b.Ii())}}
Ff.prototype.computeMove=Ff.prototype.xJ=function(a,b,c){if(a===n)return b;c===f&&(c=n);var d=b,d=b;if(this.io&&(this.sD||c===n||this.h.N.Pi))if(d=b.copy(),a!==n&&(c=this.h,c!==n)){var e=c.Dv,g=this.lz,c=g.width,g=g.height,i=this.cD,j=i.x,i=i.y,k=this.bD;if(e!==n){var l=e.cs;isNaN(c)&&(c=l.width);isNaN(g)&&(g=l.height);e=e.kz;isNaN(j)&&(j=e.x);isNaN(i)&&(i=e.y)}e=(new F).pm(0,0,c,g,k);d=fd(d.x,d.y,j+e.x,i+e.y,c,g)}d=a.dz!==n?a.dz(a,b,d):d;c=a.MD;b=c.x;isNaN(b)&&(b=a.location.x);c=c.y;isNaN(c)&&(c=
a.location.y);j=a.FD;g=j.x;isNaN(g)&&(g=a.location.x);j=j.y;isNaN(j)&&(j=a.location.y);return new F(Math.max(b,Math.min(d.x,g)),Math.max(c,Math.min(d.y,j)))};function eg(a,b){if(b===n)return h;var c=b.ca;return c===n||c.Qa||c instanceof of||c.Oa.zc||a.dc&&a.dc.contains(c)||a.Oc&&a.Oc.contains(c)?h:p}
function fg(a,b,c,d){var e=a.h;if(e!==n){if(a.cm&&a.cc!==n){var g=a.h.V;g instanceof O&&(a.cc.ga!==n&&g.Gs(a.cc.data,""),a.cc.la!==n&&g.Hs(a.cc.data,""))}g=p;a.Fu===p&&(g=e.ub,e.ub=h);var i=p,j=gg(e,b,n,function(b){return!eg(a,b)}),k=e.N;k.Bd=j;var l=e.ub;e.ub=h;if(j!==a.rl){var m=a.rl;a.vu=m;for(a.rl=j;m!==n;){var q=m.Dz;if(q!==n){if(j===m)break;if(j!==n&&j.Ki(m))break;q(k,m,j);i=h;if(k.ae)break}m=m.fa}for(m=a.vu;j!==n;){q=j.ND;if(q!==n){if(m===j)break;if(m!==n&&m.Ki(j))break;q(k,j,m);i=h;if(k.ae)break}j=
j.fa}j=a.rl}j===n&&(q=e.OD,q!==n&&(q(k),i=h));a.doDragOver(b,j);e.ub=l;i&&e.Eh();a.Fu===p&&(e.ub=g);if((e.uf||e.vf)&&(c||d))e.Pw=e.Qs(b),hg(e,e.Pw).Fi(e.position)?Lf(e):ig(e)}}Ff.prototype.doDragOver=Ff.prototype.UJ=aa();
function jg(a,b){var c=a.h;if(c!==n&&c.V!==n){Mf(a);var d=gg(c,b,n,function(b){return!eg(a,b)}),e=c.N;e.Bd=d;if(d!==n)for(var g=d;g!==n;){var i=g.qs;if(i!==n&&(i(e,g),e.ae))break;g=g.fa}else i=c.qs,i!==n&&i(e);a.doDropOnto(b,d);for(d=c.selection.l;d.next();)e=d.value,e instanceof T&&tg(c,e.wa)}}Ff.prototype.doDropOnto=Ff.prototype.VJ=aa();
Ff.prototype.doMouseMove=Ff.prototype.Og=function(){if(this.Y){var a=this.h;if(a!==n&&this.Vn!==n&&this.dc!==n){var b=p,c=p;this.mayCopy()?(b=h,bg(this,p),cg(this,this.Oc)):this.mayMove()?(c=h,Pf(this),cg(this,this.dc)):Pf(this);fg(this,a.N.M,c,b);a.yb()}}};
Ff.prototype.doMouseUp=Ff.prototype.qe=function(){if(this.Y){this.sp=h;var a=this.h;if(a!==n){var b=p,c=this.mayCopy();c&&this.Oc!==n?(Zf(this),Pf(this),bg(this,h),cg(this,this.Oc),this.Oc!==n&&a.Vz(this.Oc.Oj())):(b=h,Pf(this),this.mayMove()&&(cg(this,this.dc),this.Fu=p,fg(this,a.N.M,h,p),this.Fu=h));jg(this,a.N.M);if(this.Y){this.Oc=n;if(b&&this.dc!==n)for(b=this.dc.l;b.next();){var d=b.key;d instanceof T&&(d=d.cb,d!==n&&d.placeholder!==n&&!this.dc.contains(d)&&d.Wy&&d.R())}a.Ii();Nf(this,this.dc);
this.bf=c?"Copy":"Move";a.za(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};Ff.prototype.mayCopy=Ff.prototype.BL=function(){var a=this.h;if(a===n||(a.eb||a.ue||!a.Jn||!a.vj)||!a.N.Qk)return p;for(a=a.selection.l;a.next();){var b=a.value;if(b.be()&&b.canCopy())return h}return this.cc!==n&&this.cm&&this.cc.canCopy()?h:p};
Ff.prototype.mayMove=Ff.prototype.DL=function(){var a=this.h;if(a===n||a.eb||!a.Kk)return p;for(a=a.selection.l;a.next();){var b=a.value;if(b.be()&&b.canMove())return h}return this.cc!==n&&this.cm&&this.cc.canMove()?h:p};var Of=new z(Ff),If=n,Qf=n;Ff.prototype.mayCopyExternal=Ff.prototype.CL=function(){var a=this.h;return a===n||(!a.cC||a.eb||a.ue||!a.Jn)||a.V===n?p:h};Ff.prototype.doSimulatedDragEnter=Ff.prototype.XJ=function(){this.mayCopyExternal()&&(Of.contains(this)||Of.add(this))};
Ff.prototype.doSimulatedDragLeave=Ff.prototype.YJ=function(){Pf(this);var a=this.h;a!==n&&(a.Fa!==this&&this.rn.P())&&(a.position=this.rn)};Ff.prototype.doSimulatedDragOver=Ff.prototype.ZJ=function(){if(this.mayCopyExternal()){var a=this.h;if(a!==n){var b=If;b!==n&&b.dc!==n&&(ug(this,b.dc.Oj(),p),cg(this,this.Oc),a.Vz(this.Oc.Oj()),fg(this,a.N.M,p,h),a.yb())}}};
Ff.prototype.doSimulatedDrop=Ff.prototype.$J=function(){var a=If;if(a!==n&&(a.sp=h,Pf(this),this.mayCopyExternal())){var b=this.h;b!==n&&(this.hc("Drop"),ug(this,a.dc.Oj(),h),cg(this,this.Oc),this.Oc!==n&&b.Vz(this.Oc.Oj()),this.bf="ExternalCopy",jg(this,b.N.M),this.Oc=n,b.za("ExternalObjectsDropped",b.selection),this.Nj(),b.Ii())}};
function ug(a,b,c){if(a.Oc===n){var d=a.h;if(!(d===n||d.eb||d.ue)&&d.V!==n){d.ub=!c;d.Gr=!c;a.ti.set(d.N.M);for(var d=d.Tn(b,d,h),c=ag(b),e=new F(c.x+c.width/2,c.y+c.height/2),g=a.ti,c=new ka(S,Object),b=b.l;b.next();){var i=b.value;if(i.be()&&i.canCopy()){var j=i.location,i=d.qa(i);i.location=new F(g.x-(e.x-j.x),g.y-(e.y-j.y));i.Ei();c.add(i,Kf(i.location))}}for(d=d.l;d.next();)e=d.value,e instanceof U&&e.canCopy()&&c.add(e,Kf());a.Oc=c;Gf(a,c.Oj());a.cc!==n&&(c=a.cc,d=c.Yh(),c.Zk(a.ti.x-(d.x+d.width/
2),a.ti.y-(d.y+d.height/2)))}}}
function vg(){Bf.call(this);this.Ux=100;this.zy=p;var a=new U;a.Fs="PATH";var b=new V;b.Mi=h;b.name="PATH";b.stroke="blue";a.add(b);b=new V;b.um="Standard";b.fill="blue";a.add(b);a.Qd="Tool";this.qy=a;a=new T;b=new V;b.Xe="";b.rb="Rectangle";b.fill=n;b.stroke="magenta";b.Za=2;b.xa=new bb(1,1);a.add(b);a.Kj=p;a.Qd="Tool";this.oy=a;this.py=b;a=new T;b=new V;b.Xe="";b.rb="Rectangle";b.fill=n;b.stroke="magenta";b.Za=2;b.xa=new bb(1,1);a.add(b);a.Kj=p;a.Qd="Tool";this.sy=a;this.ty=b;this.Tx=this.Sx=this.Nx=
this.Mx=this.Ox=n;this.Np=h;this.uF=new ka(P,"boolean");this.xB=this.hB=this.my=n}w.Q("LinkingBaseTool",vg);w.Ea(vg,Bf);vg.prototype.doStop=vg.prototype.Sk=function(){this.kg=this.jg=this.ig=this.hg=this.Qb=n;this.kw.clear();this.Ze=n};w.g(vg,"portGravity",vg.prototype.XD);w.defineProperty(vg,{XD:"portGravity"},t("Ux"),function(a){this.Ux!==a&&(u&&w.k(a,"number",vg,"portGravity"),this.Ux=a)});w.g(vg,"validUnconnectedLinks",vg.prototype.Ko);
w.defineProperty(vg,{Ko:"validUnconnectedLinks"},t("zy"),function(a){this.zy!==a&&(u&&w.k(a,"boolean",vg,"validUnconnectedLinks"),this.zy=a)});w.g(vg,"temporaryLink",vg.prototype.qg);w.defineProperty(vg,{qg:"temporaryLink"},t("qy"),function(a){this.qy!==a&&(u&&w.i(a,U,vg,"temporaryLink"),this.qy=a)});w.g(vg,"temporaryFromNode",vg.prototype.$e);w.defineProperty(vg,{$e:"temporaryFromNode"},t("oy"),function(a){this.oy!==a&&(u&&w.i(a,T,vg,"temporaryFromNode"),this.oy=a)});w.g(vg,"temporaryFromPort",vg.prototype.sm);
w.defineProperty(vg,{sm:"temporaryFromPort"},t("py"),function(a){this.py!==a&&(u&&w.i(a,P,vg,"temporaryFromPort"),this.py=a)});w.g(vg,"temporaryToNode",vg.prototype.af);w.defineProperty(vg,{af:"temporaryToNode"},t("sy"),function(a){this.sy!==a&&(u&&w.i(a,T,vg,"temporaryToNode"),this.sy=a)});w.g(vg,"temporaryToPort",vg.prototype.tm);w.defineProperty(vg,{tm:"temporaryToPort"},t("ty"),function(a){this.ty!==a&&(u&&w.i(a,P,vg,"temporaryToPort"),this.ty=a)});w.g(vg,"originalLink",vg.prototype.Qb);
w.defineProperty(vg,{Qb:"originalLink"},t("Ox"),function(a){this.Ox!==a&&(u&&a!==n&&w.i(a,U,vg,"originalLink"),this.Ox=a)});w.g(vg,"originalFromNode",vg.prototype.hg);w.defineProperty(vg,{hg:"originalFromNode"},t("Mx"),function(a){this.Mx!==a&&(u&&a!==n&&w.i(a,T,vg,"originalFromNode"),this.Mx=a)});w.g(vg,"originalFromPort",vg.prototype.ig);w.defineProperty(vg,{ig:"originalFromPort"},t("Nx"),function(a){this.Nx!==a&&(u&&a!==n&&w.i(a,P,vg,"originalFromPort"),this.Nx=a)});w.g(vg,"originalToNode",vg.prototype.jg);
w.defineProperty(vg,{jg:"originalToNode"},t("Sx"),function(a){this.Sx!==a&&(u&&a!==n&&w.i(a,T,vg,"originalToNode"),this.Sx=a)});w.g(vg,"originalToPort",vg.prototype.kg);w.defineProperty(vg,{kg:"originalToPort"},t("Tx"),function(a){this.Tx!==a&&(u&&a!==n&&w.i(a,P,vg,"originalToPort"),this.Tx=a)});w.defineProperty(vg,{te:"isForwards"},t("Np"),ba("Np"));w.u(vg,{kw:"validPortsCache"},t("uF"));w.g(vg,"targetPort",vg.prototype.Ze);
w.defineProperty(vg,{Ze:"targetPort"},t("my"),function(a){this.my!==a&&(u&&a!==n&&w.i(a,P,vg,"targetPort"),this.my=a)});vg.prototype.copyPortProperties=vg.prototype.GJ=function(a,b,c,d,e){a===n||(b===n||c===n||d===n)||(d.xa=b.wa.size,e?(d.nb=b.nb,d.gl=b.gl):(d.jb=b.jb,d.Tk=b.Tk),c.bg=Ob,c.location=b.Ab(Ob),d.angle=b.bo(),this.zs!==n&&this.zs(a,b,c,d,e))};
vg.prototype.setNoTargetPortProperties=vg.prototype.eM=function(a,b,c){b!==n&&(b.xa=new bb(1,1),b.jb=Gb,b.nb=Gb);a!==n&&(a.location=this.h.N.M);this.zs!==n&&this.zs(n,n,a,b,c)};vg.prototype.doMouseDown=vg.prototype.Qr=function(){this.Y&&this.doMouseMove()};
vg.prototype.doMouseMove=vg.prototype.Og=function(){if(this.Y){var a=this.h;if(a!==n){this.Ze=this.findTargetPort(this.te);if(this.Ze!==n){var b=this.Ze.ca;if(b instanceof T){this.te?this.copyPortProperties(b,this.Ze,this.af,this.tm,h):this.copyPortProperties(b,this.Ze,this.$e,this.sm,p);a.yb();return}}this.te?this.setNoTargetPortProperties(this.af,this.tm,h):this.setNoTargetPortProperties(this.$e,this.sm,p);a.yb()}}};
vg.prototype.findValidLinkablePort=vg.prototype.HK=function(a,b){if(a===n)return n;var c=a.ca;if(!(c instanceof T))return n;for(;a!==n;){var d=b?a.eA:a.hz;if(d===h&&(a.Xe!==n||a instanceof T)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(d===p)break;a=a.fa}return n};
vg.prototype.findTargetPort=vg.prototype.yK=function(a){var b=this.h,c=b.N.M,d=this.XD;0>=d&&(d=0.1);for(var e=this,g=b.ao(c,d,function(b){return e.findValidLinkablePort(b,a)},n),d=Infinity,b=n,g=g.l;g.next();){var i=g.value,j=i.ca;if(j instanceof T){var k=i.Ab(Ob),l=c.x-k.x,k=c.y-k.y,l=l*l+k*k;l<d&&(k=this.kw.qa(i),k!==n?k&&(b=i,d=l):a&&this.isValidLink(this.hg,this.ig,j,i)||!a&&this.isValidLink(j,i,this.jg,this.kg)?(this.kw.add(i,h),b=i,d=l):this.kw.add(i,p))}}return b!==n&&(c=b.ca,c instanceof
T&&(c.Oa===n||c.Oa.Sl))?b:n};vg.prototype.isValidFrom=vg.prototype.nL=function(a,b){if(a===n||b===n)return this.Ko;if(this.h.Fa===this&&(a.Oa!==n&&!a.Oa.Sl||b.hz!==h))return p;var c=b.VC;if(Infinity>c){if(this.Qb!==n&&a===this.hg&&b===this.ig)return h;var d=b.Xe;d===n&&(d="");if(a.Ur(d).count>=c)return p}return h};
vg.prototype.isValidTo=vg.prototype.rL=function(a,b){if(a===n||b===n)return this.Ko;if(this.h.Fa===this&&(a.Oa!==n&&!a.Oa.Sl||b.eA!==h))return p;var c=b.JE;if(Infinity>c){if(this.Qb!==n&&a===this.jg&&b===this.kg)return h;var d=b.Xe;d===n&&(d="");if(a.Bf(d).count>=c)return p}return h};vg.prototype.isInSameNode=vg.prototype.iL=function(a,b){if(a===n||b===n)return p;if(a===b)return h;var c=a.ca,d=b.ca;return c!==n&&c===d};
vg.prototype.isLinked=vg.prototype.lL=function(a,b){if(a===n||b===n)return p;var c=a.ca;if(!(c instanceof T))return p;var d=a.Xe;d===n&&(d="");var e=b.ca;if(!(e instanceof T))return p;var g=b.Xe;g===n&&(g="");for(e=e.Bf(g);e.next();)if(g=e.value,g.ga===c&&g.Gi===d)return h;return p};
vg.prototype.isValidLink=vg.prototype.oL=function(a,b,c,d){return!this.isValidFrom(a,b)||!this.isValidTo(c,d)||b!==n&&d!==n&&((!b.UC||!d.IE)&&this.isInSameNode(b,d)||(!b.TC||!d.HE)&&this.isLinked(b,d))||this.Qb!==n&&(a!==n&&wg(this,a,this.Qb)||c!==n&&wg(this,c,this.Qb))||a!==n&&c!==n&&(a.data===n&&c.data!==n||a.data!==n&&c.data===n)||!xg(this,a,c,this.Qb)?p:this.yz!==n?this.yz(a,b,c,d,this.Qb):h};
function wg(a,b,c){if(b===n)return p;var d=b.zd;if(d===n)return p;if(d===c)return h;var e=new ma(T);e.add(b);return yg(a,d,c,e)}function yg(a,b,c,d){if(b===c)return h;var e=b.ga;if(e!==n&&e.Li&&(d.add(e),yg(a,e.zd,c,d)))return h;b=b.la;return b!==n&&b.Li&&(d.add(b),yg(a,b.zd,c,d))?h:p}
function xg(a,b,c,d){if(b===n||c===n)return p;var e=a.h.WE;if(e!==zg){if(e===Ag){for(e=c.ve;e.next();){var g=e.value;if(g!==d&&g.la===c)return p}return!Bg(a,b,c,d)}if(e===Cg){for(e=b.ve;e.next();)if(g=e.value,g!==d&&g.ga===b)return p;return!Bg(a,b,c,d)}if(e===Dg)return b===c?a=h:(e=new ma(T),e.add(c),a=Eg(a,e,b,c,d)),!a;if(e===Fg)return!Bg(a,b,c,d);if(e===Gg)return b===c?a=h:(e=new ma(T),e.add(c),a=Hg(a,e,b,c,d)),!a}return h}
function Bg(a,b,c,d){if(b===c)return h;if(b===n||c===n)return p;for(var e=b.ve;e.next();){var g=e.value;if(g!==d&&g.la===b&&(g=g.ga,g!==b&&Bg(a,g,c,d)))return h}return p}function Eg(a,b,c,d,e){if(c===d)return h;if(c===n||d===n||b.contains(c))return p;b.add(c);for(var g=c.ve;g.next();){var i=g.value;if(i!==e&&i.la===c&&(i=i.ga,i!==c&&Eg(a,b,i,d,e)))return h}return p}
function Hg(a,b,c,d,e){if(c===d)return h;if(c===n||d===n||b.contains(c))return p;b.add(c);for(var g=c.ve;g.next();){var i=g.value;if(i!==e){var j=i.ga,i=i.la,j=j===c?i:j;if(j!==c&&Hg(a,b,j,d,e))return h}}return p}w.g(vg,"linkValidation",vg.prototype.yz);w.defineProperty(vg,{yz:"linkValidation"},t("hB"),function(a){a!==n&&w.k(a,"function",vg,"linkValidation");this.hB=a});w.g(vg,"portTargeted",vg.prototype.zs);
w.defineProperty(vg,{zs:"portTargeted"},t("xB"),function(a){a!==n&&w.k(a,"function",vg,"portTargeted");this.xB=a});function qa(){vg.call(this);this.name="Linking";this.Ow={};this.Nw=n;this.da=Ig;this.hy=this.gy=n}w.Q("LinkingTool",qa);w.Ea(qa,vg);var Ig;qa.Either=Ig=w.s(qa,"Either",0);var Ng;qa.ForwardsOnly=Ng=w.s(qa,"ForwardsOnly",0);var Sg;qa.BackwardsOnly=Sg=w.s(qa,"BackwardsOnly",0);w.g(qa,"archetypeLinkData",qa.prototype.eC);
w.defineProperty(qa,{eC:"archetypeLinkData"},t("Ow"),function(a){this.Ow!==a&&(a!==n&&w.i(a,Object,qa,"archetypeLinkData"),this.Ow=a)});w.g(qa,"archetypeLabelNodeData",qa.prototype.dC);
w.defineProperty(qa,{dC:"archetypeLabelNodeData"},t("Nw"),function(a){if(this.Nw!==a){a!==n&&w.i(a,Object,qa,"archetypeLabelNodeData");var b=this.h;b!==n&&(b=b.V,b instanceof O&&!(a instanceof T)&&!b.tz(a)&&w.m("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: "+a));this.Nw=a}});w.g(qa,"direction",qa.prototype.direction);
w.defineProperty(qa,{direction:"direction"},t("da"),function(a){this.da!==a&&(u&&w.ib(a,qa,qa,"direction"),this.da=a)});w.g(qa,"startObject",qa.prototype.aA);w.defineProperty(qa,{aA:"startObject"},t("gy"),function(a){this.gy!==a&&(u&&a!==n&&w.i(a,P,qa,"startObject"),this.gy=a)});w.u(qa,{gw:n},t("hy"));
qa.prototype.canStart=qa.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;if(a===n||(a.eb||a.ue)||!a.Sl)return p;var b=a.V;return b===n||!(b instanceof O)&&!(b instanceof De)||!a.N.left||a.Fa!==this&&!this.isBeyondDragSize()?p:this.findLinkablePort()!==n};
qa.prototype.findLinkablePort=qa.prototype.vK=function(){var a=this.h;if(a===n)return n;var b=this.aA;b===n&&(b=a.xd(a.xc.M,n,n));if(b===n||!(b.ca instanceof T))return n;var c=this.direction;if(c===Ig||c===Ng)if(a=this.findValidLinkablePort(b,p),a!==n)return this.Np=h,a;if(c===Ig||c===Sg)if(a=this.findValidLinkablePort(b,h),a!==n)return this.Np=p,a;return n};
qa.prototype.doActivate=qa.prototype.Bh=function(){var a=this.h;if(a!==n&&(this.gw===n&&(this.hy=this.findLinkablePort()),this.gw!==n)){this.hc(this.name);a.Fc=h;a.vc="hand";if(this.te){this.ig=this.gw;var b=this.ig.ca;b instanceof T&&(this.hg=b);this.copyPortProperties(this.hg,this.ig,this.$e,this.sm,p)}else this.kg=this.gw,b=this.kg.ca,b instanceof T&&(this.jg=b),this.copyPortProperties(this.jg,this.kg,this.af,this.tm,h);a.add(this.$e);a.add(this.af);this.qg!==n&&(this.$e!==n&&(this.qg.ga=this.$e),
this.af!==n&&(this.qg.la=this.af),this.qg.Tb(),a.add(this.qg));this.Y=h}};qa.prototype.doDeactivate=qa.prototype.Di=function(){this.Y=p;var a=this.h;a!==n&&(a.remove(this.qg),a.remove(this.$e),a.remove(this.af),a.Fc=p,a.vc="",this.Nj())};qa.prototype.doStop=qa.prototype.Sk=function(){vg.prototype.Sk.call(this);this.aA=this.hy=n};
qa.prototype.doMouseUp=qa.prototype.qe=function(){if(this.Y){var a=this.h;if(a===n)return;var b=this.bf=n,c=n,d=n,e=n,g=this.Ze=this.findTargetPort(this.te),i=n;g!==n?(i=g.ca,i instanceof T&&(this.te?(this.hg!==n&&(b=this.hg,c=this.ig),d=i,e=g):(b=i,c=g,this.jg!==n&&(d=this.jg,e=this.kg)))):this.te?this.hg!==n&&this.Ko&&(b=this.hg,c=this.ig):this.jg!==n&&this.Ko&&(d=this.jg,e=this.kg);if(b!==n||d!==n)b=this.insertLink(b,c,d,e),b!==n?(g===n&&(this.te?b.pG=a.N.M:b.oG=a.N.M),a.ke&&a.select(b),this.bf=
this.name,a.za("LinkDrawn",b)):a.V.yg.clear()}this.stopTool()};
qa.prototype.insertLink=qa.prototype.dL=function(a,b,c,d){var e=this.h;if(e===n)return n;var g=e.V;if(g===n)return n;if(g instanceof De){if(b=a,d=c,e.Yc||(b=c,d=a),b!==n&&d!==n)return g.Ff(d.data,g.kb(b.data)),d.zv()}else if(g instanceof O){b===n&&(b=a);b=b.Xe;b===n&&(b="");d===n&&(d=c);var i=d.Xe;i===n&&(i="");d=this.eC;if(d instanceof U){if(xf(d),g=d.copy(),g instanceof U)return g.ga=a,g.Gi=b,g.la=c,g.Pj=i,e.add(g),g}else if(d!==n&&(d=g.wC(d),w.lb(d)))return g.dw(d,g.kb(a.data)),g.Gs(d,b),g.ew(d,
g.kb(c.data)),g.Hs(d,i),g.$B(d),a=this.dC,a!==n&&g.tz(a)&&(a=g.Aj(a),w.lb(a)&&(g.Er(a),a=g.kb(a),a!==f&&g.ZB(d,a))),g=e.Af(d)}return n};function Tg(){vg.call(this);this.name="Relinking";var a=new V;a.rb="Diamond";a.xa=new bb(8,8);a.fill="cyan";a.cursor="pointer";a.Hh=0;this.XA=a;a=new V;a.rb="Diamond";a.xa=new bb(8,8);a.fill="cyan";a.cursor="pointer";a.Hh=-1;this.OB=a;this.sc=n;this.uB=new G}w.Q("RelinkingTool",Tg);w.Ea(Tg,vg);
Tg.prototype.updateAdornments=Tg.prototype.Qi=function(a){if(a instanceof U){var b=n,c="RelinkFrom";if(a.Qa){var d=a.$v;a.wa.P()&&(d!==n&&a.mb()&&a.canRelinkFrom()&&d.Yk()&&d.wa.P())&&(b=a.Zn(c),b===n&&(b=this.makeAdornment(d,p),b.Nc=c),b!==n&&b.R());a.Gk(c,b)}else a.dl(c);b=n;c="RelinkTo";a.Qa?(d=a.$v,a.wa.P()&&(d!==n&&a.mb()&&a.canRelinkTo()&&d.Yk()&&d.wa.P())&&(b=a.Zn(c),b===n&&(b=this.makeAdornment(d,h),b.Nc=c),b!==n&&b.R()),a.Gk(c,b)):a.dl(c)}};
Tg.prototype.makeAdornment=Tg.prototype.Az=function(a,b){var c=new of;c.type=Ug;var d=b?this.mI:this.GG;d!==n&&c.add(d.copy());c.Cc=a;return c};w.defineProperty(Tg,{GG:"fromHandleArchetype"},t("XA"),function(a){a&&w.i(a,P,Tg,"fromHandleArchetype");this.XA=a});w.defineProperty(Tg,{mI:"toHandleArchetype"},t("OB"),function(a){a&&w.i(a,P,Tg,"toHandleArchetype");this.OB=a});w.u(Tg,{handle:"handle"},t("sc"));
Tg.prototype.canStart=Tg.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;if(a===n||(a.eb||a.ue)||!a.wj)return p;var b=a.V;if(b===n||!(b instanceof O)&&!(b instanceof De)||!a.N.left)return p;b=this.findToolHandleAt(a.xc.M,"RelinkFrom");b===n&&(b=this.findToolHandleAt(a.xc.M,"RelinkTo"));return b!==n};
Tg.prototype.doActivate=Tg.prototype.Bh=function(){var a=this.h;if(a!==n){if(this.Qb===n){var b=this.findToolHandleAt(a.xc.M,"RelinkFrom");b===n&&(b=this.findToolHandleAt(a.xc.M,"RelinkTo"));if(b===n)return;var c=b.ca;if(!(c instanceof of)||!(c.Ik instanceof U))return;this.sc=b;this.Np=c===n||"RelinkTo"===c.Nc;this.Qb=c.Ik}this.hc(this.name);a.Fc=h;a.vc="hand";this.ig=this.Qb.Pc;this.hg=this.Qb.ga;this.kg=this.Qb.Cd;this.jg=this.Qb.la;this.uB=this.Qb.wa;this.Qb!==n&&0<this.Qb.ja&&(this.Qb.ga===n&&
(this.sm!==n&&(this.sm.xa=new bb(0,0)),this.$e!==n&&(this.$e.location=this.Qb.p(0))),this.Qb.la===n&&(this.tm!==n&&(this.tm.xa=new bb(0,0)),this.af!==n&&(this.af.location=this.Qb.p(this.Qb.ja-1))));this.copyPortProperties(this.hg,this.ig,this.$e,this.sm,p);this.copyPortProperties(this.jg,this.kg,this.af,this.tm,h);a.add(this.$e);a.add(this.af);this.qg!==n&&(this.$e!==n&&(this.qg.ga=this.$e),this.af!==n&&(this.qg.la=this.af),this.qg.Tb(),a.add(this.qg));this.Y=h}};
Tg.prototype.doDeactivate=Tg.prototype.Di=function(){this.Y=p;var a=this.h;a!==n&&(a.remove(this.qg),a.remove(this.$e),a.remove(this.af),a.Fc=p,a.vc="",this.Nj())};Tg.prototype.doStop=Tg.prototype.Sk=function(){vg.prototype.Sk.call(this);this.sc=n};
Tg.prototype.doMouseUp=Tg.prototype.qe=function(){if(this.Y){var a=this.h;if(a===n)return;this.bf=n;var b=this.hg,c=this.ig,d=this.jg,e=this.kg,g=this.Qb;this.Ze=this.findTargetPort(this.te);if(this.Ze!==n){var i=this.Ze.ca;i instanceof T&&(this.te?(d=i,e=this.Ze):(b=i,c=this.Ze))}else this.Ko?this.te?e=d=n:c=b=n:g=n;g!==n&&(this.reconnectLink(g,this.te?d:b,this.te?e:c,this.te),this.Ze===n&&(this.te?g.pG=a.N.M:g.oG=a.N.M,g.Tb()),a.ke&&(g.Qa=h),this.bf=this.name,a.za("LinkRelinked",g,this.te?this.kg:
this.ig));Vg(this.Qb,this.uB)}this.stopTool()};
Tg.prototype.reconnectLink=Tg.prototype.RL=function(a,b,c,d){var e=this.h;if(e===n)return p;var g=b!==n?b.data:n,g=g!==n?e.V.kb(g):f,i=c.Xe!==n?c.Xe:"",j=a.data;if(j!==n&&g!==f)if(c=e.V,c instanceof De)e=e.Yc,i=a.ga,g=a.la,e||(i=a.la,g=a.ga),a=i,i=g,d&&e||!d&&!e?(i=b,c.Ff(g.data,f),c.Ff(i.data,c.kb(a.data))):c.Ff(g.data,c.kb(b.data));else if(c instanceof O)d?(c.ew(j,g),c.Hs(j,i)):(c.dw(j,g),c.Gs(j,i));else return p;else d?(this.Qb.la=b,this.Qb.Pj=i):(this.Qb.ga=b,this.Qb.Gi=i);return h};
function Wg(){Bf.call(this);this.name="LinkReshaping";var a=new V;a.rb="Rectangle";a.xa=new bb(6,6);a.fill="cyan";this.ok=a;this.Lw=this.sc=n;this.vB=new F;this.Qx=n}w.Q("LinkReshapingTool",Wg);w.Ea(Wg,Bf);var Xg;Wg.None=Xg=w.s(Wg,"None",0);var Yg;Wg.Horizontal=Yg=w.s(Wg,"Horizontal",1);var Zg;Wg.Vertical=Zg=w.s(Wg,"Vertical",2);var $g;Wg.All=$g=w.s(Wg,"All",3);
Wg.prototype.updateAdornments=Wg.prototype.Qi=function(a){if(a instanceof U){var b=n;if(a.Qa){var c=a.path;a.wa.P()&&(c!==n&&a.mb()&&a.canReshape()&&c.Yk()&&c.wa.P())&&(b=a.Zn(this.name),b===n&&(b=this.makeAdornment(c),b.Nc=this.name),b!==n&&(b.location=a.position,b.R()));a.Gk(this.name,b)}else a.dl(this.name)}};
Wg.prototype.makeAdornment=Wg.prototype.Az=function(a){var b=new of;b.type=Ug;var c=a.ca,d=c.ja,e=c.fc;if(c.points!==n&&2<d){for(var d=c.Av,g=c.vz,i=d+1;i<=g-1;i++){var j=this.makeHandle(a,i);if(j!==n){j.Hh=i;if(i!==d)if(i===d+1&&e){var k=c.p(d),l=c.p(d+1);Ua(k.x,l.x)&&Ua(k.y,l.y)&&(l=c.p(d-1));Ua(k.x,l.x)?(j.Do=Zg,j.cursor="n-resize"):Ua(k.y,l.y)&&(j.Do=Yg,j.cursor="w-resize")}else i===g-1&&e?(k=c.p(g-1),l=c.p(g),Ua(k.x,l.x)&&Ua(k.y,l.y)&&(k=c.p(g+1)),Ua(k.x,l.x)?(j.Do=Zg,j.cursor="n-resize"):Ua(k.y,
l.y)&&(j.Do=Yg,j.cursor="w-resize")):i!==g&&(j.Do=$g,j.cursor="move");b.add(j)}}b.Cc=a}return b};Wg.prototype.makeHandle=Wg.prototype.kH=function(){var a=this.ds;return a===n?n:a.copy()};w.defineProperty(Wg,{ds:"handleArchetype"},t("ok"),function(a){a&&w.i(a,P,Wg,"handleArchetype");this.ok=a});w.u(Wg,{handle:"handle"},t("sc"));w.u(Wg,{Hn:"adornedLink"},t("Lw"));
Wg.prototype.canStart=Wg.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;return a===n||a.eb||!a.Kn?p:this.findToolHandleAt(a.xc.M,this.name)!==n};Wg.prototype.doActivate=Wg.prototype.Bh=function(){var a=this.h;if(a!==n&&(this.sc=this.findToolHandleAt(a.xc.M,this.name),this.sc!==n)){var b=this.sc.ca.Ik;b instanceof U&&(this.Lw=b,a.Fc=h,this.vB=b.p(this.sc.Hh),this.Qx=b.points.copy(),this.hc(this.name),this.Y=h)}};
Wg.prototype.doDeactivate=Wg.prototype.Di=function(){this.Nj();this.Lw=this.sc=n;var a=this.h;a!==n&&(a.Fc=p);this.Y=p};Wg.prototype.doCancel=Wg.prototype.Ej=function(){var a=this.Hn;a!==n&&(a.points=this.Qx);this.stopTool()};Wg.prototype.doMouseMove=Wg.prototype.Og=function(){var a=this.h;this.Y&&a!==n&&(a=this.computeReshape(a.N.M),this.reshape(a))};
Wg.prototype.doMouseUp=Wg.prototype.qe=function(){var a=this.h;if(this.Y&&a!==n){var b=this.computeReshape(a.N.M);this.reshape(b);b=this.Hn;b!==n&&(b.points=this.Hn.points);a.Ii();this.bf=this.name;a.za("LinkReshaped",this.Hn)}this.stopTool()};
Wg.prototype.reshape=Wg.prototype.ZL=function(a){var b=this.Hn;b.fl();var c=this.handle.Hh,d=this.handle.Do;if(b.fc)if(c===b.Av+1)c=b.Av+1,d==Zg?(b.J(c,new F(b.p(c-1).x,a.y)),b.J(c+1,new F(b.p(c+2).x,a.y))):d==Yg&&(b.J(c,new F(a.x,b.p(c-1).y)),b.J(c+1,new F(a.x,b.p(c+2).y)));else if(c===b.vz-1)c=b.vz-1,d===Zg?(b.J(c-1,new F(b.p(c-2).x,a.y)),b.J(c,new F(b.p(c+1).x,a.y))):d===Yg&&(b.J(c-1,new F(a.x,b.p(c-2).y)),b.J(c,new F(a.x,b.p(c+1).y)));else{var d=c,e=b.p(d),g=b.p(d-1),i=b.p(d+1);Ua(g.x,e.x)&&Ua(e.y,
i.y)?(Ua(g.x,b.p(d-2).x)&&!Ua(g.y,b.p(d-2).y)?(e=b.points,e.yc(d,new F(a.x,g.y)),b.points=e,c++,d++):b.J(d-1,new F(a.x,g.y)),Ua(i.y,b.p(d+2).y)&&!Ua(i.x,b.p(d+2).x)?(e=b.points,e.yc(d+1,new F(i.x,a.y)),b.points=e):b.J(d+1,new F(i.x,a.y))):Ua(g.y,e.y)&&Ua(e.x,i.x)?(Ua(g.y,b.p(d-2).y)&&!Ua(g.x,b.p(d-2).x)?(e=b.points,e.yc(d,new F(g.x,a.y)),b.points=e,c++,d++):b.J(d-1,new F(g.x,a.y)),Ua(i.x,b.p(d+2).x)&&!Ua(i.y,b.p(d+2).y)?(e=b.points,e.yc(d+1,new F(a.x,i.y)),b.points=e):b.J(d+1,new F(a.x,i.y))):Ua(g.x,
e.x)&&Ua(e.x,i.x)?(Ua(g.x,b.p(d-2).x)&&!Ua(g.y,b.p(d-2).y)?(e=b.points,e.yc(d,new F(a.x,g.y)),b.points=e,c++,d++):b.J(d-1,new F(a.x,g.y)),Ua(i.x,b.p(d+2).x)&&!Ua(i.y,b.p(d+2).y)?(e=b.points,e.yc(d+1,new F(a.x,i.y)),b.points=e):b.J(d+1,new F(a.x,i.y))):Ua(g.y,e.y)&&Ua(e.y,i.y)&&(Ua(g.y,b.p(d-2).y)&&!Ua(g.x,b.p(d-2).x)?(e=b.points,e.yc(d,new F(g.x,a.y)),b.points=e,c++,d++):b.J(d-1,new F(g.x,a.y)),Ua(i.y,b.p(d+2).y)&&!Ua(i.x,b.p(d+2).x)?(e=b.points,e.yc(d+1,new F(i.x,a.y)),b.points=e):b.J(d+1,new F(i.x,
a.y)));b.J(c,a.copy())}else b.J(c,a.copy()),1===c&&zb(b.rC(h))?(d=b.ga,g=b.Pc,c=g.Ab(Ob),a=b.getLinkPointFromPoint(d,g,c,a,h),b.J(0,a)):c===b.ja-2&&zb(b.rC(p))&&(d=b.la,g=b.Cd,c=g.Ab(Ob),a=b.getLinkPointFromPoint(d,g,c,a,p),b.J(b.ja-1,a));b.zi()};Wg.prototype.computeReshape=Wg.prototype.AJ=function(a){var b=this.Hn,c=this.handle.Hh;switch(this.handle.Do){case $g:return a;case Zg:return b=b.p(c),new F(b.x,a.y);case Yg:return b=b.p(c),new F(a.x,b.y);default:case Xg:return b.p(c)}};
w.g(Wg,"originalPoint",Wg.prototype.BH);w.u(Wg,{BH:"originalPoint"},t("vB"));w.g(Wg,"originalPoints",Wg.prototype.CH);w.u(Wg,{CH:"originalPoints"},t("Qx"));
function ah(){Bf.call(this);this.name="Resizing";this.Ud=(new bb(1,1)).freeze();this.ij=(new bb(9999,9999)).freeze();this.Ui=(new bb(NaN,NaN)).freeze();this.xl=p;this.Ja=n;var a=new V;a.uj=Ob;a.rb="Rectangle";a.xa=new bb(6,6);a.fill="cyan";a.stroke="black";a.Za=1;a.cursor="pointer";this.ok=a;this.sc=n;this.gn=0;this.kF=new G;this.qu=new bb;this.Px=new F;this.kx=new bb(0,0);this.jx=new bb(Infinity,Infinity);this.ix=new bb(1,1)}w.Q("ResizingTool",ah);w.Ea(ah,Bf);
ah.prototype.updateAdornments=ah.prototype.Qi=function(a){if(!(a===n||a instanceof U)){var b=n;if(a.Qa){var c=a.RH;if(a.wa.P()&&(c!==n&&a.mb()&&a.canResize()&&c.Yk()&&c.wa.P())&&(b=a.Zn(this.name),b===n&&(b=this.makeAdornment(c),b.Nc=this.name),b!==n)){var d=c.bo();b.angle=d;var e=c.Ab(Jb),g=c.Vk();if(c instanceof V){var i=c.Za/2*g;e.x+=i;e.y+=i}b.location=e;e=b.placeholder;e!==n&&(c=c.Sa,e.xa=new bb(c.width*g,c.height*g));bh(this,b,d)}a.Gk(this.name,b)}else a.dl(this.name)}};
ah.prototype.makeAdornment=ah.prototype.Az=function(a){var b=n,b=a.ca.iE;if(b===n){b=new of;b.type=ch;var c=new dh;c.Mi=h;b.add(c);b.add(this.makeHandle(a,Jb));b.add(this.makeHandle(a,Lb));b.add(this.makeHandle(a,Rb));b.add(this.makeHandle(a,Pb));b.add(this.makeHandle(a,Sb));b.add(this.makeHandle(a,Zb));b.add(this.makeHandle(a,$b));b.add(this.makeHandle(a,Tb))}else if(xf(b),b=b.copy(),!(b instanceof of))return n;b.Cc=a;return b};
ah.prototype.makeHandle=ah.prototype.kH=function(a,b){var c=this.ds;if(c===n)return n;c=c.copy();c.Db=b;return c};
function bh(a,b,c){if(b!==n)if(!Eb(b.Db)&&""!==b.cursor)a:{a=b.Db;zb(a)&&(a=Ob);if(0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else if(1<=a.y)c+=90;else break a;0>c?c+=360:360<=c&&(c-=360);b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}else if(b instanceof x)for(b=b.elements;b.next();)bh(a,b.value,c)}
w.defineProperty(ah,{ds:"handleArchetype"},t("ok"),function(a){a&&w.i(a,P,ah,"handleArchetype");this.ok=a});w.u(ah,{handle:"handle"},t("sc"));w.u(ah,{Cc:"adornedObject"},t("Ja"));ah.prototype.canStart=ah.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;return a===n||a.eb||!a.Ln||!a.N.left?p:this.findToolHandleAt(a.xc.M,this.name)!==n?h:p};
ah.prototype.doActivate=ah.prototype.Bh=function(){var a=this.h;a!==n&&(this.sc=this.findToolHandleAt(a.xc.M,this.name),this.sc!==n&&(this.Ja=this.sc.ca.Cc,this.gn=this.Ja.angle,this.kF.set(this.Ja.Sa),this.Px.set(this.Ja.ca.location),this.qu.set(this.Ja.xa),this.ix=this.computeCellSize(),this.kx=this.computeMinSize(),this.jx=this.computeMaxSize(),a.Fc=h,this.hc(this.name),this.Y=h))};
ah.prototype.doDeactivate=ah.prototype.Di=function(){var a=this.h;a!==n&&(this.Nj(),this.Ja=this.sc=n,this.Y=a.Fc=p)};ah.prototype.doCancel=ah.prototype.Ej=function(){this.Ja.xa=this.qu;this.Ja.ca.location=this.Px;this.stopTool()};ah.prototype.doMouseMove=ah.prototype.Og=function(){var a=this.h;if(this.Y&&a!==n){var b=this.kx,c=this.jx,d=this.ix,e=this.Ja.ZC(a.N.M),g=this.Ja.Cv;g===eh&&(g=this.Ja.Ha.Zb);b=this.computeResize(e,this.sc.Db,b,c,d,!(g===fh||g===gh||a.N.shift));this.resize(b);hh(a)}};
ah.prototype.doMouseUp=ah.prototype.qe=function(){var a=this.h;if(this.Y&&a!==n){var b=this.kx,c=this.jx,d=this.ix,e=this.Ja.ZC(a.N.M),g=this.Ja.Cv;g===eh&&(g=this.Ja.Ha.Zb);b=this.computeResize(e,this.sc.Db,b,c,d,!(g===fh||g===gh||a.N.shift));this.resize(b);a.Ii();this.bf=this.name;a.za("PartResized",this.Ja,this.qu)}this.stopTool()};
ah.prototype.resize=ah.prototype.$L=function(a){var b=this.h;if(b!==n){var c=this.Ja.ca,d=c.position.copy(),e=this.Ja.Sa.copy(),g=this.Ja.bo(),i=this.Ja.Vk();360<=g?g-=360:0>g&&(g+=360);var j=Math.PI*g/180,k=Math.cos(j),j=Math.sin(j),l=a.width-e.width,e=a.height-e.height,m=90<g&&270>g?1:0;d.x+=i*((a.x+l*m)*k-(a.y+e*(0<g&&180>g?1:0))*j);d.y+=i*((a.x+l*(180<g&&360>g?1:0))*j+(a.y+e*m)*k);this.Ja.xa=a.size;c.Ei();c.position=d;b.yb()}};
ah.prototype.computeResize=ah.prototype.BJ=function(a,b,c,d,e,g){zb(b)&&(b=Ob);var i=this.Ja.Sa,j=i.x,k=i.y,l=i.x+i.width,m=i.y+i.height,q=1;if(!g){var q=i.width,r=i.height;0>=q&&(q=1);0>=r&&(r=1);q=r/q}a=fd(a.x,a.y,j,k,e.width,e.height);e=i.copy();0>=b.x?0>=b.y?(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=Math.max(l-e.x,c.width),e.y=Math.max(a.y,m-d.height),e.y=Math.min(e.y,m-c.height),e.height=Math.max(m-e.y,c.height),g||(a=e.height/e.width,q<a?(e.height=q*e.width,e.y=m-e.height):
(e.width=e.height/q,e.x=l-e.width))):1<=b.y?(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=Math.max(l-e.x,c.width),e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(a=e.height/e.width,q<a?e.height=q*e.width:(e.width=e.height/q,e.x=l-e.width))):(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=l-e.x,g||(e.height=q*e.width,e.y=k+0.5*(m-k-e.height))):1<=b.x?0>=b.y?(e.width=Math.max(Math.min(a.x-j,d.width),c.width),e.y=Math.max(a.y,m-d.height),e.y=Math.min(e.y,
m-c.height),e.height=Math.max(m-e.y,c.height),g||(a=e.height/e.width,q<a?(e.height=q*e.width,e.y=m-e.height):e.width=e.height/q)):1<=b.y?(e.width=Math.max(Math.min(a.x-j,d.width),c.width),e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(a=e.height/e.width,q<a?e.height=q*e.width:e.width=e.height/q)):(e.width=Math.max(Math.min(a.x-j,d.width),c.width),g||(e.height=q*e.width,e.y=k+0.5*(m-k-e.height))):0>=b.y?(e.y=Math.max(a.y,m-d.height),e.y=Math.min(e.y,m-c.height),e.height=m-e.y,g||(e.width=
e.height/q,e.x=j+0.5*(l-j-e.width))):1<=b.y&&(e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(e.width=e.height/q,e.x=j+0.5*(l-j-e.width)));return e};ah.prototype.computeMinSize=ah.prototype.wJ=function(){var a=this.Ja.we.copy(),b=this.we;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
ah.prototype.computeMaxSize=ah.prototype.vJ=function(){var a=this.Ja.ce.copy(),b=this.ce;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
ah.prototype.computeCellSize=ah.prototype.sJ=function(){var a=new bb(NaN,NaN),b=this.Ja.ca;if(b){var c=b.jE;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.Pk;isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width);isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height);b=this.h;if((isNaN(a.width)||isNaN(a.height))&&b)c=b.Rb.re,c!==n&&c.io&&(c=c.lz,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&
(!isNaN(c.height)&&0<c.height)&&(a.height=c.height)),b=b.Dv,b!==n&&(b.visible&&this.io)&&(c=b.cs,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};w.g(ah,"minSize",ah.prototype.we);
w.defineProperty(ah,{we:"minSize"},t("Ud"),function(a){this.Ud.I(a)||(u&&w.i(a,bb,ah,"minSize"),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),this.Ud.Ua(a))});w.g(ah,"maxSize",ah.prototype.ce);w.defineProperty(ah,{ce:"maxSize"},t("ij"),function(a){this.ij.I(a)||(u&&w.i(a,bb,ah,"maxSize"),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),this.ij.Ua(a))});w.g(ah,"cellSize",ah.prototype.Pk);
w.defineProperty(ah,{Pk:"cellSize"},t("Ui"),function(a){this.Ui.I(a)||(u&&w.i(a,bb,ah,"cellSize"),this.Ui.Ua(a))});w.g(ah,"isGridSnapEnabled",ah.prototype.io);w.defineProperty(ah,{io:"isGridSnapEnabled"},t("xl"),function(a){this.xl!==a&&(w.k(a,"boolean",ah,"isGridSnapEnabled"),this.xl=a)});w.g(ah,"originalDesiredSize",ah.prototype.zH);w.u(ah,{zH:"originalDesiredSize"},t("qu"));w.g(ah,"originalLocation",ah.prototype.AH);w.u(ah,{AH:"originalLocation"},t("Px"));
function ih(){Bf.call(this);this.name="Rotating";this.ey=45;this.by=2;this.Ja=n;var a=new V;a.rb="Ellipse";a.xa=new bb(6,6);a.fill="yellow";a.stroke="black";a.Za=1;a.cursor="pointer";this.ok=a;this.sc=n;this.gn=0;this.yB=new F}w.Q("RotatingTool",ih);w.Ea(ih,Bf);
ih.prototype.updateAdornments=ih.prototype.Qi=function(a){if(!(a===n||a instanceof U)){var b=n;if(a.Qa){var c=a.VH;if(a.wa.P()&&(c!==n&&a.mb()&&a.canRotate()&&c.Yk()&&c.wa.P())&&(b=a.Zn(this.name),b===n&&(b=this.makeAdornment(c),b.Nc=this.name),b!==n)){b.angle=c.bo();var d=n,e=n;c===a||c===a.Xb?(d=a.Xb,e=a.bg):(d=c,e=Ob);for(var g=d.Sa,e=new F(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);d!==n&&d!==c;)d.transform.Ta(e),d=d.fa;d=e.y;e=Math.max(e.x-c.Sa.width,0);b.bg=Ob;b.location=c.Ab(new H(1,0,50+
e,d))}a.Gk(this.name,b)}else a.dl(this.name)}};ih.prototype.makeAdornment=ih.prototype.Az=function(a){var b=n,b=a.ca.nE;if(b===n){b=new of;b.type=jh;var c=this.ds;c!==n&&b.add(c.copy())}else if(xf(b),b=b.copy(),!(b instanceof of))return n;b.Cc=a;return b};w.defineProperty(ih,{ds:"handleArchetype"},t("ok"),function(a){a&&w.i(a,P,ih,"handleArchetype");this.ok=a});w.u(ih,{handle:"handle"},t("sc"));w.u(ih,{Cc:"adornedObject"},t("Ja"));
ih.prototype.canStart=ih.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;return a===n||a.eb||!a.Mn||!a.N.left?p:this.findToolHandleAt(a.xc.M,this.name)!==n?h:p};ih.prototype.doActivate=ih.prototype.Bh=function(){var a=this.h;if(a!==n&&(this.sc=this.findToolHandleAt(a.xc.M,this.name),this.sc!==n)){this.Ja=this.sc.ca.Cc;var b=this.Ja.ca,c=b.Xb;this.yB=this.Ja===b||this.Ja===c?c.Ab(b.bg):this.Ja.Ab(Ob);this.gn=this.Ja.angle;a.Fc=h;this.hc(this.name);this.Y=h}};
ih.prototype.doDeactivate=ih.prototype.Di=function(){var a=this.h;a!==n&&(this.Nj(),this.Ja=this.sc=n,this.Y=a.Fc=p)};ih.prototype.doCancel=ih.prototype.Ej=function(){this.rotate(this.gn);this.stopTool()};ih.prototype.doMouseMove=ih.prototype.Og=function(){var a=this.h;this.Y&&a!==n&&(a=this.computeRotate(a.N.M),this.rotate(a))};
ih.prototype.doMouseUp=ih.prototype.qe=function(){var a=this.h;if(this.Y&&a!==n){var b=this.computeRotate(a.N.M);this.rotate(b);a.Ii();this.bf=this.name;a.za("PartRotated",this.Ja,this.gn)}this.stopTool()};ih.prototype.rotate=ih.prototype.rotate=function(a){this.Ja!==n&&(this.Ja.angle=a,this.h.yb())};
ih.prototype.computeRotate=ih.prototype.CJ=function(a){var a=this.yB.Bi(a),b=this.Ja.fa;b&&(a-=b.bo(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.AE),180),c=Math.min(Math.abs(this.zE),b/2);!this.h.N.shift&&(0<b&&0<c)&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};w.g(ih,"snapAngleMultiple",ih.prototype.AE);
w.defineProperty(ih,{AE:"snapAngleMultiple"},t("ey"),function(a){this.ey!==a&&(u&&w.k(a,"number",ih,"snapAngleMultiple"),this.ey=a)});w.g(ih,"snapAngleEpsilon",ih.prototype.zE);w.defineProperty(ih,{zE:"snapAngleEpsilon"},t("by"),function(a){this.by!==a&&(u&&w.k(a,"number",ih,"snapAngleEpsilon"),this.by=a)});w.g(ih,"originalAngle",ih.prototype.yH);w.u(ih,{yH:"originalAngle"},t("gn"));function kh(){Bf.call(this);this.name="ClickSelecting"}w.Q("ClickSelectingTool",kh);w.Ea(kh,Bf);
kh.prototype.canStart=kh.prototype.wf=function(){return!this.isEnabled||this.h===n||this.isBeyondDragSize()?p:h};kh.prototype.doMouseUp=kh.prototype.qe=function(){this.Y&&(this.standardMouseSelect(),this.standardMouseClick());this.stopTool()};function lh(){Bf.call(this);this.name="Action";this.xm=n}w.Q("ActionTool",lh);w.Ea(lh,Bf);
lh.prototype.canStart=lh.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;if(a===n)return p;var b=a.N,c=a.xd(b.M,function(a){for(;a.fa!==n;){if(a.Ev)return a;a=a.fa}return n},function(a){return a.Ev});return c!==n?(this.xm=c,a.Fm=a.xd(b.M,n,n),h):p};lh.prototype.doMouseDown=lh.prototype.Qr=function(){if(this.Y){var a=this.h.N,b=this.xm;b!==n&&(a.Bd=b,b.Dy!==n&&b.Dy(a,b))}else this.canStart()&&this.doActivate()};
lh.prototype.doMouseMove=lh.prototype.Og=function(){if(this.Y){var a=this.h.N,b=this.xm;b!==n&&(a.Bd=b,b.Ey!==n&&b.Ey(a,b))}};lh.prototype.doMouseUp=lh.prototype.qe=function(){if(this.Y){var a=this.h,b=a.N,c=this.xm;if(c===n)return;b.Bd=c;c.Fy!==n&&c.Fy(b,c);this.isBeyondDragSize()||Cf(c,b,a)}this.stopTool()};lh.prototype.doCancel=lh.prototype.Ej=function(){var a=this.h;if(a!==n){var a=a.N,b=this.xm;if(b===n)return;a.Bd=b;b.Cy!==n&&b.Cy(a,b)}this.stopTool()};
lh.prototype.doStop=lh.prototype.Sk=function(){this.xm=n};function ra(){Bf.call(this);this.name="ClickCreating";this.ck=n;this.wx=h;this.VA=new F(0,0)}w.Q("ClickCreatingTool",ra);w.Ea(ra,Bf);
ra.prototype.canStart=ra.prototype.wf=function(){if(!this.isEnabled||this.Ir===n)return p;var a=this.h;if(a===n||(a.eb||a.ue)||!a.Jn||!a.N.left||this.isBeyondDragSize())return p;if(this.qD){if(1===a.N.Od&&(this.VA=a.N.Zc.copy()),2!==a.N.Od||this.isBeyondDragSize(this.VA))return p}else if(1!==a.N.Od)return p;return a.Fa!==this&&a.Wr(a.N.M,h)!==n?p:h};ra.prototype.doMouseUp=ra.prototype.qe=function(){var a=this.h;this.Y&&a!==n&&this.insertPart(a.N.M);this.stopTool()};
ra.prototype.insertPart=ra.prototype.eL=function(a){var b=this.h;if(b===n)return n;var c=this.Ir;if(c===n)return n;this.hc(this.name);var d=n;c instanceof S?c.be()&&(xf(c),d=c.copy(),d instanceof S&&b.add(d)):c!==n&&(c=b.V.Aj(c),w.lb(c)&&(b.V.Er(c),d=b.Hj(c)));d instanceof S&&(d.location=a,b.ke&&b.select(d));b.Ii();this.bf=this.name;b.za("PartCreated",d);this.Nj();return d instanceof S?d:n};w.g(ra,"archetypeNodeData",ra.prototype.Ir);
w.defineProperty(ra,{Ir:"archetypeNodeData"},t("ck"),function(a){this.ck!==a&&(a!==n&&w.i(a,Object,ra,"archetypeNodeData"),this.ck=a)});w.g(ra,"isDoubleClick",ra.prototype.qD);w.defineProperty(ra,{qD:"isDoubleClick"},t("wx"),function(a){this.wx!==a&&(w.k(a,"boolean",ra,"isDoubleClick"),this.wx=a)});
function mh(){Bf.call(this);this.name="ContextMenu";this.FA=n;this.lB=new F;this.Im=n;if(w.jy===h){this.Im=new of;this.Yw=n;var a=this;this.PB=function(){a.stopTool()};if(w.IA===p){var b=document.createElement("div"),c=document.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";
var d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();
return p},p);b.addEventListener("selectstart",function(a){a.preventDefault();return p},p);c.addEventListener("contextmenu",function(a){a.preventDefault();return p},p);document.body&&(document.body.appendChild(b),document.body.appendChild(c));w.jt=b;w.it=c;w.IA=h}}}w.Q("ContextMenuTool",mh);w.Ea(mh,Bf);mh.prototype.canStart=mh.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;return a===n||this.isBeyondDragSize()||!a.N.right?p:this.Im!==n||this.findObjectWithContextMenu()!==n?h:p};
mh.prototype.doStart=mh.prototype.cz=function(){var a=this.h;a!==n&&this.lB.set(a.xc.M)};mh.prototype.doStop=mh.prototype.Sk=function(){this.hideDefaultContextMenu();this.hideContextMenu()};mh.prototype.findObjectWithContextMenu=mh.prototype.wK=function(){var a=this.h;if(a===n)return n;var b=a.xd(a.N.M,n,function(a){return!a.Oa.zc});if(b!==n){for(a=b;a!==n;){var c=a.contextMenu;if(c!==n)return a;a=a.fa}if(this.Im!==n)return b.ca}else if(c=a.contextMenu,c!==n)return a;return n};
mh.prototype.doActivate=mh.prototype.Bh=aa();mh.prototype.doMouseDown=mh.prototype.Qr=function(){if(this.Y){var a=this.h;if(a!==n&&this.Me!==n){var b=a.xd(a.N.M,n,n);b!==n&&b.Ki(this.Me)?(this.standardMouseClick(n,n),this.stopTool()):(this.stopTool(),a.Fa.doMouseDown())}}};
mh.prototype.doMouseUp=mh.prototype.qe=function(){!this.Y&&this.canStart()&&(this.Y=h);this.standardMouseSelect();this.standardMouseClick();var a=this.findObjectWithContextMenu();if(a!==n){var b=a.contextMenu;b!==n?this.showContextMenu(b,a instanceof P?a:n):this.showDefaultContextMenu()}else this.showDefaultContextMenu()};mh.prototype.doMouseMove=mh.prototype.Og=function(){this.Y&&this.standardMouseOver()};
mh.prototype.showContextMenu=mh.prototype.fM=function(a,b){w.i(a,of,mh,"showContextMenu:contextmenu");b!==n&&w.i(b,P,mh,"showContextMenu:obj");var c=this.h;if(c!==n){a!==this.Me&&this.hideContextMenu();a.Qd="Tool";a.Kj=p;a.scale=1/c.scale;c.add(a);if(b!==n){var d=n,e=b.Yr();e!==n&&(d=e.data);a.Cc=b;a.data=d}else a.data=c.V;a.Ei();this.positionContextMenu(a,b);this.Me=a;c.yb()}};
mh.prototype.positionContextMenu=mh.prototype.PL=function(a){var b=this.h;if(b!==n){var c=b.N.M.copy(),d=a.ya,b=b.$a;c.x+d.width>b.right&&(c.x-=d.width+5);c.y+d.height>b.bottom&&(c.y-=d.height+5);a.position=c}};mh.prototype.hideContextMenu=mh.prototype.WK=function(){var a=this.h;a!==n&&this.Me!==n&&(this.Me.data=n,this.Me.Cc=n,a.remove(this.Me),this.Me=n,this.standardMouseOver(),a.yb())};
mh.prototype.initializeDefaultButtons=mh.prototype.aL=function(){if(this.h===n)return n;var a=new z,b=this.h.Yf;a.add({text:"Copy",xf:function(){b.copySelection()},visible:function(){return b.canCopySelection()}});a.add({text:"Cut",xf:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}});a.add({text:"Delete",xf:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}});a.add({text:"Paste",xf:function(a){b.pasteSelection(a.N.M)},visible:function(){return b.canPasteSelection()}});
a.add({text:"Select All",xf:function(){b.selectAll()},visible:function(){return b.canSelectAll()}});a.add({text:"Undo",xf:function(){b.undo()},visible:function(){return b.canUndo()}});a.add({text:"Redo",xf:function(){b.redo()},visible:function(){return b.canRedo()}});a.add({text:"Zoom Out",xf:function(){b.decreaseZoom()},visible:function(){return b.canDecreaseZoom()}});a.add({text:"Zoom In",xf:function(){b.increaseZoom()},visible:function(){return b.canIncreaseZoom()}});a.add({text:"Zoom To Fit",
xf:function(){b.zoomToFit()},visible:function(){return b.canZoomToFit()}});a.add({text:"Reset Zoom",xf:function(){b.resetZoom()},visible:function(){return b.canResetZoom()}});a.add({text:"Group Selection",xf:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}});a.add({text:"Ungroup Selection",xf:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}});a.add({text:"Edit Text",xf:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}});
return a};
mh.prototype.showDefaultContextMenu=mh.prototype.gM=function(){var a=this.h;if(a!==n){this.Yw===n&&(this.Yw=this.initializeDefaultButtons());this.Im!==this.Me&&this.hideContextMenu();w.jt.innerHTML="";w.it.addEventListener("click",this.PB,p);var b=this,c=document.createElement("ul");c.className="defaultCXul";w.jt.appendChild(c);c.innerHTML="";for(var d=this.Yw.l;d.next();){var e=d.value,g=e.text,i=e.visible;if("function"!==typeof i||i()){i=document.createElement("li");i.className="defaultCXli";var j=
document.createElement("a");j.className="defaultCXa";j.href="#";j.fF=e.xf;j.addEventListener("click",function(c){this.fF(a);b.stopTool();c.preventDefault();return p},p);j.textContent=g;i.appendChild(j);c.appendChild(i)}}w.jt.style.display="block";w.it.style.display="block";this.Me=this.Im}};mh.prototype.hideDefaultContextMenu=mh.prototype.XK=function(){this.Me!==n&&this.Me===this.Im&&(w.jt.style.display="none",w.it.style.display="none",w.it.removeEventListener("click",this.PB,p),this.Me=n)};
w.g(mh,"currentContextMenu",mh.prototype.Me);w.defineProperty(mh,{Me:"currentContextMenu"},t("FA"),ba("FA"));w.u(mh,{HL:"mouseDownPoint"},t("lB"));function nh(){Bf.call(this);this.name="DragSelecting";this.Jm=175;this.eB=p;var a=new S;a.Qd="Tool";a.Kj=p;var b=new V;b.name="SHAPE";b.rb="Rectangle";b.fill=n;b.stroke="magenta";b.position=new F(0,0);a.add(b);this.Si=a}w.Q("DragSelectingTool",nh);w.Ea(nh,Bf);
nh.prototype.canStart=nh.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;if(a===n||!a.ke)return p;var b=a.N;return!b.left||a.Fa!==this&&(!this.isBeyondDragSize()||b.timestamp-a.xc.timestamp<this.pv||a.Wr(b.M,h)!==n)?p:h};nh.prototype.doActivate=nh.prototype.Bh=function(){var a=this.h;a!==n&&(this.Y=h,a.Fc=h,a.ub=h,a.add(this.ld),this.doMouseMove())};nh.prototype.doDeactivate=nh.prototype.Di=function(){var a=this.h;a!==n&&(a.remove(this.ld),a.ub=p,this.Y=a.Fc=p,a.yb())};
nh.prototype.doMouseMove=nh.prototype.Og=function(){var a=this.h;if(a!==n&&this.Y&&this.ld!==n){var b=this.computeBoxBounds();this.ld.Pe("SHAPE").xa=b.size;this.ld.position=b.position;a.yb()}};nh.prototype.doMouseUp=nh.prototype.qe=function(){if(this.Y){var a=this.h;a.remove(this.ld);try{a.vc="wait",this.selectInRect(this.computeBoxBounds())}finally{a.vc=""}}this.stopTool()};nh.prototype.computeBoxBounds=nh.prototype.kG=function(){var a=this.h;return a===n?new G(0,0,0,0):new G(a.xc.M,a.N.M)};
nh.prototype.selectInRect=nh.prototype.dM=function(a){var b=this.h;if(b!==n){var c=b.N;b.za("ChangingSelection");a=b.em(a,n,function(a){return a instanceof S&&a.Nk()},this.vD);if(c.Qk)if(c.shift)for(a=a.l;a.next();)c=a.value,c.Qa&&(c.Qa=p);else for(a=a.l;a.next();)c=a.value,c.Qa=!c.Qa;else{if(!c.shift){for(var d=new z(S),e=b.selection.l;e.next();)c=e.value,a.contains(c)||d.add(c);for(d=d.l;d.next();)c=d.value,c.Qa=p}for(a=a.l;a.next();)c=a.value,c.Qa||(c.Qa=h)}b.za("ChangedSelection")}};
w.g(nh,"delay",nh.prototype.pv);w.defineProperty(nh,{pv:"delay"},t("Jm"),ba("Jm"));w.g(nh,"isPartialInclusion",nh.prototype.vD);w.defineProperty(nh,{vD:"isPartialInclusion"},t("eB"),ba("eB"));w.g(nh,"box",nh.prototype.ld);w.defineProperty(nh,{ld:"box"},t("Si"),ba("Si"));function oh(){Bf.call(this);this.name="DragZooming";var a=new S;a.Qd="Tool";a.Kj=p;var b=new V;b.name="SHAPE";b.rb="Rectangle";b.fill=n;b.stroke="magenta";b.position=new F(0,0);a.add(b);this.Si=a;this.VB=n}w.Q("DragZoomingTool",oh);
w.Ea(oh,Bf);oh.prototype.canStart=oh.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;return a===n||!a.N.left||a.Fa!==this&&!this.isBeyondDragSize()?p:h};oh.prototype.doActivate=oh.prototype.Bh=function(){var a=this.h;a!==n&&(this.Y=h,a.Fc=h,a.ub=h,a.add(this.ld),this.doMouseMove())};oh.prototype.doDeactivate=oh.prototype.Di=function(){var a=this.h;a!==n&&(a.remove(this.ld),a.ub=p,this.Y=a.Fc=p,a.yb())};
oh.prototype.doMouseMove=oh.prototype.Og=function(){var a=this.h;if(a!==n&&this.Y&&this.ld!==n){var b=this.computeBoxBounds();this.ld.Pe("SHAPE").xa=b.size;this.ld.position=b.position;a.yb()}};oh.prototype.doMouseUp=oh.prototype.qe=function(){if(this.Y){var a=this.h;a.remove(this.ld);try{a.vc="wait",this.zoomToRect(this.computeBoxBounds())}finally{a.vc=""}}this.stopTool()};
oh.prototype.computeBoxBounds=oh.prototype.kG=function(){var a=this.h;if(a===n)return new G(0,0,0,0);var b=a.xc.M,c=a.N.M,a=c.x-b.x,d=c.y-b.y,e=this.Us;e===n&&(e=this.h);if(e===n)return new G(b,c);e=e.$a;if(0===e.height||0===d)return new G(b,c);e=e.width/e.height;Math.abs(a/d)<e?(c=b.x+a,a=b.y+Math.ceil(Math.abs(a)/e)*(0>d?-1:1)):(c=b.x+Math.ceil(Math.abs(d)*e)*(0>a?-1:1),a=b.y+d);return new G(b,new F(c,a))};
oh.prototype.zoomToRect=oh.prototype.sI=function(a){if(!(0.1>a.width)){var b=this.Us;b===n&&(b=this.h);b!==n&&(b.scale=Math.min(b.$a.width*b.scale/a.width,b.Cf),b.position=new F(a.x,a.y))}};w.g(oh,"box",oh.prototype.ld);w.defineProperty(oh,{ld:"box"},t("Si"),ba("Si"));w.g(oh,"zoomedDiagram",oh.prototype.Us);w.defineProperty(oh,{Us:"zoomedDiagram"},t("VB"),ba("VB"));
function ph(){Bf.call(this);this.name="Panning";this.Rx=new F;this.Ti=p;var a=this;this.DB=function(){document.removeEventListener("scroll",a.DB,p);a.stopTool()}}w.Q("PanningTool",ph);w.Ea(ph,Bf);ph.prototype.canStart=ph.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;return a===n||!a.uf&&!a.vf||!a.N.left||a.Fa!==this&&!this.isBeyondDragSize()?p:h};
ph.prototype.doActivate=ph.prototype.Bh=function(){var a=this.h;a!==n&&(this.Ti?(a.N.bubbles=h,document.addEventListener("scroll",this.DB,p)):(a.vc="move",a.Fc=h,this.Rx=a.position.copy()),this.Y=h)};ph.prototype.doDeactivate=ph.prototype.Di=function(){var a=this.h;a!==n&&(a.vc="",this.Y=a.Fc=p)};ph.prototype.doCancel=ph.prototype.Ej=function(){var a=this.h;a!==n&&(a.position=this.Rx,a.Fc=p);this.stopTool()};ph.prototype.doMouseMove=ph.prototype.Og=function(){this.move()};
ph.prototype.doMouseUp=ph.prototype.qe=function(){this.move();this.stopTool()};ph.prototype.move=function(){var a=this.h;if(this.Y&&a)if(this.Ti)a.N.bubbles=h;else{var b=a.position,c=a.xc.M,d=a.N.M,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.uf||(e=b.x);a.vf||(c=b.y);a.position=new F(e,c);a.Eh()}};w.g(ph,"bubbles",ph.prototype.bubbles);w.defineProperty(ph,{bubbles:"bubbles"},t("Ti"),ba("Ti"));w.g(ph,"originalPosition",ph.prototype.DH);w.u(ph,{DH:"originalPosition"},t("Rx"));
function qh(){Bf.call(this);this.name="TextEditing";this.Zw=this.HA=this.uy=n;this.iy=rh;this.tj=n;this.Xa=sh;this.zk=n}w.Q("TextEditingTool",qh);w.Ea(qh,Bf);var th;qh.LostFocus=th=w.s(qh,"LostFocus",0);var uh;qh.MouseDown=uh=w.s(qh,"MouseDown",1);var vh;qh.Tab=vh=w.s(qh,"Tab",2);var wh;qh.Enter=wh=w.s(qh,"Enter",3);qh.SingleClick=w.s(qh,"SingleClick",0);var rh;qh.SingleClickSelected=rh=w.s(qh,"SingleClickSelected",1);
var sh=w.s(qh,"StateNone",0),xh=w.s(qh,"StateActive",1),Eh=w.s(qh,"StateEditing",2),Fh=w.s(qh,"StateEditing2",3),Gh=w.s(qh,"StateValidating",4),Hh=w.s(qh,"StateValidated",5);w.g(qh,"textBlock",qh.prototype.rg);w.defineProperty(qh,{rg:"textBlock"},t("uy"),ba("uy"));w.g(qh,"currentTextEditor",qh.prototype.Ng);w.defineProperty(qh,{Ng:"currentTextEditor"},t("HA"),ba("HA"));w.g(qh,"defaultTextEditor",qh.prototype.GC);w.defineProperty(qh,{GC:"defaultTextEditor"},t("Zw"),ba("Zw"));w.g(qh,"starting",qh.prototype.CE);
w.defineProperty(qh,{CE:"starting"},t("iy"),function(a){this.iy!==a&&(u&&w.ib(a,qh,qh,"starting"),this.iy=a)});qh.prototype.canStart=qh.prototype.wf=function(){if(!this.isEnabled)return p;var a=this.h;if(a===n||a.eb||!a.N.left||this.isBeyondDragSize())return p;a=a.xd(a.N.M,n,function(a){return a instanceof na});if(!(a instanceof na)||!a.rv)return p;a=a.ca;return a===n||this.CE===rh&&!a.Qa?p:h};qh.prototype.doStart=qh.prototype.cz=function(){!this.Y&&this.rg!==n&&this.doActivate()};
qh.prototype.doActivate=qh.prototype.Bh=function(){if(!this.Y){var a=this.h;if(a!==n){var b=this.rg;b===n&&(b=a.xd(a.N.M,function(a){return a instanceof na?a:n}),b=b instanceof na?b:n);if(b!==n&&(this.rg=b,b.ca!==n)){this.Y=h;this.Xa=xh;this.hc(this.name);var c=this.GC,d=p;b.cA!==n&&(c=b.cA);c!==n&&!c.sA&&(d=h);if(c===n){c=document.createElement("textarea");c.sA=h;this.Zw=c;var e=this.rg.copy();c.addEventListener("input",function(){e.text=this.value;Ih(e,Infinity,Infinity);this.style.width=20+e.ya.width*
this.lI+"px";this.rows=e.El},p);c.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(c!==n)if(13==b)c.By(wh);else{if(9==b)return c.By(vh),a.preventDefault(),p;27==b&&(c.doCancel(),c.h&&c.h.focus())}},p);c.addEventListener("focus",function(){var a=this.textEditingTool;a.Xa===xh?a.Xa=Eh:a.Xa===Hh?a.Xa=Fh:a.Xa===Fh&&(a.Xa=Eh)},p)}if(c.sA){var g=b.Ab(Ob),i=a.position,j=a.scale,k=b.Vk()*j,l=b.Sa.width*k;Jh(b,b.font);g=new F((g.x-i.x)*j,(g.y-i.y)*j);c.value=b.text;a.Ci.style.font=
b.font;c.style.font="inherit";c.style.fontSize=100*k+"%";c.style.lineHeight="normal";l=20+l;c.style.width=l+"px";c.style.height="";c.rows=b.El;a.Ci.appendChild(c);c.style.left=(g.x-l/2|0)+"px";c.style.top=(g.y-c.clientHeight/2|0)+"px";c.style.textAlign=b.textAlign}else a.Ci.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.lI=k;if(d&&c.onActivate!==f)c.onActivate();this.Ng=c;c.focus()}}}};
qh.prototype.doCancel=qh.prototype.Ej=function(){this.zk!==n&&(this.Ng.style.border=this.zk,this.zk=n);this.stopTool()};qh.prototype.doMouseUp=qh.prototype.qe=function(){!this.Y&&this.canStart()&&this.doActivate()};qh.prototype.doMouseDown=qh.prototype.Qr=function(){this.Y&&this.By(uh)};
qh.prototype.acceptText=qh.prototype.By=function(a){switch(a){case uh:if(this.Xa===Hh||this.Xa===Fh)this.Ng.focus();else if(this.Xa===xh||this.Xa===Eh)this.Xa=Gh,Kh(this);break;case th:case wh:case vh:if(wh===a&&this.uy.Jv===h)break;if(this.Xa===xh||this.Xa===Eh)this.Xa=Gh,Kh(this)}};
function Kh(a){if(a.rg!==n&&a.Ng!==n){var b=a.rg,c=a.rg.text,d=a.Ng.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.rg,c,e)){a.Xa=Eh;b.Sr!==n&&b.Sr(a,c,e);a.zk===n&&(a.zk=a.Ng.style.border,a.Ng.style.border="3px solid red");a.Ng.focus();return}a.Xa=Hh;c!==e&&(a.rg.text=e);a.bf=a.name;b=a.h;b!==n&&b.za("TextEdited",a.rg,c);a.stopTool();b!==n&&b.focus()}a.zk!==n&&(a.Ng.style.border=a.zk,a.zk=n)}
qh.prototype.doDeactivate=qh.prototype.Di=function(){var a=this.h;if(a!==n){this.Y&&this.Nj();this.Xa=sh;this.rg=n;if(this.Ng!==n){var b=this.Ng;if(b.onDeactivate!==f)b.onDeactivate();b!==n&&a.Ci.removeChild(b)}this.Y=p}};qh.prototype.isValidText=qh.prototype.qL=function(a,b,c){w.i(a,na,qh,"isValidText:textblock");var d=this.Ms;if(d!==n&&!d(a,b,c))return p;d=a.Ms;return d!==n&&!d(a,b,c)?p:h};w.g(qh,"textValidation",qh.prototype.Ms);
w.defineProperty(qh,{Ms:"textValidation"},t("tj"),function(a){this.tj!==a&&(this.tj=a)});function mf(){Bf.call(this);this.name="ToolManager";this.mB=new z(Bf);this.nB=new z(Bf);this.oB=new z(Bf);this.YA=this.ZA=1E3;this.qt=this.Ww=n;this.pB=Ef}w.Q("ToolManager",mf);w.Ea(mf,Bf);var Ef;mf.WheelScroll=Ef=w.s(mf,"WheelScroll",0);var Df;mf.WheelZoom=Df=w.s(mf,"WheelZoom",1);w.g(mf,"mouseWheelBehavior",mf.prototype.mm);w.defineProperty(mf,{mm:"mouseWheelBehavior"},t("pB"),ba("pB"));
mf.prototype.initializeStandardTools=mf.prototype.cL=function(){this.WB=new lh;this.bE=new Tg;this.CD=new Wg;this.lE=new ah;this.pE=new ih;this.zz=new qa;this.re=new Ff;this.MC=new nh;this.Rr=new oh;this.Rr.isEnabled=p;this.VD=new ph;this.sC=new mh;this.iw=new qh;this.nC=new ra;this.oC=new kh};
mf.prototype.doMouseDown=mf.prototype.Qr=function(){var a=this.h;if(a!==n){var b=a.sa;b.Oy&&0!==b.hl&&w.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.We.length,c=0;c<b;c++){var d=this.We.oa(c);d.h===n&&d.ee(this.h);if(d.canStart()){a.Fa=d;a.Fa===d&&(d.Y||d.doActivate(),d.doMouseDown());return}}1===a.N.button&&(this.mm===Ef?this.mm=Df:this.mm===Df&&(this.mm=Ef));this.doActivate();this.standardWaitAfter(this.oz)}};
mf.prototype.doMouseMove=mf.prototype.Og=function(){var a=this.h;if(a!==n){if(this.Y)for(var b=this.eg.length,c=0;c<b;c++){var d=this.eg.oa(c);d.h===n&&d.ee(this.h);if(d.canStart()){a.Fa=d;a.Fa===d&&(d.Y||d.doActivate(),d.doMouseMove());return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.Y?this.oz:this.jD)}};mf.prototype.doCurrentObjectChanged=mf.prototype.uG=function(a,b){var c=this.Rk;c!==n&&!(b!==n&&(b===c||b.Ki(c)))&&this.hideToolTip()};
mf.prototype.doWaitAfter=mf.prototype.wG=function(){this.h&&this.h.va&&(this.doMouseHover(),this.Y||this.doToolTip())};mf.prototype.doMouseHover=mf.prototype.WJ=function(){var a=this.h;if(a!==n){var b=a.N;b.Bd===n&&(b.Bd=a.xd(b.M,n,n));var c=b.Bd;if(c!==n)for(;c!==n;){a=this.Y?c.rs:c.ss;if(a!==n&&(a(b,c),b.ae))break;c=c.fa}else a=this.Y?a.rs:a.ss,a!==n&&a(b)}};
mf.prototype.doToolTip=mf.prototype.aK=function(){var a=this.h;if(a!==n){var b=a.N;b.Bd===n&&(b.Bd=a.xd(b.M,n,n));b=b.Bd;if(b!==n){if(!(b===this.Rk||b.Ki(this.Rk))){for(;b!==n;){a=b.Ps;if(a!==n){this.showToolTip(a,b);return}b=b.fa}this.hideToolTip()}}else a=a.Ps,a!==n?this.showToolTip(a,n):this.hideToolTip()}};
mf.prototype.showToolTip=mf.prototype.hM=function(a,b){w.i(a,of,mf,"showToolTip:tooltip");b!==n&&w.i(b,P,mf,"showToolTip:obj");var c=this.h;if(c!==n){a!==this.Rk&&this.hideToolTip();a.Qd="Tool";a.Kj=p;a.scale=1/c.scale;c.add(a);if(b!==n&&b!==this.qt){var d=n,e=b.ca;e!==n&&(d=e.data);a.Cc=b;a.data=d}else b===n&&(a.data=c.V);if(b===n||b!==this.qt)a.Ei(),this.positionToolTip(a,b);this.Ww=a;this.qt=b;c.yb()}};
mf.prototype.positionToolTip=mf.prototype.QL=function(a){var b=this.h;if(b!==n){var c=b.N.M.copy(),d=a.ya,b=b.$a;c.x+d.width>b.right&&(c.x-=d.width+5);c.y=c.y+20+d.height>b.bottom?c.y-(d.height+5):c.y+20;a.position=c}};mf.prototype.hideToolTip=mf.prototype.YK=function(){if(this.Rk!==n){var a=this.h;a!==n&&(this.Rk.data=n,this.Rk.Cc=n,a.remove(this.Rk),this.qt=this.Ww=n,a.yb())}};w.u(mf,{Rk:"currentToolTip"},t("Ww"));
mf.prototype.doMouseUp=mf.prototype.qe=function(){this.cancelWaitAfter();if(this.Y){var a=this.h;if(a===n)return;for(var b=this.Sg.length,c=0;c<b;c++){var d=this.Sg.oa(c);d.h===n&&d.ee(this.h);if(d.canStart()){a.Fa=d;a.Fa===d&&(d.Y||d.doActivate(),d.doMouseUp());return}}}this.doDeactivate()};mf.prototype.doMouseWheel=mf.prototype.vG=function(){this.standardMouseWheel()};mf.prototype.doKeyDown=mf.prototype.az=function(){var a=this.h;a!==n&&a.Yf.doKeyDown()};
mf.prototype.doKeyUp=mf.prototype.bz=function(){var a=this.h;a!==n&&a.Yf.doKeyUp()};mf.prototype.doCancel=mf.prototype.Ej=function(){If!==n&&If.doCancel();Bf.prototype.Ej.call(this)};mf.prototype.findTool=mf.prototype.Qe=function(a){w.k(a,"string",mf,"findTool:name");for(var b=this.We.length,c=0;c<b;c++){var d=this.We.oa(c);if(d.name===a)return d}b=this.eg.length;for(c=0;c<b;c++)if(d=this.eg.oa(c),d.name===a)return d;b=this.Sg.length;for(c=0;c<b;c++)if(d=this.Sg.oa(c),d.name===a)return d;return n};
mf.prototype.replaceTool=mf.prototype.QH=function(a,b){w.k(a,"string",mf,"replaceTool:name");b!==n&&(w.i(b,Bf,mf,"replaceTool:newtool"),b.h&&b.h!==this.h&&w.m("Cannot share tools between Diagrams: "+b.toString()),b.ee(this.h));for(var c=this.We.length,d=0;d<c;d++){var e=this.We.oa(d);if(e.name===a)return b!==n?this.We.cw(d,b):this.We.Ye(d),e}c=this.eg.length;for(d=0;d<c;d++)if(e=this.eg.oa(d),e.name===a)return b!==n?this.eg.cw(d,b):this.eg.Ye(d),e;c=this.Sg.length;for(d=0;d<c;d++)if(e=this.Sg.oa(d),
e.name===a)return b!==n?this.Sg.cw(d,b):this.Sg.Ye(d),e;return n};function Lh(a,b,c,d){w.k(b,"string",mf,"replaceStandardTool:name");w.i(d,z,mf,"replaceStandardTool:list");c!==n&&(w.i(c,Bf,mf,"replaceStandardTool:newtool"),c.h&&c.h!==a.h&&w.m("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.ee(a.h));a.Qe(b)?a.QH(b,c):c!==n&&d.add(c)}w.u(mf,{We:"mouseDownTools"},t("mB"));w.u(mf,{eg:"mouseMoveTools"},t("nB"));w.u(mf,{Sg:"mouseUpTools"},t("oB"));w.g(mf,"hoverDelay",mf.prototype.jD);
w.defineProperty(mf,{jD:"hoverDelay"},t("ZA"),ba("ZA"));w.g(mf,"holdDelay",mf.prototype.oz);w.defineProperty(mf,{oz:"holdDelay"},t("YA"),ba("YA"));w.g(mf,"actionTool",mf.prototype.WB);w.defineProperty(mf,{WB:"actionTool"},function(){return this.Qe("Action")},function(a){Lh(this,"Action",a,this.We)});w.g(mf,"relinkingTool",mf.prototype.bE);w.defineProperty(mf,{bE:"relinkingTool"},function(){return this.Qe("Relinking")},function(a){Lh(this,"Relinking",a,this.We)});w.g(mf,"linkReshapingTool",mf.prototype.CD);
w.defineProperty(mf,{CD:"linkReshapingTool"},function(){return this.Qe("LinkReshaping")},function(a){Lh(this,"LinkReshaping",a,this.We)});w.g(mf,"resizingTool",mf.prototype.lE);w.defineProperty(mf,{lE:"resizingTool"},function(){return this.Qe("Resizing")},function(a){Lh(this,"Resizing",a,this.We)});w.g(mf,"rotatingTool",mf.prototype.pE);w.defineProperty(mf,{pE:"rotatingTool"},function(){return this.Qe("Rotating")},function(a){Lh(this,"Rotating",a,this.We)});w.g(mf,"linkingTool",mf.prototype.zz);
w.defineProperty(mf,{zz:"linkingTool"},function(){return this.Qe("Linking")},function(a){Lh(this,"Linking",a,this.eg)});w.g(mf,"draggingTool",mf.prototype.re);w.defineProperty(mf,{re:"draggingTool"},function(){return this.Qe("Dragging")},function(a){Lh(this,"Dragging",a,this.eg)});w.g(mf,"dragSelectingTool",mf.prototype.MC);w.defineProperty(mf,{MC:"dragSelectingTool"},function(){return this.Qe("DragSelecting")},function(a){Lh(this,"DragSelecting",a,this.eg)});w.g(mf,"panningTool",mf.prototype.VD);
w.defineProperty(mf,{VD:"panningTool"},function(){return this.Qe("Panning")},function(a){Lh(this,"Panning",a,this.eg)});w.g(mf,"dragZoomingTool",mf.prototype.Rr);w.defineProperty(mf,{Rr:"dragZoomingTool"},function(){return this.Qe("DragZooming")},function(a){Lh(this,"DragZooming",a,this.eg)});w.g(mf,"contextMenuTool",mf.prototype.sC);w.defineProperty(mf,{sC:"contextMenuTool"},function(){return this.Qe("ContextMenu")},function(a){Lh(this,"ContextMenu",a,this.Sg)});w.g(mf,"textEditingTool",mf.prototype.iw);
w.defineProperty(mf,{iw:"textEditingTool"},function(){return this.Qe("TextEditing")},function(a){Lh(this,"TextEditing",a,this.Sg)});w.g(mf,"clickCreatingTool",mf.prototype.nC);w.defineProperty(mf,{nC:"clickCreatingTool"},function(){return this.Qe("ClickCreating")},function(a){Lh(this,"ClickCreating",a,this.Sg)});w.g(mf,"clickSelectingTool",mf.prototype.oC);w.defineProperty(mf,{oC:"clickSelectingTool"},function(){return this.Qe("ClickSelecting")},function(a){Lh(this,"ClickSelecting",a,this.Sg)});
function jf(){w.jc(this);this.ba=n;this.Nb=new z(S);this.Bb="";this.mi=1;this.Ax=p;this.Mg=this.$j=this.Zj=this.Yj=this.Xj=this.Vj=this.Uj=this.Wj=this.Tj=this.bk=this.Sj=this.ak=this.Rj=this.Qj=h;this.wB=[]}w.Q("Layer",jf);jf.prototype.ee=ba("ba");
jf.prototype.toString=function(a){a===f&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,g=0,i=0,j=this.Nb.l;j.next();){var k=j.value;k instanceof vf?e++:k instanceof T?d++:k instanceof U?g++:k instanceof of?i++:c++}j="";0<c&&(j+=c+" Parts ");0<d&&(j+=d+" Nodes ");0<e&&(j+=e+" Groups ");0<g&&(j+=g+" Links ");0<i&&(j+=i+" Adornments ");if(1<a)for(c=this.Nb.l;c.next();)d=c.value,j+="\n    "+d.toString(a-1),(e=d.data)&&w.ec(e)&&(j+=" #"+w.ec(e)),d instanceof T?j+=" "+ke(e):d instanceof
U&&(j+=" "+ke(d.ga)+" "+ke(d.la));return b+" "+this.Nb.count+": "+j};jf.prototype.findObjectAt=jf.prototype.xd=function(a,b,c){b===f&&(b=n);c===f&&(c=n);var d=this.Nb,e=p;this.h.$a.ua(a)&&(e=h);for(var g=new F,i=d.length;i--;){var j=d.oa(i);if(!(e===h&&j.he===p)&&j.mb()&&(Za(g.set(a),j.je),j=j.xd(g,b,c),j!==n&&(b!==n&&(j=b(j)),j&&(c===n||c(j)))))return j}return n};
jf.prototype.findObjectsAt=jf.prototype.$n=function(a,b,c,d){b===f&&(b=n);c===f&&(c=n);!(d instanceof z)&&!(d instanceof ma)&&(d=new ma(P));var e=this.Nb,g=p;this.h.$a.ua(a)&&(g=h);for(var i=new F,j=e.length;j--;){var k=e.oa(j);!(g===h&&k.he===p)&&k.mb()&&(Za(i.set(a),k.je),k.$n(i,b,c,d)&&(b!==n&&(k=b(k)),k&&(c===n||c(k))&&d.add(k)))}return d};
jf.prototype.findObjectsIn=jf.prototype.em=function(a,b,c,d,e){b===f&&(b=n);c===f&&(c=n);d===f&&(d=p);!(e instanceof z)&&!(e instanceof ma)&&(e=new ma(P));var g=this.Nb,i=p;this.h.$a.Xl(a)&&(i=h);for(var j=g.length;j--;){var k=g.oa(j);!(i===h&&k.he===p)&&(k.mb()&&k.em(a,b,c,d,e))&&(b!==n&&(k=b(k)),k&&(c===n||c(k))&&e.add(k))}return e};
jf.prototype.findObjectsNear=jf.prototype.ao=function(a,b,c,d,e){c===f&&(c=n);d===f&&(d=n);!(e instanceof z)&&!(e instanceof ma)&&(e=new ma(P));var g=this.Nb,i=p;this.h.$a.ua(a)&&(i=h);for(var j=new F,k=g.length;k--;){var l=g.n[k];if(!(i===h&&l.he===p)&&l.mb()){Za(j.set(a),l.je);var m=new F(a.x+b,a.y);Za(m,l.je);l.ao(j,m,c,d,e)&&(c!==n&&(l=c(l)),l&&(d===n||d(l))&&e.add(l))}}return e};da=jf.prototype;
da.Ne=function(a,b,c){if(this.visible){a.globalAlpha=this.mi;var d=this.Nb,c=c?c:b.$a,e=[],g=b.scale;if(b.tk)for(var i=d.length,j=0;j<i;j++){var k=d.n[j];k.gB=j;if(k instanceof U&&(k.fc&&e.push(k),k.vi===p))continue;var l=k.wa;l.Se(c)?(1<l.width*g||1<l.height*g?k.Ne(a,b):Mh(k,a),k.he=h):k.he=p}else{i=d.length;for(j=0;j<i;j++)if(k=d.n[j],k.he){if(k instanceof U&&(k.fc&&e.push(k),k.vi===p))continue;l=k.wa;1<l.width*g||1<l.height*g?k.Ne(a,b):Mh(k,a)}}this.wB=e;a.globalAlpha=1}};
da.j=function(a,b,c,d,e){var g=this.h;g!==n&&g.Rc(he,a,this,b,c,d,e)};da.jm=function(a,b,c){var d=this.Nb;b.G=this;if(a>=d.count)a=d.count;else if(d.oa(a)===b)return-1;d.yc(a,b);b.fs();d=this.h;d!==n&&(c?Nh(d):d.jm(b));b instanceof vf&&this.fw(b);return a};da.se=function(a,b,c){var d=this.Nb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.oa(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.gs();d.Ye(a);d=this.h;d!==n&&(c?Nh(d):d.se(b));b.G=n;return a};
da.fw=function(a){for(;a!==n;){if(a.Oa===this){var b=a;if(b.Gc.next()){for(var c=-1,d=-1,e=this.Nb.n,g=e.length,i=0;i<g;i++){var j=e[i];if(j===b&&(c=i,0<=d))break;if(0>d&&j.cb===b&&(d=i,0<=c))break}!(0>d)&&d<c&&(e=this.Nb,e.Ye(c),e.yc(d,b))}}a=a.cb}};da.clear=function(){for(var a=this.Nb.sg(),b=a.length,c=0;c<b;c++)a[c].he=p,this.se(-1,a[c])};w.u(jf,{cl:"parts"},function(){return this.Nb.l});w.u(jf,{LL:"partsBackwards"},function(){return this.Nb.ko});w.u(jf,{h:"diagram"},t("ba"));w.g(jf,"name",jf.prototype.name);
w.defineProperty(jf,{name:"name"},t("Bb"),function(a){w.k(a,"string",jf,"name");var b=this.Bb;if(b!==a){var c=this.h;if(c!==n){""===b&&w.m("Cannot rename default Layer to: "+a);for(c=c.Lv;c.next();)c.value.name===a&&w.m("Layer.name is already present in this diagram: "+a)}this.Bb=a;this.j("name",b,a);for(a=this.Nb.l;a.next();)a.value.Qd=this.Bb}});w.g(jf,"opacity",jf.prototype.opacity);
w.defineProperty(jf,{opacity:"opacity"},t("mi"),function(a){var b=this.mi;b!==a&&(w.k(a,"number",jf,"opacity"),(0>a||1<a)&&w.ra(a,"0 <= val <= 1",jf,"opacity"),this.mi=a,this.j("opacity",b,a),a=this.h,a!==n&&Nh(a))});w.g(jf,"isTemporary",jf.prototype.zc);w.defineProperty(jf,{zc:"isTemporary"},t("Ax"),function(a){var b=this.Ax;b!==a&&(w.k(a,"boolean",jf,"isTemporary"),this.Ax=a,this.j("isTemporary",b,a))});w.g(jf,"visible",jf.prototype.visible);
w.defineProperty(jf,{visible:"visible"},t("Mg"),function(a){var b=this.Mg;if(b!==a){w.k(a,"boolean",jf,"visible");this.Mg=a;this.j("visible",b,a);for(a=this.Nb.l;a.next();)a.value.updateAdornments();a=this.h;a!==n&&Nh(a)}});w.g(jf,"allowCopy",jf.prototype.vj);w.defineProperty(jf,{vj:"allowCopy"},t("Qj"),function(a){var b=this.Qj;b!==a&&(w.k(a,"boolean",jf,"allowCopy"),this.Qj=a,this.j("allowCopy",b,a))});w.g(jf,"allowDelete",jf.prototype.Jk);
w.defineProperty(jf,{Jk:"allowDelete"},t("Rj"),function(a){var b=this.Rj;b!==a&&(w.k(a,"boolean",jf,"allowDelete"),this.Rj=a,this.j("allowDelete",b,a))});w.g(jf,"allowTextEdit",jf.prototype.Nn);w.defineProperty(jf,{Nn:"allowTextEdit"},t("ak"),function(a){var b=this.ak;b!==a&&(w.k(a,"boolean",jf,"allowTextEdit"),this.ak=a,this.j("allowTextEdit",b,a))});w.g(jf,"allowGroup",jf.prototype.In);
w.defineProperty(jf,{In:"allowGroup"},t("Sj"),function(a){var b=this.Sj;b!==a&&(w.k(a,"boolean",jf,"allowGroup"),this.Sj=a,this.j("allowGroup",b,a))});w.g(jf,"allowUngroup",jf.prototype.On);w.defineProperty(jf,{On:"allowUngroup"},t("bk"),function(a){var b=this.bk;b!==a&&(w.k(a,"boolean",jf,"allowUngroup"),this.bk=a,this.j("allowUngroup",b,a))});w.g(jf,"allowLink",jf.prototype.Sl);
w.defineProperty(jf,{Sl:"allowLink"},t("Tj"),function(a){var b=this.Tj;b!==a&&(w.k(a,"boolean",jf,"allowLink"),this.Tj=a,this.j("allowLink",b,a))});w.g(jf,"allowRelink",jf.prototype.wj);w.defineProperty(jf,{wj:"allowRelink"},t("Wj"),function(a){var b=this.Wj;b!==a&&(w.k(a,"boolean",jf,"allowRelink"),this.Wj=a,this.j("allowRelink",b,a))});w.g(jf,"allowMove",jf.prototype.Kk);
w.defineProperty(jf,{Kk:"allowMove"},t("Uj"),function(a){var b=this.Uj;b!==a&&(w.k(a,"boolean",jf,"allowMove"),this.Uj=a,this.j("allowMove",b,a))});w.g(jf,"allowPrint",jf.prototype.Hr);w.defineProperty(jf,{Hr:"allowPrint"},t("Vj"),function(a){var b=this.Vj;b!==a&&(w.k(a,"boolean",jf,"allowPrint"),this.Vj=a,this.j("allowPrint",b,a))});w.g(jf,"allowReshape",jf.prototype.Kn);
w.defineProperty(jf,{Kn:"allowReshape"},t("Xj"),function(a){var b=this.Xj;b!==a&&(w.k(a,"boolean",jf,"allowReshape"),this.Xj=a,this.j("allowReshape",b,a))});w.g(jf,"allowResize",jf.prototype.Ln);w.defineProperty(jf,{Ln:"allowResize"},t("Yj"),function(a){var b=this.Yj;b!==a&&(w.k(a,"boolean",jf,"allowResize"),this.Yj=a,this.j("allowResize",b,a))});w.g(jf,"allowRotate",jf.prototype.Mn);
w.defineProperty(jf,{Mn:"allowRotate"},t("Zj"),function(a){var b=this.Zj;b!==a&&(w.k(a,"boolean",jf,"allowRotate"),this.Zj=a,this.j("allowRotate",b,a))});w.g(jf,"allowSelect",jf.prototype.ke);w.defineProperty(jf,{ke:"allowSelect"},t("$j"),function(a){var b=this.$j;b!==a&&(w.k(a,"boolean",jf,"allowSelect"),this.$j=a,this.j("allowSelect",b,a))});
function A(a){function b(a){var b=a.toLowerCase(),c=new z("function");e.add(a,c);e.add(b,c);g.add(a,a);g.add(b,a)}function c(){document.removeEventListener("DOMContentLoaded",c,p);Oh(d)}1<arguments.length&&w.m("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");w.jc(this);w.NA=[];this.tc=h;this.Ke=17;var d=this;document.body!==n?Oh(this):document.addEventListener("DOMContentLoaded",c,p);this.gb=new z(jf);this.FB=this.EB=this.HB=this.GB=this.Lb=this.hk=this.va=
n;this.qb=(new F(NaN,NaN)).freeze();this.bc=1;this.ux=(new F(NaN,NaN)).freeze();this.vx=NaN;this.au=1E-4;this.Yt=100;this.Nd=new Wa;this.Wu=(new F(NaN,NaN)).freeze();this.zt=(new G(NaN,NaN,NaN,NaN)).freeze();this.kl=zf;this.pl=Hb;this.qk=zf;this.Sm=Hb;this.Jt=this.It=Jb;this.fh=new ma(P);this.eh=h;this.Xi=new ka(U,G);this.wt=h;this.dF=250;this.cF=1E3;this.Wg=n;this.dt=(new hb(16,16,16,16)).freeze();this.OA=h;this.yn=this.tf=p;this.yp=h;this.yy=p;this.Ag=new $d;this.Mc=new $d;this.ac=new $d;this.Vi=
n;this.Lu=-1;this.ky=p;this.bx=new ka("string",z);this.ax=new ka("string","string");var e=new ka("string",z),g=new ka("string","string");b("BackgroundSingleClicked");b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");
b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");this.bx=e;this.ax=g;this.ku=new ma(T);this.Pl=new ma(vf);this.Tt=new ma(U);this.Nb=new ma(S);this.Pt=h;this.aB=p;this.Tu=zg;this.Vw=this.$w=this.Ru=n;this.pt="";this.lp=
"auto";this.Sh=this.ui=this.gi=this.du=this.hi=this.ii=this.ji=this.Rh=this.Uh=this.Qh=n;this.Zh=h;this.Mw=p;this.Sw=n;this.vl=this.qi=this.vA=p;this.La=h;this.Kd=n;var i=this;this.jB=function(a){if(a.V===i.V&&i.La){i.La=p;try{var b=a.md;""===a.Ve&&b===he&&Ph(i,a.object,a.propertyName)}finally{i.La=h}}};this.kB=function(a){if(a.V===i.V&&i.La){i.La=p;try{var b=a.md,c=a.Ve;if(""!==c)if(b===he)if("linkFromKey"===c){var d=a.object,e=i.Af(d);if(e!==n){var g=a.newValue,s=i.Zf(g);e.ga=s}}else if("linkToKey"===
c)d=a.object,e=i.Af(d),e!==n&&(g=a.newValue,s=i.Zf(g),e.la=s);else if("linkFromPortId"===c){if(d=a.object,e=i.Af(d),e!==n){var v=a.newValue;"string"===typeof v&&(e.Gi=v)}}else if("linkToPortId"===c)d=a.object,e=i.Af(d),e!==n&&(v=a.newValue,"string"===typeof v&&(e.Pj=v));else if("nodeGroupKey"===c){var d=a.object,y=i.Hj(d);if(y!==n){var C=a.newValue;if(C!==f){var E=i.Zf(C);y.cb=E instanceof vf?E:n}else y.cb=n}}else if("linkLabelKeys"===c){if(d=a.object,e=i.Af(d),e!==n){var I=a.oldValue,D=a.newValue;
if(w.isArray(I))for(var M=w.Sb(I),N=0;N<M;N++){var Z=w.Eb(I,N),s=i.Zf(Z);s!==n&&(s.zd=n)}if(w.isArray(D)){M=w.Sb(D);for(N=0;N<M;N++)Z=w.Eb(D,N),s=i.Zf(Z),s!==n&&(s.zd=e)}}}else if("nodeParentKey"===c){var va=a.object,la=i.Zf(a.newValue),ta=i.Vr(va);if(ta!==n){var Ea=ta.zv();Ea!==n?la===n?i.remove(Ea):i.Yc?Ea.ga=la:Ea.la=la:Qh(i,la,ta)}}else if("parentLinkCategory"===c){var va=a.object,ta=i.Vr(va),Ha=a.newValue;ta!==n&&"string"===typeof Ha&&(Ea=ta.zv(),Ea!==n&&(Ea.Nc=Ha))}else if("nodeCategory"===
c){var d=a.object,cb=i.Hj(d),Ha=a.newValue;cb!==n&&"string"===typeof Ha&&(cb.Nc=Ha)}else if("linkCategory"===c){var d=a.object,rb=i.Af(d),Ha=a.newValue;rb!==n&&"string"===typeof Ha&&(rb.Nc=Ha)}else if("nodeDataArray"===c){var Xa=a.oldValue;Rh(i,Xa);var Na=a.newValue;Sh(i,Na)}else"linkDataArray"===c&&(Xa=a.oldValue,Rh(i,Xa),Na=a.newValue,Th(i,Na));else if(b===ie)Na=a.newValue,"nodeDataArray"===c&&w.lb(Na)?Uh(i,Na):"linkDataArray"===c&&w.lb(Na)?Vh(i,Na):"linkLabelKeys"===c&&Me(Na)&&(e=i.Af(a.object),
s=i.Zf(Na),e!==n&&s!==n&&(s.zd=e));else if(b===je)Xa=a.oldValue,"nodeDataArray"===c&&w.lb(Xa)?Wh(i,Xa):"linkDataArray"===c&&w.lb(Xa)?Wh(i,Xa):"linkLabelKeys"===c&&Me(Xa)&&(s=i.Zf(Xa),s!==n&&(s.zd=n));else{if(b===ge&&"SourceChanged"===c){var y=i.Hj(a.object),gb=a.propertyName;y!==n&&"string"===typeof gb&&(y.vb(gb),i.V instanceof De&&(e=i.Af(a.object),e!==n&&e.vb(gb)))}}else if(b===he){var Ya=a.propertyName,d=a.object;if(d===i.V){if("nodeKeyProperty"===Ya||"nodeCategoryProperty"===Ya||"linkFromKeyProperty"===
Ya||"linkToKeyProperty"===Ya||"linkFromPortIdProperty"===Ya||"linkToPortIdProperty"===Ya||"nodeIsLinkLabelProperty"===Ya||"linkLabelKeysProperty"===Ya||"nodeIsGroupProperty"===Ya||"nodeGroupKeyProperty"===Ya||"nodeParentKeyProperty"===Ya||"linkCategoryProperty"===Ya)i.sa.tb||i.om()}else Ph(i,d,Ya)}else if(b===ie||b===je){var nb=a.md===ie,vd=nb?a.Df:a.Ef,ne=nb?a.newValue:a.oldValue,Nd=i.Bl.qa(a.object);if(Array.isArray(Nd))for(a=0;a<Nd.length;a++){var Ub=Nd[a];"number"===typeof vd&&((Ub.type===ch||
Ub.type===Xh)&&vd++,nb?w.lb(ne)&&(Yh(Ub,ne,vd),Zh(Ub,Ub)):(Ub.se(vd),Zh(Ub,Ub)))}}else if(b===ge){var Fc=a.propertyName;if("S"!==Fc[0]){if("CommittingTransaction"!==Fc){if("FinishedUndo"===Fc||"FinishedRedo"===Fc)i.sa.ci=h,$h(i),i.sa.ci=p;i.Bg&&i.Fa.standardMouseOver();for(var ae=i.selection.l;ae.next();)ae.value.updateAdornments()}i.yn=h;i.Eh();hh(i)}else"StartingFirstTransaction"===Fc&&(!i.Td&&!i.Bg)&&(i.yn=h,i.yp&&(i.tf=h))}}finally{i.La=h}}};this.Th=new ka(Object,S);this.ik=new ka(Object,U);this.Bl=
new ka(Object,Array);this.uk=p;this.Rj=this.Qj=this.Vs=this.bi=h;this.Xs=this.Ws=p;this.bt=this.$s=this.$j=this.Zj=this.Yj=this.Xj=this.Vj=this.Uj=this.Wj=this.Tj=this.Zs=this.bk=this.Sj=this.ak=h;this.dB=p;this.at=this.Ys=this.Et=this.Dt=h;this.zu=this.yu=16;this.Zx=this.xu=p;this.ay=this.$x=this.rj=this.qj=n;this.ie=(new hb(5)).freeze();this.Cu=(new ma(S)).freeze();this.Zt=999999999;this.tk=this.sk=this.$h=h;this.tl=this.sl=p;this.Ht=this.Gt=0;this.rd=n;this.ct=h;this.Bg=p;this.ud=n;this.pu=1;this.nx=
p;this.CB=0;this.SB=(new G(NaN,NaN,NaN,NaN)).freeze();this.ut=(new G(NaN,NaN,NaN,NaN)).freeze();this.Td=p;this.ru=new ma;ai(this);this.St=this.Bt=this.ju=this.KA=this.JA=this.LA=this.dj=this.nk=this.ki=n;bi(this);this.Jc=n;this.At=p;this.Fm=this.Wx=n;this.Rb=new mf;this.Rb.initializeStandardTools();this.Fa=this.ov=this.Rb;this.Yf=new pa;this.V=new O;this.qi=h;this.Pb=new ci;this.qi=p;a===f&&(a=document.createElement("div"));this.Ft=new di;ei(this,a);this.fr=n;this.bj=1;this.Xm=0;this.Rt=new F;this.vy=
500;this.qB=p;window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&(this.qB=h);this.tc=p}w.Q("Diagram",A);
function bi(a){a.ki=new ka("string",S);var b=new T,c=new na;c.bind(new df("text","",ke));b.add(c);a.LA=b;a.ki.add("",b);b=new T;c=new na;c.stroke="brown";c.bind(new df("text","",ke));b.add(c);a.ki.add("Comment",b);b=new T;b.Kj=p;b.Ly=p;c=new V;c.rb="Ellipse";c.fill="black";c.stroke=n;c.xa=new bb(3,3);b.add(c);a.ki.add("LinkLabel",b);a.nk=new ka("string",vf);b=new vf;b.Fs="GROUPPANEL";b.type=fi;c=new na;c.font="bold 12pt sans-serif";c.bind(new df("text","",ke));b.add(c);c=new x(Xh);c.name="GROUPPANEL";
var d=new V;d.rb="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new dh;d.padding=new hb(5,5,5,5);c.add(d);b.add(c);a.JA=b;a.nk.add("",b);a.dj=new ka("string",U);b=new U;c=new V;c.Mi=h;b.add(c);c=new V;c.um="Standard";c.fill="black";c.stroke=n;c.Za=0;b.add(c);a.KA=b;a.dj.add("",b);b=new U;c=new V;c.Mi=h;c.stroke="brown";b.add(c);a.dj.add("Comment",b);b=new of;b.type=Xh;c=new V;c.fill=n;c.stroke="magenta";c.Za=2;b.add(c);c=new dh;c.margin=new hb(1,1,1,1);b.add(c);a.ju=b;a.Bt=
b;b=new of;b.type=Ug;c=new V;c.Mi=h;c.fill=n;c.stroke="magenta";c.Za=0;b.add(c);a.St=b}
function Oh(a){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var c=document.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);document.body.removeChild(c);a.Ke=d-b}
A.prototype.toString=function(a){a===f&&(a=0);var b="";this.id&&(b=this.id);this.Ci&&this.Ci.id&&(b=this.Ci.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.gb.l;c.next();)b+="\n  "+c.value.toString(a-1);return b};A.prototype.checkProperties=A.prototype.rJ=function(){return w.eG(this)};A.fromDiv=function(a){var b=a;"string"===typeof a&&(b=document.getElementById(a));return b instanceof HTMLDivElement&&b.ba instanceof A?b.ba:n};w.g(A,"div",A.prototype.Ci);
w.defineProperty(A,{Ci:"div"},t("Lb"),function(a){a!==n&&w.i(a,HTMLDivElement,A,"div");if(this.Lb!==a){var b=this.Lb;if(b!==n){delete b.ba;b.innerHTML="";this.va!==n&&(this.va.ba=n,this.va.removeEventListener("touchstart",this.ME,p),this.va.removeEventListener("touchmove",this.LE,p),this.va.removeEventListener("touchend",this.KE,p));b=this.Ru;if(b!==n){for(var c=b.mB,d=c.length,e=0;e<d;e++)c.n[e].cancelWaitAfter();c=b.nB;d=c.length;for(e=0;e<d;e++)c.n[e].cancelWaitAfter();c=b.oB;d=c.length;for(e=
0;e<d;e++)c.n[e].cancelWaitAfter()}b.cancelWaitAfter();this.hk=this.va=n;window.removeEventListener("resize",this.Cz,p);window.removeEventListener("mousemove",this.uo,h);window.removeEventListener("mousedown",this.to,h);window.removeEventListener("mouseup",this.wo,h);window.removeEventListener("mousewheel",this.Tg,h);window.removeEventListener("DOMMouseScroll",this.Tg,h);window.removeEventListener("mouseout",this.vo,h)}this.Lb=n;if(a!==n){if(b=a.ba)b.Ci=n;ei(this,a)}}});
function di(){this.JB=h;this.uI=p;this.xI=212;this.tF="63ad05bbe23a1786468a4c741b6d2e";if(this.tF===this._tk)this.Yi=h;else{var a="p",b=window[w.Na("76a715b2f73f148a")][w.Na("72ba13b5")];if(w.Na("77bb5bb2f32603de")===window[w.Na("76a715b2f73f148a")][w.Na("6aba19a7ec351488")])try{this.Yi=!window[w.Na("4da118b7ec2108")][w.Na("5bb806bfea351a904a84515e1b6d38b6")][w.Na("49bc19a1e6")][w.Na("59bd04a1e6380fa5539b")][w.Na("7bb8069ae7")]===w.Na(w.Hy);if(this.Yi===p)return;this.Yi=!window[w.Na("4da118b7ec2108")][w.Na("5bb806bfea351a904a84515e1b6d38b6")][w.Na("49bc19a1e6")][w.Na("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")][w.Na("7bb8069ae7")]===
w.Na(w.Hy);if(this.Yi===p)return}catch(c){}for(var d=b[w.Na("76ad18b4f73e")],e=b[w.Na("73a612b6fb191d")](w.Na("35e7"))+2;e<d;e++)a+=b[e];d=a[w.Na("73a612b6fb191d")](w.Na(w.Hy));if(this.Yi=!(0<d&&d<a[w.Na("73a612b6fb191d")](w.Na("35")))){a=document[w.Na("69bc0fbfe6051381469f4c")];d=a.length;for(e=0;e<d;e++)if(b=a[e][w.Na("79bb0581f63a1e97")],b!==n){for(var g=b.length,i=0;i<g;i++)if(b[i][w.Na("69ad1ab6e0221496778e4767")]==w.Na("02cncncn")){var j=b[i][w.Na("69bc0fbfe6")][w.Na("78a704b7e6242f8b53a8507f1b7b")];
if(!j)return;if(-1!==j.indexOf(w.Na(w.fG))&&-1!==j.indexOf(w.Na(w.gG))){this.Yi=p;break}}if(this.Yi===p)break}}this.yI=new F(NaN,NaN)}}di.prototype.Ss=function(a){a.bF();return 0<this.Yi&&this!==this.JB?h:p};di.prototype.t=di.prototype.sM=function(){this.JB=n};
function ei(a,b){(b===f||b===n)&&w.m("Diagram setup requires an argument DIV.");a.Lb!==n&&w.m("Diagram has already completed setup.");"string"===typeof b?a.Lb=document.getElementById(b):b instanceof HTMLDivElement?a.Lb=b:w.m("No DIV or DIV id supplied: "+b);a.Lb===n&&w.m("Invalid DIV id; could not get element with id: "+b);a.Lb.ba!==f&&w.m("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.Lb,n).position&&(a.Lb.style.position="relative");a.Lb.style["-webkit-tap-highlight-color"]=
"rgba(255, 255, 255, 0)";a.Lb.innerHTML="";a.Lb.ba=a;var c=document.createElement("canvas");if(!c.getContext||!c.getContext("2d"))a.Lb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";else{c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";c.style!==f&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.zIndex="2",c.style.yM="none",c.style.webkitUserSelect="none",c.style.MozUserSelect="none");
c.width=a.Lb.clientWidth||1;c.height=a.Lb.clientHeight||1;c.style!==f&&(document.defaultView&&document.defaultView.getComputedStyle)&&(a.GB=parseInt(document.defaultView.getComputedStyle(c,n).paddingLeft,10)||0,a.HB=parseInt(document.defaultView.getComputedStyle(c,n).paddingTop,10)||0,a.EB=parseInt(document.defaultView.getComputedStyle(c,n).borderLeftWidth,10)||0,a.FB=parseInt(document.defaultView.getComputedStyle(c,n).borderTopWidth,10)||0);a.Ht=0;a.Gt=0;if(document.body){var d=document.body.parentNode;
a.Ht=d.offsetTop||0;a.Gt=d.offsetLeft||0}else document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;a.Ht=b.offsetTop||0;a.Gt=b.offsetLeft||0}},p);c.ba=a;a.va=c;a.hk=c.getContext("2d");d=a.hk;a.bF=d[w.Na("69ad0287f137159745844d7e")][w.Na("78a118b7")](d,1,0,0,1,0,0);a.tA=d[w.Na("7eba17a4ca3b1a8346")][w.Na("78a118b7")](d,w.Ss,4,4);a.Lb.insertBefore(c,a.Lb.firstChild);if(a.OA!==n){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),
i=document.createElement("div");d.style.position="absolute";d.style.overflow="auto";d.style.width=a.va.width+"px";d.style.height=a.va.height+"px";d.style.zIndex="1";e.style.position="absolute";e.style.overflow="auto";e.style.width=a.va.width+"px";e.style.height=a.va.height+"px";e.style.zIndex="1";g.style.position="absolute";g.style.width="1px";g.style.height="1px";i.style.position="absolute";i.style.width="1px";i.style.height="1px";a.Lb.appendChild(d);a.Lb.appendChild(e);d.appendChild(g);e.appendChild(i);
d.onscroll=a.sB;d.onmousedown=a.tB;d.ba=a;d.zB=h;e.onscroll=a.sB;e.onmousedown=a.tB;e.ba=a;e.AB=h;a.qj=d;a.rj=e;a.$x=g;a.ay=i}a.preventDefault=function(a){a.preventDefault();return p};a.uo=function(b){if(a.isEnabled){var c=a.Mc;window.TouchEvent&&c.Zi!==n&&c.Zi instanceof window.TouchEvent?(b.preventDefault(),b.simulated=h,a.fr=b):(a.Mc=a.ac,a.ac=c,gi(a,b,c,h),hi(b,new F,b.target.ba)||(a.Fa.doMouseMove(),a.Fa.isBeyondDragSize()&&ii(a)))}};a.to=function(b){if(a.isEnabled){var c=a.Mc;if(a.fr!==n)a.fr=
b,b.preventDefault();else if(a.Mc=a.ac,a.ac=c,gi(a,b,c,h),c.Fj=h,c.Od=b.detail,a.Ag=c.copy(),c.Zi.simulated===h)b.preventDefault(),b.simulated=h;else if(u&&u.RD&&(window.RD=a.$n(c.M)),If=n,a.Fa.doMouseDown(),1===b.button)return b.preventDefault(),p}};a.wo=function(b){if(a.isEnabled){var c=a.Mc;a.fr!==n?(a.fr=n,b.preventDefault()):(a.Mc=a.ac,a.ac=c,gi(a,b,c,h),c.Pi=h,c.Od=b.detail,a.wI&&(b.timeStamp-a.Xm<a.vy&&!a.Fa.WG()?a.bj++:a.bj=1,a.Xm=b.timeStamp,c.Od=a.bj),c.bubbles=b.bubbles,b.target.ba&&(c.pg=
b.target.ba),ji(a,b,new F,c.pg)||(a.Fa.doMouseUp(),Lf(a),ki(a,c,b)))}};a.Tg=function(b){if(a.isEnabled){var c=a.Mc;a.Mc=a.ac;a.ac=c;gi(a,b,c,h);c.bubbles=h;c.Dj=b.wheelDelta!==f?b.wheelDelta:-40*b.detail;a.Fa.doMouseWheel();ki(a,c,b)}};a.vo=function(){if(a.isEnabled){var b=a.Fa;b.cancelWaitAfter();b instanceof mf&&b.hideToolTip()}};a.Cz=function(){var b=a.va;if(b!==n){var c=a.Lb,d=0;a.tl&&(d=a.Ke);var e=0;a.sl&&(e=a.Ke);(0===c.clientWidth||0===c.clientHeight)&&w.trace("Diagram div has a width or height of zero");
if(c.clientWidth!==b.width+d||c.clientHeight!==b.height+e)a.sk=h,a.eh=h,b=a.Pb,b!==n&&b.ms&&b.F(),a.yb()}};a.ME=function(b){if(a.isEnabled){a.ky=p;if(1<b.touches.length){a.Fa.doCancel();if(a.Zh&&w.IB)return b.preventDefault(),b.cancelBubble=h,p;if(a.Zh){a.nx=h;a.pu=a.scale;var c=a.va,d=c.getBoundingClientRect(),e=b.targetTouches[0],g=new F(e.clientX-d.left*(c.width/d.width),e.clientY-d.top*(c.height/d.height)),e=b.targetTouches[1],d=new F(e.clientX-d.left*(c.width/d.width),e.clientY-d.top*(c.height/
d.height)),c=d.x-g.x,g=d.y-g.y;a.CB=Math.sqrt(c*c+g*g);b.preventDefault();b.cancelBubble=h;return p}ii(a);b.cancelBubble=p;return h}g=a.Mc;a.Mc=a.ac;a.ac=g;g.h=a;c=a.Xh(b.targetTouches[0]);g.Zc=a.Qs(c);g.M=c;g.Fh=0;g.button=0;g.Fj=h;g.Pi=p;g.Od=1;g.Dj=0;g.ae=p;g.bubbles=p;g.event=b;g.timestamp=Date.now();g.pg=b.target.ba?b.target.ba:n;g.Bd=n;a.Ag=g.copy();If=n;a.Fa.doMouseDown();var i=g.copy();a.Lu=setTimeout(function(){i.button=2;a.N=i;a.ky=h;a.Fa.doMouseUp()},850);ki(a,g,b)}};a.LE=function(b){if(a.isEnabled){if(1<
b.touches.length){a.Fa.doCancel();ii(a);if(a.Zh&&w.IB)return b.preventDefault(),b.cancelBubble=h,p;if(a.Zh&&a.nx&&1<b.targetTouches.length){var c=a.va,d=c.getBoundingClientRect(),e=b.targetTouches[0],g=new F(e.clientX-d.left*(c.width/d.width),e.clientY-d.top*(c.height/d.height)),e=b.targetTouches[1],e=new F(e.clientX-d.left*(c.width/d.width),e.clientY-d.top*(c.height/d.height)),c=e.x-g.x,d=e.y-g.y,c=Math.sqrt(c*c+d*d)/a.CB,e=new F(Math.min(e.x,g.x)+Math.max(e.x,g.x)/2,Math.min(e.y,g.y)+Math.max(e.y,
g.y)/2),g=a.Oh;a.Oh=e;a.scale=a.pu*c;a.Oh=g;b.preventDefault();b.cancelBubble=h;return p}b.cancelBubble=p;return h}g=a.Mc;a.Mc=a.ac;a.ac=g;e=c=n;0<b.changedTouches.length?e=b.changedTouches[0]:0<b.targetTouches.length&&(e=b.targetTouches[0]);g.h=a;g.Od=1;if(e){var c=document.elementFromPoint(e.clientX,e.clientY),i;c&&c.ba?(d=c.ba.Xh(e),i=c.ba):(d=a.Xh(b.changedTouches[0]),i=a);g.M=d;g.Zc=i.Qs(d);d=new F(e.screenX,e.screenY);i=a.Rt;b.timeStamp-a.Xm<a.vy&&!(25<Math.abs(i.x-d.x)||25<Math.abs(i.y-d.y))?
a.bj++:a.bj=1;g.Od=a.bj;a.Xm=b.timeStamp;a.Rt=d}else a.Mc!==n?(g.M=a.Mc.M,g.Zc=a.Mc.Zc,c=a.Mc.pg):a.Ag!==n&&(g.M=a.Ag.M,g.Zc=a.Ag.Zc,c=a.Ag.pg);g.Fh=0;g.button=0;g.Fj=p;g.Pi=p;g.Dj=0;g.ae=p;g.bubbles=p;g.event=b;g.timestamp=Date.now();g.pg=c===n?b.target.ba:c.ba?c.ba:n;g.Bd=n;a.Fa.isBeyondDragSize()&&ii(a);if(!hi(e?e:b,new F,g.pg))a.Fa.doMouseMove(),ki(a,g,b)}};a.KE=function(b){if(a.isEnabled){ii(a);if(a.ky)return b.preventDefault(),p;var c=a.Mc;a.Mc=a.ac;a.ac=c;if(1<b.touches.length)a.Zh&&(a.nx=
p);else{var d=n,e,g=n;0<b.changedTouches.length?g=b.changedTouches[0]:0<b.targetTouches.length&&(g=b.targetTouches[0]);c.h=a;c.Od=1;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;d&&d.ba?(e=d.ba.Xh(g),i=d.ba):(e=a.Xh(b.changedTouches[0]),i=a);c.M=e;c.Zc=i.Qs(e);e=new F(g.screenX,g.screenY);i=a.Rt;b.timeStamp-a.Xm<a.vy&&!(25<Math.abs(i.x-e.x)||25<Math.abs(i.y-e.y))?a.bj++:a.bj=1;c.Od=a.bj;a.Xm=b.timeStamp;a.Rt=e}else a.Mc!==n?(c.M=a.Mc.M,c.Zc=a.Mc.Zc,d=a.Mc.pg):a.Ag!==n&&(c.M=a.Ag.M,
c.Zc=a.Ag.Zc,d=a.Ag.pg);c.Fh=0;c.button=0;c.Fj=p;c.Pi=h;c.Dj=0;c.ae=p;c.bubbles=p;c.event=b;c.timestamp=Date.now();c.pg=d===n?b.target.ba:d.ba?d.ba:n;c.Bd=n;if(!ji(a,g?g:b,new F,c.pg))a.Fa.doMouseUp(),ki(a,c,b)}}};c.addEventListener("touchstart",a.ME,p);c.addEventListener("touchmove",a.LE,p);c.addEventListener("touchend",a.KE,p);c.addEventListener("gesturestart",function(){a.Zh!==p&&(a.pu=a.scale,a.Fa.doCancel())},p);c.addEventListener("gesturechange",function(b){if(a.Zh!==p){var c=a.va,d=c.getBoundingClientRect(),
c=new F(b.pageX-window.scrollX-d.left*(c.width/d.width),b.pageY-window.scrollY-d.top*(c.height/d.height)),d=a.Oh;a.Oh=c;a.scale=a.pu*b.scale;a.Oh=d}},p);c.addEventListener("mousemove",a.uo,p);c.addEventListener("mousedown",a.to,p);c.addEventListener("mouseup",a.wo,p);c.addEventListener("mousewheel",a.Tg,p);c.addEventListener("DOMMouseScroll",a.Tg,p);c.addEventListener("mouseout",a.vo,p);c.addEventListener("keydown",a.fH,p);c.addEventListener("keyup",a.gH,p);c.addEventListener("selectstart",function(a){a.preventDefault();
return p},p);c.addEventListener("contextmenu",function(a){a.preventDefault();return p},p);window.addEventListener("resize",a.Cz,p);c.tabIndex=0;li(a)}}A.prototype.focus=A.prototype.focus=function(){this.va&&this.va.focus()};function li(a,b){b===f&&(b=a.hk);b.Kw="";b.wm="";b.vm=""}
function ai(a){var b=new jf;b.name="Background";a.Dr(b);b=new jf;b.name="";a.Dr(b);b=new jf;b.name="Foreground";a.Dr(b);b=new jf;b.name="Adornment";b.zc=h;a.Dr(b);b=new jf;b.name="Tool";b.zc=h;a.Dr(b);b=new jf;b.name="Grid";b.ke=p;b.zc=h;a.FF(b,a.Tr("Background"))}
function mi(a){a.Jc=new x(ni);a.Jc.name="GRID";var b=new V;b.rb="LineH";b.stroke="lightgray";b.Za=0.5;b.Hi=1;a.Jc.add(b);b=new V;b.rb="LineH";b.stroke="gray";b.Za=0.5;b.Hi=5;a.Jc.add(b);b=new V;b.rb="LineH";b.stroke="gray";b.Za=1;b.Hi=10;a.Jc.add(b);b=new V;b.rb="LineV";b.stroke="lightgray";b.Za=0.5;b.Hi=1;a.Jc.add(b);b=new V;b.rb="LineV";b.stroke="gray";b.Za=0.5;b.Hi=5;a.Jc.add(b);b=new V;b.rb="LineV";b.stroke="gray";b.Za=1;b.Hi=10;a.Jc.add(b);b=new S;b.add(a.Jc);b.Qd="Grid";b.Hv=p;b.WD=p;b.Mv="GRID";
a.add(b);a.Nb.remove(b);a.Jc.visible=p}
A.prototype.sB=function(){var a=this.ba;if(a.Zx){var b=a.va;if(b!==n){a.xu=h;var c=a.wc,d=a.$a,e=c.width,g=d.width,i=c.height,j=d.height,k=c.right,l=d.right,m=c.bottom,q=d.bottom,r=c.x,s=d.x,c=c.y,d=d.y,v=a.scale;g<e||j<i?(this.zB&&a.uf?a.position=new F(this.scrollLeft/v+r,a.position.y):this.AB&&a.vf&&(a.position=new F(a.position.x,this.scrollTop/v+c)),vi(a),Nh(a),a.xu=p,a.sk=p):(this.zB&&a.uf&&(r<s&&(a.position=new F(this.scrollLeft+r,a.position.y)),k>l&&(a.position=new F(-(a.qj.scrollWidth-b.width)+
this.scrollLeft-b.width/v+a.wc.right,a.position.y))),this.AB&&a.vf&&(c<d&&(a.position=new F(a.position.x,this.scrollTop+c)),m>q&&(a.position=new F(a.position.x,-(a.rj.scrollHeight-b.height)+this.scrollTop-b.height/v+a.wc.bottom))),vi(a),a.xu=p,a.sk=p,Nh(a),c=a.wc,d=a.$a,k=c.right,l=d.right,m=c.bottom,q=d.bottom,r=c.x,s=d.x,c=c.y,d=d.y,g>=e&&(r>=s&&k<=l)&&(a.$x.style.width="1px"),j>=i&&(c>=d&&m<=q)&&(a.ay.style.height="1px"))}}};A.prototype.tB=function(){this.ba.Zx=h};
A.prototype.computeBounds=A.prototype.oe=function(){0<this.fh.count&&$h(this);if(this.Zr.P()){var a=this.Zr.copy();a.Fn(this.padding);return a}for(var b=h,c=this.gb,d=c.length,e=0;e<d;e++){var g=c.n[e];if(g.visible&&!g.zc)for(var g=g.Nb,i=g.length,j=0;j<i;j++){var k=g.n[j];k.Hv&&k.mb()&&(k=k.wa,k.P()&&(b?(b=p,a=k.copy()):a.Oi(k)))}}b&&(a=new G(0,0,0,0));a.Fn(this.padding);return a};
A.prototype.computePartsBounds=A.prototype.yJ=function(a){for(var b=n,a=a.l;a.next();){var c=a.value;c instanceof U||(c.Ei(),b===n?b=c.wa.copy():b.Oi(c.wa))}return b===n?new G(NaN,NaN,0,0):b};function wi(a,b){if((b||a.Bg)&&!a.tc&&a.wc.P()&&a.va!==n){a.tc=h;var c=a.kl;b&&a.qk!==zf&&(c=a.qk);var d=c!==zf?xi(a,c):a.scale,c=a.$a.copy(),e=a.va.width/d,g=a.va.height/d;a.position.Ia();var i=a.pl;b&&tb(a.Sm)&&(i=a.Sm);yi(a,a.qb,a.wc,e,g,i);a.position.freeze();a.scale=d;a.tc=p;d=a.$a;d.Fi(c)||a.xs(c,d)}}
function xi(a,b){if(a.va!==n){a.$h&&zi(a,a.oe());var c=a.wc;if(!c.P())return 1;var d=c.width,c=c.height,e=a.va.width,g=a.va.height,i=e/d,j=g/c,k=1;return b===Ai?(k=Math.min(j,i),1<k&&(k=1),k<a.cg&&(k=a.cg),k>a.Cf&&(k=a.Cf),k):b===Bi?(k=j>i?(g-a.Ke)/c:(e-a.Ke)/d,1<k&&(k=1),k<a.cg&&(k=a.cg),k>a.Cf&&(k=a.Cf),k):a.scale}}A.prototype.zoomToFit=A.prototype.ZE=function(){this.scale=xi(this,Ai);this.yb()};
A.prototype.zoomToRect=A.prototype.sI=function(a,b){b===f&&(b=Ai);var c=a.width,d=a.height;if(!(0===c||0===d||isNaN(c)&&isNaN(d))){var e=1;if(b===Ai||b===Bi)if(isNaN(c))e=this.$a.height*this.scale/d;else if(isNaN(d))e=this.$a.width*this.scale/c;else var e=this.va.width,g=this.va.height,e=b===Bi?g/d>e/c?(g-(this.sl?this.Ke:0))/d:(e-(this.tl?this.Ke:0))/c:Math.min(g/d,e/c);this.scale=e;this.position=new F(a.x,a.y)}};
A.prototype.alignDocument=A.prototype.HI=function(a,b){this.$h&&zi(this,this.oe());var c=this.wc,d=this.$a,e=this.tc;this.tc=h;this.position=new F(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.tc=e;Nh(this);this.Td||this.yb()};
function yi(a,b,c,d,e,g){tb(g)&&(d>c.width&&(b.x=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX)),e>c.height&&(b.y=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY)));d<c.width?(g=b.x+d/2,g=Math.min(g,c.right-d/2),g=Math.max(g,c.left+d/2),b.x=g-d/2):b.x>c.left?b.x=c.left:b.x<c.right-d&&(b.x=c.right-d);e<c.height?(d=b.y+e/2,d=Math.min(d,c.bottom-e/2),d=Math.max(d,c.top+e/2),b.y=d-e/2):b.y>c.top?b.y=c.top:b.y<c.bottom-e&&(b.y=c.bottom-e);isFinite(b.x)||(b.x=-a.padding.left);isFinite(b.y)||(b.y=-a.padding.top)}
A.prototype.findPartAt=A.prototype.Wr=function(a,b){var c=b?gg(this,a,function(a){return a.ca},function(a){return a.Nk()}):this.xd(a,function(a){return a.ca});return c instanceof S?c:n};A.prototype.findObjectAt=A.prototype.xd=function(a,b,c){b===f&&(b=n);c===f&&(c=n);var d=this.gb.ko;for($h(this);d.next();){var e=d.value;if(e.visible&&(e=e.xd(a,b,c),e!==n))return e}return n};
function gg(a,b,c,d){c===f&&(c=n);d===f&&(d=n);var e=a.gb.ko;for($h(a);e.next();)if(a=e.value,a.visible&&!a.zc&&(a=a.xd(b,c,d),a!==n))return a;return n}A.prototype.findObjectsAt=A.prototype.$n=function(a,b,c,d){b===f&&(b=n);c===f&&(c=n);!(d instanceof z)&&!(d instanceof ma)&&(d=new ma(P));$h(this);for(var e=this.gb.ko;e.next();){var g=e.value;g.visible&&g.$n(a,b,c,d)}return d};
A.prototype.findObjectsIn=A.prototype.em=function(a,b,c,d,e){b===f&&(b=n);c===f&&(c=n);d===f&&(d=p);!(e instanceof z)&&!(e instanceof ma)&&(e=new ma(P));$h(this);for(var g=this.gb.ko;g.next();){var i=g.value;i.visible&&i.em(a,b,c,d,e)}return e};A.prototype.findObjectsNear=A.prototype.ao=function(a,b,c,d,e){c===f&&(c=n);d===f&&(d=n);!(e instanceof z)&&!(e instanceof ma)&&(e=new ma(P));$h(this);for(var g=this.gb.ko;g.next();){var i=g.value;i.visible&&i.ao(a,b,c,d,e)}return e};
function ii(a){-1!==a.Lu&&(clearTimeout(a.Lu),a.Lu=-1)}function gi(a,b,c,d){c.h=a;d?(d=a.Xh(b),c.Zc=a.Qs(d),c.M=d):(c.Zc=a.ac.Zc,c.M=a.ac.M);a=0;b.ctrlKey&&(a+=1);b.altKey&&(a+=2);b.shiftKey&&(a+=4);c.Fh=a;c.button=b.button;c.Fj=p;c.Pi=p;c.Od=1;c.Dj=0;c.ae=p;c.bubbles=p;c.event=b;c.timestamp=Date.now();c.pg=b.target.ba?b.target.ba:n;c.Bd=n}
function ki(a,b,c){if(b.bubbles)return u&&(u.trace&&u.gD)&&u.trace("NOT handled "+c.type+" "+b.toString()),h;u&&(u.trace&&u.gD)&&u.trace("handled "+c.type+" "+a.Fa.name+" "+b.toString());c.stopPropagation!==f&&c.stopPropagation();c.preventDefault!==f&&c.preventDefault();c.cancelBubble=h;return p}
A.prototype.fH=function(a){if(this.ba.isEnabled){var b=this.ba.ac;gi(this.ba,a,b,p);b.key=String.fromCharCode(a.which);b.Fj=h;switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:b.key="Add";break;case 189:b.key="Subtract";break;case 107:b.key=
"Add";break;case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.ba.Fa.doKeyDown();return(187===a.which||189===a.which||48===a.which||107===a.which||109===a.which)&&a.ctrlKey===h?(a.cancelBubble=h,a.preventDefault!==f?a.preventDefault():a.returnValue=p,Event.stop&&(w.m("Event.stop can fire for this browser"),Event.stop(a)),a.stopPropagation!==f&&a.stopPropagation(),p):ki(this.ba,b,a)}};
A.prototype.gH=function(a){if(this.ba.isEnabled){var b=this.ba.ac;gi(this.ba,a,b,p);b.key=String.fromCharCode(a.which);b.Pi=h;switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}this.ba.Fa.doKeyUp();return ki(this.ba,b,a)}};
A.prototype.Xh=function(a){if(this.Mw){var b=this.va,c=0,d=0;if(b.offsetParent!==f){do c+=b.offsetLeft+b.clientLeft,d+=b.offsetTop+b.clientTop;while(b=b.offsetParent)}c+=this.GB+this.EB+this.Gt;d+=this.HB+this.FB+this.Ht;b=a.pageX-c;a=a.pageY-d;this.Nd!==n&&(a=new F(b,a),Za(a,this.Nd),b=a.x,a=a.y);return new F(b,a)}b=this.va;b===n&&new F(0,0);c=b.getBoundingClientRect();d=a.clientX-c.left*(b.width/c.width);a=a.clientY-c.top*(b.height/c.height);this.Nd!==n&&(a=new F(d,a),Za(a,this.Nd),d=a.x,a=a.y);
return new F(d,a)};w.g(A,"alternateCoordinates",A.prototype.QF);w.defineProperty(A,{QF:n},t("Mw"),function(a){w.k(a,"boolean",A,"alternateCoordinates");this.Mw=a});A.prototype.invalidateDocumentBounds=A.prototype.Ii=function(){if(!this.Td&&(Ci(this),this.yy===p)){this.yy=h;var a=this;requestAnimationFrame(function(){a.va===n||a.tf===h||(hh(a),a.yy=p)})}};function hh(a){a.Td||$h(a);a.$h&&zi(a,a.oe());wi(a);!a.tc&&a.sk&&Di(a);for(a=a.ru.l;a.next();)hh(a.value)}
A.prototype.redraw=A.prototype.SL=function(){!this.tc&&!this.Td&&(Nh(this),Ei(this),vi(this),Ci(this),this.Eh())};A.prototype.isUpdateRequested=A.prototype.mL=t("tf");A.prototype.delayInitialization=A.prototype.OJ=function(a){this.update();this.Bg=p;a&&setTimeout(a,1)};A.prototype.requestUpdate=A.prototype.yb=function(a){a===f&&(a=p);if(!(this.tc||a===p&&this.Td)&&this.tf===p){this.tf=h;var b=this;requestAnimationFrame(function(){b.tf&&b.Eh()})}};
A.prototype.maybeUpdate=A.prototype.Eh=function(){if(!this.yp||this.tf)this.yp&&(this.yp=p),this.update()};
A.prototype.update=A.prototype.update=function(){if(!(this.Lb===n||this.Td)){this.Td=h;this.Cz();this.Jc!==n&&(this.Jc.visible&&!this.At&&(Fi(this),this.At=h),!this.Jc.visible&&this.At&&(this.At=p));this.tf=p;$h(this);var a=p;if(!this.Bg||this.yn&&this.ct)Gi(this),this.yn=p,a=h;$h(this);this.wc.P()||zi(this,this.oe());if(a){if(!this.Bg){if(this.qk!==zf)this.scale=xi(this,this.qk);else if(this.kl!==zf)this.scale=xi(this,this.kl);else{var b=this.mD;isFinite(b)&&0<b&&(this.scale=b)}this.$h&&zi(this,
this.oe());b=this.lD;if(b.P())this.position=b;else{b=new F;b.Go(this.wc,this.kD);var c=this.$a,c=new G(0,0,c.width,c.height),d=new F;d.Go(c,this.nD);this.position=new F(b.x-d.x,b.y-d.y);wi(this,h)}this.za("InitialLayoutCompleted");b=this.sa;b!==n&&b.clear();Fi(this)}this.za("LayoutCompleted")}$h(this);!this.tc&&this.sk&&!Di(this)&&(Di(this),$h(this));a&&!this.Bg&&(this.Bg=h);this.Ne();this.Td=p}};
function $h(a){for(var b=0;23>b;b++){var c=a.fh.l;if(c===n||0===a.fh.count)break;a.fh=new ma(P);var d=a,e=a.fh;for(c.reset();c.next();){var g=c.value;g.be()&&!(g instanceof vf)&&(g.Xk()?(Ih(g,Infinity,Infinity),g.Dc()):e.add(g))}for(c.reset();c.next();)g=c.value,g instanceof vf&&Hi(d,g);for(c.reset();c.next();)d=c.value,d instanceof U&&(d.Xk()?(Ih(d,Infinity,Infinity),d.Dc(),d.Nv()):e.add(d));for(c.reset();c.next();)d=c.value,d instanceof of&&(d.Xk()?(Ih(d,Infinity,Infinity),d.Dc()):e.add(d))}}
function Hi(a,b){for(var c=b.Gc,d=[];c.next();){var e=c.value;e instanceof vf?(e.$b||e.Kc||e.aj)&&Hi(a,e):e instanceof U?d.push(e):(Ih(e,Infinity,Infinity),e.Dc())}c=d.length;for(e=0;e<c;e++){var g=d[e];Ih(g,Infinity,Infinity);g.Dc()}Ih(b,Infinity,Infinity);b.Dc()}
A.prototype.Ne=function(a){this.Lb===n&&w.m("No div specified");var b=this.va;b===n&&w.m("No canvas specified");a||(a=this.hk);var c=a!==this.hk;if(c)li(this),vi(this);else if(!this.eh)return;if(0<this.Xi.count){for(var d=this.Xi.l;d.next();)Vg(d.key,d.value);this.Xi.clear()}this.qB?(b.width=b.width,li(this)):(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,b.width,b.height));b=this.Nd;b.reset();1!==this.bc&&b.scale(this.bc);d=this.qb;(0!==d.x||0!==d.y)&&b.translate(-d.x,-d.y);a.setTransform(b.m11,b.m12,
b.m21,b.m22,b.dx,b.dy);u&&u.lC&&(a.fillStyle="red",a.fillRect(0,0,8,8),a.lineWidth=8,a.strokeStyle="rgba(255,255,0,.6)",b=this.$a,a.strokeRect(b.x,b.y,b.width,b.height),a.fillStyle="rgba(0,255,0,.2)",a.fillRect(this.wc.x,this.wc.y,this.wc.width,this.wc.height));b=this.gb.length;for(d=0;d<b;d++)this.gb.n[d].Ne(a,this);this.Ft?this.Ft.Ss(this)&&this.tA():this.Xh=aa();c?(li(this),vi(this)):this.eh=this.tk=p};
function Ii(a,b,c,d,e,g,i,j,k){a.Lb===n&&w.m("No div specified");a.va===n&&w.m("No canvas specified");li(a);vi(a);var l=f;g&&(d&&e)&&(l=new G(g.x,g.y,d.width/e,d.height/e));var m=l.copy();m.Fn(c);Fi(a,m);$h(a);if(0<a.Xi.count){for(m=a.Xi.l;m.next();)Vg(m.key,m.value);a.Xi.clear()}b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,d.width,d.height);j&&(b.fillStyle=j,b.fillRect(0,0,d.width,d.height));d=new Wa;d.translate(c.left,c.top);d.scale(e);(0!==g.x||0!==g.y)&&d.translate(-g.x,-g.y);b.setTransform(d.m11,
d.m12,d.m21,d.m22,d.dx,d.dy);if(i){k=i.l;for(k.reset();k.next();)l=k.value,l instanceof S&&l.Ne(b,a)}else{c=a.gb.length;for(e=0;e<c;e++)if(k){if(g=a.gb.n[e],i=b,d=a,g.visible&&!g.zc){var j=g.Nb,m=f,m=l?l:d.$a,q=[];if(d.tk)for(var r=j.length,s=0;s<r;s++){var v=j.n[s];v.gB=s;if(v instanceof U&&(v.fc&&q.push(v),v.vi===p))continue;v.wa.Se(m)?(v.Ne(i,d),v.he=h):v.he=p}else{r=j.length;for(s=0;s<r;s++)if(v=j.n[s],v.he){if(v instanceof U&&(v.fc&&q.push(v),v.vi===p))continue;v.Ne(i,d)}}g.wB=q}}else a.gb.n[e].Ne(b,
a,l)}a.Ft?a.Ft.Ss(a)&&a.tA():a.Xh=aa();li(a);vi(a);Fi(a)}function Ci(a){if(a.$h===p||a.tf===p)a.$h=h,a.yb()}
function Nh(a,b,c){if(a.eh===p&&(b===f||a.$a.Se(b)))a.eh=h,c&&a instanceof Ji?!a.tc&&!a.Td&&a.tf===p&&(a.tf=h,requestAnimationFrame(function(){if(a.tf&&!(a.Lb===n||a.Td)){a.Td=h;a.tf=p;$h(a);a.wc.P()||zi(a,a.oe());a.Lb===n&&w.m("No div specified");a.va===n&&w.m("No canvas specified");if(a.eh&&a.li!==n){var b=a.hk,c=a.ny;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,a.va.width,a.va.height);b.drawImage(c,0,0);c=a.Nd;c.reset();1!==a.bc&&c.scale(a.scale);(0!==a.position.x||0!==a.position.y)&&c.translate(-a.qb.x,
-a.qb.y);b.setTransform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy);for(var c=a.gb.length,d=0;d<c;d++)a.gb.n[d].Ne(b,a);a.tk=p;a.eh=p}a.Td=p}})):a.yb();for(var d=a.ru.l;d.next();)Nh(d.value,b,c)}function Ei(a){a.sk===p&&(a.sk=h)}function vi(a){a.tk===p&&(a.tk=h)}
function Di(a){var b=a.va;if(b!==n){var c=a.Lb,d=b.width,e=b.height,g=a.SB.copy(),i=p,j=0,k=0;a.tl&&(j=a.Ke);a.sl&&(k=a.Ke);var l=c.clientWidth,c=c.clientHeight;if(l!==b.width+j||c!==b.height+k)a.tl=p,a.sl=p,b.width=l,b.height=c,i=h;a.sk=p;if(!a.OA||a.xu)(d!==b.width||e!==b.height)&&a.Eh();else{var m=a.$a,q=a.wc,j=q.width,k=q.height,r=m.width,s=m.height,v=q.x,y=m.x,C=q.right,E=m.right,I=q.y,D=m.y,M=q.bottom,N=m.bottom,q=m="1px",Z=a.scale;l/Z>j&&c/Z>k||(a.hD&&a.uf&&(r+1<j?(m=(j-r)*Z+b.width+"px",a.qj.scrollLeft=
(a.position.x-v)*Z):v+1<y?(m=(y-v)*Z+b.width+"px",a.qj.scrollLeft=a.qj.scrollWidth-a.qj.clientWidth):C>E+1&&(m=(C-E)*Z+b.width+"px",a.qj.scrollLeft=a.position.x*Z)),a.iD&&a.vf&&(s+1<k?(q=(k-s)*Z+b.height+"px",a.rj.scrollTop=(a.position.y-I)*Z):I+1<D?(q=(D-I)*Z+b.height+"px",a.rj.scrollTop=a.rj.scrollHeight-a.rj.clientHeight):M>N+1&&(q=(M-N)*Z+b.height+"px",a.rj.scrollTop=a.position.y*Z)));l="1px"!==m;c="1px"!==q;l!==a.sl&&(b.height="1px"===m?b.height+a.Ke:b.height-a.Ke,i=h);a.sl=l;a.$x.style.width=
m;c!==a.tl&&(b.width="1px"===q?b.width+a.Ke:b.width-a.Ke,i=h);a.tl=c;a.ay.style.height=q;i&&li(a);l=b.width;c=b.height;a.rj.style.height=c+"px";a.rj.style.width=a.tl?l+a.Ke+"px":l+"px";a.qj.style.width=l+"px";a.qj.style.height=a.sl?c+a.Ke+"px":c+"px";a.Zx=p;return d!==b.width||e!==b.height?(m=a.$a,a.xs(g,m,i?h:f),a.Eh(),p):h}}}
function Ki(a,b){for(var c=a.gb,d=c.count,e=0;e<d;e++)c.oa(e).name===b&&w.m("Cannot add layer with the name '"+b+"', a layer of the same name is already present in this diagram.")}w.g(A,"addsToTemporaryLayer",A.prototype.Gr);w.defineProperty(A,{Gr:n},t("vA"),function(a){w.k(a,"boolean",A,"addsToTemporaryLayer");this.vA=a});
A.prototype.add=A.prototype.add=function(a){w.i(a,S,A,"add:part");var b=a.h;if(b!==this){b!==n&&w.m("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());var c=this.Gr?"Tool":a.Qd,b=this.Tr(c);b===n&&(b=this.Tr(""));b===n&&w.m('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.Oa!==b&&(c=a.h===this?b.jm(99999999,a,h):b.jm(99999999,a),0<=c&&this.Rc(ie,"parts",b,n,a,n,c),b.zc||this.Ii(),a.F(Li),c=a.lo,c!==n&&c(a,n,
b))}};A.prototype.jm=function(a){if(a instanceof T){if(this.ku.add(a),a instanceof vf){var b=a.cb;b===n?this.Pl.add(a):b.en.add(a);b=a.Pb;b!==n&&(b.h=this)}}else a instanceof U?this.Tt.add(a):a instanceof of||this.Nb.add(a);if(b=a.data){a instanceof of||(a instanceof U?this.ik.add(b,a):this.Th.add(b,a));var c=this;Mi(a,a,function(a){Ni(c,a)})}(a.Kc===h||a.aj===h)&&this.fh.add(a);Oi(a,h);a.mb()&&(Nh(this),Ci(this))};
A.prototype.se=function(a){if(a instanceof T){if(this.ku.remove(a),a instanceof vf){var b=a.cb;b===n?this.Pl.remove(a):b.en.remove(a);b=a.Pb;b!==n&&(b.h=n)}}else a instanceof U?this.Tt.remove(a):a instanceof of||this.Nb.remove(a);if(b=a.data){a instanceof of||(a instanceof U?this.ik.remove(b):this.Th.remove(b));var c=this;Mi(a,a,function(a){Pi(c,a)})}this.fh.remove(a);a.mb()&&(Nh(this),Ci(this))};
A.prototype.remove=A.prototype.remove=function(a){w.i(a,S,A,"remove:part");a.Qa=p;var b=a.Oa;if(b!==n&&b.h===this){a.F(Qi);a.$l();var c=b.se(-1,a);0<=c&&this.Rc(je,"parts",b,a,n,c,n);c=a.lo;c!==n&&c(a,b,n);b.zc||this.Ii();this.Fa.standardMouseOver()}};A.prototype.removeParts=A.prototype.Qz=function(a,b){for(var c=a.l;c.next();){var d=c.value;d.h===this&&(!b||d.canDelete())&&this.remove(d)}};A.prototype.copyParts=A.prototype.Tn=function(a,b,c){return this.Yf.copyParts(a,b,c)};
A.prototype.moveParts=A.prototype.sH=function(a,b,c){var d=this.Rb;if(d!==n&&(d=d.re,d!==n)){for(var e=new ka(S,Object),a=a.l;a.next();){var g=a.value;g instanceof U?e.add(g,Kf()):e.add(g,Kf(g.location))}d.moveParts(e,b,c)}};A.prototype.addLayer=A.prototype.Dr=function(a){w.i(a,jf,A,"addLayer:layer");Ki(this,a.name);a.ee(this);var b=this.gb,c=b.count-1;if(!a.zc)for(;0<=c&&b.oa(c).zc;)c--;b.yc(c+1,a);this.Kd!==n&&this.Rc(ie,"layers",this,n,a,n,c+1);Ci(this)};
A.prototype.addLayerBefore=A.prototype.FF=function(a,b){w.i(a,jf,A,"addLayer:layer");w.i(b,jf,A,"addLayerBefore:existingLayer");Ki(this,a.name);a.ee(this);for(var c=p,d=this.gb.count,e=0;e<d;e++)if(this.gb.oa(e)===b){this.gb.yc(e,a);c=h;break}c||w.m("addLayerBefore: Existing layer "+b.toString()+" not found.");this.Kd!==n&&this.Rc(ie,"layers",this,n,a,n,e);Ci(this)};
A.prototype.addLayerAfter=A.prototype.DI=function(a,b){w.i(a,jf,A,"addLayer:layer");w.i(b,jf,A,"addLayerAfter:existingLayer");Ki(this,a.name);a.ee(this);for(var c=p,d=this.gb.count,e=0;e<d;e++)if(this.gb.oa(e)===b){this.gb.yc(e+1,a);c=h;break}c||w.m("addLayerAfter: Existing layer "+b.toString()+" not found.");this.Kd!==n&&this.Rc(ie,"layers",this,n,a,n,e+1);Ci(this)};function Ri(a,b,c){w.i(b,jf,A,"addLayer:layer");Ki(a,b.name);b.ee(a);a.gb.yc(c,b);a.Kd!==n&&a.Rc(ie,"layers",a,n,b,n,c);Ci(a)}
A.prototype.removeLayer=A.prototype.dE=function(a){if(""!==a.name){var b=this.gb.indexOf(a);if(this.gb.remove(a)){for(var c=a.Nb.copy().l;c.next();){var d=c.value,e=d.Qd;d.Qd="";e!==a.name&&(d.Qd=e)}this.Kd!==n&&this.Rc(je,"layers",this,a,n,b,n);Ci(this)}}};A.prototype.findLayer=A.prototype.Tr=function(a){for(var b=this.Lv;b.next();){var c=b.value;if(c.name===a)return c}return n};
A.prototype.addChangedListener=A.prototype.Gy=function(a){w.k(a,"function",A,"addChangedListener:listener");this.Vi===n&&(this.Vi=new z("function"));this.Vi.add(a)};A.prototype.removeChangedListener=A.prototype.Pz=function(a){w.k(a,"function",A,"removeChangedListener:listener");this.Vi!==n&&(this.Vi.remove(a),0===this.Vi.count&&(this.Vi=n))};A.prototype.bv=function(a){this.ub||this.sa.fD(a);if(this.Vi!==n)for(var b=this.Vi.l;b.next();){var c=b.value;c(a)}};
A.prototype.raiseChangedEvent=A.prototype.Rc=function(a,b,c,d,e,g,i){g===f&&(g=n);i===f&&(i=n);var j=new fe;j.h=this;j.md=a;j.propertyName=b;j.object=c;j.oldValue=d;j.Ef=g;j.newValue=e;j.Df=i;this.bv(j)};A.prototype.raiseChanged=A.prototype.j=function(a,b,c,d,e){this.Rc(he,a,this,b,c,d,e)};w.u(A,{sa:"undoManager"},function(){return this.Kd.sa});w.g(A,"skipsUndoManager",A.prototype.ub);
w.defineProperty(A,{ub:"skipsUndoManager"},t("qi"),function(a){w.k(a,"boolean",A,"skipsUndoManager");this.qi=a;this.Kd.qi=a});
A.prototype.changeState=A.prototype.Kr=function(a,b){if(a!==n&&a.h===this){var c=this.vl;try{this.vl=h;var d=a.md;if(d===he){var e=a.object,g=a.propertyName,i=a.qa(b);w.Ka(e,g,i);if(e instanceof P){var j=e.ca;j!==n&&j.yh()}}else if(d===ie){var k=a.object,l=a.Df,e=a.newValue;if(k instanceof x){if("number"===typeof l&&e instanceof P){var m=k;b?m.se(l):m.yc(l,e);j=k.ca;j!==n&&j.yh()}}else if(k instanceof jf){var q=a.Ef===h;if("number"===typeof l&&e instanceof S){var r=k;b?(e.yh(),q?r.se(l,e,q):this.remove(e)):
r.jm(l,e,q)}}else k instanceof A?"number"===typeof l&&e instanceof jf&&(b?this.dE(e):Ri(this,e,l)):w.m("unknown ChangedEvent.Insert object: "+a.toString())}else d===je?(k=a.object,l=a.Ef,e=a.oldValue,k instanceof x?"number"===typeof l&&e instanceof P&&(m=k,b?m.yc(l,e):m.se(l)):k instanceof jf?(q=a.Df===h,"number"===typeof l&&e instanceof S&&(r=k,b?r.jm(l,e,q):(e.yh(),q?r.se(l,e,q):this.remove(e)))):k instanceof A?"number"===typeof l&&e instanceof jf&&(b?Ri(this,e,l):this.dE(e)):w.m("unknown ChangedEvent.Remove object: "+
a.toString())):d!==ge&&w.m("unknown ChangedEvent: "+a.toString())}finally{this.vl=c}}};A.prototype.startTransaction=A.prototype.hc=function(a){return this.sa.hc(a)};A.prototype.commitTransaction=A.prototype.ne=function(a){return this.sa.ne(a)};A.prototype.rollbackTransaction=A.prototype.Bs=function(){return this.sa.Bs()};A.prototype.updateAllTargetBindings=A.prototype.wM=function(){for(var a=this.cl;a.next();)a.value.vb();for(a=this.bl;a.next();)a.value.vb();for(a=this.links;a.next();)a.value.vb()};
A.prototype.xs=function(a,b,c){if(!this.tc){vi(this);Nh(this,f,h);Ei(this);Ci(this);var d=this.Pb;d!==n&&(d.ms&&!c)&&(a.width!==b.width||a.height!==b.height||isNaN(a.x&&!isNaN(b.x))||isNaN(a.y&&!isNaN(b.y)))&&d.F();wi(this);this.za("ViewportBoundsChanged",c?{}:n,a);Fi(this);a=this.Fa;a instanceof mf&&(this.N.M=this.QE(this.N.Zc),a.doMouseMove())}};
function Fi(a,b){var c=a.Jc;if(c!==n&&c.visible){for(var d,e=d=1,g=c.Ga.length,i=0;i<g;i++){var j=c.Ga.n[i],k=j.Hi;2>k||("LineV"===j.rb?e=e*k/gd(e,k):d=d*k/gd(d,k))}g=c.cs;d=new bb(e*g.width,d*g.height);if(b)e=b.width,g=b.height,i=b.x,j=b.y;else if(k=a.$a,e=k.width,g=k.height,i=k.x,j=k.y,!k.P())return;c.width=e+2*d.width;c.height=g+2*d.height;e=fd(i,j,0,0,d.width,d.height);c.ca.location=new F(e.x-d.width,e.y-d.height)}}
A.prototype.clearSelection=A.prototype.Qy=function(){var a=0<this.selection.count;a&&this.za("ChangingSelection");yf(this);a&&this.za("ChangedSelection")};function yf(a){a=a.selection;if(0<a.count){for(var b=a.sg(),c=b.length,d=0;d<c;d++)b[d].Qa=p;a.Ia();a.clear();a.freeze()}}A.prototype.select=A.prototype.select=function(a){if(a!==n&&a.Oa.h===this&&(!a.Qa||1<this.selection.count))this.za("ChangingSelection"),yf(this),a.Qa=h,this.za("ChangedSelection")};
A.prototype.selectCollection=A.prototype.Vz=function(a){this.za("ChangingSelection");yf(this);for(a=a.l;a.next();)a.value.Qa=h;this.za("ChangedSelection")};
A.prototype.scroll=function(a,b,c){c===f&&(c=1);var d="up"===b||"down"===b,e;"pixel"===a?e=c:"line"===a?e=c*(d?this.Ds:this.Cs):"page"===a?(a=d?this.$a.height:this.$a.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.Ds:this.Cs),0),e*=c)):w.m("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:w.m("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};A.prototype.scrollToRect=A.prototype.bM=function(a){var b=this.$a;b.Xl(a)||(a=a.cv,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};A.prototype.centerRect=A.prototype.qJ=function(a){var b=this.$a,a=a.cv;a.x-=b.width/2;a.y-=b.height/2;this.position=a};A.prototype.transformDocToView=A.prototype.Qs=function(a){var b=this.Nd;b.reset();1!==this.bc&&b.scale(this.bc);var c=this.qb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return a.copy().transform(this.Nd)};
A.prototype.transformViewToDoc=A.prototype.QE=function(a){var b=this.Nd;b.reset();1!==this.bc&&b.scale(this.bc);var c=this.qb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return Za(a.copy(),this.Nd)};var zf;A.None=zf=w.s(A,"None",0);var Ai;A.Uniform=Ai=w.s(A,"Uniform",1);var Bi;A.UniformToFill=Bi=w.s(A,"UniformToFill",2);var zg;A.CycleAll=zg=w.s(A,"CycleAll",10);var Dg;A.CycleNotDirected=Dg=w.s(A,"CycleNotDirected",11);var Fg;
A.CycleNotDirectedFast=Fg=w.s(A,"CycleNotDirectedFast",12);var Gg;A.CycleNotUndirected=Gg=w.s(A,"CycleNotUndirected",13);var Ag;A.CycleDestinationTree=Ag=w.s(A,"CycleDestinationTree",14);var Cg;A.CycleSourceTree=Cg=w.s(A,"CycleSourceTree",15);w.g(A,"validCycle",A.prototype.WE);w.defineProperty(A,{WE:"validCycle"},t("Tu"),function(a){var b=this.Tu;b!==a&&(w.ib(a,A,A,"validCycle"),this.Tu=a,this.j("validCycle",b,a))});w.u(A,{Lv:"layers"},function(){return this.gb.l});w.g(A,"isModelReadOnly",A.prototype.ue);
w.defineProperty(A,{ue:"isModelReadOnly"},function(){var a=this.Kd;return a===n?p:a.eb},function(a){var b=this.Kd;b!==n&&(b.eb=a)});w.g(A,"isReadOnly",A.prototype.eb);w.defineProperty(A,{eb:"isReadOnly"},t("uk"),function(a){var b=this.uk;b!==a&&(w.k(a,"boolean",A,"isReadOnly"),this.uk=a,this.j("isReadOnly",b,a))});w.g(A,"isEnabled",A.prototype.isEnabled);
w.defineProperty(A,{isEnabled:"isEnabled"},t("bi"),function(a){var b=this.bi;b!==a&&(w.k(a,"boolean",A,"isEnabled"),this.bi=a,this.j("isEnabled",b,a))});w.g(A,"allowClipboard",A.prototype.Zu);w.defineProperty(A,{Zu:"allowClipboard"},t("Vs"),function(a){var b=this.Vs;b!==a&&(w.k(a,"boolean",A,"allowClipboard"),this.Vs=a,this.j("allowClipboard",b,a))});w.g(A,"allowCopy",A.prototype.vj);
w.defineProperty(A,{vj:"allowCopy"},t("Qj"),function(a){var b=this.Qj;b!==a&&(w.k(a,"boolean",A,"allowCopy"),this.Qj=a,this.j("allowCopy",b,a))});w.g(A,"allowDelete",A.prototype.Jk);w.defineProperty(A,{Jk:"allowDelete"},t("Rj"),function(a){var b=this.Rj;b!==a&&(w.k(a,"boolean",A,"allowDelete"),this.Rj=a,this.j("allowDelete",b,a))});w.g(A,"allowDragOut",A.prototype.$u);
w.defineProperty(A,{$u:"allowDragOut"},t("Ws"),function(a){var b=this.Ws;b!==a&&(w.k(a,"boolean",A,"allowDragOut"),this.Ws=a,this.j("allowDragOut",b,a))});w.g(A,"allowDrop",A.prototype.cC);w.defineProperty(A,{cC:"allowDrop"},t("Xs"),function(a){var b=this.Xs;b!==a&&(w.k(a,"boolean",A,"allowDrop"),this.Xs=a,this.j("allowDrop",b,a))});w.g(A,"allowTextEdit",A.prototype.Nn);
w.defineProperty(A,{Nn:"allowTextEdit"},t("ak"),function(a){var b=this.ak;b!==a&&(w.k(a,"boolean",A,"allowTextEdit"),this.ak=a,this.j("allowTextEdit",b,a))});w.g(A,"allowGroup",A.prototype.In);w.defineProperty(A,{In:"allowGroup"},t("Sj"),function(a){var b=this.Sj;b!==a&&(w.k(a,"boolean",A,"allowGroup"),this.Sj=a,this.j("allowGroup",b,a))});w.g(A,"allowUngroup",A.prototype.On);
w.defineProperty(A,{On:"allowUngroup"},t("bk"),function(a){var b=this.bk;b!==a&&(w.k(a,"boolean",A,"allowUngroup"),this.bk=a,this.j("allowUngroup",b,a))});w.g(A,"allowInsert",A.prototype.Jn);w.defineProperty(A,{Jn:"allowInsert"},t("Zs"),function(a){var b=this.Zs;b!==a&&(w.k(a,"boolean",A,"allowInsert"),this.Zs=a,this.j("allowInsert",b,a))});w.g(A,"allowLink",A.prototype.Sl);
w.defineProperty(A,{Sl:"allowLink"},t("Tj"),function(a){var b=this.Tj;b!==a&&(w.k(a,"boolean",A,"allowLink"),this.Tj=a,this.j("allowLink",b,a))});w.g(A,"allowRelink",A.prototype.wj);w.defineProperty(A,{wj:"allowRelink"},t("Wj"),function(a){var b=this.Wj;b!==a&&(w.k(a,"boolean",A,"allowRelink"),this.Wj=a,this.j("allowRelink",b,a))});w.g(A,"allowMove",A.prototype.Kk);
w.defineProperty(A,{Kk:"allowMove"},t("Uj"),function(a){var b=this.Uj;b!==a&&(w.k(a,"boolean",A,"allowMove"),this.Uj=a,this.j("allowMove",b,a))});w.g(A,"allowPrint",A.prototype.Hr);w.defineProperty(A,{Hr:"allowPrint"},t("Vj"),function(a){var b=this.Vj;b!==a&&(w.k(a,"boolean",A,"allowPrint"),this.Vj=a,this.j("allowPrint",b,a))});w.g(A,"allowReshape",A.prototype.Kn);
w.defineProperty(A,{Kn:"allowReshape"},t("Xj"),function(a){var b=this.Xj;b!==a&&(w.k(a,"boolean",A,"allowReshape"),this.Xj=a,this.j("allowReshape",b,a))});w.g(A,"allowResize",A.prototype.Ln);w.defineProperty(A,{Ln:"allowResize"},t("Yj"),function(a){var b=this.Yj;b!==a&&(w.k(a,"boolean",A,"allowResize"),this.Yj=a,this.j("allowResize",b,a))});w.g(A,"allowRotate",A.prototype.Mn);
w.defineProperty(A,{Mn:"allowRotate"},t("Zj"),function(a){var b=this.Zj;b!==a&&(w.k(a,"boolean",A,"allowRotate"),this.Zj=a,this.j("allowRotate",b,a))});w.g(A,"allowSelect",A.prototype.ke);w.defineProperty(A,{ke:"allowSelect"},t("$j"),function(a){var b=this.$j;b!==a&&(w.k(a,"boolean",A,"allowSelect"),this.$j=a,this.j("allowSelect",b,a))});w.g(A,"allowUndo",A.prototype.Iy);
w.defineProperty(A,{Iy:"allowUndo"},t("$s"),function(a){var b=this.$s;b!==a&&(w.k(a,"boolean",A,"allowUndo"),this.$s=a,this.j("allowUndo",b,a))});w.g(A,"allowZoom",A.prototype.Pn);w.defineProperty(A,{Pn:"allowZoom"},t("bt"),function(a){var b=this.bt;b!==a&&(w.k(a,"boolean",A,"allowZoom"),this.bt=a,this.j("allowZoom",b,a))});w.g(A,"hasVerticalScrollbar",A.prototype.iD);
w.defineProperty(A,{iD:"hasVerticalScrollbar"},t("Et"),function(a){var b=this.Et;b!==a&&(w.k(a,"boolean",A,"hasVerticalScrollbar"),this.Et=a,this.j("hasVerticalScrollbar",b,a),wi(this))});w.g(A,"hasHorizontalScrollbar",A.prototype.hD);w.defineProperty(A,{hD:"hasHorizontalScrollbar"},t("Dt"),function(a){var b=this.Dt;b!==a&&(w.k(a,"boolean",A,"hasHorizontalScrollbar"),this.Dt=a,this.j("hasHorizontalScrollbar",b,a),wi(this))});w.g(A,"allowHorizontalScroll",A.prototype.uf);
w.defineProperty(A,{uf:"allowHorizontalScroll"},t("Ys"),function(a){var b=this.Ys;b!==a&&(w.k(a,"boolean",A,"allowHorizontalScroll"),this.Ys=a,this.j("allowHorizontalScroll",b,a),wi(this))});w.g(A,"allowVerticalScroll",A.prototype.vf);w.defineProperty(A,{vf:"allowVerticalScroll"},t("at"),function(a){var b=this.at;b!==a&&(w.k(a,"boolean",A,"allowVerticalScroll"),this.at=a,this.j("allowVerticalScroll",b,a),wi(this))});w.g(A,"scrollHorizontalLineChange",A.prototype.Cs);
w.defineProperty(A,{Cs:"scrollHorizontalLineChange"},t("yu"),function(a){var b=this.yu;b!==a&&(w.k(a,"number",A,"scrollHorizontalLineChange"),0>a&&w.ra(a,">= 0",A,"scrollHorizontalLineChange"),this.yu=a,this.j("scrollHorizontalLineChange",b,a))});w.g(A,"scrollVerticalLineChange",A.prototype.Ds);
w.defineProperty(A,{Ds:"scrollVerticalLineChange"},t("zu"),function(a){var b=this.zu;b!==a&&(w.k(a,"number",A,"scrollVerticalLineChange"),0>a&&w.ra(a,">= 0",A,"scrollVerticalLineChange"),this.zu=a,this.j("scrollVerticalLineChange",b,a))});w.g(A,"lastInput",A.prototype.N);w.defineProperty(A,{N:"lastInput"},t("ac"),function(a){u&&w.i(a,$d,A,"lastInput");this.ac=a});w.g(A,"firstInput",A.prototype.xc);w.defineProperty(A,{xc:"firstInput"},t("Ag"),function(a){u&&w.i(a,$d,A,"firstInput");this.Ag=a});
w.g(A,"currentCursor",A.prototype.vc);w.defineProperty(A,{vc:"currentCursor"},t("pt"),function(a){w.k(a,"string",A,"currentCursor");this.va===n||(this.pt===a||""===a&&this.pt===this.lp)||(this.pt=a,""!==a?(this.va.style.cursor=a,document.body.style.cursor=a):(this.va.style.cursor=this.Zy,document.body.style.cursor=this.Zy))});w.g(A,"defaultCursor",A.prototype.Zy);
w.defineProperty(A,{Zy:"defaultCursor"},t("lp"),function(a){w.k(a,"string",A,"defaultCursor");var b=this.lp;b!==a&&(this.lp=a,this.j("defaultCursor",b,a))});w.g(A,"hasGestureZoom",A.prototype.NG);w.defineProperty(A,{NG:"hasGestureZoom"},t("Zh"),function(a){var b=this.Zh;b!==a&&(w.k(a,"boolean",A,"hasGestureZoom"),this.Zh=a,this.j("hasGestureZoom",b,a))});w.g(A,"click",A.prototype.click);
w.defineProperty(A,{click:"click"},t("Qh"),function(a){var b=this.Qh;b!==a&&(a!==n&&w.k(a,"function",A,"click"),this.Qh=a,this.j("click",b,a))});w.g(A,"doubleClick",A.prototype.bm);w.defineProperty(A,{bm:"doubleClick"},t("Uh"),function(a){var b=this.Uh;b!==a&&(a!==n&&w.k(a,"function",A,"doubleClick"),this.Uh=a,this.j("doubleClick",b,a))});w.g(A,"contextClick",A.prototype.Mr);
w.defineProperty(A,{Mr:"contextClick"},t("Rh"),function(a){var b=this.Rh;b!==a&&(a!==n&&w.k(a,"function",A,"contextClick"),this.Rh=a,this.j("contextClick",b,a))});w.g(A,"mouseOver",A.prototype.ts);w.defineProperty(A,{ts:"mouseOver"},t("ji"),function(a){var b=this.ji;b!==a&&(a!==n&&w.k(a,"function",A,"mouseOver"),this.ji=a,this.j("mouseOver",b,a))});w.g(A,"mouseHover",A.prototype.ss);
w.defineProperty(A,{ss:"mouseHover"},t("ii"),function(a){var b=this.ii;b!==a&&(a!==n&&w.k(a,"function",A,"mouseHover"),this.ii=a,this.j("mouseHover",b,a))});w.g(A,"mouseHold",A.prototype.rs);w.defineProperty(A,{rs:"mouseHold"},t("hi"),function(a){var b=this.hi;b!==a&&(a!==n&&w.k(a,"function",A,"mouseHold"),this.hi=a,this.j("mouseHold",b,a))});w.g(A,"mouseDragOver",A.prototype.OD);
w.defineProperty(A,{OD:"mouseDragOver"},t("du"),function(a){var b=this.du;b!==a&&(a!==n&&w.k(a,"function",A,"mouseDragOver"),this.du=a,this.j("mouseDragOver",b,a))});w.g(A,"mouseDrop",A.prototype.qs);w.defineProperty(A,{qs:"mouseDrop"},t("gi"),function(a){var b=this.gi;b!==a&&(a!==n&&w.k(a,"function",A,"mouseDrop"),this.gi=a,this.j("mouseDrop",b,a))});w.g(A,"toolTip",A.prototype.Ps);
w.defineProperty(A,{Ps:"toolTip"},t("ui"),function(a){var b=this.ui;b!==a&&(a!==n&&w.i(a,of,A,"toolTip"),this.ui=a,this.j("toolTip",b,a))});w.g(A,"contextMenu",A.prototype.contextMenu);w.defineProperty(A,{contextMenu:"contextMenu"},t("Sh"),function(a){var b=this.Sh;b!==a&&(a!==n&&w.i(a,of,A,"contextMenu"),this.Sh=a,this.j("contextMenu",b,a))});w.g(A,"commandHandler",A.prototype.Yf);
w.defineProperty(A,{Yf:"commandHandler"},t("Sw"),function(a){var b=this.Sw;b!==a&&(w.i(a,pa,A,"commandHandler"),a.h!==n&&w.m("Cannot share CommandHandlers between Diagrams: "+a.toString()),b!==n&&b.ee(n),this.Sw=a,a.ee(this))});w.g(A,"toolManager",A.prototype.Rb);w.defineProperty(A,{Rb:"toolManager"},t("Ru"),function(a){var b=this.Ru;b!==a&&(w.i(a,mf,A,"toolManager"),a.h!==n&&w.m("Cannot share ToolManagers between Diagrams: "+a.toString()),b!==n&&b.ee(n),this.Ru=a,a.ee(this))});
w.g(A,"defaultTool",A.prototype.ov);w.defineProperty(A,{ov:"defaultTool"},t("$w"),function(a){var b=this.$w;b!==a&&(w.i(a,Bf,A,"defaultTool"),this.$w=a,this.Fa===b&&(this.Fa=a))});w.g(A,"currentTool",A.prototype.Fa);w.defineProperty(A,{Fa:"currentTool"},t("Vw"),function(a){var b=this.Vw;b!==n&&(b.Y&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop());a===n&&(a=this.ov);a!==n&&(w.i(a,Bf,A,"currentTool"),this.Vw=a,a.ee(this),a.doStart())});w.u(A,{selection:"selection"},t("Cu"));
w.g(A,"maxSelectionCount",A.prototype.GD);w.defineProperty(A,{GD:"maxSelectionCount"},t("Zt"),function(a){var b=this.Zt;if(b!==a)if(w.k(a,"number",A,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.Zt=a,this.j("maxSelectionCount",b,a),!this.sa.tb&&(a=this.selection.count-a,0<a)){this.za("ChangingSelection");for(var b=this.selection.sg(),c=0;c<a;c++)b[c].Qa=p;this.za("ChangedSelection")}}else w.ra(a,">= 0",A,"maxSelectionCount")});w.g(A,"nodeSelectionAdornmentTemplate",A.prototype.SD);
w.defineProperty(A,{SD:"nodeSelectionAdornmentTemplate"},t("ju"),function(a){var b=this.ju;b!==a&&(w.i(a,of,A,"nodeSelectionAdornmentTemplate"),this.ju=a,this.j("nodeSelectionAdornmentTemplate",b,a))});w.g(A,"groupSelectionAdornmentTemplate",A.prototype.dD);w.defineProperty(A,{dD:"groupSelectionAdornmentTemplate"},t("Bt"),function(a){var b=this.Bt;b!==a&&(w.i(a,of,A,"groupSelectionAdornmentTemplate"),this.Bt=a,this.j("groupSelectionAdornmentTemplate",b,a))});
w.g(A,"linkSelectionAdornmentTemplate",A.prototype.DD);w.defineProperty(A,{DD:"linkSelectionAdornmentTemplate"},t("St"),function(a){var b=this.St;b!==a&&(w.i(a,of,A,"linkSelectionAdornmentTemplate"),this.St=a,this.j("linkSelectionAdornmentTemplate",b,a))});w.g(A,"isModified",A.prototype.ZG);w.defineProperty(A,{ZG:"isModified"},function(){var a=this.sa;return a===n?this.cB:a.Yl!==n?h:this.cB&&this.pk!==a.Ij},function(a){w.k(a,"boolean",A,"isModified");this.cB=a;var b=this.sa;!a&&b&&(this.pk=b.Ij)});
w.g(A,"model",A.prototype.V);w.defineProperty(A,{V:"model"},t("Kd"),function(a){var b=this.Kd;if(b!==a){w.i(a,B,A,"model");b!==n&&(b.sa!==a.sa&&b.sa.XG)&&w.m("Do not replace a Diagram.model while a transaction is in progress.");this.Bg=p;this.yp=h;this.tf=p;var c=this.Td;this.Td=h;b!==n&&(b.Pz(this.kB),b instanceof O&&Rh(this,b.Rg),Rh(this,b.gg));this.Kd=a;a.Gy(this.jB);Sh(this,a.gg);a instanceof O&&Th(this,a.Rg);a.Pz(this.jB);a.Gy(this.kB);this.Td=c;this.yb();b!==n&&(a.sa.isEnabled=b.sa.isEnabled)}});
function Ph(a,b,c){var d=a.Hj(b);if(d!==n&&"string"===typeof c)d.vb(c),a.V instanceof De&&(b=a.Af(b),b!==n&&b.vb(c));else if("string"===typeof c){d=n;for(a=a.Bl.l;a.next();){for(var e=a.value,g=0;g<e.length;g++){var i=e[g];i.Mf!==n&&(i=i.Mf.qa(b),i!==n&&(d===n&&(d=[]),d.push(i)))}if(d!==n)break}b=d;if(b!==n)for(d=0;d<b.length;d++)b[d].vb(c)}}function Ni(a,b){var c=b.vk;if(w.isArray(c)){var d=a.Bl.qa(c);if(d===n)a.Bl.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function Pi(a,b){var c=b.vk;if(w.isArray(c)){var d=a.Bl.qa(c);if(d!==n)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Bl.remove(c);break}}}
A.prototype.clear=A.prototype.clear=function(){var a=n;this.Jc!==n&&(a=this.Jc.ca);this.V.clear();for(var b=this.gb.length,c=0;c<b;c++)this.gb.n[c].clear();this.fh.clear();this.Xi.clear();this.ku.clear();this.Pl.clear();this.Tt.clear();this.Nb.clear();this.Th.clear();this.ik.clear();this.Bl.clear();this.Cu.Ia();this.Cu.clear();this.Cu.freeze();this.Fm=this.Wx=n;this.ut=(new G(NaN,NaN,NaN,NaN)).freeze();a!==n&&(this.add(a),this.Nb.remove(a))};
A.prototype.reset=A.prototype.reset=function(){this.tc=h;this.clear();this.gb=new z(jf);this.qb=(new F(NaN,NaN)).freeze();this.bc=1;this.au=1E-4;this.Yt=100;this.Wu=(new F(NaN,NaN)).freeze();this.zt=(new G(NaN,NaN,NaN,NaN)).freeze();this.kl=zf;this.pl=Hb;this.qk=zf;this.Sm=Hb;this.Jt=this.It=Jb;this.dt=(new hb(16,16,16,16)).freeze();this.Pt=h;this.Tu=zg;this.lp="auto";this.Kd=this.Sh=this.ui=this.gi=this.du=this.hi=this.ii=this.ji=this.Rh=this.Uh=this.Qh=n;this.uk=p;this.Rj=this.Qj=this.Vs=this.bi=
h;this.Xs=this.Ws=p;this.at=this.Ys=this.Et=this.Dt=this.bt=this.$s=this.$j=this.Zj=this.Yj=this.Xj=this.Vj=this.Uj=this.Wj=this.Tj=this.Zs=this.bk=this.Sj=this.ak=h;this.zu=this.yu=16;this.ie=(new hb(5)).freeze();this.Zt=999999999;this.rd=n;ai(this);bi(this);this.Jc=n;this.V=new O;this.qi=h;this.Pb=new ci;this.tc=this.qi=p};
A.prototype.rebuildParts=A.prototype.om=function(){for(var a=[],b=this.selection.l;b.next();){var c=b.value.data;c&&a.push(c)}b=this.V;b instanceof O&&Rh(this,b.Rg);Rh(this,b.gg);Sh(this,b.gg);b instanceof O&&Th(this,b.Rg);for(b=0;b<a.length;b++)if(c=this.Hj(a[b]))c.Qa=h};
function Sh(a,b){if(b!==n){for(var c=a.V,d=w.Sb(b),e=0;e<d;e++){var g=w.Eb(b,e);c.pe(g)?Uh(a,g,p):c instanceof O&&Vh(a,g)}if(c instanceof O||c instanceof De){for(e=0;e<d;e++)g=w.Eb(b,e),c.pe(g)&&Si(a,g);if(c instanceof O)for(c=a.links;c.next();)Ti(c.value)}Ui(a,p)}}
function Uh(a,b,c){if(!(b===f||b===n)&&!a.sa.tb&&!a.Th.contains(b)){c===f&&(c=h);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);e instanceof S&&(xf(e),e=e.copy(),e instanceof S&&(e.Yg=d,a.add(e),e.data=b,c&&Si(a,b)))}}A.prototype.getCategoryForNodeData=A.prototype.YC=function(a){var b=this.V,c=b.YC(a),d=p;b instanceof O&&(d=b.tz(a));d&&""===c&&(c="LinkLabel");return c};
A.prototype.findTemplateForNodeData=A.prototype.BK=function(a,b){var c=p,d=this.V;d instanceof O&&(c=d.qz(a));c?(c=this.mz.qa(b),c===n&&(c=this.mz.qa(""),c===n&&(w.wF===f&&(w.wF=h,w.trace('No Group template found for category "'+b+'"'),w.trace("  Using default group template")),c=this.JA))):(c=this.Jz.qa(b),c===n&&(c=this.Jz.qa(""),c===n&&(w.zF===f&&(w.zF=h,w.trace('No Node template found for category "'+b+'"'),w.trace("  Using default node template")),c=this.LA)));return c instanceof S?c:n};
function Si(a,b){var c=a.V;if(c instanceof O||c instanceof De){var d=c.kb(b);if(d!==f){var e=Ne(c,d),g=a.Vr(b);if(e!==n&&g!==n){for(e=e.l;e.next();){var i=e.value;if(c instanceof O)if(c.pe(i)){if(g instanceof vf&&c.co(i)===d){var j=a.Hj(i);j!==n&&(j.cb=g)}}else{if(j=a.Af(i),j!==n){c.fm(i)===d&&(j.ga=g);c.gm(i)===d&&(j.la=g);for(var i=c.Wk(i),k=0;k<i.length;k++)if(i[k]===d){g.zd=j;break}}}else c instanceof De&&(c.pe(i)&&c.eo(i)===d)&&(j=a.Vr(i),Qh(a,g,j))}bf(c,d)}c instanceof O?(c=c.co(b),c!==f&&(c=
a.Zf(c),c instanceof vf&&(g.cb=c))):c instanceof De&&(c=c.eo(b),c!==f&&(c=a.Zf(c),Qh(a,c,g)))}}}function Qh(a,b,c){if(!(b===n||c===n)){var d=a.Rb.zz,e=b,g=c;if(a.Yc)for(b=g.ve;b.next();){var i=b.value;if(i.la===g)return}else{e=c;g=b;for(b=e.ve;b.next();)if(i=b.value,i.ga===e)return}d!==n&&Bg(d,e,g,n)||(d=a.getCategoryForLinkData(c.data),b=a.findTemplateForLinkData(c.data,d),b instanceof U&&(xf(b),b=b.copy(),b instanceof U&&(b.Yg=d,b.ga=e,b.la=g,a.add(b),b.data=c.data)))}}
function Th(a,b){if(b!==n){for(var c=w.Sb(b),d=0;d<c;d++)Vh(a,w.Eb(b,d));Ui(a,p)}}
function Vh(a,b){if(!(b===f||b===n)&&!a.sa.tb&&!a.ik.contains(b)){var c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c);if(d instanceof U&&(xf(d),d=d.copy(),d instanceof U)){d.Yg=c;var c=a.V,e=c.HG(b);""!==e&&(d.Gi=e);e=c.fm(b);e!==f&&(e=a.Zf(e),e instanceof T&&(d.ga=e));e=c.KG(b);""!==e&&(d.Pj=e);e=c.gm(b);e!==f&&(e=a.Zf(e),e instanceof T&&(d.la=e));c=c.Wk(b);if(w.isArray(c))for(var e=w.Sb(c),g=0;g<e;g++){var i=a.Zf(w.Eb(c,g));i!==n&&(i.zd=d)}a.add(d);d.data=b}}}
A.prototype.getCategoryForLinkData=A.prototype.XC=function(a){var b=this.V,c="";b instanceof O?c=b.XC(a):b instanceof De&&(c=b.JG(a));return c};A.prototype.findTemplateForLinkData=A.prototype.AK=function(a,b){var c=this.xz.qa(b);c===n&&(c=this.xz.qa(""),c===n&&(w.yF===f&&(w.yF=h,w.trace('No Link template found for category "'+b+'"'),w.trace("  Using default link template")),c=this.KA));return c instanceof U?c:n};function Rh(a,b){for(var c=w.Sb(b),d=0;d<c;d++)Wh(a,w.Eb(b,d))}
function Wh(a,b){if(!(b===f||b===n)){var c=a.Hj(b);if(c instanceof S){c.Qa=p;var d=c.Oa;if(!(d===n||d.h!==a)){var e=a.V;if(e instanceof O&&c instanceof T){var g=e.kb(c.data);if(g!==f){for(var i=c.ve;i.next();){var j=i.value.data;Oe(e,g,j)}c.Li&&(i=c.zd,i!==n&&(j=i.data,Oe(e,g,j)));if(c instanceof vf)for(i=c.Gc;i.next();)j=i.value.data,e.pe(j)&&Oe(e,g,j)}}else if(e instanceof De&&c instanceof T){i=a.Af(c.data);if(i!==n&&(i.Qa=p,j=i.Oa,j!==n)){var k=j.se(-1,i);0<=k&&a.Rc(je,"parts",j,i,n,k,n);k=i.lo;
k!==n&&k(i,j,n)}i=a.Yc;for(j=c.ve;j.next();)k=j.value,k=(i?k.la:k.ga).data,e.pe(k)&&Oe(e,g,k)}e=d.se(-1,c);0<=e&&a.Rc(je,"parts",d,c,n,e,n);e=c.lo;e!==n&&e(c,d,n)}}}}A.prototype.findPartForKey=A.prototype.xK=function(a){if(a===n||a===f)return n;a=this.V.Oe(a);if(a===n)return n;a=this.Th.qa(a);return a instanceof S?a:n};A.prototype.findNodeForKey=A.prototype.Zf=function(a){if(a===n||a===f)return n;a=this.V.Oe(a);if(a===n)return n;a=this.Th.qa(a);return a instanceof T?a:n};
A.prototype.findPartForData=A.prototype.Hj=function(a){if(a===n)return n;var b=this.Th.qa(a);if(b instanceof S)return b;b=this.ik.qa(a);return b instanceof S?b:n};A.prototype.findNodeForData=A.prototype.Vr=function(a){if(a===n)return n;a=this.Th.qa(a);return a instanceof T?a:n};A.prototype.findLinkForData=A.prototype.Af=function(a){if(a===n)return n;a=this.ik.qa(a);return a instanceof U?a:n};w.g(A,"nodeTemplate",A.prototype.wH);
w.defineProperty(A,{wH:"nodeTemplate"},function(){return this.ki.qa("")},function(a){var b=this.ki.qa("");b!==a&&(w.i(a,S,A,"nodeTemplate"),this.ki.add("",a),this.j("nodeTemplate",b,a),this.sa.tb||this.om())});w.g(A,"nodeTemplateMap",A.prototype.Jz);w.defineProperty(A,{Jz:"nodeTemplateMap"},t("ki"),function(a){var b=this.ki;b!==a&&(w.i(a,ka,A,"nodeTemplateMap"),this.ki=a,this.j("nodeTemplateMap",b,a),this.sa.tb||this.om())});w.g(A,"groupTemplate",A.prototype.MG);
w.defineProperty(A,{MG:"groupTemplate"},function(){return this.nk.qa("")},function(a){var b=this.nk.qa("");b!==a&&(w.i(a,vf,A,"groupTemplate"),this.nk.add("",a),this.j("groupTemplate",b,a),this.sa.tb||this.om())});w.g(A,"groupTemplateMap",A.prototype.mz);w.defineProperty(A,{mz:"groupTemplateMap"},t("nk"),function(a){var b=this.nk;b!==a&&(w.i(a,ka,A,"groupTemplateMap"),this.nk=a,this.j("groupTemplateMap",b,a),this.sa.tb||this.om())});w.g(A,"linkTemplate",A.prototype.jH);
w.defineProperty(A,{jH:"linkTemplate"},function(){return this.dj.qa("")},function(a){var b=this.dj.qa("");b!==a&&(w.i(a,U,A,"linkTemplate"),this.dj.add("",a),this.j("linkTemplate",b,a),this.sa.tb||this.om())});w.g(A,"linkTemplateMap",A.prototype.xz);w.defineProperty(A,{xz:"linkTemplateMap"},t("dj"),function(a){var b=this.dj;b!==a&&(w.i(a,ka,A,"linkTemplateMap"),this.dj=a,this.j("linkTemplateMap",b,a),this.sa.tb||this.om())});w.g(A,"isMouseCaptured",A.prototype.Fc);
w.defineProperty(A,{Fc:"isMouseCaptured"},t("dB"),function(a){var b=this.va;b!==n&&(a?(this.N.bubbles=p,b.removeEventListener("mousemove",this.uo,p),b.removeEventListener("mousedown",this.to,p),b.removeEventListener("mouseup",this.wo,p),b.removeEventListener("mousewheel",this.Tg,p),b.removeEventListener("DOMMouseScroll",this.Tg,p),b.removeEventListener("mouseout",this.vo,p),window.addEventListener("mousemove",this.uo,h),window.addEventListener("mousedown",this.to,h),window.addEventListener("mouseup",
this.wo,h),window.addEventListener("mousewheel",this.Tg,h),window.addEventListener("DOMMouseScroll",this.Tg,h),window.addEventListener("mouseout",this.vo,h),window.addEventListener("selectstart",this.preventDefault,p)):(window.removeEventListener("mousemove",this.uo,h),window.removeEventListener("mousedown",this.to,h),window.removeEventListener("mouseup",this.wo,h),window.removeEventListener("mousewheel",this.Tg,h),window.removeEventListener("DOMMouseScroll",this.Tg,h),window.removeEventListener("mouseout",
this.vo,h),window.removeEventListener("selectstart",this.preventDefault,p),b.addEventListener("mousemove",this.uo,p),b.addEventListener("mousedown",this.to,p),b.addEventListener("mouseup",this.wo,p),b.addEventListener("mousewheel",this.Tg,p),b.addEventListener("DOMMouseScroll",this.Tg,p),b.addEventListener("mouseout",this.vo,p)),this.dB=a)});w.g(A,"position",A.prototype.position);
w.defineProperty(A,{position:"position"},t("qb"),function(a){var b=this.qb;if(!b.I(a)){w.i(a,F,A,"position");var c=this.$a.copy();c.x=b.x;c.y=b.y;a=a.copy();b.Gj(a)||(this.tc||this.va===n||(this.tc=h,b=this.scale,yi(this,a,this.wc,this.va.width/b,this.va.height/b,this.pl),this.tc=p),b=a);this.qb=b.O();this.xs(c,this.$a);this.yb()}});w.g(A,"initialPosition",A.prototype.lD);w.defineProperty(A,{lD:"initialPosition"},t("ux"),function(a){this.ux.I(a)||(w.i(a,F,A,"initialPosition"),this.ux=a.O())});
w.g(A,"initialScale",A.prototype.mD);w.defineProperty(A,{mD:"initialScale"},t("vx"),function(a){this.vx!==a&&(w.k(a,"number",A,"initialScale"),this.vx=a)});w.g(A,"grid",A.prototype.Dv);
w.defineProperty(A,{Dv:"grid"},function(){this.Jc===n&&mi(this);return this.Jc},function(a){var b=this.Jc;if(b!==a){b===n&&(mi(this),b=this.Jc);w.i(a,x,A,"grid");a.type!==ni&&w.m("Diagram.grid must be a Panel of type Panel.Grid");var c=b.fa;c!==n&&c.remove(b);this.Jc=a;a.name="GRID";c!==n&&c.add(a);Nh(this);this.j("grid",b,a)}});w.u(A,{$a:"viewportBounds"},function(){var a=this.va,b=this.SB;if(a===n)return b;var c=this.qb,d=this.bc;b.U(c.x,c.y,Math.max(a.width,0)/d,Math.max(a.height,0)/d);return b});
w.g(A,"fixedBounds",A.prototype.Zr);w.defineProperty(A,{Zr:"fixedBounds"},t("zt"),function(a){var b=this.zt;b.I(a)||(w.i(a,G,A,"fixedBounds"),this.zt=a=a.O(),Ci(this),this.j("fixedBounds",b,a))});w.u(A,{wc:"documentBounds"},t("ut"));function zi(a,b){var c=a.ut;c.I(b)||(b=b.O(),a.ut=b,a.$h=p,wi(a),a.za("DocumentBoundsChanged",n,c.copy()),Ei(a))}w.g(A,"scale",A.prototype.scale);
w.defineProperty(A,{scale:"scale"},t("bc"),function(a){var b=this.bc;w.o(a,A,"scale");a<this.cg&&(a=this.cg);a>this.Cf&&(a=this.Cf);if(b!==a){var c=this.bc=a;if(!this.tc&&!this.Td){this.tc=h;var d=this.va;if(d!==n){var a=this.$a.copy(),e=d.width/c,g=d.height/c;a.width=d.width/b;a.height=d.height/b;d=this.Oh.copy();if(isNaN(d.x))switch(this.mv){case ec:d.x=0;break;case fc:d.x=e-1;break;case Ob:d.x=e/2;break;case Hb:case hc:d.x=e/2}if(isNaN(d.y))switch(this.mv){case dc:d.y=0;break;case gc:d.y=g-1;break;
case Ob:d.y=g/2;break;case Hb:case hc:d.y=g/2}var i=this.position,b=new F(i.x+d.x/b-d.x/c,i.y+d.y/b-d.y/c);yi(this,b,this.wc,e,g,this.pl);this.position=b;this.tc=p;this.xs(a,this.$a)}}Nh(this);Ei(this)}});w.g(A,"autoScale",A.prototype.Tl);w.defineProperty(A,{Tl:"autoScale"},t("kl"),function(a){var b=this.kl;b!==a&&(w.ib(a,A,A,"autoScale"),this.kl=a,this.j("autoScale",b,a),a!==zf&&wi(this))});w.g(A,"initialAutoScale",A.prototype.QG);
w.defineProperty(A,{QG:"initialAutoScale"},t("qk"),function(a){var b=this.qk;b!==a&&(w.ib(a,A,A,"initialAutoScale"),this.qk=a,this.j("initialAutoScale",b,a))});w.g(A,"initialViewportSpot",A.prototype.nD);w.defineProperty(A,{nD:"initialViewportSpot"},t("Jt"),function(a){var b=this.Jt;b!==a&&(w.i(a,H,A,"initialViewportSpot"),tb(a)||w.m("initialViewportSpot must be a real Spot: "+a),this.Jt=a,this.j("initialViewportSpot",b,a))});w.g(A,"initialDocumentSpot",A.prototype.kD);
w.defineProperty(A,{kD:"initialDocumentSpot"},t("It"),function(a){var b=this.It;b!==a&&(w.i(a,H,A,"initialDocumentSpot"),tb(a)||w.m("initialViewportSpot must be a real Spot: "+a),this.It=a,this.j("initialDocumentSpot",b,a))});w.g(A,"minScale",A.prototype.cg);w.defineProperty(A,{cg:"minScale"},t("au"),function(a){w.o(a,A,"minScale");var b=this.au;b!==a&&0<a?(this.au=a,this.j("minScale",b,a),a>this.scale&&(this.scale=a)):w.ra(a,"> 0",A,"minScale")});w.g(A,"maxScale",A.prototype.Cf);
w.defineProperty(A,{Cf:"maxScale"},t("Yt"),function(a){w.o(a,A,"maxScale");var b=this.Yt;b!==a&&0<a?(this.Yt=a,this.j("maxScale",b,a),a<this.scale&&(this.scale=a)):w.ra(a,"> 0",A,"maxScale")});w.g(A,"zoomPoint",A.prototype.Oh);w.defineProperty(A,{Oh:"zoomPoint"},t("Wu"),function(a){this.Wu.I(a)||(w.i(a,F,A,"zoomPoint"),this.Wu=a=a.O(),Ci(this))});w.g(A,"contentAlignment",A.prototype.mv);
w.defineProperty(A,{mv:"contentAlignment"},t("pl"),function(a){var b=this.pl;b.I(a)||(w.i(a,H,A,"contentAlignment"),this.pl=a=a.O(),this.j("contentAlignment",b,a),wi(this))});w.g(A,"initialContentAlignment",A.prototype.RG);w.defineProperty(A,{RG:"initialContentAlignment"},t("Sm"),function(a){var b=this.Sm;b.I(a)||(w.i(a,H,A,"initialContentAlignment"),this.Sm=a=a.O(),this.j("initialContentAlignment",b,a))});w.g(A,"padding",A.prototype.padding);
w.defineProperty(A,{padding:"padding"},t("ie"),function(a){"number"===typeof a?a=new hb(a):w.i(a,hb,A,"padding");var b=this.ie;b.I(a)||(this.ie=a=a.O(),Ci(this),this.j("padding",b,a))});w.u(A,{bl:"nodes"},function(){return this.ku.l});w.u(A,{links:"links"},function(){return this.Tt.l});w.u(A,{cl:"parts"},function(){return this.Nb.l});w.g(A,"layout",A.prototype.Pb);
w.defineProperty(A,{Pb:"layout"},t("rd"),function(a){var b=this.rd;b!==a&&(w.i(a,ci,A,"layout"),b!==n&&(b.h=n,b.group=n),this.rd=a,a.h=this,a.group=n,this.yn=this.ct=h,this.j("layout",b,a),this.yb())});A.prototype.layoutDiagram=A.prototype.tL=function(a){$h(this);a&&Ui(this,h);Gi(this)};function Ui(a,b){for(var c=a.Pl.l;c.next();)Vi(a,c.value,b);a.Pb!==n&&(b?a.Pb.Ue=p:a.Pb.F())}function Vi(a,b,c){if(b!==n){for(var d=b.en.l;d.next();)Vi(a,d.value,c);b.Pb!==n&&(c?b.Pb.Ue=p:b.Pb.F())}}
function Gi(a){for(var b=a.Pl.l;b.next();)Wi(a,b.value);b=a.Pb;b!==n&&!b.Ue&&(b.doLayout(a),b.Ue=h);a.ct=p}function Wi(a,b){if(b!==n){for(var c=b.en.l;c.next();)Wi(a,c.value);c=b.Pb;c!==n&&!c.Ue&&(b.rB=!b.location.P(),c.doLayout(b),b.F(Xi),c.Ue=h,Hi(a,b))}}w.g(A,"isTreePathToChildren",A.prototype.Yc);w.defineProperty(A,{Yc:"isTreePathToChildren"},t("Pt"),function(a){var b=this.Pt;if(b!==a&&(w.k(a,"boolean",A,"isTreePathToChildren"),this.Pt=a,this.j("isTreePathToChildren",b,a),!this.sa.tb))for(a=this.bl;a.next();)Yi(a.value)});
w.g(A,"isCollapsingExpanding",A.prototype.ag);w.defineProperty(A,{ag:n},t("aB"),ba("aB"));function Zi(a,b){var c=a.bx.qa(b);if(c!==n)return c;c=a.bx.qa(b.toLowerCase());if(c!==n)return c;w.m("Unknown DiagramEvent name: "+b);return n}A.prototype.addDiagramListener=A.prototype.YB=function(a,b){w.k(a,"string",A,"addDiagramListener:name");w.k(b,"function",A,"addDiagramListener:listener");var c=Zi(this,a);c!==n&&c.add(b)};
A.prototype.removeDiagramListener=A.prototype.cE=function(a,b){w.k(a,"string",A,"removeDiagramListener:name");w.k(b,"function",A,"addDiagramListener:listener");var c=Zi(this,a);c!==n&&c.remove(b)};A.prototype.raiseDiagramEvent=A.prototype.za=function(a,b,c){u&&w.k(a,"string",A,"raiseDiagramEvent:name");var d=Zi(this,a),e=new be;e.h=this;var g=this.ax.qa(a),a=g!==n?g:this.ax.qa(a.toLowerCase());e.name=a;b!==f&&(e.hw=b);c!==f&&(e.Tv=c);for(b=d.l;b.next();)c=b.value,c(e);return e.cancel};
function tg(a,b){for(var c=a.em(b,function(a){return a.ca},function(a){return a instanceof U},h).l;c.next();){var d=c.value;d.Gh===$f&&d.Tb()}}function $i(a,b,c){if(b!==c)if(b.canAvoid()){for(var c=b.getAvoidableRectangle(),b=a.ud.Vl,d=a.ud.Ul,e=c.x+c.width,g=c.y+c.height,i=c.x;i<e;i+=b){for(var j=c.y;j<g;j+=d)aj(a.ud,i,j);aj(a.ud,i,g)}for(j=c.y;j<g;j+=d)aj(a.ud,e,j);aj(a.ud,e,g)}else if(b instanceof vf)for(b=b.Gc;b.next();)d=b.value,d instanceof T&&$i(a,d,c)}
function bj(a,b){if(a.ud!==n&&!a.ud.hs&&(b===n||b.canAvoid()))a.ud.hs=h}function hi(a,b,c){if(If!==n){c instanceof A||(c=n);var d=Qf;c!==d&&(d!==n&&d.Rb.re!==n&&d.Rb.re.doSimulatedDragLeave(),c!==n&&c.Rb.re!==n&&c.Rb.re.doSimulatedDragEnter());Qf=c;if(c===n)return h;d=c.Rb.re;d!==n&&(a!==n&&(b=c.Xh(a)),c.ac.M=b,c.ac.Fj=p,c.ac.Pi=p,d.doSimulatedDragOver());return h}return p}
function ji(a,b,c,d){if(If!==n){d===n&&(d=n);var e=Qf;d!==e&&(e!==n&&e.Rb.re!==n&&e.Rb.re.doSimulatedDragLeave(),d!==n&&d.Rb.re!==n&&d.Rb.re.doSimulatedDragEnter());Qf=d;if(d===n)return If.doCancel(),h;if(d!==a)return a=c,b!==n&&(a=d.Xh(b)),d.ac.M=a,d.ac.Fj=p,d.ac.Pi=h,b=d.Rb.re,b!==n&&b.doSimulatedDrop(),If!==n&&If.doCancel(),h}return p}w.g(A,"autoScrollRegion",A.prototype.iC);
w.defineProperty(A,{iC:"autoScrollRegion"},t("dt"),function(a){"number"===typeof a?a=new hb(a):w.i(a,hb,A,"autoScrollRegion");var b=this.dt;b.I(a)||(this.dt=a=a.O(),Ci(this),this.j("autoScrollRegion",b,a))});
function ig(a){if(a.Wg===n){a.Wg={};var b;b=a.Fa!==a.Rb.re?a.cF:a.dF;a.Wg.isEnabled=h;var c=setInterval(function(){var b=c;a.Wg!==n&&a.Wg.isEnabled&&(a.Wg=n,clearInterval(b),b=hg(a,a.Pw),b.Fi(a.position)||(a.position=b,a.N.M=a.QE(a.Pw),a.Fa.doMouseMove(),a.$h=h,zi(a,a.oe()),a.eh=h,a.Eh(),ig(a)))},b);a.Wg.id=c}}function Lf(a){a.Wg!==n&&(a.Wg.isEnabled&&clearInterval(a.Wg.id),a.Wg=n)}
function hg(a,b){var c=a.position,d=a.iC;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.$a,g=a.scale,e=new G(0,0,e.width*g,e.height*g),i=new F(0,0);if(b.x>=e.x&&b.x<e.x+d.left){var j=Math.max(a.Cs,1),j=j|0;i.x-=j;b.x<e.x+d.left/2&&(i.x-=j);b.x<e.x+d.left/4&&(i.x-=4*j)}else b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(j=Math.max(a.Cs,1),j|=0,i.x+=j,b.x>e.x+e.width-d.right/2&&(i.x+=j),b.x>e.x+e.width-d.right/4&&(i.x+=4*j));b.y>=e.y&&b.y<e.y+d.top?(j=Math.max(a.Ds,1),j|=0,i.y-=j,b.y<
e.y+d.top/2&&(i.y-=j),b.y<e.y+d.top/4&&(i.y-=4*j)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(j=Math.max(a.Ds,1),j|=0,i.y+=j,b.y>e.y+e.height-d.bottom/2&&(i.y+=j),b.y>e.y+e.height-d.bottom/4&&(i.y+=4*j));i.Fi(new F(0,0))||(c=new F(c.x+i.x/g,c.y+i.y/g));return c}A.prototype.makeImage=A.prototype.vL=function(a){var b=document.createElement("img");b.src=this.lH(a);return b instanceof HTMLImageElement?b:n};
A.prototype.makeImageData=A.prototype.lH=function(a){this.Eh();if(this.va===n)return"";a===f&&(a={});"object"!==typeof a&&w.m("properties argument must be an Object.");var b=a.size||n,c=a.scale||n,d=a.maxSize||new bb(2E3,2E3),e=a.position||n,g=a.parts||n,i=a.padding||1,j=a.background||n,k=a.omitTemporary;k===f&&(k=h);b!==n&&(isNaN(b.width)&&isNaN(b.height))&&(b=n);i&&"number"===typeof i&&(i=new hb(i));i||(i=new hb(0));i.left=Math.max(i.left,0);i.right=Math.max(i.right,0);i.top=Math.max(i.top,0);i.bottom=
Math.max(i.bottom,0);this.wt=p;li(this);var l=document.createElement("canvas"),m=l.getContext("2d");if(!b&&!c&&!g&&!e)return l.width=this.va.width+Math.ceil(i.left+i.right),l.height=this.va.height+Math.ceil(i.top+i.bottom),Ii(this,m,i,new bb(l.width,l.height),this.bc,this.qb,g,j,k),this.wt=h,l.toDataURL(a.type,a.details);var q=new F(0,0);e!==n&&e.P()&&(q=e,c||(c=1));e=this.wc.copy();e.iI(this.padding);e.width-=q.x;e.height-=q.y;if(g){var r,s=h,g=g.l;for(g.reset();g.next();){var v=g.value;if(v instanceof
S){var y=v.Oa;if(!y||y.visible)if((!y||!y.zc)&&v.mb())v=v.wa,v.P()&&(s?(s=p,r=v.copy()):r.Oi(v))}}s&&(r=new G(0,0,0,0));e.width=r.width;e.height=r.height;q.x=r.x;q.y=r.y}else q.x+=e.x,q.y+=e.y;s=r=0;i&&(r=i.left+i.right,s=i.top+i.bottom);v=y=0;b&&(y=b.width,v=b.height,isFinite(y)&&(y=Math.max(0,y-r)),isFinite(v)&&(v=Math.max(0,v-s)));b&&c?b.P()?(b=y,e=v):isNaN(v)?(b=y,e=e.height*c):(b=e.width*c,e=v):b?b.P()?(c=Math.min(y/e.width,v/e.height),b=y,e=v):isNaN(v)?(c=y/e.width,b=y,e=e.height*c):(c=v/e.height,
b=e.width*c,e=v):c?(b=e.width*c,e=e.height*c):(c=1,b=e.width,e=e.height);i?(b+=r,e+=s):i=new hb(0);d&&(r=d.width,isNaN(r)&&(r=2E3),d=d.height,isNaN(d)&&(d=2E3),isFinite(r)&&(b=Math.min(b,r)),isFinite(d)&&(e=Math.min(e,d)));l.width=b;l.height=e;Ii(this,m,i,new bb(Math.ceil(b),Math.ceil(e)),c,q,g,j,k);this.wt=h;return l.toDataURL(a.type,a.details)};A.inherit=function(a,b){w.k(a,"function",A,"inherit");w.k(b,"function",A,"inherit");w.Ea(a,b)};
function cj(a){1<arguments.length&&w.m("Palette constructor can only take one optional argument, the DIV HTML element or its id.");A.call(this,a);this.$u=h;this.Kk=p;this.eb=h;this.mv=Kb;this.Pb=new dj}w.Q("Palette",cj);w.Ea(cj,A);
function Ji(a){1<arguments.length&&w.m("Overview constructor can only take one optional argument, the DIV HTML element or its id.");A.call(this,a);this.tc=h;this.li=n;var b=new S,c=new V;c.stroke="magenta";c.Za=2;c.fill=n;c.name="BOXSHAPE";b.Fs="BOXSHAPE";b.Mv="BOXSHAPE";b.add(c);this.Si=b;this.ny=document.createElement("canvas");this.rF=this.ny.getContext("2d");b=new ej;b.ee(this);this.Rb.We.yc(0,b);var d=this;this.UD=function(){fj(d)};this.TD=function(){d.li!==n&&(Ci(d),Nh(d))};this.eb=h;this.ke=
p;this.Tl=Ai;this.Rb.mm=Df;this.tc=p}w.Q("Overview",Ji);w.Ea(Ji,A);
Ji.prototype.Ne=function(){this.Lb===n&&w.m("No div specified");this.va===n&&w.m("No canvas specified");if(this.eh){var a=this.li;if(a!==n){var b=this.va,c=this.hk,d=this.ny,e=this.rF;d.width=b.width;d.height=b.height;c.Kw="";c.setTransform(1,0,0,1,0,0);c.clearRect(0,0,this.va.width,this.va.height);var g=this.Nd;g.reset();1!==this.bc&&g.scale(this.scale);(0!==this.position.x||0!==this.position.y)&&g.translate(-this.qb.x,-this.qb.y);c.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);for(var i=this.$a,
j=a.gb.length,g=0;g<j;g++)for(var k=c,l=i,m=a.gb.n[g].Nb,q=this.scale,r=m.length,s=0;s<r;s++){var v=m.n[s],y=v.wa;y.Se(l)&&(1<y.width*q||1<y.height*q?v.Ne(k,this):Mh(v,k))}e.drawImage(b,0,0);u&&u.lC&&(e.fillStyle="red",e.fillRect(0,d.height/2,d.width,4));a=this.gb.length;for(g=0;g<a;g++)this.gb.n[g].Ne(c,this);this.eh=this.tk=p}}};w.g(Ji,"observed",Ji.prototype.xH);
w.defineProperty(Ji,{xH:"observed"},t("li"),function(a){var b=this.li;a!==n&&w.i(a,A,Ji,"observed");b!==a&&!(a instanceof Ji)&&(b!==n&&(this.remove(this.ld),b.cE("ViewportBoundsChanged",this.UD),b.cE("DocumentBoundsChanged",this.TD),b.ru.remove(this),this.Rb.Rr.Us=n),this.li=a,a!==n&&(a.YB("ViewportBoundsChanged",this.UD),a.YB("DocumentBoundsChanged",this.TD),a.ru.add(this),this.add(this.ld),fj(this),this.Rb.Rr.Us=a),Ci(this),this.j("observed",b,a))});w.g(Ji,"box",Ji.prototype.ld);
w.defineProperty(Ji,{ld:"box"},t("Si"),function(a){var b=this.Si;b!==a&&(this.Si=a,this.j("box",b,a))});function fj(a){var b=a.ld;if(b!==n){var c=a.li;if(c!==n){a.eh=h;var c=c.$a,d=b.$v;d.xa=new bb(c.width,c.height);a=2/a.scale;d instanceof V&&(d.Za=a);b.location=new F(c.x-a/2,c.y-a/2)}}}Ji.prototype.oe=function(){var a=this.li;return a===n?new G(0,0,0,0):a.wc};Ji.prototype.xs=function(a){this.tc||(vi(this),Nh(this),Ei(this),Ci(this),fj(this),this.za("ViewportBoundsChanged",a))};
function ej(){Bf.call(this);this.name="MoveBox"}w.Ea(ej,Bf);ej.prototype.doStart=ej.prototype.cz=function(){this.Y=this.h.Fc=h};ej.prototype.doMouseMove=ej.prototype.Og=function(){if(this.Y){var a=this.h;if(!(a===n||a.li===n)){var b=a.li,c=b.$a,d=a.N.M;b.position=new F(d.x-c.width/2,d.y-c.height/2);a.yb()}}};ej.prototype.doMouseUp=ej.prototype.qe=function(){this.Y&&this.doMouseMove();this.stopTool()};ej.prototype.doStop=ej.prototype.Sk=function(){this.Y=p;var a=this.h;a.Fc=p;fj(a)};
function Fe(a){w.jc(this);this.ab=p;a===f?(this.T=He,this.Em="black"):"string"===typeof a?(this.T=He,this.Em=a):(u&&w.ib(a,Fe,Fe,"constructor:type"),this.T=a,this.Em="black");a=this.T;a===Ie?(this.qn=Kb,this.Mm=Qb):this.Mm=a===Je?this.qn=Ob:this.qn=Gb;this.Hu=0;this.xt=NaN;this.AA=this.BA=this.xg=this.tu=this.vg=n}w.Q("Brush",Fe);var He;Fe.Solid=He=w.s(Fe,"Solid",0);var Ie;Fe.Linear=Ie=w.s(Fe,"Linear",1);var Je;Fe.Radial=Je=w.s(Fe,"Radial",2);var gj;Fe.Pattern=gj=w.s(Fe,"Pattern",2);
Fe.prototype.copy=Fe.prototype.copy=function(){var a=new Fe;a.T=this.T;a.Em=this.Em;a.qn=this.qn;a.Mm=this.Mm;a.Hu=this.Hu;a.xt=this.xt;this.vg!==n&&(a.vg=this.vg.copy());a.tu=this.tu;return a};Fe.prototype.Ya=function(){this.freeze();Object.freeze(this);return this};Fe.prototype.freeze=function(){this.ab=h;this.vg!==n&&this.vg.freeze();return this};Fe.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.ab=p;this.vg!==n&&this.vg.Ia();return this};
Fe.prototype.toString=function(){var a="Brush(";if(this.type===He)a+=this.color;else if(a=this.type===Ie?a+"Linear ":this.type===Je?a+"Radial ":this.type===gj?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,this.Sn!==n)for(var b=this.Sn.l;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
Fe.prototype.addColorStop=Fe.prototype.addColorStop=function(a,b){w.H(this);(a===n||1<a||0>a)&&w.ra(a,"0 <= loc <= 1",Fe,"addColorStop:loc");w.k(b,"string",Fe,"addColorStop:color");this.vg===n&&(this.vg=new ka("number","string"));this.vg.add(a,b);this.T===He&&(this.type=Ie);this.xg=n};w.g(Fe,"type",Fe.prototype.type);
w.defineProperty(Fe,{type:"type"},t("T"),function(a){w.H(this,a);w.ib(a,Fe,Fe,"type");this.T=a;zb(this.start)&&(a===Ie?this.start=Kb:a===Je&&(this.start=Ob));zb(this.end)&&(a===Ie?this.end=Qb:a===Je&&(this.end=Ob));this.xg=n});w.g(Fe,"color",Fe.prototype.color);w.defineProperty(Fe,{color:"color"},t("Em"),function(a){w.H(this,a);w.k(a,"string",Fe,"color");this.Em=a;this.xg=n});w.g(Fe,"start",Fe.prototype.start);
w.defineProperty(Fe,{start:"start"},t("qn"),function(a){w.H(this,a);a instanceof H||w.ic(a,"Spot",Fe,"start");this.qn=a.O();this.xg=n});w.g(Fe,"end",Fe.prototype.end);w.defineProperty(Fe,{end:"end"},t("Mm"),function(a){w.H(this,a);a instanceof H||w.ic(a,"Spot",Fe,"end");this.Mm=a.O();this.xg=n});w.g(Fe,"startRadius",Fe.prototype.Jo);w.defineProperty(Fe,{Jo:"startRadius"},t("Hu"),function(a){w.H(this,a);w.o(a,Fe,"startRadius");0>a&&w.ra(a,">= zero",Fe,"startRadius");this.Hu=a;this.xg=n});
w.g(Fe,"endRadius",Fe.prototype.Yn);w.defineProperty(Fe,{Yn:"endRadius"},t("xt"),function(a){w.H(this,a);w.o(a,Fe,"endRadius");0>a&&w.ra(a,">= zero",Fe,"endRadius");this.xt=a;this.xg=n});w.g(Fe,"colorStops",Fe.prototype.Sn);w.defineProperty(Fe,{Sn:"colorStops"},t("vg"),function(a){w.H(this,a);u&&w.i(a,ka,Fe,"colorStops");this.vg=a;this.xg=n});w.g(Fe,"pattern",Fe.prototype.pattern);w.defineProperty(Fe,{pattern:"pattern"},t("tu"),function(a){w.H(this,a);this.tu=a;this.xg=n});
Fe.randomColor=function(a,b){a===f&&(a=128);u&&(w.o(a,Fe,"randomColor:min"),(0>a||255<a)&&w.ra(a,"0 <= min <= 255",Fe,"randomColor:min"));b===f&&(b=Math.max(a,255));u&&(w.o(b,Fe,"randomColor:max"),(b<a||255<b)&&w.ra(b,"min <= max <= 255",Fe,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+d+e+c};
function P(){w.jc(this);this.Ak=n;this.Bb="";this.Qf=this.Mg=h;this.xe=this.ye=n;this.qb=(new F(NaN,NaN)).freeze();this.Ce=(new bb(NaN,NaN)).freeze();this.Ud=pc;this.ij=kc;this.Nd=new Wa;this.zm=new Wa;this.xk=new Wa;this.bc=1;this.oc=0;this.qh=eh;this.lq=(new hb(0)).freeze();this.Vc=(new G(NaN,NaN,NaN,NaN)).freeze();this.Ib=(new G(NaN,NaN,NaN,NaN)).freeze();this.Lc=(new G(0,0,NaN,NaN)).freeze();this.Kc=this.$b=this.ul=this.Um=h;this.Gq=n;this.dh=Gb;this.$g=10;this.Zg=hj;this.bh=0;this.Ap=n;this.Cp=
this.Bp=p;this.Dp=Infinity;this.wh=Gb;this.th=10;this.sh=hj;this.vh=0;this.qr=n;this.sr=this.rr=p;this.tr=Infinity;this.Ld=n;this.Ba=Hb;this.Tp=p;this.Vo=Hb;this.Vq=0;this.Dk=1;this.Z=0;this.ek=1;this.Yq=-Infinity;this.Xq=0;this.Zq=jc;this.$q=ij;this.fp="";this.Sh=this.ui=this.gi=this.vq=this.uq=this.hi=this.ii=this.ji=this.xq=this.wq=this.Rh=this.Uh=this.Qh=n;this.Mp=p;this.pc=this.Qo=this.To=this.So=this.Ro=n;this.Bm=p;this.ql=n;this.MB=new G(NaN,NaN,NaN,NaN);this.nl=p;this.dk=n;this.Am=p;this.Ll=
n}w.Q("GraphObject",P);
P.prototype.xb=function(a){a.Bb=this.Bb;a.Mg=this.Mg;a.Qf=this.Qf;a.ye=this.ye;a.xe=this.xe;a.qb.Ua(this.qb);a.Ce.Ua(this.Ce);a.Ud=this.Ud.O();a.ij=this.ij.O();a.bc=this.bc;a.oc=this.oc;a.qh=this.qh;a.lq.Ua(this.lq);a.Vc.Ua(this.Vc);a.Ib.Ua(this.Ib);a.Lc.Ua(this.Lc);a.Gq=this.Gq;a.dh=this.dh.O();a.$g=this.$g;a.Zg=this.Zg;a.bh=this.bh;a.Ap=this.Ap;a.Bp=this.Bp;a.Cp=this.Cp;a.Dp=this.Dp;a.wh=this.wh.O();a.th=this.th;a.sh=this.sh;a.vh=this.vh;a.qr=this.qr;a.rr=this.rr;a.sr=this.sr;a.tr=this.tr;a.Ba=
this.Ba.O();a.Tp=this.Tp;a.Vo=this.Vo.O();a.Vq=this.Vq;a.Dk=this.Dk;a.Z=this.Z;a.ek=this.ek;a.Yq=this.Yq;a.Xq=this.Xq;a.Zq=this.Zq.O();a.$q=this.$q;a.fp=this.fp;a.Qh=this.Qh;a.Uh=this.Uh;a.Rh=this.Rh;a.wq=this.wq;a.xq=this.xq;a.ji=this.ji;a.ii=this.ii;a.hi=this.hi;a.uq=this.uq;a.vq=this.vq;a.gi=this.gi;a.ui=this.ui;a.Sh=this.Sh;a.Mp=this.Mp;a.Ro=this.Ro;a.So=this.So;a.To=this.To;a.Qo=this.Qo;a.pc=this.pc;a.Bm=this.Bm;if(Array.isArray(this.ql)){a.ql=this.ql.slice(0);for(var b=0;b<this.ql.length;b++){var c=
this.ql[b];a[c]=this[c]}}a.Am=this.Am;a.$b=this.$b;a.Kc=this.Kc;a.xk=this.xk.copy();a.nl=this.nl;this.dk!==n&&(a.dk=this.dk.copy())};P.prototype.Ah=function(a){a.Ld=n;a.Ll=n;a.R()};P.prototype.copy=P.prototype.copy=function(){var a=new this.constructor;this.xb(a);return a};P.prototype.toString=function(){return w.Uk(Object.getPrototypeOf(this))+"#"+w.ec(this)};var jj;P.None=jj=w.s(P,"None",0);var eh;P.Default=eh=w.s(P,"Default",0);var kd;P.Fill=kd=w.s(P,"Fill",3);var fh;
P.Uniform=fh=w.s(P,"Uniform",1);var gh;P.UniformToFill=gh=w.s(P,"UniformToFill",2);var kj;P.Vertical=kj=w.s(P,"Vertical",4);var lj;P.Horizontal=lj=w.s(P,"Horizontal",5);P.prototype.Rc=function(a,b,c,d,e,g,i){var j=this.ca;if(j!==n&&(j.nm(a,b,c,d,e,g,i),this.Bm&&(c===this&&a===he)&&(a=this.Yr(),a!==n)))for(c=this.pc.l;c.next();)d=c.value,e=a.data,g=d.Ks,g!==n&&(e=a.Pe(g)),e!==n&&(d.UE(this,e,b,g!==n?n:j.h),g!==n&&(e=a,""!==g&&(e=a.Pe(g)),e!==n&&(g=d.rm,i=a,""!==g&&(i=a.Pe(g)),i!==n&&d.VE(i,e,b))))};
P.prototype.j=function(a,b,c){this.Rc(he,a,this,b,c)};function mj(a,b,c,d,e){var g=a.Vc,i=a.xk;i.reset();nj(a,i,b,c,d,e);a.xk=i;g.x=b;g.y=c;g.width=d;g.height=e;i.is()||i.PE(g)}P.prototype.RC=function(a,b){if(this.Qf===p)return p;var c=this.Sa,d=a.am(b);return $a(a.x,a.y,0,0,0,c.height)<d||$a(a.x,a.y,0,c.height,c.width,c.height)<d||$a(a.x,a.y,c.width,c.height,c.width,0)<d||$a(a.x,a.y,c.width,0,0,0)<d?h:p};
function oj(a,b,c,d){if(a instanceof x)for(var e=a.Ga.length;e--;){var g=a.Ga.n[e];if(g.visible){var i=g.wa,j=a.wa;i.x>j.width||(i.y>j.height||0>i.x+i.width||0>i.y+i.height)||(oj(g,b,c,d),b!==n&&(g=b(g)),g&&(c===n||c(g))&&d.add(g))}}}P.prototype.Lh=ca(h);
P.prototype.containsPoint=P.prototype.ua=function(a){u&&w.i(a,F,P,"containsPoint:p");var b=kb(this.transform,a),c=this.wa;if(!c.P())return p;if(w.jy){var d=this.Sa,e=this.Vk()*(this.h!==n?this.h.scale:1),g=1/e;if(10>d.width*e&&10>d.height*e)return jb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y)}return(this.Cc!==f||this instanceof V?jb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.ua(b))?this.dk&&!this.dk.ua(b)?p:this.xe!==n&&c.ua(b)||this.ye!==n&&this.Lc.ua(a)?h:this.zj(a):p};
P.prototype.zj=function(a){var b=this.Sa;return jb(0,0,b.width,b.height,a.x,a.y)};P.prototype.containsRect=P.prototype.Xl=function(a){u&&w.i(a,G,P,"containsRect:r");if(0===this.angle)return this.wa.Xl(a);var b=this.Sa,b=new G(0,0,b.width,b.height),c=this.transform;return b.ua(c.Ji(new F(a.x,a.y)))&&b.ua(c.Ji(new F(a.x,a.bottom)))&&b.ua(c.Ji(new F(a.right,a.bottom)))&&b.ua(c.Ji(new F(a.right,a.y)))};
P.prototype.containedInRect=P.prototype.lv=function(a,b){u&&w.i(a,G,P,"containedInRect:r");if(b===f)return a.Xl(this.wa);var c=this.Sa;return!a.ua(b.Ta(new F(0,0)))||!a.ua(b.Ta(new F(0,c.height)))||!a.ua(b.Ta(new F(c.width,c.height)))||!a.ua(b.Ta(new F(c.width,0)))?p:h};
P.prototype.intersectsRect=P.prototype.Se=function(a,b){u&&w.i(a,G,P,"intersectsRect:r");if(b===f&&(b=this.transform,0===this.angle))return a.Se(this.wa);var c=this.Sa,d=b,e=new F(0,0),g=new F(0,c.height),i=new F(c.width,c.height),j=new F(c.width,0);if(a.ua(d.Ta(e))||a.ua(d.Ta(g))||a.ua(d.Ta(i))||a.ua(d.Ta(j)))return h;c=new G(0,0,c.width,c.height);return c.ua(d.Ji(new F(a.x,a.y)))||c.ua(d.Ji(new F(a.x,a.bottom)))||c.ua(d.Ji(new F(a.right,a.bottom)))||c.ua(d.Ji(new F(a.right,a.y)))||Tc(a,e,g)||Tc(a,
g,i)||Tc(a,i,j)||Tc(a,j,e)?h:p};P.prototype.getDocumentPoint=P.prototype.Ab=function(a){zb(a)&&w.m("Spot must be real");var b=this.Sa,a=new F(a.x*b.width+a.offsetX,a.y*b.height+a.offsetY);this.je.Ta(a);return a};P.prototype.getDocumentAngle=P.prototype.bo=function(){var a=this.je;return Math.atan2(a.m12,a.m11)*(180/Math.PI)};P.prototype.getDocumentScale=P.prototype.Vk=function(){var a=this.bc;return this.fa!==n?a*this.fa.Vk():a};P.prototype.getLocalPoint=P.prototype.ZC=function(a){return this.je.Ji(a.copy())};
P.prototype.getNearestIntersectionPoint=P.prototype.$C=function(a,b,c){return this.bs(a.x,a.y,b.x,b.y,c)};da=P.prototype;
da.bs=function(a,b,c,d,e){var g=this.transform,i=1/(g.m11*g.m22-g.m12*g.m21),j=g.m22*i,k=-g.m12*i,l=-g.m21*i,m=g.m11*i,q=i*(g.m21*g.dy-g.m22*g.dx),r=i*(g.m12*g.dx-g.m11*g.dy);if(this.Lk!==n)return g=this.wa,Sc(g.left,g.top,g.right,g.bottom,a,b,c,d,e);if(!(this instanceof x)||this instanceof x&&this.background!==n)return i=a*j+b*l+q,a=a*k+b*m+r,j=c*j+d*l+q,c=c*k+d*m+r,e.U(0,0),d=this.Sa,c=Sc(0,0,d.width,d.height,i,a,j,c,e),e.transform(g),c;if(this instanceof x&&(this.Lk===n||this.Lk===f)){i=a*j+b*
l+q;a=a*k+b*m+r;j=c*j+d*l+q;d=c*k+d*m+r;e.U(j,d);k=(j-i)*(j-i)+(d-a)*(d-a);c=p;m=this.Ga.n;r=m.length;l=new F;for(q=0;q<r;q++)b=m[q],b.visible&&b.bs(i,a,j,d,l)&&(c=h,b=(i-l.x)*(i-l.x)+(a-l.y)*(a-l.y),b<k&&(k=b,e.set(l)));e.transform(g);return c}w.m("Unknown GraphObject case");return p};
function Ih(a,b,c,d,e){if(a.$b!==p){var g=a.margin,i=g.top+g.bottom,b=Math.max(b-(g.right+g.left),0),c=Math.max(c-i,0),g=a.xa,i=0;a.Za&&(i=a.Za);var b=isFinite(g.width)?g.width+i:b,c=isFinite(g.height)?g.height+i:c,g=d,i=e,j=a instanceof x;switch(pj(a)){case jj:i=g=0;j&&(c=b=Infinity);break;case kd:isFinite(b)&&b>d&&(g=b);isFinite(c)&&c>e&&(i=c);break;case lj:isFinite(b)&&b>d&&(g=b);i=0;j&&(c=Infinity);break;case kj:isFinite(c)&&c>e&&(i=c),g=0,j&&(b=Infinity)}var j=a.ce,k=a.we;g>j.width&&k.width<
j.width&&(g=j.width);i>j.height&&k.height<j.height&&(i=j.height);d=Math.max(g/a.scale,k.width);e=Math.max(i/a.scale,k.height);j.width<d&&(d=Math.min(k.width,d));j.height<e&&(e=Math.min(k.height,e));b=Math.min(j.width,b);c=Math.min(j.height,c);b=Math.max(d,b);c=Math.max(e,c);g=a.angle;if(90===g||270===g)g=b,b=c,c=g,g=d,d=e,e=g;a.Vc.Ia();a.os(b,c,d,e);a.Vc.freeze();a.Vc.P()||w.m("Non-real measuredBounds has been set");a.$b=p}}
da.Dc=function(a,b,c,d,e){qj(this);var g=this.MB;g.set(this.Ib);this.Ib.Ia();if(this.Kc===p){var i=this.Ib;i.x=a;i.y=b;i.width=c;i.height=d}else this.yj(a,b,c,d);this.Ib.freeze();this.dk=e===f?n:e;e!==f?this.nl=h:this.fa&&(c=this.fa.Lc,d=this.ya,this.Lk!==n&&(d=this.Ib),e=b+d.height,i=a+d.width,this.nl=!(0<=a&&i<=c.width&&0<=b&&e<=c.height),this instanceof na&&(this.Xt>d.height&&(this.nl=h),this.dq.Ni>d.width&&(this.nl=h)));this.Ib.P()||w.m("Non-real actualBounds has been set");rj(this,g,this.Ib)};
da.yj=aa();function sj(a,b,c,d,e){var g=a.wa;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.xa.P()){var g=a.Vc,c=a.margin,b=c.right+c.left,i=c.top+c.bottom,c=g.width+b,g=g.height+i,d=d+b,e=e+i,b=pj(a);c===d&&g===e&&(b=jj);switch(b){case jj:if(c>d||g>e)a.$b=h,Ih(a,c>d?d:c,g>e?e:g);break;case kd:a.$b=h;Ih(a,d,e,0,0);break;case lj:a.$b=h;Ih(a,d,g,0,0);break;case kj:a.$b=h,Ih(a,c,e,0,0)}}}
function rj(a,b,c){a.Kc=p;var d=a.ca;if(d!==n){var e=d.h;if(e!==n)if(tj(d),a instanceof S){d=p;if(e.$h===p){var g=e.wc,i=e.padding,e=g.x+i.left,j=g.y+i.top,k=g.width-2*i.right,g=g.height-2*i.bottom;b.P()&&(b.x>e&&b.y>j&&b.right<k&&b.bottom<g&&c.x>e&&c.y>j&&c.right<k&&c.bottom<g)&&(d=h)}(a.lu===h||!b.I(c))&&Oi(a,d)}else if(uj(a,d),vj(a),b=a.ca,b!==n&&(b.Ek===a||b.Ml===a||b.Nl===a))b.lu=h}}function uj(a,b){a.Xe!==n&&(b.lu=h);if(a instanceof x)for(var c=a.Ga,d=c.length,e=0;e<d;e++)uj(c.n[e],b)}
da.Ne=function(a,b){if(this.Mg)if(this instanceof x&&(this.type===wj||this.type===xj)){var c=this.Ib;0===c.width||(0===c.height||isNaN(c.x)||isNaN(c.y))||(this.xe!==n&&(yj(this,a,this.xe,h,h),a.fillRect(c.x,c.y,c.width,c.height)),this.ye!==n&&(yj(this,a,this.ye,h),a.fillRect(c.x,c.y,c.width,c.height)),this.Xn(a,b))}else{var d=p;if(this instanceof S){d=h;if(!this.mb())return;if(this.Lf){var e=this.pn;a.shadowOffsetX=e.x*b.scale;a.shadowOffsetY=e.y*b.scale;a.shadowColor=this.on;a.shadowBlur=this.nn}}var g=
p;this.ca&&(g=this.ca.jo);c=this.Ib;if(!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){var e=this.transform,i=this.fa,j=this.zm;j.reset();i!==n&&(i.Lh()?j.multiply(i.je):i.fa!==n&&j.multiply(i.fa.je));j.multiply(this.Nd);if(j=this.nl){u&&u.xG&&u.trace("clip"+this.toString());var k=i.Lh()?i.Sa:i.wa;if(this.dk)var l=this.dk,m=Math.max(l.x,Math.max(c.x,k.x)),q=Math.max(l.y,Math.max(c.y,k.y)),r=Math.abs(m-Math.min(l.right,Math.min(c.right,k.right))),l=Math.abs(q-Math.min(l.bottom,Math.min(c.bottom,
k.bottom)));else m=Math.max(c.x,k.x),q=Math.max(c.y,k.y),r=Math.min(c.right,k.right)-m,l=Math.min(c.bottom,k.bottom)-q;if(m>c.width+c.x||c.x>k.width+k.x||q>c.height+c.y||c.y>k.height+k.y)return;a.save();a.beginPath();a.rect(m,q,r,l);a.clip()}this.xe!==n&&(yj(this,a,this.xe,h,h),a.fillRect(c.x,c.y,c.width,c.height));e.is()||a.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);this.ye!==n&&(q=this.Sa,k=c=0,m=q.width,q=q.height,r=0,this instanceof V&&(q=this.Ha.Fb,c=q.x,k=q.y,m=q.width,q=q.height,r=this.rh),
yj(this,a,this.ye,h),a.fillRect(c-r/2,k-r/2,m+r,q+r));if(g&&(this.ye!==n||this.xe!==n||i!==n&&i.Am||i!==n&&i.type===Xh&&i.Ol!==this)){this.Am=h;var s=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}else this.Am=p;this.Xn(a,b);g&&this.Am===h&&(a.shadowOffsetX=s[0],a.shadowOffsetY=s[1],a.shadowBlur=s[2]);d&&g&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);j?(a.restore(),li(b,a)):e.is()||(d=1/(e.m11*e.m22-e.m12*e.m21),a.transform(e.m22*d,-e.m12*
d,-e.m21*d,e.m11*d,d*(e.m21*e.dy-e.m22*e.dx),d*(e.m12*e.dx-e.m11*e.dy)))}}};da.Xn=aa();
function yj(a,b,c,d,e){if(c!==n)if("string"===typeof c)d?b.vm!==c&&(b.fillStyle=c,b.vm=c):b.wm!==c&&(b.strokeStyle=c,b.wm=c);else if(c.type===He)c=c.color,d?b.vm!==c&&(b.fillStyle=c,b.vm=c):b.wm!==c&&(b.strokeStyle=c,b.wm=c);else{var g,i=a.Sa,j=i.width,i=i.height;if(c.xg&&c.type===gj||c.BA==j&&c.AA==i)g=c.xg;else{var k,l,m,q=m=0;e&&(a=a.wa,j=a.width,i=a.height,m=a.x,q=a.y);c.start instanceof F?(a=c.start.x,e=c.start.y):c.start instanceof H?(a=c.start.x*j,e=c.start.y*i):(a=Ob.x*j,e=Ob.y*i);c.end instanceof
F?(k=c.end.x,l=c.end.y):c.end instanceof H?(k=c.end.x*j,l=c.end.y*i):c.type===Ie?(k=Qb.x*j,l=Qb.y*i):(k=Ob.x*j,l=Ob.y*i);a+=m;k+=m;e+=q;l+=q;c.type===Ie?g=b.createLinearGradient(a,e,k,l):c.type===Je?(m=isNaN(c.Yn)?Math.max(j,i)/2:c.Yn,isNaN(c.Jo)?(g=0,m=Math.max(j,i)/2):g=c.Jo,g=b.createRadialGradient(a,e,g,k,l,m)):c.type===gj?g=b.createPattern(c.pattern,"repeat"):w.ic(c.type,"Brush type");if(c.type!==gj&&(m=c.Sn))for(m=m.l;m.next();)g.addColorStop(m.key,m.value);c.xg=g;c.BA=j;c.AA=i}d?b.vm!==g&&
(b.fillStyle=g,b.vm=g):b.wm!==g&&(b.strokeStyle=g,b.wm=g)}}P.prototype.isContainedBy=P.prototype.Ki=function(a){if(a instanceof x)a:{if(!(this===a||a===n))for(var b=this.fa;b!==n;){if(b===a){a=h;break a}b=b.fa}a=p}else a=p;return a};P.prototype.isVisibleObject=P.prototype.Yk=function(){if(!this.visible)return p;var a=this.fa;return a!==n?a.Yk():h};
function zj(a){if(a.Um===h){var b=a.Nd;b.reset();if(!a.Ib.P()||!a.Vc.P()){a.Um=p;return}b.translate(a.Ib.x,a.Ib.y);b.translate(-a.ya.x,-a.ya.y);var c=a.Sa;nj(a,b,c.x,c.y,c.width,c.height);a.Um=p;a.ul=h}a.ul===h&&(a.fa===n?(a.zm.set(a.Nd),a.ul=p):a.fa.je!==n&&(b=a.zm,b.reset(),b.multiply(a.fa.zm),b.multiply(a.Nd),a.ul=p))}
function nj(a,b,c,d,e,g){1!==a.scale&&b.scale(a.scale);if(0!==a.angle){var i=Ob;a.bg&&tb(a.bg)&&(i=a.bg);var j=new F;if(a instanceof S&&a.Xb!==a){c=a.Xb;d=c.Sa;j.pm(d.x,d.y,d.width,d.height,i);c.xk.Ta(j);j.offset(-c.ya.x,-c.ya.y);for(i=c.fa;i!==n&&i!==a;)i.xk.Ta(j),j.offset(-i.ya.x,-i.ya.y),i=i.fa}else j.pm(c,d,e,g,i);b.rotate(a.angle,j.x,j.y)}}
P.prototype.R=function(a){if(this.$b!==h){this.Kc=this.$b=h;this.fa!==n?a||(this.fa.$b=p,this.fa.R()):(a=this.h,a!==n&&(a.fh.add(this),this instanceof T&&(a.sa.tb||this.Qg(),this.zd!==n&&Aj(this.zd)),a.yb()));if(this instanceof x){var a=this.T===Xh,b=n,c=this.Ga,d=c.length;a&&(b=Bj(this,c,d));for(var e=0;e<d;e++){var g=c.n[e];a&&g===b?g.R(h):g.xa.P()||(g instanceof dh||g instanceof x||pj(g)!==jj)&&g.R(h)}}vj(this)}};
function Fj(a){if(a.$b===p&&(a.$b=h,a.Kc=h,a instanceof x))for(var a=a.Ga.n,b=a.length,c=0;c<b;c++)Fj(a[c])}function Aj(a){if(a.Kc===p){if(a.fa!==n)a.fa.R();else{var b=a.h;b!==n&&(b.fh.add(a),a instanceof T&&a.Qg(),b.yb())}a.Kc=h}}function qj(a){if(a.Um===p&&(a.Um=h,a.ul=h,a instanceof x))for(a=a.elements;a.next();)Nj(a.value)}function Nj(a){a.ul=h;if(a instanceof x)for(a=a.elements;a.next();)Nj(a.value)}function vj(a){if(a.fa!==n)vj(a.fa);else{var b=a.h;b!==n&&a.Ib.P()&&Nh(b,a.Ib)}}
function pj(a){var b=a.Jh,c=a.fa;if(c&&c.T===Qj)return Rj(a,c.$d(a.nc),c.Zd(a.Ec));if(c&&c.T===Xh){if(c.Ol===n){var d=c.Ga,e=d.length;Bj(c,d,e)}if(c.Ol===a)return kd}if(b===eh){if(c){c.T===ch&&c.Ol===n&&(d=c.Ga,e=d.length,Bj(c,d,e));if(c.Ol===a)return kd;a=c.$y;return a===eh?jj:a}return jj}return b}
function Rj(a,b,c){var d=a.Jh;if(d!==eh)return d;var e=d=f;switch(b.Jh){case kj:e=h;break;case kd:e=h}switch(c.Jh){case lj:d=h;break;case kd:d=h}a=a.fa.$y;d=d===f&&(a===lj||a===kd)?h:p;e=e===f&&(a===kj||a===kd)?h:p;return d===h&&e===h?kd:d===h?lj:e===h?kj:jj}w.g(P,"segmentOrientation",P.prototype.Es);w.defineProperty(P,{Es:"segmentOrientation"},t("$q"),function(a){var b=this.$q;b!==a&&(u&&w.ib(a,U,P,"segmentOrientation"),this.$q=a,this.R(),this.j("segmentOrientation",b,a))});
w.g(P,"segmentIndex",P.prototype.Hh);w.defineProperty(P,{Hh:"segmentIndex"},t("Yq"),function(a){u&&w.k(a,"number",P,"segmentIndex");var a=Math.round(a),b=this.Yq;b!==a&&(this.Yq=a,this.R(),this.j("segmentIndex",b,a))});w.g(P,"segmentFraction",P.prototype.Tz);w.defineProperty(P,{Tz:"segmentFraction"},t("Xq"),function(a){u&&w.k(a,"number",P,"segmentFraction");isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.Xq;b!==a&&(this.Xq=a,this.R(),this.j("segmentFraction",b,a))});w.g(P,"segmentOffset",P.prototype.Uz);
w.defineProperty(P,{Uz:"segmentOffset"},t("Zq"),function(a){var b=this.Zq;b.I(a)||(u&&w.i(a,F,P,"segmentOffset"),this.Zq=a=a.O(),this.R(),this.j("segmentOffset",b,a))});w.g(P,"stretch",P.prototype.Jh);w.defineProperty(P,{Jh:"stretch"},t("qh"),function(a){var b=this.qh;b!==a&&(u&&w.ib(a,P,P,"stretch"),this.qh=a,this.R(),this.j("stretch",b,a))});w.g(P,"name",P.prototype.name);
w.defineProperty(P,{name:"name"},t("Bb"),function(a){var b=this.Bb;b!==a&&(u&&w.k(a,"string",P,"name"),this.Bb=a,this.j("name",b,a))});w.g(P,"visible",P.prototype.visible);w.defineProperty(P,{visible:"visible"},t("Mg"),function(a){var b=this.Mg;b!==a&&(u&&w.k(a,"boolean",P,"visible"),this.Mg=a,this.j("visible",b,a),b=this.fa,b!==n?b.R():this instanceof S&&(this.R(),tj(this),a?(this.F(Sj),this.Qi()):(this.F(Tj),this.yh())),vj(this),Uj(this))});w.g(P,"areaBackground",P.prototype.Lk);
w.defineProperty(P,{Lk:"areaBackground"},t("xe"),function(a){var b=this.xe;if(b!==a&&(a===n||"string"===typeof a||a instanceof Fe))a instanceof Fe&&a.freeze(),this.xe=a,vj(this),this.j("areaBackground",b,a)});w.g(P,"background",P.prototype.background);w.defineProperty(P,{background:"background"},t("ye"),function(a){var b=this.ye;if(b!==a&&(a===n||"string"===typeof a||a instanceof Fe))a instanceof Fe&&a.freeze(),this.ye=a,vj(this),this.j("background",b,a)});
w.u(P,{ca:"part"},function(){if(this instanceof S)return this;if(this.Ll)return this.Ll;var a;for(a=this.fa;a;){if(a instanceof S)return this.Ll=a;a=a.fa}return n});P.prototype.el=ba("Ak");w.u(P,{fa:"panel"},t("Ak"));w.u(P,{Oa:"layer"},function(){var a=this.ca;return a!==n?a.Oa:n});w.u(P,{h:"diagram"},function(){var a=this.ca;return a!==n?a.h:n},{configurable:h});w.g(P,"position",P.prototype.position);
w.defineProperty(P,{position:"position"},t("qb"),function(a){var b=this.qb;if(!b.I(a)){u&&w.i(a,F,P,"position");if(this instanceof S){if(!a.P())return;var c=this.gj;if(this.Kc===p){var d=this.bn,e=c.copy();c.U(a.x+d.x,a.y+d.y);c.I(e)||this.j("location",e,c);this.qb=a=a.O();Vj(this);qj(this);this.j("position",b,a);return}c.U(NaN,NaN)}this.qb=a=a.O();Aj(this);qj(this);this.j("position",b,a)}});w.u(P,{wa:"actualBounds"},t("Ib"));w.g(P,"scale",P.prototype.scale);
w.defineProperty(P,{scale:"scale"},t("bc"),function(a){var b=this.bc;b!==a&&(u&&w.o(a,P,"scale"),0>=a&&w.m("GraphObject.scale must be greater than zero"),this.bc=a,qj(this),this.R(),this.j("scale",b,a))});w.g(P,"angle",P.prototype.angle);w.defineProperty(P,{angle:"angle"},t("oc"),function(a){var b=this.oc;b!==a&&(u&&w.o(a,P,"angle"),a%=360,0>a&&(a+=360),this.oc=a,this.R(),qj(this),this.j("angle",b,a))});w.g(P,"desiredSize",P.prototype.xa);
w.defineProperty(P,{xa:"desiredSize"},t("Ce"),function(a){var b=this.Ce;b.I(a)||(u&&w.i(a,bb,P,"desiredSize"),this.Ce=a=a.O(),this.R(),this instanceof V&&this.$f(),this.j("desiredSize",b,a))});w.g(P,"width",P.prototype.width);w.defineProperty(P,{width:"width"},function(){return this.Ce.width},function(a){if(this.Ce.width!==a){u&&w.k(a,"number",P,"width");var b=this.Ce;this.Ce=a=(new bb(a,this.Ce.height)).freeze();this.R();this instanceof V&&this.$f();this.j("desiredSize",b,a)}});w.g(P,"height",P.prototype.height);
w.defineProperty(P,{height:"height"},function(){return this.Ce.height},function(a){if(this.Ce.height!==a){u&&w.k(a,"number",P,"height");var b=this.Ce;this.Ce=a=(new bb(this.Ce.width,a)).freeze();this.R();this instanceof V&&this.$f();this.j("desiredSize",b,a)}});w.g(P,"minSize",P.prototype.we);
w.defineProperty(P,{we:"minSize"},t("Ud"),function(a){var b=this.Ud;b.I(a)||(u&&w.i(a,bb,P,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Ud=a,this.R(),this.j("minSize",b,a))});w.g(P,"maxSize",P.prototype.ce);w.defineProperty(P,{ce:"maxSize"},t("ij"),function(a){var b=this.ij;b.I(a)||(u&&w.i(a,bb,P,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.ij=a,this.R(),this.j("maxSize",b,a))});
w.u(P,{ya:"measuredBounds"},t("Vc"));w.u(P,{Sa:"naturalBounds"},t("Lc"),{configurable:h});w.g(P,"margin",P.prototype.margin);w.defineProperty(P,{margin:"margin"},t("lq"),function(a){"number"===typeof a?a=new hb(a):u&&w.i(a,hb,P,"margin");var b=this.lq;b.I(a)||(this.lq=a=a.O(),this.R(),this.j("margin",b,a))});w.u(P,{transform:n},function(){this.Um===h&&zj(this);return this.Nd});w.u(P,{je:n},function(){this.ul===h&&zj(this);return this.zm});w.g(P,"alignment",P.prototype.Db);
w.defineProperty(P,{Db:"alignment"},t("Ba"),function(a){var b=this.Ba;b.I(a)||(u?w.i(a,H,P,"alignment"):zb(a)&&!Eb(a)&&w.m("alignment must be a real Spot or Spot.Default"),this.Ba=a=a.O(),Aj(this),this.j("alignment",b,a))});w.g(P,"column",P.prototype.Ec);w.defineProperty(P,{Ec:"column"},t("Z"),function(a){u&&w.o(a,P,"column");var a=Math.round(a),b=this.Z;b!==a&&(0>a&&w.ra(a,">= 0",P,"column"),this.Z=a,this.R(),this.j("column",b,a))});w.g(P,"columnSpan",P.prototype.qC);
w.defineProperty(P,{qC:"columnSpan"},t("ek"),function(a){u&&w.o(a,P,"columnSpan");var a=Math.round(a),b=this.ek;b!==a&&(1>a&&w.ra(a,">= 1",P,"columnSpan"),this.ek=a,this.R(),this.j("columnSpan",b,a))});w.g(P,"row",P.prototype.nc);w.defineProperty(P,{nc:"row"},t("Vq"),function(a){u&&w.o(a,P,"row");var a=Math.round(a),b=this.Vq;b!==a&&(0>a&&w.ra(a,">= 0",P,"row"),this.Vq=a,this.R(),this.j("row",b,a))});w.g(P,"rowSpan",P.prototype.rowSpan);
w.defineProperty(P,{rowSpan:"rowSpan"},t("Dk"),function(a){u&&w.o(a,P,"rowSpan");var a=Math.round(a),b=this.Dk;b!==a&&(1>a&&w.ra(a,">= 1",P,"rowSpan"),this.Dk=a,this.R(),this.j("rowSpan",b,a))});w.g(P,"isPanelMain",P.prototype.Mi);w.defineProperty(P,{Mi:"isPanelMain"},t("Tp"),function(a){var b=this.Tp;b!==a&&(u&&w.k(a,"boolean",P,"isPanelMain"),this.Tp=a,this.R(),this.j("isPanelMain",b,a))});w.g(P,"alignmentFocus",P.prototype.uj);
w.defineProperty(P,{uj:"alignmentFocus"},t("Vo"),function(a){var b=this.Vo;b.I(a)||(u?w.i(a,H,P,"alignmentFocus"):zb(a)&&!Eb(a)&&w.m("alignmentFocus must be a real Spot or Spot.Default"),this.Vo=a=a.O(),this.R(),this.j("alignmentFocus",b,a))});w.g(P,"portId",P.prototype.Xe);
w.defineProperty(P,{Xe:"portId"},t("Gq"),function(a){var b=this.Gq;if(b!==a){u&&a!==n&&w.k(a,"string",P,"portId");var c=this.ca;c!==n&&!(c instanceof T)&&(w.m("portID being set on a Link: "+a),c=n);b!==n&&c&&Wj(c,this);this.Gq=a;a!==n&&c&&(c.fd===n&&Xj(c),Yj(c,this));this.j("portId",b,a)}});function Zj(a){var b={value:n};$j(a,b);return b.value}function $j(a,b){var c=a.fa;return c===n||!$j(c,b)&&a.visible?(b.value=a,p):h}function Uj(a){var b=a.ca;b instanceof T&&(a=a.h)&&!a.sa.tb&&b.Qg()}
w.g(P,"toSpot",P.prototype.nb);w.defineProperty(P,{nb:"toSpot"},t("wh"),function(a){var b=this.wh;b.I(a)||(u&&w.i(a,H,P,"toSpot"),this.wh=a=a.O(),this.j("toSpot",b,a),Uj(this))});w.g(P,"toEndSegmentLength",P.prototype.gl);w.defineProperty(P,{gl:"toEndSegmentLength"},t("th"),function(a){var b=this.th;b!==a&&(u&&w.k(a,"number",P,"toEndSegmentLength"),0>a&&w.ra(a,">= 0",P,"toEndSegmentLength"),this.th=a,this.j("toEndSegmentLength",b,a),Uj(this))});w.g(P,"toEndSegmentDirection",P.prototype.Ns);
w.defineProperty(P,{Ns:"toEndSegmentDirection"},t("sh"),function(a){var b=this.sh;b!==a&&(u&&w.ib(a,T,P,"toEndSegmentDirection"),this.sh=a,this.j("toEndSegmentDirection",b,a),Uj(this))});w.g(P,"toShortLength",P.prototype.Os);w.defineProperty(P,{Os:"toShortLength"},t("vh"),function(a){var b=this.vh;b!==a&&(u&&w.k(a,"number",P,"toShortLength"),this.vh=a,this.j("toShortLength",b,a),Uj(this))});w.g(P,"toLinkable",P.prototype.eA);
w.defineProperty(P,{eA:"toLinkable"},t("qr"),function(a){var b=this.qr;b!==a&&(u&&a!==n&&w.k(a,"boolean",P,"toLinkable"),this.qr=a,this.j("toLinkable",b,a))});w.g(P,"toLinkableDuplicates",P.prototype.HE);w.defineProperty(P,{HE:"toLinkableDuplicates"},t("rr"),function(a){var b=this.rr;b!==a&&(u&&w.k(a,"boolean",P,"toLinkableDuplicates"),this.rr=a,this.j("toLinkableDuplicates",b,a))});w.g(P,"toLinkableSelfNode",P.prototype.IE);
w.defineProperty(P,{IE:"toLinkableSelfNode"},t("sr"),function(a){var b=this.sr;b!==a&&(u&&w.k(a,"boolean",P,"toLinkableSelfNode"),this.sr=a,this.j("toLinkableSelfNode",b,a))});w.g(P,"toMaxLinks",P.prototype.JE);w.defineProperty(P,{JE:"toMaxLinks"},t("tr"),function(a){var b=this.tr;b!==a&&(u&&w.o(a,P,"toMaxLinks"),0>a&&w.ra(a,">= 0",P,"toMaxLinks"),this.tr=a,this.j("toMaxLinks",b,a))});w.g(P,"fromSpot",P.prototype.jb);
w.defineProperty(P,{jb:"fromSpot"},t("dh"),function(a){var b=this.dh;b.I(a)||(u&&w.i(a,H,P,"fromSpot"),this.dh=a=a.O(),this.j("fromSpot",b,a),Uj(this))});w.g(P,"fromEndSegmentLength",P.prototype.Tk);w.defineProperty(P,{Tk:"fromEndSegmentLength"},t("$g"),function(a){var b=this.$g;b!==a&&(u&&w.k(a,"number",P,"fromEndSegmentLength"),0>a&&w.ra(a,">= 0",P,"fromEndSegmentLength"),this.$g=a,this.j("fromEndSegmentLength",b,a),Uj(this))});w.g(P,"fromEndSegmentDirection",P.prototype.$r);
w.defineProperty(P,{$r:"fromEndSegmentDirection"},t("Zg"),function(a){var b=this.Zg;b!==a&&(u&&w.ib(a,T,P,"fromEndSegmentDirection"),this.Zg=a,this.j("fromEndSegmentDirection",b,a),Uj(this))});w.g(P,"fromShortLength",P.prototype.as);w.defineProperty(P,{as:"fromShortLength"},t("bh"),function(a){var b=this.bh;b!==a&&(u&&w.k(a,"number",P,"fromShortLength"),this.bh=a,this.j("fromShortLength",b,a),Uj(this))});w.g(P,"fromLinkable",P.prototype.hz);
w.defineProperty(P,{hz:"fromLinkable"},t("Ap"),function(a){var b=this.Ap;b!==a&&(u&&a!==n&&w.k(a,"boolean",P,"fromLinkable"),this.Ap=a,this.j("fromLinkable",b,a))});w.g(P,"fromLinkableDuplicates",P.prototype.TC);w.defineProperty(P,{TC:"fromLinkableDuplicates"},t("Bp"),function(a){var b=this.Bp;b!==a&&(u&&w.k(a,"boolean",P,"fromLinkableDuplicates"),this.Bp=a,this.j("fromLinkableDuplicates",b,a))});w.g(P,"fromLinkableSelfNode",P.prototype.UC);
w.defineProperty(P,{UC:"fromLinkableSelfNode"},t("Cp"),function(a){var b=this.Cp;b!==a&&(u&&w.k(a,"boolean",P,"fromLinkableSelfNode"),this.Cp=a,this.j("fromLinkableSelfNode",b,a))});w.g(P,"fromMaxLinks",P.prototype.VC);w.defineProperty(P,{VC:"fromMaxLinks"},t("Dp"),function(a){var b=this.Dp;b!==a&&(u&&w.o(a,P,"fromMaxLinks"),0>a&&w.ra(a,">= 0",P,"fromMaxLinks"),this.Dp=a,this.j("fromMaxLinks",b,a))});w.g(P,"cursor",P.prototype.cursor);
w.defineProperty(P,{cursor:"cursor"},t("fp"),function(a){var b=this.fp;b!==a&&(w.k(a,"string",P,"cursor"),this.fp=a,this.j("cursor",b,a))});w.g(P,"click",P.prototype.click);w.defineProperty(P,{click:"click"},t("Qh"),function(a){var b=this.Qh;b!==a&&(a!==n&&w.k(a,"function",P,"click"),this.Qh=a,this.j("click",b,a))});w.g(P,"doubleClick",P.prototype.bm);
w.defineProperty(P,{bm:"doubleClick"},t("Uh"),function(a){var b=this.Uh;b!==a&&(a!==n&&w.k(a,"function",P,"doubleClick"),this.Uh=a,this.j("doubleClick",b,a))});w.g(P,"contextClick",P.prototype.Mr);w.defineProperty(P,{Mr:"contextClick"},t("Rh"),function(a){var b=this.Rh;b!==a&&(a!==n&&w.k(a,"function",P,"contextClick"),this.Rh=a,this.j("contextClick",b,a))});w.g(P,"mouseEnter",P.prototype.Ez);
w.defineProperty(P,{Ez:"mouseEnter"},t("wq"),function(a){var b=this.wq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseEnter"),this.wq=a,this.j("mouseEnter",b,a))});w.g(P,"mouseLeave",P.prototype.Fz);w.defineProperty(P,{Fz:"mouseLeave"},t("xq"),function(a){var b=this.xq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseLeave"),this.xq=a,this.j("mouseLeave",b,a))});w.g(P,"mouseOver",P.prototype.ts);
w.defineProperty(P,{ts:"mouseOver"},t("ji"),function(a){var b=this.ji;b!==a&&(a!==n&&w.k(a,"function",P,"mouseOver"),this.ji=a,this.j("mouseOver",b,a))});w.g(P,"mouseHover",P.prototype.ss);w.defineProperty(P,{ss:"mouseHover"},t("ii"),function(a){var b=this.ii;b!==a&&(a!==n&&w.k(a,"function",P,"mouseHover"),this.ii=a,this.j("mouseHover",b,a))});w.g(P,"mouseHold",P.prototype.rs);
w.defineProperty(P,{rs:"mouseHold"},t("hi"),function(a){var b=this.hi;b!==a&&(a!==n&&w.k(a,"function",P,"mouseHold"),this.hi=a,this.j("mouseHold",b,a))});w.g(P,"mouseDragEnter",P.prototype.ND);w.defineProperty(P,{ND:"mouseDragEnter"},t("uq"),function(a){var b=this.uq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseDragEnter"),this.uq=a,this.j("mouseDragEnter",b,a))});w.g(P,"mouseDragLeave",P.prototype.Dz);
w.defineProperty(P,{Dz:"mouseDragLeave"},t("vq"),function(a){var b=this.vq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseDragLeave"),this.vq=a,this.j("mouseDragLeave",b,a))});w.g(P,"mouseDrop",P.prototype.qs);w.defineProperty(P,{qs:"mouseDrop"},t("gi"),function(a){var b=this.gi;b!==a&&(a!==n&&w.k(a,"function",P,"mouseDrop"),this.gi=a,this.j("mouseDrop",b,a))});w.g(P,"actionDown",P.prototype.Dy);
w.defineProperty(P,{Dy:"actionDown"},t("Ro"),function(a){var b=this.Ro;b!==a&&(a!==n&&w.k(a,"function",P,"actionDown"),this.Ro=a,this.j("actionDown",b,a))});w.g(P,"actionUp",P.prototype.Fy);w.defineProperty(P,{Fy:"actionUp"},t("To"),function(a){var b=this.To;b!==a&&(a!==n&&w.k(a,"function",P,"actionUp"),this.To=a,this.j("actionUp",b,a))});w.g(P,"actionMove",P.prototype.Ey);
w.defineProperty(P,{Ey:"actionMove"},t("So"),function(a){var b=this.So;b!==a&&(a!==n&&w.k(a,"function",P,"actionMove"),this.So=a,this.j("actionMove",b,a))});w.g(P,"actionCancel",P.prototype.Cy);w.defineProperty(P,{Cy:"actionCancel"},t("Qo"),function(a){var b=this.Qo;b!==a&&(a!==n&&w.k(a,"function",P,"actionCancel"),this.Qo=a,this.j("actionCancel",b,a))});w.g(P,"toolTip",P.prototype.Ps);
w.defineProperty(P,{Ps:"toolTip"},t("ui"),function(a){var b=this.ui;b!==a&&(a!==n&&w.i(a,of,P,"toolTip"),this.ui=a,this.j("toolTip",b,a))});w.g(P,"contextMenu",P.prototype.contextMenu);w.defineProperty(P,{contextMenu:"contextMenu"},t("Sh"),function(a){var b=this.Sh;b!==a&&(a!==n&&w.i(a,of,P,"contextMenu"),this.Sh=a,this.j("contextMenu",b,a))});w.g(P,"isActionable",P.prototype.Ev);
w.defineProperty(P,{Ev:"isActionable"},t("Mp"),function(a){var b=this.Mp;b!==a&&(w.k(a,"boolean",P,"isActionable"),this.Mp=a,this.j("isActionable",b,a))});w.g(P,"pickable",P.prototype.WD);w.defineProperty(P,{WD:"pickable"},t("Qf"),function(a){var b=this.Qf;b!==a&&(w.k(a,"boolean",P,"pickable"),this.Qf=a,this.j("pickable",b,a))});
P.prototype.bind=P.prototype.bind=function(a){a.Uf=this;var b=this.Yr();b!==n&&ak(b)&&w.m("Cannot add a Binding to a template that has already been copied: "+a);this.pc===n&&(this.pc=new z(df));this.pc.add(a)};P.prototype.findTemplateBinder=P.prototype.Yr=function(){for(var a=this instanceof x?this:this.fa;a!==n;){if(a.ll!==n&&a instanceof x)return a;a=a.fa}return n};P.fromSvg=function(a){return bk(a)};var ck;
P.make=ck=function(a,b){var c=n,d=n;if("function"===typeof a)d=a;else if("string"===typeof a){var e=dk.qa(a);"function"===typeof e?c=e():d=ea[a]}c===n&&(d===f&&(c=window.$,c!==f&&c.noop!==f&&w.m("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),w.m("GraphObject.make failed to complete, it may be conflicting with another var.")),(d===n||!d.constructor)&&w.m("GraphObject.make requires a class function or class name, not: "+a),c=new d);e=1;c instanceof A&&
1<arguments.length&&(d=arguments[1],"string"===typeof d||d instanceof HTMLDivElement?(c.Ci=n,ei(c,d),e++):w.m("Unknown argument to Diagram constructor: "+d));for(;e<arguments.length;e++)if(d=arguments[e],d===f)w.m("Undefined value at argument "+e+" for object being constructed by GraphObject.make: "+c);else if("string"===typeof d)if(c instanceof na)c.text=d;else if(c instanceof V)c.rb=d;else if(c instanceof ek)c.source=d;else if(c instanceof x){var g=w.dm(x,d);g!==n?c.type=g:w.m("Unknown Panel type as an argument to GraphObject.make: "+
d)}else c instanceof Fe?(g=w.dm(Fe,d),g!==n?c.type=g:w.m("Unknown Brush type as an argument to GraphObject.make: "+d)):c instanceof hd?(g=w.dm(hd,d),g!==n?c.type=g:w.m("Unknown Geometry type as an argument to GraphObject.make: "+d)):c instanceof Ed?(g=w.dm(Ed,d),g!==n?c.type=g:w.m("Unknown PathSegment type as an argument to GraphObject.make: "+d)):w.m("Unable to use a string as an argument to GraphObject.make: "+d);else if(d instanceof P)c instanceof x||w.m("A GraphObject can only be added to a Panel, not to: "+
c),c.add(d);else if(d instanceof fk)c instanceof x||w.m("A RowColumnDefinition can only be added to a Panel, not to: "+c),g=d.Kv?c.$d(d.index):c.Zd(d.index),w.i(d,fk,fk,"copyFrom:pd"),d.Kv?g.height=d.height:g.width=d.width,g.dg=d.dg,g.de=d.de,g.Db=d.Db,g.Is=d.Is,g.pc=d.pc;else if(d instanceof ja)c instanceof U&&d.me===U?d===gk||d===$f?c.Gh=d:d===hk||d===ik||d===jk?c.yf=d:d===kk||d===lk||d===mk?c.Yu=d:d===nk||d===ij||w.m("Unknown Link enum value for a Link property: "+d):c instanceof x&&d.me===x?c.type=
d:c instanceof na&&d.me===na?c.kA=d:c instanceof P&&d.me===U?0===d.name.indexOf("Orient")?c.Es=d:w.m("Unknown Link enum value for GraphObject.segmentOrientation property: "+d):c instanceof P&&d.me===P?c.Jh=d:c instanceof A&&d.me===A?c.Tl=d:c instanceof Fe&&d.me===Fe?c.type=d:c instanceof hd&&d.me===hd?c.type=d:c instanceof Ed&&d.me===Ed?c.type=d:c instanceof df&&d.me===df?c.mode=d:c instanceof fe&&d.me===fe?c.md=d:c instanceof W&&d.me===W?0===d.name.indexOf("Alignment")?c.Db=d:0===d.name.indexOf("Arrangement")?
c.le=d:0===d.name.indexOf("Compaction")?c.jv=d:0===d.name.indexOf("Path")?c.path=d:0===d.name.indexOf("Sorting")?c.ng=d:0===d.name.indexOf("Style")?c.SE=d:w.m("Unknown enum value: "+d):c instanceof X&&d.me===X?0===d.name.indexOf("Aggressive")?c.bC=d:0===d.name.indexOf("Cycle")?c.zC=d:0===d.name.indexOf("Init")?c.oD=d:0===d.name.indexOf("Layer")?c.yD=d:w.m("Unknown enum value: "+d):c instanceof dj&&d.me===dj?d===ok||d===pk||d===qk||d===rk?c.ng=d:d===sk||d===tk?c.le=d:d===uk||d===vk?c.Db=d:w.m("Unknown enum value: "+
d):c instanceof wk&&d.me===wk?d===xk||d===yk||d===zk||d===Ak||d===Bk?c.ng=d:d===Ck||d===Dk||d===Ek||d===Fk?c.direction=d:d===Gk||d===Hk||d===Ik||d===Jk?c.le=d:d===Kk||d===Lk?c.ws=d:w.m("Unknown enum value: "+d):w.m("No property to set for this enum value: "+d);else if(d instanceof df)c instanceof P||c instanceof fk?c.bind(d):w.m("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+c);else if(d instanceof jd)c instanceof hd?c.sb.add(d):w.m("A PathFigure can only be added to a Geometry, not to: "+
c);else if(d instanceof Ed)c instanceof jd?c.Aa.add(d):w.m("A PathSegment can only be added to a PathFigure, not to: "+c);else if(w.lb(d))if(c instanceof Fe){var g={},i;for(i in d){var j=parseFloat(i);isNaN(j)?g[i]=d[i]:c.addColorStop(j,d[i])}w.Wz(c,g)}else c instanceof fk?(d.row!==f?(g=d.row,(g===f||g===n||Infinity===g||isNaN(g)||0>g)&&w.m("Must specify non-negative integer row for RowColumnDefinition "+d),c.yl=h,c.ea=g):d.column!==f?(g=d.column,(g===f||g===n||Infinity===g||isNaN(g)||0>g)&&w.m("Must specify non-negative integer column for RowColumnDefinition "+
d),c.yl=p,c.ea=g):w.m("Must specify row or column value in a RowColumnDefinition "+d),g=w.lG(d,"row","column"),w.Wz(c,g)):w.Wz(c,d);else w.m('Unknown initializer "'+d+'" for object being constructed by GraphObject.make: '+c);return c};var dk;P.Builders=dk=new ka("string","function");
dk.add("Button",function(){var a=new Fe(Ie);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Fe(Ie);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");var c=ck(x,Xh,{Ev:h},ck(V,{name:"ButtonBorder",rb:"RoundedRectangle",fill:a,stroke:"gray"}));c.Ez=function(a,c){var g=c.oa(0),i=c._buttonFillOver;i===f&&(i=b);c._buttonFillNormal=g.fill;g.fill=i;i=c._buttonStrokeOver;i===f&&(i="blue");c._buttonStrokeNormal=g.stroke;g.stroke=i};c.Fz=function(b,c){var g=c.oa(0),i=c._buttonFillNormal;
i===f&&(i=a);g.fill=i;i=c._buttonStrokeNormal;i===f&&(i="gray");g.stroke=i};return c});
dk.add("TreeExpanderButton",function(){var a=ck("Button",ck(V,{name:"ButtonIcon",rb:"MinusLine",xa:new bb(6,6)},(new df("figure","isTreeExpanded",function(a,c){var d=n,e=c.fa;e&&(d=a?e._treeExpandedFigure:e._treeCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Kz("")),{visible:p},(new df("visible","isTreeLeaf",function(a){return!a})).Kz(""));a.click=function(a,c){var d=c.ca;if(d instanceof T){var e=d.h;e===n||e.eb||(a.ae=h,d.yd?e.Yf.collapseTree(d):e.Yf.expandTree(d))}};return a});
dk.add("SubGraphExpanderButton",function(){var a=ck("Button",ck(V,{name:"ButtonIcon",rb:"MinusLine",xa:new bb(6,6)},(new df("figure","isSubGraphExpanded",function(a,c){var d=n,e=c.fa;e&&(d=a?e._subGraphExpandedFigure:e._subGraphCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Kz("")));a.click=function(a,c){var d=c.ca;if(d instanceof vf){var e=d.h;e===n||e.eb||(a.ae=h,d.Te?e.Yf.collapseSubGraph(d):e.Yf.expandSubGraph(d))}};return a});
dk.add("ContextMenuButton",function(){var a=ck("Button");a.Jh=lj;var b=a.Pe("ButtonBorder");b instanceof V&&(b.rb="Rectangle",b.v=new H(0,0,2,2),b.w=new H(1,1,-2,-2));return a});
function x(a){P.call(this);a===f?0===arguments.length?this.T=jh:w.m("invalid argument to Panel constructor: undefined"):(w.ib(a,x,x,"type"),this.T=a);this.Ga=new z(P);this.ie=(new hb).freeze();this.ip=Hb;this.Zb=eh;this.gh=p;this.T===ni&&(this.gh=h);this.mi=1;this.Ie=[];this.Ae=[];this.ap=this.Wq=Mk;this.$m=this.xn=0;this.Bn=fh;this.Hp=(new bb(10,10)).freeze();this.Ip=(new F(0,0)).freeze();this.ll=this.Hm=n;this.Bx="";this.Cg=this.vk=n;this.Vm="category";this.Mf=n;this.Wb=new G(NaN,NaN,NaN,NaN);this.pF=
new G(0,0,0,0);this.AI=new bb(0,0);this.Ol=n}w.Q("Panel",x);w.Ea(x,P);
x.prototype.xb=function(a){P.prototype.xb.call(this,a);a.T=this.T;a.ie.Ua(this.ie);a.ip=this.ip.O();a.Zb=this.Zb;if(0<this.Ie.length){for(var b=[],c=this.Ie,d=c.length,e=0;e<d;e++)if(c[e]!==f){var g=c[e].copy();g.el(a);b[e]=g}a.Ie=b}if(0<this.Ae.length){b=[];c=this.Ae;d=c.length;for(e=0;e<d;e++)c[e]!==f&&(g=c[e].copy(),g.el(a),b[e]=g);a.Ae=b}a.Wq=this.Wq;a.ap=this.ap;a.xn=this.xn;a.$m=this.$m;a.Bn=this.Bn;a.Hp.Ua(this.Hp);a.Ip.Ua(this.Ip);a.gh=this.gh;a.mi=this.mi;a.Hm=this.Hm;a.ll=this.ll;a.Bx=this.Bx;
a.vk=this.vk;a.Cg=this.Cg;a.Vm=this.Vm;this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal);this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver);this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal);this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver);this._treeExpandedFigure&&(a._treeExpandedFigure=this._treeExpandedFigure);this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure);this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=
this._subGraphExpandedFigure);this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure);a.Wb=this.Wb.copy()};x.prototype.Ah=function(a){P.prototype.Ah.call(this,a);a.Ga=this.Ga;for(var b=a.Ga.l;b.next();)b.value.Ak=a};
x.prototype.copy=x.prototype.copy=function(){var a=P.prototype.copy.call(this);if(a instanceof x){var b=this.Ga;if(0<b.length)for(var c=b.length,d=0;d<c;d++){var e=b.n[d].copy(),g=a;e.el(g);e.Ll=n;var i=g.Ga,j=i.count;i.yc(j,e);i=g.ca;if(i!==n){var k=g.h;k!==n&&k.sa.tb||i.Rc(ie,"elements",g,n,e,n,j)}}return a}return n};x.prototype.toString=function(){return"Panel("+this.type+")#"+w.ec(this)};var jh;x.Position=jh=w.s(x,"Position",0);x.Horizontal=w.s(x,"Horizontal",1);var fi;
x.Vertical=fi=w.s(x,"Vertical",2);var ch;x.Spot=ch=w.s(x,"Spot",3);var Xh;x.Auto=Xh=w.s(x,"Auto",4);var Qj;x.Table=Qj=w.s(x,"Table",5);x.Viewbox=w.s(x,"Viewbox",6);var wj;x.TableRow=wj=w.s(x,"TableRow",7);var xj;x.TableColumn=xj=w.s(x,"TableColumn",8);var Ug;x.Link=Ug=w.s(x,"Link",9);var ni;x.Grid=ni=w.s(x,"Grid",10);w.u(x,{elements:"elements"},function(){return this.Ga.l});w.u(x,{Sa:"naturalBounds"},t("Lc"));w.g(x,"padding",x.prototype.padding);
w.defineProperty(x,{padding:"padding"},t("ie"),function(a){"number"===typeof a?a=new hb(a):w.i(a,hb,x,"padding");var b=this.ie;b.I(a)||(this.ie=a=a.O(),this.R(),this.j("padding",b,a))});w.g(x,"type",x.prototype.type);w.defineProperty(x,{type:"type"},t("T"),function(a){var b=this.T;b!==a&&(u&&w.ib(a,x,x,"type"),(b===wj||b===xj)&&w.m("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.T=a,this.T===ni&&(this.gh=h),this.R(),this.j("type",b,a))});
w.g(x,"defaultAlignment",x.prototype.Cj);w.defineProperty(x,{Cj:"defaultAlignment"},t("ip"),function(a){var b=this.ip;b.I(a)||(u&&w.i(a,H,x,"defaultAlignment"),this.ip=a=a.O(),this.R(),this.j("defaultAlignment",b,a))});w.g(x,"defaultStretch",x.prototype.$y);w.defineProperty(x,{$y:"defaultStretch"},t("Zb"),function(a){var b=this.Zb;b!==a&&(w.ib(a,P,x,"defaultStretch"),this.Zb=a,this.R(),this.j("defaultStretch",b,a))});w.g(x,"viewboxStretch",x.prototype.rI);
w.defineProperty(x,{rI:"viewboxStretch"},t("Bn"),function(a){var b=this.Bn;b!==a&&(w.ib(a,P,x,"viewboxStretch"),this.Bn=a,this.j("viewboxStretch",b,a))});w.g(x,"gridCellSize",x.prototype.cs);w.defineProperty(x,{cs:"gridCellSize"},t("Hp"),function(a){var b=this.Hp;b.I(a)||(w.i(a,bb,x,"gridCellSize"),(!a.P()||0===a.width||0===a.height)&&w.m("Invalid Panel.gridCellSize: "+a),this.Hp=a.O(),this.h!==n&&this===this.h.Dv&&Fi(this.h),vj(this),this.j("gridCellSize",b,a))});w.g(x,"gridOrigin",x.prototype.kz);
w.defineProperty(x,{kz:"gridOrigin"},t("Ip"),function(a){var b=this.Ip;b.I(a)||(w.i(a,F,x,"gridOrigin"),a.P()||w.m("Invalid Panel.gridOrigin: "+a),this.Ip=a.O(),vj(this),this.j("gridOrigin",b,a))});
x.prototype.Xn=function(a,b){var c=this.opacity,d=1;1!==c&&(d=a.globalAlpha,a.globalAlpha=d*c);if(this.T===ni){c=this.Vk()*b.scale;0>=c&&(c=1);var e=this.cs,d=e.width,e=e.height,g=this.Sa,i=g.width,g=g.height,j=Math.ceil(i/d),k=Math.ceil(g/e),l=this.kz;a.save();a.beginPath();a.rect(0,0,i,g);a.clip();for(var m=[],q=this.Ga.n,r=this.Ga.length,s=0;s<r;s++){var v=[];m.push(v);var y=q[s];if(y.visible)for(var y="LineV"===y.rb,C=s+1;C<r;C++){var E=q[C];E.visible&&"LineV"===E.rb===y&&(E=E.Hi,2<=E&&v.push(E))}}q=
this.Ga.length;for(r=0;r<q;r++)if(y=this.Ga.n[r],y.visible){s=m[r];v=y.Hi;if("LineV"===y.rb){a.lineWidth=y.Za;yj(this,a,y.stroke,p);a.beginPath();for(C=y=Math.floor(-l.x/d);C<=y+j&&!(E=C*d+l.x,0<=E&&(E<i&&Nk(C,v,s))&&(a.moveTo(E,0),a.lineTo(E,g),2>d*v*c));C++);}else{a.lineWidth=y.Za;yj(this,a,y.stroke,p);a.beginPath();for(C=y=Math.floor(-l.y/e);C<=y+k&&!(E=C*e+l.y,0<=E&&(E<=g&&Nk(C,v,s))&&(a.moveTo(0,E),a.lineTo(i,E),2>e*v*c));C++);}a.stroke()}a.restore();li(b,a)}else{e=this.Ga.length;for(i=0;i<e;i++)this.Ga.n[i].Ne(a,
b);u&&u.lK&&this instanceof U&&u.kK(a,b,this);1!==c&&(a.globalAlpha=d)}};function Nk(a,b,c){if(0!==a%b)return p;for(var b=c.length,d=0;d<b;d++)if(0===a%c[d])return p;return h}
x.prototype.os=function(a,b,c,d){var e=this.Wb;e.width=0;e.height=0;var g=this.xa,i=this.we;c===f&&(c=i.width,d=i.height);var c=Math.max(c,i.width),d=Math.max(d,i.height),j=this.ce;isNaN(g.width)||(a=Math.min(g.width,j.width));isNaN(g.height)||(b=Math.min(g.height,j.height));var a=Math.max(c,a),b=Math.max(d,b),k=this.padding,a=Math.max(a-k.left-k.right,0),b=Math.max(b-k.top-k.bottom,0),l=this.Ga,m=l.length;if(0===m){var q=this.Lc;db(q,!isNaN(g.width)?a:0,!isNaN(g.height)?b:0);mj(this,0,0,q.width,
q.height)}else{var r=this.T.Bb;switch(r){case "Position":var s=a,v=b,y=c,C=d;e.x=0;e.y=0;e.width=0;for(var E=e.height=0;E<m;E++){var I=l.n[E];if(I.visible||I===this.Xb){var D=I.margin,M=D.right+D.left,N=D.top+D.bottom;Ih(I,s,v,y,C);var Z=I.ya,va=Math.max(Z.width+M,0),la=Math.max(Z.height+N,0),ta=I.position.x,Ea=I.position.y;isFinite(ta)||(ta=0);isFinite(Ea)||(Ea=0);if(I instanceof V&&I.pz)var Ha=I.Za/2,ta=ta-Ha,Ea=Ea-Ha;e.Wb(ta,Ea,va,la)}}break;case "Vertical":for(var cb=a,rb=c,Xa=[],Na=0;Na<m;Na++){var gb=
l.n[Na];if(gb.visible||gb===this.Xb){var Ya=pj(gb);if(Ya!==jj&&Ya!==kj)Xa.push(gb);else{var nb=gb.margin,vd=nb.right+nb.left,ne=nb.top+nb.bottom;Ih(gb,cb,Infinity,rb,0);var Nd=gb.ya,Ub=Math.max(Nd.width+vd,0),Fc=Math.max(Nd.height+ne,0);e.width=Math.max(e.width,Ub);e.height+=Fc}}}var ae=Xa.length;if(0!==ae){this.xa.width?cb=Math.min(this.xa.width,this.ce.width):0!==e.width&&(cb=Math.min(e.width,this.ce.width));for(Na=0;Na<ae;Na++)if(gb=Xa[Na],gb.visible||gb===this.Xb)nb=gb.margin,vd=nb.right+nb.left,
ne=nb.top+nb.bottom,Ih(gb,cb,Infinity,rb,0),Nd=gb.ya,Ub=Math.max(Nd.width+vd,0),Fc=Math.max(Nd.height+ne,0),e.width=Math.max(e.width,Ub),e.height+=Fc}break;case "Horizontal":for(var pe=b,Rf=d,Vc=[],yd=0;yd<m;yd++){var cc=l.n[yd];if(cc.visible||cc===this.Xb){var Sf=pj(cc);if(Sf!==jj&&Sf!==lj)Vc.push(cc);else{var Mc=cc.margin,Pe=Mc.right+Mc.left,pf=Mc.top+Mc.bottom;Ih(cc,Infinity,pe,0,Rf);var qf=cc.ya,Wc=Math.max(qf.width+Pe,0),Nc=Math.max(qf.height+pf,0);e.width+=Wc;e.height=Math.max(e.height,Nc)}}}var Qe=
Vc.length;if(0!==Qe){this.xa.height?pe=Math.min(this.xa.height,this.ce.height):0!==e.height&&(pe=Math.min(e.height,this.ce.height));for(yd=0;yd<Qe;yd++)if(cc=Vc[yd],cc.visible||cc===this.Xb)Mc=cc.margin,Pe=Mc.right+Mc.left,pf=Mc.top+Mc.bottom,Ih(cc,Infinity,pe,0,Rf),qf=cc.ya,Wc=Math.max(qf.width+Pe,0),Nc=Math.max(qf.height+pf,0),e.width+=Wc,e.height=Math.max(e.height,Nc)}break;case "Spot":a:{var ce=a,Mb=b,de=c,qe=d,lc=Bj(this,l,m),wb=lc.margin,Xc,Nb,Qd=wb.right+wb.left,re=wb.top+wb.bottom;Ih(lc,ce,
Mb,de,qe);var Cb=lc.ya,R=Cb.width,Vb=Cb.height,Q=Math.max(R+Qd,0),ha=Math.max(Vb+re,0);e.x=-wb.left;e.y=-wb.top;e.width=Q;e.height=ha;for(var Ab=0;Ab<m;Ab++){var Fb=l.n[Ab];if(Fb!==lc&&(Fb.visible||Fb===this.Xb)){wb=Fb.margin;Xc=wb.right+wb.left;Nb=wb.top+wb.bottom;Ih(Fb,ce,Mb,0,0);var Cb=Fb.ya,Q=Math.max(Cb.width+Xc,0),ha=Math.max(Cb.height+Nb,0),Ga=Fb.Db;Eb(Ga)&&(Ga=this.Cj);tb(Ga)||(Ga=Ob);var oa=Fb.uj;Eb(oa)&&(oa=Ob);e.Wb(Ga.x*R+Ga.offsetX-(oa.x*Cb.width-oa.offsetX)-wb.left,Ga.y*Vb+Ga.offsetY-
(oa.y*Cb.height-oa.offsetY)-wb.top,Q,ha)}}var Aa=lc.Jh;Aa===eh&&(Aa=pj(lc));switch(Aa){case jj:break a;case kd:if(!isFinite(ce)&&!isFinite(Mb))break a;break;case lj:if(!isFinite(ce))break a;break;case kj:if(!isFinite(Mb))break a}Cb=lc.ya;R=Cb.width;Vb=Cb.height;Q=Math.max(R+Qd,0);ha=Math.max(Vb+re,0);wb=lc.margin;e.x=-wb.left;e.y=-wb.top;e.width=Q;e.height=ha;for(Ab=0;Ab<m;Ab++)if(Fb=l.n[Ab],Fb!==lc&&(Fb.visible||Fb===this.Xb))wb=Fb.margin,Xc=wb.right+wb.left,Nb=wb.top+wb.bottom,Cb=Fb.ya,Q=Math.max(Cb.width+
Xc,0),ha=Math.max(Cb.height+Nb,0),Ga=Fb.Db,Eb(Ga)&&(Ga=this.Cj),tb(Ga)||(Ga=Ob),oa=Fb.uj,Eb(oa)&&(oa=Ob),e.Wb(Ga.x*R+Ga.offsetX-(oa.x*Cb.width-oa.offsetX)-wb.left,Ga.y*Vb+Ga.offsetY-(oa.y*Cb.height-oa.offsetY)-wb.top,Q,ha)}break;case "Auto":var Pa=a,Yc=b,xc=c,ld=d,xb=Bj(this,l,m),Zc=xb.margin,Ib=Zc.right+Zc.left,eb=Zc.top+Zc.bottom;Ih(xb,Pa,Yc,xc,ld);var yc=xb.ya,Re=Math.max(yc.width+Ib,0),se=Math.max(yc.height+eb,0),zd=(new F).pm(0,0,Re,se,Ok(xb)),rf=(new F).pm(0,0,Re,se,Pk(xb)),Tf=new G(zd,rf),
kg=Pa,te=Yc;isFinite(Pa)&&(kg=Tf.width);isFinite(Yc)&&(te=Tf.height);for(var Rd=new bb(0,0),ue=0;ue<m;ue++){var Ad=l.n[ue];if(Ad!==xb&&(Ad.visible||Ad===this.Xb)){var Zc=Ad.margin,Se=Zc.right+Zc.left,Wb=Zc.top+Zc.bottom;Ih(Ad,kg,te,xc,ld);yc=Ad.ya;Re=Math.max(yc.width+Se,0);se=Math.max(yc.height+Wb,0);Rd=new bb(Math.max(Re,Rd.width),Math.max(se,Rd.height))}}if(1===m)e.width=Re,e.height=se;else{var Oc=Ok(xb),ve=Pk(xb),$c,Te;ve.x!==Oc.x&&ve.y!==Oc.y&&($c=Rd.width/Math.abs(ve.x-Oc.x),Te=Rd.height/Math.abs(ve.y-
Oc.y));var we=0;xb instanceof V&&(we=xb.Za*xb.scale);$c+=Math.abs(Oc.offsetX)+Math.abs(ve.offsetX)+we;Te+=Math.abs(Oc.offsetY)+Math.abs(ve.offsetY)+we;var Sd=xb.Jh;Sd===eh&&(Sd=pj(xb));switch(Sd){case jj:ld=xc=0;break;case kd:isFinite(Pa)&&($c=Pa);isFinite(Yc)&&(Te=Yc);break;case lj:isFinite(Pa)&&($c=Pa);ld=0;break;case kj:xc=0,isFinite(Yc)&&(Te=Yc)}xb instanceof V&&(xb.nh?xb.fk=n:xb.Ha=n);Fj(xb);Ih(xb,$c,Te,xc,ld);e.width=xb.ya.width+Ib;e.height=xb.ya.height+eb}break;case "Table":for(var Td=a,xe=
b,yb=m,Bd=c,lb=d,Bb=[],zc=[],wa=0;wa<yb;wa++){var ya=l.n[wa];if(ya instanceof x&&(ya.type===wj||ya.type===xj)&&ya.visible){zc.push(ya);for(var Cj=ya.Ga,Al=Cj.length,Pc=0;Pc<Al;Pc++){var Jg=Cj.n[Pc];ya.type===wj?Jg.nc=ya.nc:ya.type===xj&&(Jg.Ec=ya.Ec);Bb.push(Jg)}}else Bb.push(ya)}for(var yb=Bb.length,Gc=[],wa=0;wa<yb;wa++)ya=Bb[wa],ya.$b=h,ya.Kc=h,Gc[ya.nc]||(Gc[ya.nc]=[]),Gc[ya.nc][ya.Ec]||(Gc[ya.nc][ya.Ec]=[]),Gc[ya.nc][ya.Ec].push(ya);for(var oi=[],yh=[],Kg=[],Xb={count:0},Ue={count:0},Ud=Td,Ac=
xe,Cd=this.Ie,yb=Cd.length,wa=0;wa<yb;wa++){var Ba=Cd[wa];Ba!==f&&Qk(Ba,0)}Cd=this.Ae;yb=Cd.length;for(wa=0;wa<yb;wa++)Ba=Cd[wa],Ba!==f&&Qk(Ba,0);for(var ad,lg=Gc.length,wa=0;wa<lg;wa++)if(Gc[wa]){var Dj=Gc[wa].length,vb=this.$d(wa);Qk(vb,0);for(Pc=0;Pc<Dj;Pc++)if(Gc[wa][Pc]){var sb=this.Zd(Pc);oi[Pc]===f&&(Qk(sb,0),oi[Pc]=h);for(var Ej=Gc[wa][Pc],zh=Ej.length,mg=0;mg<zh;mg++)if(ya=Ej[mg],ya.visible||ya===this.Xb)if(1<ya.Dk||1<ya.ek)yh.push(ya);else{var ee=Rj(ya,vb,sb);if(ee!==jj&&!ya.xa.P())Xb[Pc]===
f&&(Xb[Pc]=-1,Xb.count++),Ue[wa]===f&&(Ue[wa]=-1,Ue.count++),Kg.push(ya),Ih(ya,Infinity,Infinity,Bd,lb);else{var ng=isFinite(sb.width)?sb.width:Td,og=isFinite(vb.height)?vb.height:xe,Yb=new bb(Math.max(sb.dg,Math.min(ng,sb.de)),Math.max(vb.dg,Math.min(og,vb.de))),Db=ya.margin,Ve=Db.right+Db.left,Vd=Db.top+Db.bottom;Ih(ya,Infinity,Infinity,Bd,lb);var Qc=ya.ya,sf=Math.max(Qc.width+Ve,0),Uf=Math.max(Qc.height+Vd,0),Ba=this.$d(wa);ad=Math.max(Uf-Ba.Wa,0);ad>Ac&&(ad=Ac);Qk(Ba,Ba.Wa+ad);Ac=Math.max(Ac-
ad,0);Ba=this.Zd(Pc);ad=Math.max(sf-Ba.Wa,0);ad>Ud&&(ad=Ud);Qk(Ba,Ba.Wa+ad);Ud=Math.max(Ud-ad,0)}}}}for(var We=0,Xe=0,yb=this.gv,wa=0;wa<yb;wa++)this.Ae[wa]!==f&&(We+=this.Zd(wa).Wa);yb=this.Xv;for(wa=0;wa<yb;wa++)this.Ie[wa]!==f&&(Xe+=this.$d(wa).Wa);Ud=Math.max(Td-We,0);Ac=Math.max(xe-Xe,0);yb=Kg.length;for(wa=0;wa<yb;wa++){var ya=Kg[wa],vb=this.$d(ya.nc),sb=this.Zd(ya.Ec),pi=ya.ya,Db=ya.margin,Ve=Db.right+Db.left,Vd=Db.top+Db.bottom;Xb[ya.Ec]=Math.max(pi.width+Ve-sb.jd,0);Ue[ya.nc]=Math.max(pi.height+
Vd-vb.jd,0)}var nd=0,pg=0;for(wa in Ue)"count"!==wa&&(nd+=Ue[wa]);for(wa in Xb)"count"!==wa&&(pg+=Xb[wa]);for(wa=0;wa<yb;wa++)if(ya=Kg[wa],ya.visible||ya===this.Xb){vb=this.$d(ya.nc);sb=this.Zd(ya.Ec);ng=isFinite(sb.width)?sb.width:isFinite(Ud)?sb.jd+Xb[ya.Ec]/pg*Ud:sb.jd||Ud;og=isFinite(vb.height)?vb.height:isFinite(Ac)?vb.jd+Ue[ya.nc]/nd*Ac:vb.jd||Ac;Yb=new bb(Math.max(sb.dg,Math.min(ng,sb.de)),Math.max(vb.dg,Math.min(og,vb.de)));ee=Rj(ya,vb,sb);switch(ee){case lj:Yb.height=Infinity;break;case kj:Yb.width=
Infinity}Db=ya.margin;Ve=Db.right+Db.left;Vd=Db.top+Db.bottom;Fj(ya);Ih(ya,Yb.width,Yb.height,sb.dg,vb.dg);var Qc=ya.ya,sf=Math.max(Qc.width+Ve,0),Uf=Math.max(Qc.height+Vd,0),Vf;Vf=vb.jd;Qk(vb,Math.max(vb.Wa,Uf));ad=vb.jd-Vf;Ac=Math.max(Ac-ad,0);Vf=sb.jd;Qk(sb,Math.max(sb.Wa,sf));ad=sb.jd-Vf;Ud=Math.max(Ud-ad,0)}yb=yh.length;for(wa=0;wa<yb;wa++)if(ya=yh[wa],ya.visible||ya===this.Xb){vb=this.$d(ya.nc);sb=this.Zd(ya.Ec);Yb=new bb(Math.max(sb.dg,Math.min(Td,sb.de)),Math.max(vb.dg,Math.min(xe,vb.de)));
ee=Rj(ya,vb,sb);switch(ee){case kd:0!==sb.jd&&(Yb.width=Math.min(Yb.width,sb.jd));0!==vb.jd&&(Yb.height=Math.min(Yb.height,vb.jd));break;case lj:0!==sb.jd&&(Yb.width=Math.min(Yb.width,sb.jd));break;case kj:0!==vb.jd&&(Yb.height=Math.min(Yb.height,vb.jd))}isFinite(sb.width)&&(Yb.width=sb.width);isFinite(vb.height)&&(Yb.height=vb.height);for(var od=new bb(0,0),Bc=1;Bc<ya.Dk&&!(ya.nc+Bc>=this.Xv);Bc++)Ba=this.$d(ya.nc+Bc),od.height+=Math.max(Ba.dg,isNaN(Ba.qf)?Ba.de:Math.min(Ba.qf,Ba.de));for(Bc=1;Bc<
ya.ek&&!(ya.Ec+Bc>=this.gv);Bc++)Ba=this.Zd(ya.Ec+Bc),od.width+=Math.max(Ba.dg,isNaN(Ba.qf)?Ba.de:Math.min(Ba.qf,Ba.de));Yb.width+=od.width;Yb.height+=od.height;Db=ya.margin;Ve=Db.right+Db.left;Vd=Db.top+Db.bottom;Ih(ya,Yb.width,Yb.height,Bd,lb);for(var Qc=ya.ya,sf=Math.max(Qc.width+Ve,0),Uf=Math.max(Qc.height+Vd,0),qg=0,Bc=0;Bc<ya.Dk;Bc++)Ba=this.$d(ya.nc+Bc),qg+=Ba.Wa||0;if(qg<Uf)for(var Wd=Uf-qg;0<Wd;){var Ye=Ba.Wa||0;isNaN(Ba.height)&&Ba.de>Ye&&(Qk(Ba,Math.min(Ba.de,Ye+Wd)),Ba.Wa!==Ye&&(Wd-=Ba.Wa-
Ye));if(-1===Ba.index-1)break;Ba=this.$d(Ba.index-1)}for(var tf=0,Bc=0;Bc<ya.ek;Bc++)Ba=this.Zd(ya.Ec+Bc),tf+=Ba.Wa||0;if(tf<sf)for(Wd=sf-tf;0<Wd;){Ye=Ba.Wa||0;isNaN(Ba.width)&&Ba.de>Ye&&(Qk(Ba,Math.min(Ba.de,Ye+Wd)),Ba.Wa!==Ye&&(Wd-=Ba.Wa-Ye));if(-1===Ba.index-1)break;Ba=this.Zd(Ba.index-1)}}for(var ye=0,Ze=0,ee=pj(this),Lg=this.xa,Mg=this.ce,pd=Xe=We=0,ze=0,yb=this.gv,wa=0;wa<yb;wa++)this.Ae[wa]!==f&&(Ba=this.Zd(wa),isFinite(Ba.width)?pd+=Ba.width:Rk(Ba)===Sk?pd+=Ba.Wa:We+=Ba.Wa);var ye=isFinite(Lg.width)?
Math.min(Lg.width,Mg.width):ee!==jj&&isFinite(Td)?Td:We,ye=Math.max(ye,this.we.width),ye=Math.max(ye-pd,0),Og=Math.max(ye/We,1);isFinite(Og)||(Og=1);for(wa=0;wa<yb;wa++)this.Ae[wa]!==f&&(Ba=this.Zd(wa),!isFinite(Ba.width)&&Rk(Ba)!==Sk&&Qk(Ba,Ba.Wa*Og),Ba.qb=e.width,e.width+=Ba.Wa);yb=this.Xv;for(wa=0;wa<yb;wa++)this.Ie[wa]!==f&&(Ba=this.$d(wa),isFinite(Ba.height)?ze+=Ba.height:Rk(Ba)===Sk?ze+=Ba.Wa:Xe+=Ba.Wa);var Ze=isFinite(Lg.height)?Math.min(Lg.height,Mg.height):ee!==jj&&isFinite(xe)?xe:Xe,Ze=
Math.max(Ze,this.we.height),Ze=Math.max(Ze-ze,0),rg=Math.max(Ze/Xe,1);isFinite(rg)||(rg=1);for(wa=0;wa<yb;wa++)this.Ie[wa]!==f&&(Ba=this.$d(wa),!isFinite(Ba.height)&&Rk(Ba)!==Sk&&Qk(Ba,Ba.Wa*rg),Ba.qb=e.height,e.height+=Ba.Wa);yb=zc.length;for(wa=0;wa<yb;wa++){var bd=zc[wa];bd.type===wj?(ng=e.width,Ba=this.$d(bd.nc),og=Ba.jd):(Ba=this.Zd(bd.Ec),ng=Ba.jd,og=e.height);bd.Vc.U(0,0,ng,og);bd.$b=p;Gc[bd.nc]||(Gc[bd.nc]=[]);Gc[bd.nc][bd.Ec]||(Gc[bd.nc][bd.Ec]=[]);Gc[bd.nc][bd.Ec].push(bd)}this.nF=Gc;break;
case "Viewbox":var Wf=a,Ae=b,Ah=c,Bh=d;1<m&&w.m("Viewbox Panel cannot contain more than one GraphObject.");var tc=l.n[0];tc.bc=1;Fj(tc);Ih(tc,Infinity,Infinity,Ah,Bh);var qi=tc.ya,Gj=tc.margin,jo=Gj.right+Gj.left,ko=Gj.top+Gj.bottom;if(isFinite(Wf)||isFinite(Ae)){var dq=tc.scale,lo=qi.width,mo=qi.height,no=Math.max(Wf-jo,0),oo=Math.max(Ae-ko,0);tc.bc=this.Bn===fh?tc.bc*Math.min(no/lo,oo/mo):tc.bc*Math.max(no/lo,oo/mo);dq!==tc.scale&&(tc.$b=h,Ih(tc,Infinity,Infinity,Ah,Bh))}qi=tc.ya;e.width=isFinite(Wf)?
Wf:Math.max(qi.width+jo,0);e.height=isFinite(Ae)?Ae:Math.max(qi.height+ko,0);break;case "Link":var po=this instanceof of?this.Ik:this;if(0===m){var Hj=this.Lc;db(Hj,0,0);var Xd=this.ya;Xd.U(0,0,0,0)}else{var Ij=this.Gp(),$e=this.Yh(),af=$e.copy();af.x=0;af.y=0;var Pg,Ch=this.ox();Pg=this.ja!==f?this.ja:Ch.count;for(var Jj=new F(Infinity,Infinity),Qg=0;Qg<Pg;Qg++){var qo=Ch.n[Qg];Jj.x=Math.min(qo.x,Jj.x);Jj.y=Math.min(qo.y,Jj.y)}this.gj=new F($e.x,$e.y);this.Ph.clear();Ij!==n&&(Tk(Ij,$e.width,$e.height),
Xd=Ij.ya,af.Oi(Xd),this.Ph.add(Xd));for(var Rg=n,sg=n,Xf=n,Qg=0;Qg<m;Qg++){var mc=l.n[Qg];if(mc!==Ij)if(mc.Mi&&mc instanceof V)Tk(mc,$e.width,$e.height),Xd=mc.ya,af.Oi(Xd),this.Ph.add(Xd);else if(2>Pg)Ih(mc,Infinity,Infinity),Xd=mc.ya,af.Oi(Xd),this.Ph.add(Xd);else{Rg===n&&(Rg=new Wa,sg=new F,Xf=new F);var Yf=mc.Hh,so=mc.Tz,Bl=mc.uj;zb(Bl)&&(Bl=Ob);var Kj=mc.Es,eq=mc.Uz,ri,si,Lj=0;if(Yf<-Pg||Yf>=Pg){var to=po.LD,Mj=po.KD;Kj!==ij&&(Lj=Uk(Kj,Mj),mc.angle=Lj);ri=to.x-$e.x;si=to.y-$e.y}else{var uf,Dh;
if(0<=Yf)uf=Ch.n[Yf],Dh=Yf<Pg-1?Ch.n[Yf+1]:uf;else{var Cl=Pg+Yf;uf=Ch.n[Cl];Dh=0<Cl?Ch.n[Cl-1]:uf}Mj=0<=Yf?uf.Bi(Dh):Dh.Bi(uf);Kj!==ij&&(Lj=Uk(Kj,Mj),mc.oc=Lj);ri=uf.x+(Dh.x-uf.x)*so-$e.x;si=uf.y+(Dh.y-uf.y)*so-$e.y}Ih(mc,Infinity,Infinity);var Xd=mc.ya,Hj=mc.Sa,ti=0;mc instanceof V&&(ti=mc.Za);var uo=Hj.width+ti,vo=Hj.height+ti;Rg.reset();Rg.translate(-Xd.x,-Xd.y);Rg.scale(mc.scale,mc.scale);Rg.rotate(mc.angle,uo/2,vo/2);var wo=new G(0,0,uo,vo);sg.Go(wo,Bl);Rg.Ta(sg);var fq=-sg.x+ti/2,gq=-sg.y+ti/
2;Xf.set(eq);isNaN(Xf.x)&&(Xf.x=0<=Yf?sg.x+3:-(sg.x+3));isNaN(Xf.y)&&(Xf.y=-(sg.y+3));Xf.rotate(Mj);ri+=Xf.x;si+=Xf.y;var ui=wo;ui.set(Xd);ui.x=ri+fq;ui.y=si+gq;this.Ph.add(ui);af.Oi(ui)}}if(this.Fe)for(var xo=this.Jj;xo.next();)Ih(xo.value,Infinity,Infinity);this.Wb=af;var Oj=this.gj;Oj&&Oj.U(Oj.x+af.x,Oj.y+af.y);db(e,af.width||0,af.height||0)}break;case "Grid":break;case "TableRow":case "TableColumn":w.m(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");
break;default:w.m("Unknown panel type: "+r)}var Be=e.width,Ce=e.height,Pj=this.padding,hq=Pj.top+Pj.bottom,Be=Be+(Pj.left+Pj.right),Ce=Ce+hq;isFinite(g.width)&&(Be=g.width);isFinite(g.height)&&(Ce=g.height);Be=Math.min(j.width,Be);Ce=Math.min(j.height,Ce);Be=Math.max(i.width,Be);Ce=Math.max(i.height,Ce);Be=Math.max(c,Be);Ce=Math.max(d,Ce);e.width=Be;e.height=Ce;q=this.Lc;db(q,Be,Ce);mj(this,0,0,Be,Ce)}};
function Bj(a,b,c){for(var d=0;d<c;d++){var e=b.n[d];if(e.Mi===h)return a.Ol=e}b=b.n[0];return a.Ol=b}
x.prototype.yj=function(a,b,c,d){var e=this.Wb,g=this.Ga,i=g.length,j=this.pF;j.reset();if(0===i){var k=this.wa;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.xa.P()){var l=pj(this),m=this.Vc,q=m.width,r=m.height,s=this.margin,v=s.left+s.right,y=s.top+s.bottom;q===c&&r===d&&(l=jj);switch(l){case jj:if(q>c||r>d)this.R(),Ih(this,q>c?c:q,r>d?d:r);break;case kd:this.$b=h;Ih(this,c+v,d+y,0,0);break;case lj:this.$b=h;Ih(this,c+v,r+y,0,0);break;case kj:this.$b=h,Ih(this,q+v,d+y,0,0)}}k=this.wa;k.x=a;k.y=
b;k.width=c;k.height=d;var C=this.T.Bb;switch(C){case "Position":for(var E=e.x-this.padding.left,I=e.y-this.padding.top,D=0;D<i;D++){var M=g.n[D],N=M.ya,Z=M.margin,va=M.position.x,la=M.position.y;j.x=isNaN(va)?-E:va-E;j.y=isNaN(la)?-I:la-I;if(M instanceof V&&M.pz){var ta=M.Za/2;j.x-=ta;j.y-=ta}j.x+=Z.left;j.y+=Z.top;j.width=N.width;j.height=N.height;M.visible&&M.Dc(j.x,j.y,j.width,j.height)}break;case "Vertical":for(var Ea=this.padding.left,Ha=this.padding.top,cb=0;cb<i;cb++){var rb=Ea,Xa=g.n[cb],
Na=Xa.ya,gb=Xa.margin,Ya=gb.left+gb.right,nb=Ea+this.padding.right,vd=Na.width,ne=pj(Xa);if(isNaN(Xa.xa.width)&&ne===kd||ne===lj)vd=Math.max(e.width-Ya-nb,0);var Nd=vd+Ya+nb,Ub=Xa.Db;Eb(Ub)&&(Ub=this.Cj);tb(Ub)||(Ub=Ob);j.x=rb+Ub.offsetX+gb.left+(e.width*Ub.x-Nd*Ub.x);j.y=Ha+Ub.offsetY+gb.top;j.width=vd;j.height=Na.height;Xa.visible&&(Xa.Dc(j.x,j.y,j.width,j.height),Ha+=Na.height+gb.bottom+gb.top)}break;case "Horizontal":for(var Fc=this.padding.top,ae=this.padding.left,pe=0;pe<i;pe++){var Rf=Fc,Vc=
g.n[pe],yd=Vc.ya,cc=Vc.margin,Sf=cc.top+cc.bottom,Mc=Fc+this.padding.bottom,Pe=yd.height,pf=pj(Vc);if(isNaN(Vc.xa.height)&&pf===kd||pf===kj)Pe=Math.max(e.height-Sf-Mc,0);var qf=Pe+Sf+Mc,Wc=Vc.Db;Eb(Wc)&&(Wc=this.Cj);tb(Wc)||(Wc=Ob);j.x=ae+Wc.offsetX+cc.left;j.y=Rf+Wc.offsetY+cc.top+(e.height*Wc.y-qf*Wc.y);j.width=yd.width;j.height=Pe;Vc.visible&&(Vc.Dc(j.x,j.y,j.width,j.height),ae+=yd.width+cc.left+cc.right)}break;case "Spot":var Nc=Bj(this,g,i),Qe=Nc.ya,ce=Qe.width,Mb=Qe.height,de=this.padding,qe=
de.left,lc=de.top;j.x=qe-e.x;j.y=lc-e.y;Nc.Dc(j.x,j.y,ce,Mb);for(var wb=0;wb<i;wb++){var Xc=g.n[wb];if(Xc!==Nc){var Nb=Xc.ya,Qd=Nb.width,re=Nb.height,Cb=Xc.Db;Eb(Cb)&&(Cb=this.Cj);tb(Cb)||(Cb=Ob);var R=Xc.uj;Eb(R)&&(R=Ob);j.x=Cb.x*ce+Cb.offsetX-(R.x*Qd-R.offsetX);j.y=Cb.y*Mb+Cb.offsetY-(R.y*re-R.offsetY);j.x-=e.x;j.y-=e.y;Xc.visible&&Xc.Dc(qe+j.x,lc+j.y,Qd,re)}}break;case "Auto":var Vb=Bj(this,g,i),Q=Vb.ya,ha=new G(0,0,Q.width,Q.height),Ab=new G(0,0,1,1),Fb=Vb.margin,Ga=Fb.left,oa=Fb.top,Aa=this.padding,
Pa=Aa.left,Yc=Aa.top;j.x=Ga;j.y=oa;j.width=Q.width;j.height=Q.height;Vb.Dc(Pa+j.x,Yc+j.y,j.width,j.height);var xc=Ok(Vb),ld=Pk(Vb),xb=(new F).Go(ha,xc),Zc=(new F).Go(ha,ld);Ab.x=xb.x;Ab.y=xb.y;Ab.jw(Zc);Ab.x+=Ga+Pa;Ab.y+=oa+Yc;for(var Ib=0;Ib<i;Ib++){var eb=g.n[Ib];if(eb!==Vb){var yc=eb.ya,Fb=eb.margin,Re=Math.max(yc.width+Fb.right+Fb.left,0),se=Math.max(yc.height+Fb.top+Fb.bottom,0),zd=eb.Db;Eb(zd)&&(zd=this.Cj);tb(zd)||(zd=Ob);j.x=Ab.width*zd.x+zd.offsetX-Re*zd.x+Fb.left+Ab.x;j.y=Ab.height*zd.y+
zd.offsetY-se*zd.y+Fb.top+Ab.y;j.width=Ab.width;j.height=Ab.height;eb.visible&&(jb(Ab.x,Ab.y,Ab.width,Ab.height,j.x,j.y,yc.width,yc.height)?eb.Dc(j.x,j.y,yc.width,yc.height):eb.Dc(j.x,j.y,yc.width,yc.height,new G(Ab.x,Ab.y,Ab.width,Ab.height)))}}break;case "Table":for(var rf=this.padding,Tf=rf.left,kg=rf.top,te=this.nF,Rd,ue,Ad=te.length,Se=0,Wb=0;Wb<Ad;Wb++)te[Wb]&&(Se=Math.max(Se,te[Wb].length));for(var Oc=Math.min(this.xn,Ad-1);Oc!==Ad&&(this.Ie[Oc]===f||0===this.Ie[Oc].Wa);)Oc++;for(var Oc=Math.min(Oc,
Ad-1),ve=-this.Ie[Oc].qb,$c=Math.min(this.$m,Se-1);$c!==Se&&(this.Ae[$c]===f||0===this.Ae[$c].Wa);)$c++;for(var $c=Math.min($c,Se-1),Te=-this.Ae[$c].qb,Wb=0;Wb<Ad;Wb++)if(te[Wb]){var Se=te[Wb].length,we=this.$d(Wb);ue=we.qb+ve+kg;for(var Sd=0;Sd<Se;Sd++)if(te[Wb][Sd]){var Td=this.Zd(Sd);Rd=Td.qb+Te+Tf;for(var xe=te[Wb][Sd],yb=xe.length,Bd=0;Bd<yb;Bd++){var lb=xe[Bd],Bb=lb.ya;if(lb instanceof x&&(lb.type===wj||lb.type===xj)){lb.Ib.Ia();var zc=lb.Ib;zc.x=lb.type===wj?Tf:Rd;zc.y=lb.type===xj?kg:ue;zc.width=
Bb.width;zc.height=Bb.height;lb.Ib.freeze();lb.Kc=p}else{for(var wa=new bb(0,0),ya=1;ya<lb.rowSpan&&!(Wb+ya>=this.Xv);ya++){var Cj=this.$d(Wb+ya);wa.height+=Cj.Wa}for(ya=1;ya<lb.qC&&!(Sd+ya>=this.gv);ya++){var Al=this.Zd(Sd+ya);wa.width+=Al.Wa}var Pc=Td.Wa+wa.width,Jg=we.Wa+wa.height;j.x=Rd;j.y=ue;j.width=Pc;j.height=Jg;var Gc=Rd,oi=ue,yh=Pc,Kg=Jg,Xb=lb.Db.copy();if(Eb(Xb)){Xb.Ua(this.Cj);tb(Xb)||Xb.Ua(Ob);var Ue=Td.Db;tb(Ue)&&(Xb.x=Ue.x,Xb.offsetX=Ue.offsetX);var Ud=we.Db;tb(Ud)&&(Xb.y=Ud.y,Xb.offsetY=
Ud.offsetY)}tb(Xb)||(Xb=Ob);var Ac=Bb.width,Cd=Bb.height,Ba=lb.ce,ad=lb.we,Ac=Math.min(Ba.width,Ac),Cd=Math.min(Ba.height,Cd),Ac=Math.max(ad.width,Ac),Cd=Math.max(ad.height,Cd),lg=lb.margin,Dj=lg.left+lg.right,vb=lg.top+lg.bottom,sb=Rj(lb,we,Td);if(isNaN(lb.xa.width)&&sb===kd||sb===lj)Ac=Math.max(Pc-Dj,0);if(isNaN(lb.xa.height)&&sb===kd||sb===kj)Cd=Math.max(Jg-vb,0);var Ej=Cd+vb;j.x+=j.width*Xb.x-(Ac+Dj)*Xb.x+Xb.offsetX+lg.left;j.y+=j.height*Xb.y-Ej*Xb.y+Xb.offsetY+lg.top;lb.visible&&(jb(Gc,oi,yh,
Kg,j.x,j.y,Ac,Cd)?lb.Dc(j.x,j.y,Ac,Cd):lb.Dc(j.x,j.y,Ac,Cd,new G(Gc,oi,yh,Kg)))}}}}for(Wb=0;Wb<i;Wb++)if(lb=g.n[Wb],lb instanceof x&&(lb.type===wj||lb.type===xj))zc=lb.Ib,lb.Lc.Ia(),lb.Lc.Ho(0,0,zc.width,zc.height),lb.Lc.freeze();break;case "Viewbox":var zh=g.n[0],mg=zh.ya,ee=zh.margin,ng=ee.top+ee.bottom,og=Math.max(mg.width+(ee.right+ee.left),0),Yb=Math.max(mg.height+ng,0),Db=zh.Db;Eb(Db)&&(Db=this.Cj);tb(Db)||(Db=Ob);j.x=e.width*Db.x-og*Db.x+Db.offsetX;j.y=e.height*Db.y-Yb*Db.y+Db.offsetY;j.width=
mg.width;j.height=mg.height;zh.Dc(j.x,j.y,j.width,j.height);break;case "Link":var Ve=this.Gp(),Vd=0;if(Ve!==n&&Vd<this.Ph.count){var Qc=this.Ph.n[Vd];Vd++;Ve.Dc(Qc.x-this.Wb.x,Qc.y-this.Wb.y,Qc.width,Qc.height)}for(var sf=0;sf<i;sf++){var Uf=g.n[sf];Uf!==Ve&&Vd<this.Ph.count&&(Qc=this.Ph.n[Vd],Vd++,Uf.Dc(Qc.x-this.Wb.x,Qc.y-this.Wb.y,Qc.width,Qc.height))}var We=this.ox(),Xe=We.count;if(2<=Xe&&this.Fe)for(var pi=this.Jj;pi.next();){var nd=pi.value,pg=Xe,Vf=We,od=nd.Hh,Bc=nd.Tz,qg=nd.uj;zb(qg)&&(qg=
Ob);var Wd=nd.Es,Ye=nd.Uz,tf=f,ye=f,Ze=0;if(od<-pg||od>=pg){var Lg=this.LD,Mg=this.KD;Wd!==ij&&(Ze=Uk(Wd,Mg),nd.angle=Ze);tf=Lg.x;ye=Lg.y}else{var pd=f,ze=f;if(0<=od)pd=Vf.n[od],ze=od<pg-1?Vf.n[od+1]:pd;else var Og=pg+od,pd=Vf.n[Og],ze=0<Og?Vf.n[Og-1]:pd;Mg=0<=od?pd.Bi(ze):ze.Bi(pd);Wd!==ij&&(Ze=Uk(Wd,Mg),nd.angle=Ze);tf=pd.x+(ze.x-pd.x)*Bc;ye=pd.y+(ze.y-pd.y)*Bc}var rg=new Wa;rg.scale(nd.scale,nd.scale);rg.rotate(nd.angle,0,0);var bd=nd.Sa,Wf=new G(0,0,bd.width,bd.height),Ae=new F;Ae.Go(Wf,qg);rg.Ta(Ae);
var Ah=-Ae.x,Bh=-Ae.y,tc=Ye.copy();isNaN(tc.x)&&(tc.x=0<=od?Ae.x+3:-(Ae.x+3));isNaN(tc.y)&&(tc.y=-(Ae.y+3));tc.rotate(Mg);tf+=tc.x;ye+=tc.y;rg.PE(Wf);Ah+=Wf.x;Bh+=Wf.y;nd.position=new F(tf+Ah,ye+Bh)}this.Nv();break;case "Grid":break;case "TableRow":case "TableColumn":w.m(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:w.m("Unknown panel type: "+C)}}};
x.prototype.zj=function(a){var b=this.Sa;if(jb(0,0,b.width,b.height,a.x,a.y)){for(var c=this.Ga.length,b=new F;c--;){var d=this.Ga.n[0];if(d.visible||d===this.Xb)if(Za(b.set(a),d.transform),d.ua(b))return h}return this.ye===n&&this.xe===n?p:h}return p};function Vk(a,b,c){c(a,b);if(b instanceof x)for(b=b.elements;b.next();)Vk(a,b.value,c)}function Mi(a,b,c){c(b);for(b=b.elements;b.next();){var d=b.value;d instanceof x&&Mi(a,d,c)}}
function Wk(a,b,c){if(c(b))return b;if(b instanceof x)for(b=b.elements;b.next();){var d=Wk(a,b.value,c);if(d!==n)return b.zg(),d}return n}x.prototype.findObject=x.prototype.Pe=function(a){if(this.name===a)return this;for(var b=this.elements;b.next();){var c=b.value;if(c.name===a)return c;if(c instanceof x&&!c.YG()&&(c=c.Pe(a),c!==n))return c}return n};function Af(a,b){for(var c=a.elements;c.next();){var d=c.value;if(b(d))return d;if(d instanceof x&&(d=Af(d,b),d!==n))return d}return n}da=x.prototype;
da.Lh=function(){return!(this.type===wj||this.type===xj)};
da.xd=function(a,b,c){if(this.Qf===p)return n;b===f&&(b=n);c===f&&(c=n);if(this.Kc)return n;var d=this.Sa,e=1/this.Vk(),g=this.Lh()?a:Za((new F).set(a),this.transform);if(jb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,g.x,g.y)){if(!this.gh)for(var i=this.Ga.length,e=new F;i--;){var j=this.Ga.n[i];if(j.visible||j===this.Xb){j.Lh()?Za(e.set(a),j.transform):e.set(a);var k=n;j instanceof x?k=j.xd(e,b,c):j.Qf===h&&j.ua(e)&&(k=j);if(k!==n&&(b!==n&&(k=b(k)),k&&(c===n||c(k))))return k}}return this.background===
n&&this.Lk===n?n:jb(0,0,d.width,d.height,g.x,g.y)?this:n}return n};
da.$n=function(a,b,c,d){if(this.Qf===p)return p;b===f&&(b=n);c===f&&(c=n);!(d instanceof z)&&!(d instanceof ma)&&(d=new z(P));var e=this.Sa,g=this.Lh()?a:Za((new F).set(a),this.transform);if(jb(0,0,e.width,e.height,g.x,g.y)){if(!this.gh){g=this.Ga.length;for(e=new F;g--;){var i=this.Ga.n[g];if(i.visible||i===this.Xb)if(i.Lh()?Za(e.set(a),i.transform):e.set(a),(i instanceof x?i.$n(e,b,c,d):i.ua(e))&&i.Qf!==p)b!==n&&(i=b(i)),i&&(c===n||c(i))&&d.add(i)}}return this.background!==n||this.Lk!==n}return p};
da.em=function(a,b,c,d,e,g){if(this.Qf===p)return p;g===f&&(g=new Wa);b===f&&(b=n);c===f&&(c=n);g.multiply(this.transform);if(this.lv(a,g))return oj(this,b,c,e),h;if(this.Se(a,g)){if(!this.gh)for(var i=this.Ga.length;i--;){var j=this.Ga.n[i];if(j.visible||j===this.Xb){var k=j.wa,l=this.wa;if(!(k.x>l.width||k.y>l.height||0>k.x+k.width||0>k.y+k.height)){if(j instanceof x)k=j.em(a,b,c,d,e,g.copy());else{var k=j,l=a,m=d,q=g.copy();k.Qf===p?k=p:(q===f&&(q=new Wa),q.multiply(k.transform),k=m?k.Se(l,q):
k.lv(l,q))}k&&(b!==n&&(j=b(j)),j&&(c===n||c(j))&&e.add(j))}}}return d}return p};
da.ao=function(a,b,c,d,e){if(this.Qf===p)return p;c===f&&(c=n);d===f&&(d=n);var g=this.Sa,i=this.Lh()?a:Za((new F).set(a),this.transform),j=this.Lh()?b:Za((new F).set(b),this.transform),j=i.am(j);if(0<i.x&&i.x<g.width&&0<i.y&&i.y<g.height||$a(i.x,i.y,0,0,0,g.height)<j||$a(i.x,i.y,0,g.height,g.width,g.height)<j||$a(i.x,i.y,g.width,g.height,g.width,0)<j||$a(i.x,i.y,g.width,0,0,0)<j){if(!this.gh){g=new F;i=new F;for(j=this.Ga.length;j--;){var k=this.Ga.n[j];if(k.visible||k===this.Xb){var l=k.wa,m=this.wa;
if(!(l.x>m.width||l.y>m.height||0>l.x+l.width||0>l.y+l.height))if(l=k.transform,k.Lh()?(Za(g.set(a),l),Za(i.set(b),l)):(g.set(a),i.set(b)),k instanceof x?k.ao(g,i,c,d,e):k.RC(g,i))c!==n&&(k=c(k)),k&&(d===n||d(k))&&e.add(k)}}}return h}return p};function Ok(a){var b=a.v;if(b===f||b===Hb)b=n;b===n&&a instanceof V&&(a=a.Ha,a!==n&&(b=a.v));b===n&&(b=Jb);return b}function Pk(a){var b=a.w;if(b===f||b===Hb)b=n;b===n&&a instanceof V&&(a=a.Ha,a!==n&&(b=a.w));b===n&&(b=Rb);return b}
x.prototype.add=x.prototype.add=function(a){w.i(a,P,x,"add:element");this.yc(this.Ga.count,a)};x.prototype.elt=x.prototype.oa=function(a){return this.Ga.oa(a)};
x.prototype.insertAt=x.prototype.yc=function(a,b){b instanceof S&&w.m("Cannot add a Part to a Panel: "+b);if(this===b||this.Ki(b))this===b&&w.m("Cannot make a Panel contain itself: "+this.toString()),w.m("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.fa;c!==n&&c!==this&&w.m("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.T===ni&&!(b instanceof V)&&w.m("Can only add Shapes to a Grid Panel, not: "+b);b.el(this);b.Ll=n;if(this.uz!==n){var d=b.data;d!==n&&"object"===typeof d&&(this.Mf===n&&(this.Mf=new ka(Object,x)),this.Mf.add(d,b))}var e=this.Ga,d=-1;if(c===this){for(var g=-1,i=e.count,j=0;j<i;j++)if(e.n[j]===b){g=j;break}if(-1!==g){if(g===a||g+1>=e.count&&a>=e.count)return;e.Ye(g);d=g}else w.m("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}if(0>a||a>e.count)a=
e.count;e.yc(a,b);this.R();b.R();c=this.ca;c!==n&&(e=this.h,e!==n&&e.sa.tb||(-1!==d&&c.Rc(je,"elements",this,b,n,d,n),c.Rc(ie,"elements",this,n,b,n,a)))};x.prototype.remove=x.prototype.remove=function(a){w.i(a,P,x,"remove:element");for(var b=this.Ga,c=b.count,d=-1,e=0;e<c;e++)if(b.n[e]===a){d=e;break}-1!==d&&this.se(d)};x.prototype.removeAt=x.prototype.Ye=function(a){u&&w.o(a,x,"removeAt:idx");0<=a&&this.se(a)};
x.prototype.se=function(a){var b=this.Ga,c=b.oa(a);c.Ll=n;c.el(n);if(this.Mf!==n){var d=c.data;"object"===typeof d&&this.Mf.remove(d)}b.Ye(a);this.$b=p;this.R();b=this.ca;b!==n&&(d=this.h,d!==n&&d.sa.tb||b.Rc(je,"elements",this,c,n,a,n))};w.u(x,{Xv:"rowCount"},function(){return this.Ie.length});
x.prototype.getRowDefinition=x.prototype.$d=function(a){u&&w.o(a,x,"getRowDefinition:idx");0>a&&w.ra(a,">= 0",x,"getRowDefinition:idx");var a=Math.round(a),b=this.Ie;if(b[a]===f){var c=new fk;c.el(this);c.yl=h;c.ea=a;b[a]=c}return b[a]};x.prototype.removeRowDefinition=x.prototype.XL=function(a){u&&w.o(a,x,"removeRowDefinition:idx");0>a&&w.ra(a,">= 0",x,"removeRowDefinition:idx");var a=Math.round(a),b=this.Ie;b[a]&&(b[a]=f)};w.u(x,{gv:"columnCount"},function(){return this.Ae.length});
x.prototype.getColumnDefinition=x.prototype.Zd=function(a){u&&w.o(a,x,"getColumnDefinition:idx");0>a&&w.ra(a,">= 0",x,"getColumnDefinition:idx");var a=Math.round(a),b=this.Ae;if(b[a]===f){var c=new fk;c.el(this);c.yl=h;c.ea=a;b[a]=c}return b[a]};x.prototype.removeColumnDefinition=x.prototype.WL=function(a){u&&w.o(a,x,"removeColumnDefinition:idx");0>a&&w.ra(a,">= 0",x,"removeColumnDefinition:idx");var a=Math.round(a),b=this.Ae;b[a]&&(b[a]=f)};w.g(x,"rowSizing",x.prototype.qE);
w.defineProperty(x,{qE:"rowSizing"},t("Wq"),function(a){var b=this.Wq;b!==a&&(a!==Mk&&a!==Sk&&w.m("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Wq=a,this.R(),this.j("rowSizing",b,a))});w.g(x,"columnSizing",x.prototype.pC);
w.defineProperty(x,{pC:"columnSizing"},t("ap"),function(a){var b=this.ap;b!==a&&(a!==Mk&&a!==Sk&&w.m("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.ap=a,this.R(),this.j("columnSizing",b,a))});w.g(x,"topIndex",x.prototype.pI);w.defineProperty(x,{pI:"topIndex"},t("xn"),function(a){var b=this.xn;b!==a&&((!isFinite(a)||0>a)&&w.m("topIndex must be greater than zero and a real number. Was "+a),this.xn=a,Aj(this),this.j("topIndex",b,a))});
w.g(x,"leftIndex",x.prototype.hH);w.defineProperty(x,{hH:"leftIndex"},t("$m"),function(a){var b=this.$m;b!==a&&((!isFinite(a)||0>a)&&w.m("leftIndex must be greater than zero and a real number. Was "+a),this.$m=a,Aj(this),this.j("leftIndex",b,a))});w.g(x,"data",x.prototype.data);
w.defineProperty(x,{data:"data"},t("Hm"),function(a){var b=this.Hm;if(b!==a){var c=this instanceof S&&!(this instanceof of);c&&w.k(a,"object",x,"data");xf(this);this.Hm=a;var d=this.h;d!==n&&(c?this instanceof U?(b!==n&&d.ik.remove(b),a!==n&&d.ik.add(a,this)):(b!==n&&d.Th.remove(b),a!==n&&d.Th.add(a,this)):(c=this.fa,c!==n&&c.Mf!==n&&(b!==n&&c.Mf.remove(b),a!==n&&c.Mf.add(a,this))));this.j("data",b,a);d!==n&&d.sa.tb||a!==n&&this.vb()}});function ak(a){a=a.ll;return a!==n&&a.ab}
function xf(a){var b=a.ll;if(b===n)a.data!==n&&w.m("Template cannot have .data be non-null: "+a),a.ll=b=new z(df);else if(b.ab)return;var c=new z(P);Vk(a,a,function(a,d){var e=d.pc;if(e!==n){d.Bm=p;for(var g=e.l;g.next();){e=g.value;e.mode===ff&&(d.Bm=h);var i=e.Ks;if(i!==n){var r=a;""!==i&&(r=a.Pe(i));r!==n&&(c.add(r),r.jr===f&&(r.jr=new z(df)),r.jr.add(e))}b.add(e)}}if(d instanceof x){if(0<d.Ie.length){g=d.Ie;i=g.length;for(r=0;r<i;r++){var s=g[r];if(s!==f&&s.pc!==n)for(var v=s.pc.l;v.next();)e=
v.value,e.Uf=s,e.ly=2,e.Mu=s.index,b.add(e)}}if(0<d.Ae.length){g=d.Ae;i=g.length;for(r=0;r<i;r++)if(s=g[r],s!==f&&s.pc!==n)for(v=s.pc.l;v.next();)e=v.value,e.Uf=s,e.ly=1,e.Mu=s.index,b.add(e)}}});for(var d=c.l;d.next();){var e=d.value;if(e.jr!==f){e.Bm=h;for(var g=e.jr.l;g.next();){var i=g.value;e.pc===n&&(e.pc=new z(df));e.pc.add(i)}}delete e.jr}for(d=b.l;d.next();)e=d.value,g=e.Uf,g!==n&&(e.Uf=n,g===a?e.rm="":(g instanceof fk&&(g=g.fa),e.rm=""!==g.name?g.name:g.name="_"+w.ec(g)));b.freeze();a instanceof
S&&a.be()&&(Ih(a,Infinity,Infinity),a.Dc())}
x.prototype.updateTargetBindings=x.prototype.vb=function(a){var b=this.ll;if(b!==n){a===f&&(a="");for(b=b.l;b.next();){var c=b.value,d=c.$z;if(!(""!==a&&d!==a)&&(d=c.bA,!(c.tC===n&&""===d))){var d=this.data,e=c.Ks;e!==n&&(d=this.Pe(e));if(d===n)u&&w.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var e=this,g=c.rm;if(""!==g){if(e=this.Pe(g),e===n)continue}else c.Uf!==n&&(e=c.Uf);g=c.ly;if(0!==g){if(!(e instanceof x))continue;1===g?e=e.Zd(c.Mu):2===g&&(e=e.$d(c.Mu))}e!==
f&&c.VE(e,d)}}}}};w.g(x,"itemArray",x.prototype.uz);w.defineProperty(x,{uz:"itemArray"},t("vk"),function(a){var b=this.vk;if(b!==a){u&&(a!==n&&!w.isArray(a))&&w.m("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.h;c!==n&&b!==n&&Pi(c,this);this.vk=a;c!==n&&a!==n&&Ni(c,this);this.j("itemArray",b,a);c!==n&&c.sa.tb||this.Oz()}});
x.prototype.rebuildItemElements=x.prototype.Oz=function(){var a=0;if(this.type===ch||this.type===Xh||this.type===Ug)a=1;for(;this.Ga.length>a;)this.se(a);a=this.uz;if(a!==n)for(var b=w.Sb(a),c=0;c<b;c++)Yh(this,w.Eb(a,c))};
function Yh(a,b,c){if(!(b===f||b===n)){var d=a.getCategoryForItemData(b),e=a.findTemplateForItemData(b,d);e instanceof x&&(xf(e),e=e.copy(),"object"===typeof b&&(a.Mf===n&&(a.Mf=new ka(Object,x)),a.Mf.add(b,e)),"number"===typeof c?((a.type===ch||a.type===Xh)&&c++,a.yc(c,e),Xk(e,c),Zh(a,c)):(a.add(e),Xk(e,a.Ga.count-1)),e.Bx=d,e.data=b)}}function Zh(a,b){for(var c=a.Ga,d=b+1;d<c.length;){var e=c.oa(d);e instanceof x&&Xk(e,d);d++}}function Xk(a,b){a.type===wj?a.nc=b:a.type===xj&&(a.Ec=b)}
x.prototype.isItemPanel=x.prototype.YG=function(){return this.vk!==n||this.Cg!==n};w.g(x,"itemTemplate",x.prototype.dH);w.defineProperty(x,{dH:"itemTemplate"},function(){return this.Cg===n?n:this.Cg.qa("")},function(a){this.Cg===n&&(this.Cg=new ka("string",x));var b=this.Cg.qa("");b!==a&&(w.i(a,x,x,"itemTemplate"),a instanceof S&&w.m("itemTemplate must not be a Part: "+a),this.Cg.add("",a),this.j("itemTemplate",b,a),a=this.h,a!==n&&a.sa.tb||this.Oz())});w.g(x,"itemTemplateMap",x.prototype.wD);
w.defineProperty(x,{wD:"itemTemplateMap"},t("Cg"),function(a){var b=this.Cg;if(b!==a){w.i(a,ka,x,"itemTemplateMap");for(var c=a.l;c.next();){var d=c.value;d instanceof S&&w.m("Template in itemTemplateMap must not be a Part: "+d)}this.Cg=a;this.j("itemTemplateMap",b,a);a=this.h;a!==n&&a.sa.tb||this.Oz()}});w.g(x,"itemCategoryProperty",x.prototype.cH);
w.defineProperty(x,{cH:"itemCategoryProperty"},t("Vm"),function(a){var b=this.Vm;b!==a&&("string"!==typeof a&&"function"!==typeof a&&w.ic(a,"string or function",x,"itemCategoryProperty"),this.Vm=a,this.j("itemCategoryProperty",b,a))});
x.prototype.getCategoryForItemData=x.prototype.JK=function(a){if(a===n)return"";var b=this.Vm;if("function"===typeof b)b=b(a);else if("string"===typeof b&&"object"===typeof a){if(""===b)return"";b=w.Va(a,b)}else return"";if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("Panel.getCategoryForItemData found a non-string category for "+a+": "+b);return""};
x.prototype.findTemplateForItemData=x.prototype.zK=function(a,b){var c=this.wD,d=n;c!==n&&(d=c.qa(b));d===n&&(w.xF||(w.xF=h,w.trace('No item template Panel found for category "'+b+'" on '+this),w.trace("  Using default item template."),c=new x,d=new na,d.bind(new df("text","",ke)),c.add(d),w.gF=c),d=w.gF);return d instanceof x?d:n};w.g(x,"isAtomic",x.prototype.VG);
w.defineProperty(x,{VG:"isAtomic"},t("gh"),function(a){var b=this.gh;b!==a&&(w.k(a,"boolean",x,"isAtomic"),this.gh=a,this.j("isAtomic",b,a))});w.g(x,"opacity",x.prototype.opacity);w.defineProperty(x,{opacity:"opacity"},t("mi"),function(a){var b=this.mi;b!==a&&(w.k(a,"number",x,"opacity"),(0>a||1<a)&&w.ra(a,"0 <= val <= 1",x,"opacity"),this.mi=a,this.j("opacity",b,a),a=this.h,a!==n&&Nh(a))});
function fk(){w.jc(this);this.Ak=n;this.yl=h;this.ea=0;this.qf=NaN;this.Hl=0;this.Gl=Infinity;this.Ba=Hb;this.qb=this.Wa=0;this.pc=n;this.gr=Yk;this.qh=eh}w.Q("RowColumnDefinition",fk);fk.prototype.copy=function(){var a=new fk;a.yl=this.yl;a.ea=this.ea;a.qf=this.qf;a.Hl=this.Hl;a.Gl=this.Gl;a.Ba=this.Ba;a.Wa=this.Wa;a.qb=this.qb;a.qh=this.qh;a.gr=this.gr;a.pc=this.pc;return a};var Yk;fk.Default=Yk=w.s(fk,"Default",0);var Sk;fk.None=Sk=w.s(fk,"None",1);var Mk;
fk.ProportionalExtra=Mk=w.s(fk,"ProportionalExtra",2);fk.prototype.el=ba("Ak");function Qk(a,b){a.Wa=isNaN(a.qf)?Math.max(Math.min(a.Gl,b),a.Hl):Math.max(Math.min(a.Gl,a.qf),a.Hl)}fk.prototype.Vd=function(a,b,c,d,e){var g=this.Ak;if(g!==n){g.R();for(var i=this.Kv,j=g.Ga,k=j.length,l=0;l<k;l++){var m=j.n[l];(i?m.nc:m.Ec)===this.index&&m.R()}g.Rc(he,a,this,b,c,d,e);if(this.pc!==n&&(b=g.Yr(),b!==n&&(b=b.data,b!==n)))for(c=this.pc.l;c.next();)c.value.UE(this,b,a,n)}};w.u(fk,{fa:"panel"},t("Ak"));
w.u(fk,{Kv:"isRow"},t("yl"));w.u(fk,{index:"index"},t("ea"));w.g(fk,"height",fk.prototype.height);w.defineProperty(fk,{height:"height"},t("qf"),function(a){var b=this.qf;b!==a&&(u&&w.k(a,"number",fk,"height"),0>a&&w.ra(a,">= 0",fk,"height"),this.qf=a,Qk(this,this.Wa),this.Vd("size",b,a))});w.g(fk,"width",fk.prototype.width);
w.defineProperty(fk,{width:"width"},t("qf"),function(a){var b=this.qf;b!==a&&(u&&w.k(a,"number",fk,"width"),0>a&&w.ra(a,">= 0",fk,"width"),this.qf=a,Qk(this,this.Wa),this.Vd("size",b,a))});w.g(fk,"minimum",fk.prototype.dg);w.defineProperty(fk,{dg:"minimum"},t("Hl"),function(a){var b=this.Hl;b!==a&&(u&&w.k(a,"number",fk,"minimum"),(0>a||!isFinite(a))&&w.ra(a,">= 0",fk,"minimum"),this.Hl=a,Qk(this,this.Wa),this.Vd("minimum",b,a))});w.g(fk,"maximum",fk.prototype.de);
w.defineProperty(fk,{de:"maximum"},t("Gl"),function(a){var b=this.Gl;b!==a&&(u&&w.k(a,"number",fk,"maximum"),0>a&&w.ra(a,">= 0",fk,"maximum"),this.Gl=a,Qk(this,this.Wa),this.Vd("maximum",b,a))});w.g(fk,"alignment",fk.prototype.Db);w.defineProperty(fk,{Db:"alignment"},t("Ba"),function(a){var b=this.Ba;b.I(a)||(u&&w.i(a,H,fk,"alignment"),this.Ba=a.O(),this.Vd("alignment",b,a))});w.g(fk,"stretch",fk.prototype.Jh);
w.defineProperty(fk,{Jh:"stretch"},t("qh"),function(a){var b=this.qh;b!==a&&(u&&w.ib(a,P,fk,"stretch"),this.qh=a,this.Vd("stretch",b,a))});w.g(fk,"sizing",fk.prototype.Is);w.defineProperty(fk,{Is:"sizing"},t("gr"),function(a){var b=this.gr;b!==a&&(u&&w.ib(a,fk,fk,"sizing"),this.gr=a,this.Vd("sizing",b,a))});function Rk(a){if(a.Is===Yk){var b=a.Ak;return a.Kv?b.qE:b.pC}return a.Is}w.u(fk,{jd:"actual"},t("Wa"));w.u(fk,{position:"position"},t("qb"));
fk.prototype.bind=fk.prototype.bind=function(a){a.Uf=this;var b=this.fa;b!==n&&(b=b.Yr(),b!==n&&ak(b)&&w.m("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a));this.pc===n&&(this.pc=new z(df));this.pc.add(a)};
function V(){P.call(this);this.Ha=n;this.xp="None";this.nh=p;this.Fp=eh;this.fk=n;this.lc=this.Ee="black";this.rh=1;this.sn="butt";this.tn="miter";this.un=10;this.lr=n;this.rf=0;this.si=this.ri=Hb;this.Eq=this.Dq=0;this.Op=p;this.Up=h;this.qF=new G;this.Om=this.wn="None";this.Lp=1}w.Q("Shape",V);w.Ea(V,P);
V.prototype.xb=function(a){P.prototype.xb.call(this,a);a.Ha=this.Ha;a.xp=this.xp;a.nh=this.nh;a.Fp=this.Fp;a.fk=this.fk;a.Ee=this.Ee;a.lc=this.lc;a.rh=this.rh;a.sn=this.sn;a.tn=this.tn;a.un=this.un;a.lr=this.lr;a.rf=this.rf;a.ri=this.ri.O();a.si=this.si.O();a.Dq=this.Dq;a.Eq=this.Eq;a.Op=this.Op;a.Up=this.Up;a.wn=this.wn;a.Om=this.Om;a.Lp=this.Lp};V.prototype.toString=function(){return"Shape("+("None"!==this.rb?this.rb:"None"!==this.um?this.um:this.Bv)+")#"+w.ec(this)};
V.prototype.Xn=function(a){if(!(this.lc===n&&this.Ee===n)){this.Ee!==n&&yj(this,a,this.Ee,h);this.lc!==n&&yj(this,a,this.lc,p);var b=this.rh;if(0===b){var c=this.ca;c instanceof of&&(c.type===Ug&&c.Cc instanceof V)&&(b=c.Cc.Za)}a.lineWidth=b;a.lineJoin=this.tn;a.lineCap=this.sn;a.miterLimit=this.un;var d=p;this.ca&&(d=this.ca.jo);var e=h;this.lc!==n&&this.Ee===n&&(e=p);b=p;c=this.EE;if(c!==n){var g=b=h;a.setLineDash!==f?(a.setLineDash(c),a.lineDashOffset=this.rf):a.webkitLineDash!==f?(a.webkitLineDash=
c,a.webkitLineDashOffset=this.rf):a.mozDash!==f?(a.mozDash=c,a.mozDashOffset=this.rf):g=p}var i=this.Ha;if(i!==n){if(i.T===md)a.beginPath(),b&&!g?Zk(a,i.Cb,i.Ob,i.Bc,i.Ic,c,this.rf):(a.moveTo(i.Cb,i.Ob),a.lineTo(i.Bc,i.Ic)),this.Ee!==n&&a.fill(),this.lc!==n&&a.stroke();else if(i.T===qd){var j=i.Cb,k=i.Ob,l=i.Bc,i=i.Ic,m=Math.min(j,l),q=Math.min(k,i),j=Math.abs(l-j),k=Math.abs(i-k);this.Ee!==n&&a.fillRect(m,q,j,k);if(this.lc!==n){if(e&&d){var r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=
0;a.shadowOffsetY=0;a.shadowBlur=0}b&&!g?(g=[[m,q],[m+j,q],[m+j,q+k],[m,q+k],[m,q]],a.beginPath(),$k(a,g,c,this.rf),a.stroke()):a.strokeRect(m,q,j,k);e&&d&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2])}}else if(i.T===rd)j=i.Cb,k=i.Ob,l=i.Bc,i=i.Ic,m=Math.abs(l-j)/2,q=Math.abs(i-k)/2,j=Math.min(j,l)+m,k=Math.min(k,i)+q,a.beginPath(),a.moveTo(j,k-q),a.bezierCurveTo(j+ic*m,k-q,j+m,k-ic*q,j+m,k),a.bezierCurveTo(j+m,k+ic*q,j+ic*m,k+q,j,k+q),a.bezierCurveTo(j-ic*m,k+q,j-m,k+ic*q,j-m,k),
a.bezierCurveTo(j-m,k-ic*q,j-ic*m,k-q,j,k-q),a.closePath(),this.Ee!==n&&a.fill(),b&&!g&&(g=[],Cc(j,k-q,j+ic*m,k-q,j+m,k-ic*q,j+m,k,0.5,g),Cc(j+m,k,j+m,k+ic*q,j+ic*m,k+q,j,k+q,0.5,g),Cc(j,k+q,j-ic*m,k+q,j-m,k+ic*q,j-m,k,0.5,g),Cc(j-m,k,j-m,k-ic*q,j-ic*m,k-q,j,k-q,0.5,g),a.beginPath(),$k(a,g,c,this.rf)),this.lc!==n&&(e&&d&&(r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),e&&d&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2]));
else if(i.T===id){for(var m=i.lk,q=m.length,s=0;s<q;s++){var v=m.n[s];a.beginPath();a.moveTo(v.ma,v.na);for(var y=v.Aa.n,C=y.length,E=n,I=0;I<C;I++){var D=y[I];switch(D.T){case Jd:a.moveTo(D.C,D.D);break;case td:a.lineTo(D.C,D.D);break;case Kd:a.bezierCurveTo(D.lf,D.mf,D.oi,D.pi,D.Rf,D.Sf);break;case Ld:a.quadraticCurveTo(D.lf,D.mf,D.Rf,D.Sf);break;case Md:if(D.radiusX===D.radiusY)E=Math.PI/180,a.arc(D.Cm,D.Dm,D.radiusX,D.og*E,(D.og+D.Kh)*E,0>D.Kh?h:p);else for(var E=Od(D,v),M=E.length,N=0;N<M;N++){var Z=
E[N];0===N&&a.lineTo(Z.x1,Z.y1);a.bezierCurveTo(Z.x2,Z.y2,Z.Gf,Z.Hf,Z.$c,Z.ad)}break;case Fd:E&&E.type===Md?(E=Od(E,v),E=E[E.length-1]||n,E!==n&&(j=E.$c,l=E.ad)):(j=E?E.C:v.ma,l=E?E.D:v.na);E=Pd(D,v,j,l);M=E.length;for(N=0;N<M;N++)Z=E[N],a.bezierCurveTo(Z.x2,Z.y2,Z.Gf,Z.Hf,Z.$c,Z.ad);break;default:w.m("Segment not of valid type")}D.ai&&a.closePath();E=D}d?v.Lf?(v.wl===h&&this.Ee!==n?(a.fill(),e=h):e=p,this.lc!==n&&(e&&(r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=
0,a.shadowBlur=0),(!b||g)&&a.stroke(),e&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2]))):(e&&(r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),v.wl===h&&this.Ee!==n&&a.fill(),this.lc!==n&&(!b||g)&&a.stroke(),e&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2])):(v.wl===h&&this.Ee!==n&&a.fill(),this.lc!==n&&(!b||g)&&a.stroke())}if(b&&!g){r=e;g=i.lk;e=g.length;for(i=0;i<e;i++){j=g.n[i];a.beginPath();l=[];l.push([j.ma,j.na]);
m=j.ma;q=j.na;s=m;v=q;y=j.Aa.n;C=y.length;for(I=0;I<C;I++){D=y[I];switch(D.T){case Jd:$k(a,l,c,this.rf);l=[];l.push([D.C,D.D]);m=D.C;q=D.D;s=m;v=q;break;case td:l.push([D.C,D.D]);m=D.C;q=D.D;break;case Kd:E=[];Cc(m,q,D.lf,D.mf,D.oi,D.pi,D.Rf,D.Sf,0.5,E);l=l.concat(E);m=D.C;q=D.D;break;case Ld:E=[];Hc(m,q,D.lf,D.mf,D.Rf,D.Sf,0.5,E);l=l.concat(E);m=D.C;q=D.D;break;case Md:M=Od(D,j);N=M.length;for(Z=0;Z<N;Z++){var va=M[Z],E=[];Cc(m,q,va.x2,va.y2,va.Gf,va.Hf,va.$c,va.ad,0.5,E);l=l.concat(E);m=va.$c;q=
va.ad}break;case Fd:M=Pd(D,j,m,q);N=M.length;for(Z=0;Z<N;Z++)va=M[Z],E=[],Cc(m,q,va.x2,va.y2,va.Gf,va.Hf,va.$c,va.ad,0.5,E),l=l.concat(E),m=va.$c,q=va.ad;break;default:w.m("Segment not of valid type")}D.ai&&(l.push([s,v]),$k(a,l,c,this.rf))}$k(a,l,c,this.rf);this.lc!==n&&(r&&d&&(k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),r&&d&&(a.shadowOffsetX=k[0],a.shadowOffsetY=k[1],a.shadowBlur=k[2]))}}}b&&(a.setLineDash!==f?(a.setLineDash(n),
a.lineDashOffset=0):a.webkitLineDash!==f?(a.webkitLineDash=[],a.webkitLineDashOffset=0):a.mozDash!==f&&(a.mozDash=n,a.mozDashOffset=0))}}};function Zk(a,b,c,d,e,g,i){var j=0.001,k=g.length;a.moveTo(b,c);d-=b;j=e-c;0===d&&(d=0.001);for(var e=j/d,l=Math.sqrt(d*d+j*j),m=0,q=h,r=0===i?p:h;0.1<=l;){r?(j=g[m++%k],i%=j,j-=i,r=p):j=g[m++%k];j>l&&(j=l);var s=Math.sqrt(j*j/(1+e*e));0>d&&(s=-s);b+=s;c+=e*s;q?a.lineTo(b,c):a.moveTo(b,c);l-=j;q=!q}}
function $k(a,b,c,d){var e=0.001,g=c.length,i,j,k,l=b.length;if(!(2>l))if(i=b[0][0],j=b[0][1],2===l)Zk(a,i,j,b[1][0],b[1][1],c,d);else{a.moveTo(i,j);for(var m,q,r,s=0,v=[],y=1;y<l;y++)m=b[y],e=m[0],k=m[1],m=e-i,i=k-j,0===m&&(m=0.001),q=i/m,i=Math.sqrt(m*m+i*i),v.push([m,q,i]),s+=i,i=e,j=k;i=b[0][0];j=b[0][1];b=0;l=h;e=c[b%g];y=0===d?p:h;k=0;r=v[k];m=r[0];q=r[1];r=r[2];for(var C=0;0.1<=s;){0===C&&(y?(e=c[b%g],b++,d%=e,e-=d,y=p):(e=c[b%g],b++));e>s&&(e=s);e>r?(C=e-r,e=r):C=0;var E=Math.sqrt(e*e/(1+
q*q));0>m&&(E=-E);i+=E;j+=q*E;l?a.lineTo(i,j):a.moveTo(i,j);s-=e;r-=e;if(0!==C){k++;if(k===v.length)break;r=v[k];m=r[0];q=r[1];r=r[2];e=C}else l=!l}}}V.prototype.getDocumentPoint=V.prototype.Ab=function(a){zb(a)&&w.m("Spot must be real");var b=this.Sa,c=this.Za,a=new F(a.x*(b.width+c)-c/2+b.x+a.offsetX,a.y*(b.height+c)-c/2+b.y+a.offsetY);this.je.Ta(a);return a};
V.prototype.zj=function(a,b){var c=this.Ha;if(c===n||this.fill===n&&this.stroke===n)return p;var d=c.Fb,e=this.Za/2;c.type===md&&!b&&(e+=2);var g=this.qF;g.set(d);g.Pg(e+2,e+2);if(!g.ua(a))return p;d=e+1E-4;if(c.type===md){if(this.stroke===n)return p;d=(c.C-c.ma)*(a.x-c.ma)+(c.D-c.na)*(a.y-c.na);return 0>(c.ma-c.C)*(a.x-c.C)+(c.na-c.D)*(a.y-c.D)||0>d?p:uc(c.ma,c.na,c.C,c.D,e,a.x,a.y)}if(c.type===qd){var i=c.ma,j=c.na,k=c.C,l=c.D,c=Math.min(i,k),m=Math.min(j,l),i=Math.abs(k-i),j=Math.abs(l-j);g.x=
c;g.y=m;g.width=i;g.height=j;if(this.fill===n){g.Pg(-d,-d);if(g.ua(a))return p;g.Pg(d,d)}this.stroke!==n&&g.Pg(e,e);return g.ua(a)}if(c.type===rd){i=c.ma;j=c.na;k=c.C;l=c.D;c=Math.min(i,k);m=Math.min(j,l);i=Math.abs(k-i);j=Math.abs(l-j);g=i/2;j/=2;c=a.x-(c+g);m=a.y-(m+j);if(this.fill===n){g-=d;j-=d;if(0>=g||0>=j||1>=c*c/(g*g)+m*m/(j*j))return p;g+=d;j+=d}this.stroke!==n&&(g+=e,j+=e);return 0>=g||0>=j?p:1>=c*c/(g*g)+m*m/(j*j)}if(c.type===id)return this.fill===n?Zd(c,a.x,a.y,e):c.ua(a,e,1<this.Za,b);
w.m("Unknown Geometry type");return p};
V.prototype.os=function(a,b,c,d){var e=this.xa,g=this.rh,a=Math.max(a,0),b=Math.max(b,0),i;if(this.nh)i=this.Ha.Fb;else{var j=this.rb,k=al[j];if(k===f){var l=bl[j];l?(k=l(n,100,100),al[j]=k):w.m("Unsupported Figure:"+j)}i=k.Fb}var j=i.width,k=i.height,l=i.width,m=i.height;switch(pj(this)){case jj:d=c=0;break;case kd:l=Math.max(a-g,0);m=Math.max(b-g,0);break;case lj:l=Math.max(a-g,0);d=0;break;case kj:c=0,m=Math.max(b-g,0)}isFinite(e.width)&&(l=e.width);isFinite(e.height)&&(m=e.height);e=this.ce;i=
this.we;c=Math.max(c,i.width)-g;d=Math.max(d,i.height)-g;l=Math.min(e.width,l);m=Math.min(e.height,m);l=isFinite(l)?Math.max(c,l):Math.max(j,c);m=isFinite(m)?Math.max(d,m):Math.max(k,d);c=this.Cv;c=this.nh?c===eh?kd:c:c===eh?al[this.rb].Zb:c;switch(c){case jj:break;case kd:j=l;k=m;break;case fh:c=Math.min(l/j,m/k);isFinite(c)||(c=1);j*=c;k*=c;break;default:w.m(c+" is not a valid geometryStretch.")}if(this.nh){i=this.Xc;d=j;e=k;c=i.copy();i=i.Fb;d/=i.width;e/=i.height;isFinite(d)||(d=1);isFinite(e)||
(e=1);if(!(1===d&&1===e)){switch(c.type){case md:case qd:case rd:c.Cb*=d;c.Ob*=e;c.Bc*=d;c.Ic*=e;break;case id:i=c.sb;for(var q=i.length,r=0;r<q;r++){var s=i.n[r];s.ma*=d;s.na*=e;for(var s=s.Aa,v=s.length,y=0;y<v;y++){var C=s.n[y];switch(C.type){case td:case Jd:C.C*=d;C.D*=e;break;case Kd:C.lf*=d;C.mf*=e;C.oi*=d;C.pi*=e;C.C*=d;C.D*=e;break;case Ld:C.Ub*=d;C.Ac*=e;C.C*=d;C.D*=e;break;case Md:C.pa*=d;C.ta*=e;C.radiusX*=d;C.radiusY!==f&&(C.radiusY*=e);break;case Fd:C.C*=d;C.D*=e;C.radiusX*=d;C.radiusY*=
e;break;default:w.m("Unknown Segment type: "+C.type)}}}}c.Ma=h}this.Ha=c}else if(this.Ha===n||this.Ha.Lt!==a||this.Ha.Kt!==b)c=j,d=k,i=this.xa,e=i.width,i=i.height,c!==f&&(!isNaN(c)&&isFinite(c))&&(e=c),d!==f&&(!isNaN(d)&&isFinite(d))&&(i=d),isFinite(e)||(e=100),isFinite(i)||(i=100),q=f,"None"!==this.um?q=cl(this.um):"None"!==this.Bv?q=cl(this.Bv):(r=bl[this.rb],"string"===typeof r&&(r=bl[r]),r===f&&w.m("Unknown Shape.figure: "+this.rb),q=r(this,e,i),q.Ud=new bb(e,i)),q===f&&(r=bl.Rectangle)&&(q=
r(this,e,i)),q.Lt=c,q.Kt=d,this.Ha=q;i=this.Ha.Fb;Infinity===a||Infinity===b?mj(this,i.x-g/2,i.y-g/2,0===a&&0===j?0:i.width+g,0===b&&0===k?0:i.height+g):mj(this,-(g/2),-(g/2),l+g,m+g)};
function Tk(a,b,c){if(a.$b!==p){a.Vc.Ia();var d=a.rh;if(0===d){var e=a.ca;e instanceof of&&(e.type===Ug&&e.Cc instanceof V)&&(d=e.Cc.Za)}d*=a.bc;mj(a,-(d/2),-(d/2),b+d,c+d);b=a.Vc;c=a.ce;d=a.we;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.Vc.freeze();a.Vc.P()||w.m("Non-real measuredBounds has been set");a.$b=p}}V.prototype.yj=function(a,b,c,d){sj(this,a,b,c,d)};
V.prototype.getNearestIntersectionPoint=V.prototype.$C=function(a,b,c){return this.bs(a.x,a.y,b.x,b.y,c)};
V.prototype.bs=function(a,b,c,d,e){var g=this.transform,i=1/(g.m11*g.m22-g.m12*g.m21),j=g.m22*i,k=-g.m12*i,l=-g.m21*i,m=g.m11*i,q=i*(g.m21*g.dy-g.m22*g.dx),r=i*(g.m12*g.dx-g.m11*g.dy),g=a*j+b*l+q,i=a*k+b*m+r,j=c*j+d*l+q,k=c*k+d*m+r,l=this.Za/2,q=this.Ha;q===n&&(Ih(this,Infinity,Infinity),q=this.Ha);r=q.Fb;m=p;if(q.type===md)if(1.5>=this.Za)m=Lc(q.Cb,q.Ob,q.Bc,q.Ic,g,i,j,k,e);else{var s;q.Cb===q.Bc?(s=l,r=0):(b=(q.Ic-q.Ob)/(q.Bc-q.Cb),r=l/Math.sqrt(1+b*b),s=r*b);b=[];d=new F;Lc(q.Cb+s,q.Ob+r,q.Bc+
s,q.Ic+r,g,i,j,k,d)&&b.push(d);d=new F;Lc(q.Cb-s,q.Ob-r,q.Bc-s,q.Ic-r,g,i,j,k,d)&&b.push(d);d=new F;Lc(q.Cb+s,q.Ob+r,q.Cb-s,q.Ob-r,g,i,j,k,d)&&b.push(d);d=new F;Lc(q.Bc+s,q.Ic+r,q.Bc-s,q.Ic-r,g,i,j,k,d)&&b.push(d);d=b.length;if(0===d)return p;m=h;r=Infinity;for(s=0;s<d;s++){var j=b[s],v=(j.x-g)*(j.x-g)+(j.y-i)*(j.y-i);v<r&&(r=v,e.x=j.x,e.y=j.y)}}else if(q.type===qd)d=r.x-l,m=Sc(d,r.y-l,r.x+r.width+l,r.y+r.height+l,g,i,j,k,e);else if(q.type===rd)a:if(b=r.copy().Pg(l,l),0===b.width)m=Lc(b.x,b.y,b.x,
b.y+b.height,g,i,j,k,e);else if(0===b.height)m=Lc(b.x,b.y,b.x+b.width,b.y,g,i,j,k,e);else{var a=b.width/2,y=b.height/2,d=b.x+a,b=b.y+y,c=9999;g!==j&&(c=(i-k)/(g-j));if(9999>Math.abs(c)){m=i-b-c*(g-d);if(0>a*a*c*c+y*y-m*m){e.x=NaN;e.y=NaN;m=p;break a}l=Math.sqrt(a*a*c*c+y*y-m*m);j=(-(a*a*c*m)+a*y*l)/(y*y+a*a*c*c)+d;a=(-(a*a*c*m)-a*y*l)/(y*y+a*a*c*c)+d;k=c*(j-d)+m+b;b=c*(a-d)+m+b;d=Math.abs((g-j)*(g-j))+Math.abs((i-k)*(i-k));i=Math.abs((g-a)*(g-a))+Math.abs((i-b)*(i-b));d<i?(e.x=j,e.y=k):(e.x=a,e.y=
b)}else{j=y*y;k=g-d;j-=j/(a*a)*k*k;if(0>j){e.x=NaN;e.y=NaN;m=p;break a}l=Math.sqrt(j);k=b+l;b-=l;d=Math.abs(k-i);i=Math.abs(b-i);d<i?(e.x=g,e.y=k):(e.x=g,e.y=b)}m=h}else if(q.type===id){var C,E,I,D=new F;s=j-g;r=k-i;r=s*s+r*r;e.x=j;e.y=k;for(s=0;s<q.sb.count;s++){var M=q.sb.n[s],N=M.Aa;C=M.ma;E=M.na;for(var Z=C,va=E,la,ta,Ea=0;Ea<N.count;Ea++){la=N.n[Ea];ta=la.type;v=la.C;I=la.D;var Ha=p;switch(ta){case Jd:Z=v;va=I;break;case td:Ha=dl(C,E,v,I,g,i,j,k,D);break;case Kd:Ha=la.Ub;ta=la.Ac;var cb=la.lg,
rb=la.mg,Ha=Ic(C,E,Ha,ta,cb,rb,v,I,g,i,j,k,0.5,D);break;case Ld:Ha=(C+2*la.Ub)/3;ta=(E+2*la.Ac)/3;cb=(2*la.Ub+v)/3;rb=(2*la.Ub+v)/3;Ha=Ic(C,E,Ha,ta,cb,rb,v,I,g,i,j,k,0.5,D);break;case Md:case Fd:I=la.type===Md?Od(la,M):Pd(la,M,C,E);ta=I.length;for(s=0;s<ta;s++)y=I[s],0===s&&dl(C,E,y.x1,y.y1,g,i,j,k,D)&&(v=el(g,i,D,r,e),v<r&&(r=v,m=h)),Ic(y.x1,y.y1,y.x2,y.y2,y.Gf,y.Hf,y.$c,y.ad,g,i,j,k,0.5,D)&&(v=el(g,i,D,r,e),v<r&&(r=v,m=h));v=y.$c;I=y.ad;break;default:w.m("Unknown Segment type: "+la.type)}C=v;E=
I;Ha&&(v=el(g,i,D,r,e),v<r&&(r=v,m=h));la.Gv&&(v=Z,I=va,dl(C,E,v,I,g,i,j,k,D)&&(v=el(g,i,D,r,e),v<r&&(r=v,m=h)))}}g=c-a;i=d-b;d=Math.sqrt(g*g+i*i);e.x-=g/d*l;e.y-=i/d*l}else w.m("Invalid Geometry type");if(!m)return p;d=kb(this.transform,e);e.x=d.x;e.y=d.y;return h};function el(a,b,c,d,e){a=c.x-a;b=c.y-b;b=a*a+b*b;return b<d?(e.x=c.x,e.y=c.y,b):d}
function dl(a,b,c,d,e,g,i,j,k){var l=p,m=(e-i)*(b-d)-(g-j)*(a-c);if(0===m)return p;k.x=((e*j-g*i)*(a-c)-(e-i)*(a*d-b*c))/m;k.y=((e*j-g*i)*(b-d)-(g-j)*(a*d-b*c))/m;if((a>c?a-c:c-a)<(b>d?b-d:d-b)){if(e=b<d?b:d,a=b<d?d:b,(k.y>e||Ta(k.y,e))&&(k.y<a||Ta(k.y,a)))l=h}else if(e=a<c?a:c,a=a<c?c:a,(k.x>e||Ta(k.x,e))&&(k.x<a||Ta(k.x,a)))l=h;return l}
V.prototype.containedInRect=V.prototype.lv=function(a,b){if(b===f)return a.Xl(this.wa);var c=this.Ha;c===n&&(Ih(this,Infinity,Infinity),c=this.Ha);var c=c.Fb,d=this.Za/2;return!a.ua(b.Ta(new F(c.x-d,c.y-d)))||!a.ua(b.Ta(new F(c.x-d,c.bottom+d)))||!a.ua(b.Ta(new F(c.right+d,c.bottom+d)))||!a.ua(b.Ta(new F(c.right+d,c.y-d)))?p:h};
V.prototype.intersectsRect=V.prototype.Se=function(a,b){function c(a,b){k.x=a*d.m11+b*d.m21+d.dx;k.y=a*d.m12+b*d.m22+d.dy}if(this.lv(a,b)||b===f&&(b=this.transform,a.Xl(this.wa)))return h;var d=b.copy();d.pD();var e=a.left,g=a.right,i=a.top,j=a.bottom,k=new F;c(e,i);if(this.zj(k,h))return h;c(g,i);if(this.zj(k,h))return h;c(e,j);if(this.zj(k,h))return h;c(g,j);if(this.zj(k,h))return h;var l=new F,m=new F;d.set(b);d.tH(this.transform);d.pD();l.x=g;l.y=i;l.transform(d);k.x=e;k.y=i;k.transform(d);if(fl(this,
k,l,m))return h;k.x=g;k.y=j;k.transform(d);if(fl(this,k,l,m))return h;l.x=e;l.y=j;l.transform(d);if(fl(this,k,l,m))return h;k.x=e;k.y=i;k.transform(d);return fl(this,k,l,m)?h:p};function fl(a,b,c,d){if(!a.$C(b,c,d))return p;var a=b.x,b=b.y,e=c.x,g=c.y,c=d.x,d=d.y;if(a===e){var i;b<g?(i=b,a=g):(i=g,a=b);return d>=i&&d<=a}a<e?(i=a,a=e):i=e;return c>=i&&c<=a}
V.prototype.RC=function(a,b){if(this.fill!==n&&this.zj(a,h))return h;var c=a.am(b),d=c;1.5<this.Za&&(c=this.Za/2+Math.sqrt(c),c*=c);var e=this.Ha;e===n&&(Ih(this,Infinity,Infinity),e=this.Ha);var g=e.Cb,i=e.Ob,j=e.Bc,k=e.Ic;if(e.type===md){var e=$a(a.x,a.y,g,i,j,k),l=(g-j)*(a.x-j)+(i-k)*(a.y-k);if(e<=(0<=(j-g)*(a.x-g)+(k-i)*(a.y-i)&&0<=l?c:d))return h}else if(e.type===qd){if($a(a.x,a.y,g,i,g,k)<=c||$a(a.x,a.y,g,i,j,i)<=c||$a(a.x,a.y,j,i,j,k)<=c||$a(a.x,a.y,g,k,j,k)<=c)return h}else if(e.type===rd){var e=
a.x-(g+j)/2,d=a.y-(i+k)/2,l=Math.abs(j-g)/2,m=Math.abs(k-i)/2;if(0===l||0===m)return e=$a(a.x,a.y,g,i,j,k),e<=c?h:p;g=new F(Infinity,Infinity);Rc(e,d,0,0,-l,-m,l,m,g);Rc(e,d,0,m,-l,-m,l,m,g);Rc(e,d,0,-m,-l,-m,l,m,g);Rc(e,d,0,l,-l,-m,l,m,g);Rc(e,d,0,-l,-l,-m,l,m,g);Rc(e,d,l/2,m/2,-l,-m,l,m,g);Rc(e,d,-l/2,m/2,-l,-m,l,m,g);Rc(e,d,l/2,-m/2,-l,-m,l,m,g);Rc(e,d,-l/2,-m/2,-l,-m,l,m,g);if((g.x-e)*(g.x-e)+(g.y-d)*(g.y-d)<c)return h}else if(e.type===id){k=e.Fb;g=k.x;i=k.y;j=k.x+k.width;k=k.y+k.height;if(a.x>
j&&a.x<g&&a.y>k&&a.y<i&&$a(a.x,a.y,g,i,g,k)>c&&$a(a.x,a.y,g,i,j,i)>c&&$a(a.x,a.y,j,k,g,k)>c&&$a(a.x,a.y,j,k,j,i)>c)return p;c=Math.sqrt(c);if(this.fill===n?Zd(e,a.x,a.y,c):e.ua(a,c,h))return h}return p};w.g(V,"geometry",V.prototype.Xc);w.defineProperty(V,{Xc:"geometry"},function(){return this.fk?this.fk:this.Ha},function(a){var b=this.Ha;b!==a&&(a!==n?(u&&w.i(a,hd,V,"geometry"),this.fk=this.Ha=a.freeze()):this.fk=this.Ha=n,this.nh=h,this.R(),this.j("geometry",b,a))});w.g(V,"geometryString",V.prototype.WC);
w.defineProperty(V,{WC:"geometryString"},function(){return this.Xc.toString()},function(a){var b=xd(a),a=b.normalize();this.Xc=b;b=this.position;this.position=b.P()?new F(b.x-a.x,b.y-a.y):new F(-a.x,-a.y)});w.defineProperty(V,{pz:"isGeometryPositioned"},t("Op"),function(a){u&&w.k(a,"boolean",V,"isGeometryPositioned");var b=this.Op;b!==a&&(this.Op=a,this.R(),this.j("isGeometryPositioned",b,a))});V.prototype.$f=function(){this.nh?this.fk=n:this.Ha=n;this.R()};w.g(V,"fill",V.prototype.fill);
w.defineProperty(V,{fill:"fill"},t("Ee"),function(a){var b=this.Ee;if(b!==a&&(a===n||"string"===typeof a||a instanceof Fe))a instanceof Fe&&a.freeze(),this.Ee=a,vj(this),this.j("fill",b,a)});w.g(V,"stroke",V.prototype.stroke);w.defineProperty(V,{stroke:"stroke"},t("lc"),function(a){var b=this.lc;if(b!==a&&(a===n||"string"===typeof a||a instanceof Fe))a instanceof Fe&&a.freeze(),this.lc=a,vj(this),this.j("stroke",b,a)});w.g(V,"strokeWidth",V.prototype.Za);
w.defineProperty(V,{Za:"strokeWidth"},t("rh"),function(a){var b=this.rh;b!==a&&(u&&w.o(a,V,"strokeWidth"),0<=a&&(this.rh=a,this.R(),this.j("strokeWidth",b,a)))});w.g(V,"strokeCap",V.prototype.DE);w.defineProperty(V,{DE:"strokeCap"},t("sn"),function(a){var b=this.sn;b!==a&&("string"===typeof a&&("butt"===a||"round"===a||"square"===a)?(this.sn=a,vj(this),this.j("strokeCap",b,a)):w.ra(a,'"butt", "round", or "square"',V,"strokeCap"))});w.g(V,"strokeJoin",V.prototype.gI);
w.defineProperty(V,{gI:"strokeJoin"},t("tn"),function(a){var b=this.tn;b!==a&&("string"===typeof a&&("miter"===a||"bevel"===a||"round"===a)?(this.tn=a,vj(this),this.j("strokeJoin",b,a)):w.ra(a,'"miter", "bevel", or "round"',V,"strokeJoin"))});w.g(V,"strokeMiterLimit",V.prototype.hI);w.defineProperty(V,{hI:"strokeMiterLimit"},t("un"),function(a){var b=this.un;b!==a&&(u&&w.o(a,V,"strokeMiterLimit"),0<a&&(this.un=a,vj(this),this.j("strokeMiterLimit",b,a)))});w.g(V,"strokeDashArray",V.prototype.EE);
w.defineProperty(V,{EE:"strokeDashArray"},t("lr"),function(a){var b=this.lr;b!==a&&(this.lr=a,vj(this),this.j("strokeDashArray",b,a))});w.g(V,"strokeDashOffset",V.prototype.fI);w.defineProperty(V,{fI:"strokeDashOffset"},t("rf"),function(a){var b=this.rf;b!==a&&(u&&w.o(a,V,"strokeDashOffset"),0<a&&(this.rf=a,vj(this),this.j("strokeDashOffset",b,a)))});w.g(V,"figure",V.prototype.rb);
w.defineProperty(V,{rb:"figure"},t("xp"),function(a){var b=this.xp;if(b!==a){u&&w.k(a,"string",V,"figure");var c=bl[a];"function"===typeof c?c=a:(c=bl[a.toLowerCase()])||w.m("Unknown Shape.figure: "+a);b!==c&&(this.xp=c,this.nh=p,this.$f(),this.j("figure",b,c))}});w.g(V,"toArrow",V.prototype.um);
w.defineProperty(V,{um:"toArrow"},t("wn"),function(a){var b=this.wn;a===h?a="Standard":a===p&&(a="None");if(b!==a){u&&w.k(a,"string",V,"toArrow");var c=cl(a);c instanceof hd?c=a:(c=cl(a.toLowerCase()))||w.m("Unknown Shape.toArrow: "+a);b!==c&&(this.wn=c,this.nh=p,this.$f(),gl(this,c),this.j("toArrow",b,c))}});w.g(V,"fromArrow",V.prototype.Bv);
w.defineProperty(V,{Bv:"fromArrow"},t("Om"),function(a){var b=this.Om;a===h?a="Standard":a===p&&(a="None");if(b!==a){u&&w.k(a,"string",V,"fromArrow");var c=cl(a);c instanceof hd?c=a:(c=cl(a.toLowerCase()))||w.m("Unknown Shape.fromArrow: "+a);b!==c&&(this.Om=c,this.nh=p,this.$f(),gl(this,c),this.j("fromArrow",b,c))}});
function gl(a,b){var c=a.h;if(!(c!==n&&c.sa.tb)){a.Es=hl;c=Zb;switch(b){case "halfarrowtop":c=Rb;break;case "halftriangletop":c=Rb;break;case "openrighttriangletop":c=Rb;break;case "opentriangletop":c=Rb}"None"!==a.wn?(a.Hh=-1,a.uj=c):"None"!==a.Om&&(a.Hh=0,a.uj=new H(1-c.x,c.y))}}w.defineProperty(V,{v:"spot1"},t("ri"),function(a){w.i(a,H,V,"spot1");var b=this.ri;b.I(a)||(this.ri=a=a.O(),this.R(),this.j("spot1",b,a))});
w.defineProperty(V,{w:"spot2"},t("si"),function(a){w.i(a,H,V,"spot2");var b=this.si;b.I(a)||(this.si=a=a.O(),this.R(),this.j("spot2",b,a))});w.defineProperty(V,{gc:"parameter1"},t("Dq"),function(a){var b=this.Dq;b!==a&&(this.Dq=a,this.R(),this.j("parameter1",b,a))});w.defineProperty(V,{ys:"parameter2"},t("Eq"),function(a){var b=this.Eq;b!==a&&(this.Eq=a,this.R(),this.j("parameter2",b,a))});
w.u(V,{Sa:"naturalBounds"},function(){if(this.Ha!==n)return this.Lc.Ua(this.Ha.Fb),this.Lc;var a=this.xa;return new G(0,0,a.width,a.height)});w.g(V,"isRectangular",V.prototype.$G);w.defineProperty(V,{$G:"isRectangular"},t("Up"),function(a){var b=this.Up;b!==a&&(u&&w.k(a,"boolean",V,"isRectangular"),this.Up=a,this.R(),this.j("isRectangular",b,a))});w.g(V,"geometryStretch",V.prototype.Cv);
w.defineProperty(V,{Cv:"geometryStretch"},t("Fp"),function(a){var b=this.Fp;b!==a&&(w.ib(a,P,V,"geometryStretch"),this.Fp=a,this.j("geometryStretch",b,a))});w.g(V,"interval",V.prototype.Hi);w.defineProperty(V,{Hi:"interval"},t("Lp"),function(a){var b=this.Lp;u&&w.o(a,V,"interval");a=Math.floor(a);b!==a&&0<=a&&(this.Lp=a,this.R(),this.j("interval",b,a))});
function na(){P.call(this);this.Md="";this.lc="black";this.$i="13px sans-serif";this.sf="start";this.Rp=h;this.zl=this.Al=p;this.Ql=il;this.Xt=this.El=0;this.mk=this.Fx=this.Gx=n;this.dq={};this.vp=p;this.De=this.tj=this.pr=n}w.Q("TextBlock",na);w.Ea(na,P);
na.prototype.xb=function(a){P.prototype.xb.call(this,a);a.Md=this.Md;a.lc=this.lc;a.$i=this.$i;a.sf=this.sf;a.Rp=this.Rp;a.Al=this.Al;a.zl=this.zl;a.Ql=this.Ql;a.El=this.El;a.Xt=this.Xt;a.Gx=this.Gx;a.Fx=this.Fx;a.mk=this.mk;a.dq=this.dq;a.vp=this.vp;a.pr=this.pr;a.tj=this.tj;a.De=this.De};na.prototype.toString=function(){return 22<this.Md.length?'TextBlock("'+this.Md.substring(0,20)+'"...)':'TextBlock("'+this.Md+'")'};var jl;na.None=jl=w.s(na,"None",0);var kl;na.WrapFit=kl=w.s(na,"WrapFit",1);var il;
na.WrapDesiredSize=il=w.s(na,"WrapDesiredSize",2);na.prototype.R=function(){P.prototype.R.call(this);this.mk=this.Fx=this.Gx=n};w.g(na,"font",na.prototype.font);w.defineProperty(na,{font:"font"},t("$i"),function(a){var b=this.$i;b!==a&&(u&&w.k(a,"string",na,"font"),this.$i=a,this.R(),this.j("font",b,a))});w.g(na,"text",na.prototype.text);w.defineProperty(na,{text:"text"},t("Md"),function(a){var b=this.Md,a=a!==n&&a!==f?a.toString():"";b!==a&&(this.Md=a,this.R(),this.j("text",b,a))});
w.g(na,"textAlign",na.prototype.textAlign);w.defineProperty(na,{textAlign:"textAlign"},t("sf"),function(a){var b=this.sf;b!==a&&(u&&w.k(a,"string",na,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.sf=a,vj(this),this.j("textAlign",b,a)):w.ra(a,'"start", "end", "left", "right", or "center"',na,"textAlign"))});
w.u(na,{Sa:"naturalBounds"},function(){if(!this.Lc.P()){var a=ll(this,this.Md,this.font,{},999999).width,b=ml(this,a,{}),c=this.xa;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);db(this.Lc,a,b)}return this.Lc});w.g(na,"isMultiline",na.prototype.Jv);w.defineProperty(na,{Jv:"isMultiline"},t("Rp"),function(a){var b=this.Rp;b!==a&&(u&&w.k(a,"boolean",na,"isMultiline"),this.Rp=a,this.R(),this.j("isMultiline",b,a))});w.g(na,"isUnderline",na.prototype.bH);
w.defineProperty(na,{bH:"isUnderline"},t("Al"),function(a){var b=this.Al;b!==a&&(u&&w.k(a,"boolean",na,"isUnderline"),this.Al=a,vj(this),this.j("isUnderline",b,a))});w.g(na,"isStrikethrough",na.prototype.aH);w.defineProperty(na,{aH:"isStrikethrough"},t("zl"),function(a){var b=this.zl;b!==a&&(u&&w.k(a,"boolean",na,"isStrikethrough"),this.zl=a,vj(this),this.j("isStrikethrough",b,a))});w.g(na,"wrap",na.prototype.kA);
w.defineProperty(na,{kA:"wrap"},t("Ql"),function(a){var b=this.Ql;b!==a&&(u&&w.ib(a,na,na,"wrap"),this.Ql=a,this.R(),this.j("wrap",b,a))});w.g(na,"stroke",na.prototype.stroke);w.defineProperty(na,{stroke:"stroke"},t("lc"),function(a){var b=this.lc;if(b!==a&&(a===n||"string"===typeof a||a instanceof Fe))a instanceof Fe&&a.freeze(),this.lc=a,vj(this),this.j("stroke",b,a)});w.u(na,{uL:"lineCount"},t("El"));w.g(na,"editable",na.prototype.rv);
w.defineProperty(na,{rv:"editable"},t("vp"),function(a){var b=this.vp;b!==a&&(u&&w.k(a,"boolean",na,"editable"),this.vp=a,this.j("editable",b,a))});w.g(na,"textEditor",na.prototype.cA);w.defineProperty(na,{cA:"textEditor"},t("pr"),function(a){var b=this.pr;b!==a&&(a instanceof HTMLElement||w.m("textEditor must be an HTMLElement"),this.pr=a,this.j("textEditor",b,a))});w.g(na,"errorFunction",na.prototype.Sr);
w.defineProperty(na,{Sr:"errorFunction"},t("De"),function(a){var b=this.De;b!==a&&(a!==n&&w.k(a,"function",na,"errorFunction"),this.De=a,this.j("errorFunction",b,a))});
na.prototype.Xn=function(a,b){if(this.lc!==n&&0!==this.Md.length){var c=this.$i;if(c!==n){var d=this.Sa.width,e=Jh(this,c);a.Kw!==c&&(a.font=c,a.Kw=c);a.textAlign=this.sf;yj(this,a,this.lc,h);(this.Al||this.zl)&&yj(this,a,this.lc,p);var c=this.dq,g=0,i=p,j=this.je.Ta(new F(0,0)),k=this.je.Ta(new F(0,e)),j=j.am(k),k=b.scale;8>j*k*k&&(i=h);j=c.xj.length;for(k=0;k<j;k++){var l=c.xj[k],m=c.Qn[k];l>d&&(l=d);var q=m,m=a,r=g,s=e,v=i,y=0;"start"===this.sf||"left"===this.sf?y=0:"end"===this.sf||"right"===
this.sf?y=d:"center"===this.sf?y=d/2:w.m("textAlign must be start, end, left, right, or center");v?m.fillRect(0+y,r+0.25*s,l,1):(m.fillText(q,0+y,r+s-0.25*s),q=s/20|0,this.Al&&("end"===this.sf||"right"===this.sf?y-=l:"center"===this.sf&&(y-=l/2),m.beginPath(),m.lineWidth=q,m.moveTo(0+y,r+s-0.2*s),m.lineTo(0+y+l,r+s-0.2*s),m.stroke()),this.zl&&(m.beginPath(),m.lineWidth=q,r=r+s-s/2.2|0,0!==q%2&&(r+=0.5),m.moveTo(0,r),m.lineTo(0+l,r),m.stroke()));g+=e}}}};
na.prototype.os=function(a,b,c,d){var e={},g=0,i=0;if(isNaN(this.xa.width)){g=this.Md;if(0===g.length)g=0;else if(this.Jv){for(var j=i=0,k=p,l={Nh:0};!k;){var m=nl(g,j,l);-1===m&&(m=g.length,k=h);j=ol(g.substr(j,m-j).replace(/^\s+|\s+$/g,""),this.$i);j>i&&(i=j);j=l.Nh}g=i}else i=nl(g,0,{}),0<=i&&(g=g.substr(0,i)),g=j=ol(g,this.$i);g=Math.min(g,a/this.scale);g=Math.max(8,g)}else g=this.xa.width;this.fa&&(g=Math.min(g,this.fa.ce.width),g=Math.max(g,this.fa.we.width));i=ml(this,g,e);i=isNaN(this.xa.height)?
Math.min(i,b/this.scale):this.xa.height;if(this.kA===kl||isNaN(this.xa.width))g=e.Ni,isNaN(this.xa.width)&&(g=Math.max(8,g));g=Math.max(c,g);i=Math.max(d,i);db(this.Lc,g,i);mj(this,0,0,g,i);this.dq=e};na.prototype.yj=function(a,b,c,d){sj(this,a,b,c,d)};
function ll(a,b,c,d,e){b=b.replace(/^\s+|\s+$/g,"");d.Ni===f&&(d.Ni=0);d.xj===f&&(d.xj=[]);d.Qn===f&&(d.Qn=[]);var g=0,i;if(a.Ql===jl)return d.Nh=1,d.Ni=ol(b,c),d.xj.push(d.Ni),d.Qn.push(b),new bb(d.Ni,Jh(a,c));a.mk===n&&(a.mk=Jh(a,c));var a=a.mk,j=b,k=0;0===j.length&&(k=1,d.xj.push(0),d.Qn.push(j));for(;0<j.length;){for(var l=pl(j),j=j.substr(l.length);ol(l,c)>e;){var m=1,b=ol(l.substr(0,m),c);for(i=0;b<=e;)m++,i=b,b=ol(l.substr(0,m),c);1===m?(d.xj[k]=b,g=Math.max(g,b)):(d.xj[k]=i,g=Math.max(g,i));
m--;1>m&&(m=1);d.Qn[k]=l.substr(0,m);k++;l=l.substr(m)}i=pl(j);for(b=ol(l+i,c);0<i.length&&b<=e;)l+=i,j=j.substr(i.length),i=pl(j),b=ol((l+i).replace(/^\s+|\s+$/g,""),c);l=l.replace(/^\s+|\s+$/g,"");""!==l&&(0===i.length?(d.xj.push(b),g=Math.max(g,b)):(i=ol(l,c),d.xj.push(i),g=Math.max(g,i)),d.Qn.push(l),k++)}d.Nh=k;d.Ni=Math.max(d.Ni,g);return new bb(d.Ni,a*d.Nh)}function pl(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}
function ol(a,b){w.Eu!==b&&(w.Du.font=b,w.Eu=b);return w.Du.measureText(a).width}function Jh(a,b){if(a.mk!==n)return a.mk;w.Eu!==b&&(w.Du.font=b,w.Eu=b);var c=0;w.mx[b]!==f&&5E3>w.WA?c=w.mx[b]:(c=1.3*w.Du.measureText("M").width,w.mx[b]=c,w.WA++);return c}function nl(a,b,c){c.Nh===f&&(c.Nh=0);var d=a.indexOf("\r",b);-1===d&&(d=a.indexOf("\n",b));0<=d&&(c.Nh="\r"===a[d]&&d+1<a.length&&"\n"===a[d+1]?d+2:d+1);return d}
function ml(a,b,c){var d=a.Md,e=a.$i,g=Jh(a,e);if(0===d.length)return c.Ni=0,a.El=1,g;if(!a.Jv){var i=nl(d,0,{});0<=i&&(d=d.substr(0,i))}for(var j=i=0,k=0,l=-1,m={Nh:0},q=p;!q;)l=nl(d,k,m),-1===l&&(l=d.length,q=h),k<=l&&(k=d.substr(k,l-k),a.Ql!==jl?(c.Nh=0,k=ll(a,k,e,c,b),i+=k.height,j+=c.Nh):(ll(a,k,e,c,Infinity),i+=g,j++)),k=m.Nh;a.El=j;return a.Xt=i}w.g(na,"textValidation",na.prototype.Ms);
w.defineProperty(na,{Ms:"textValidation"},t("tj"),function(a){var b=this.tj;b!==a&&(a!==n&&w.k(a,"function",na,"textValidation"),this.tj=a,this.j("textValidation",b,a))});function ek(){P.call(this);this.Wh=n;this.ir="";this.sj=(new G(NaN,NaN,NaN,NaN)).freeze();this.Rm=kd;this.Ku=this.De=n;this.Mt=this.Fl=p}w.Q("Picture",ek);w.Ea(ek,P);ek.prototype.xb=function(a){P.prototype.xb.call(this,a);a.element=this.Wh;a.ir=this.ir;a.sj.Ua(this.sj);a.Rm=this.Rm;a.De=this.De};
ek.prototype.toString=function(){return"Picture("+this.source+")#"+w.ec(this)};w.g(ek,"element",ek.prototype.element);
w.defineProperty(ek,{element:"element"},t("Wh"),function(a){var b=this.Wh;if(b!==a){a instanceof HTMLImageElement||(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement)||w.m("Picture.element must be an instance of Image, Canvas, or Video.");var c=this;a instanceof HTMLCanvasElement?this.Mt=h:(this.Mt=p,a.onerror=function(a){c.De!==n&&c.De(c,a)});this.Wh=a;this.j("element",b,a);a.complete===h||a.complete===f?(this.Fl=h,this.xa.P()||(this.$b=p,this.R())):(w.xy.push(this),w.uu===n&&(w.uu=setInterval(function(){for(var a=
[],b=w.xy,c=b.length,i=0;i<c;i++){var j=b[i];ql(j)||a.push(j)}0===a.length&&(clearInterval(w.uu),w.uu=n);w.xy=a},600)))}});function ql(a){var b=a.Wh;if(!b)return h;if(!b.complete)return p;if(a.Fl===h)return h;a.Fl=h;if(a.h)a.xa.P()||(a.$b=p,a.R(),a.h.Ii()),Nh(a.h);else{var a=w.NA,c=a.length;if(0===c)for(var c=document.getElementsByTagName("canvas"),d=c.length,b=0;b<d;b++){var e=c[b];e.parentElement&&e.parentElement.ba&&a.push(e.parentElement.ba)}c=a.length;for(b=0;b<c;b++)Nh(a[b])}return h}
w.g(ek,"source",ek.prototype.source);w.defineProperty(ek,{source:"source"},t("ir"),function(a){var b=this.ir;if(b!==a)if(w.k(a,"string",ek,"source"),this.ir=a,this.j("source",b,a),b=w.iF,b[a]!==f)this.element=b[a];else{var c=document.createElement("img");c.src=a;b[a]=c;c instanceof HTMLImageElement&&(this.element=c)}});w.g(ek,"sourceRect",ek.prototype.Ih);
w.defineProperty(ek,{Ih:"sourceRect"},t("sj"),function(a){var b=this.sj;b.I(a)||(w.i(a,G,ek,"sourceRect"),this.sj=a=a.O(),this.j("sourceRect",b,a))});w.g(ek,"imageStretch",ek.prototype.PG);w.defineProperty(ek,{PG:"imageStretch"},t("Rm"),function(a){var b=this.Rm;b!==a&&(w.ib(a,P,ek,"imageStretch"),this.Rm=a,this.j("imageStretch",b,a))});w.g(ek,"errorFunction",ek.prototype.Sr);
w.defineProperty(ek,{Sr:"errorFunction"},t("De"),function(a){var b=this.De;if(b!==a){a!==n&&w.k(a,"function",ek,"errorFunction");this.De=a;if(this.Wh){var c=this;this.Wh.onerror=function(a){c.De!==n&&c.De(c,a)}}this.j("errorFunction",b,a)}});
ek.prototype.Xn=function(a,b){if(!b.wt){if(this.Ku===n){var c=document.createElement("canvas").getContext("2d");c.drawImage(this.Wh,0,0);try{c.getImageData(0,0,1,1),this.Ku=p}catch(d){this.Ku=h}}if(this.Ku)return}c=this.Wh;if(c!==n){var e=c.src;(e===n||""===e)&&w.m("Element has no source attribute: "+c);var e=this.Sa,g=0,i=0,j=this.Mt,k=j?+c.width:c.naturalWidth,j=j?+c.height:c.naturalHeight;if(!(0===k||0===j)){k===f&&c.videoWidth&&(k=c.videoWidth||e.width);j===f&&c.videoHeight&&(j=c.videoHeight||
e.height);this.Ih.P()&&(g=this.sj.x,i=this.sj.y,k=this.sj.width,j=this.sj.height);var l=k,m=j,q=this.Rm;switch(q){case jj:if(this.Ih.P())break;g+=Math.max((l-e.width)/2,0);i+=Math.max((m-e.height)/2,0);k=Math.min(e.width,l);j=Math.min(e.height,m);break;case kd:l=e.width;m=e.height;break;case fh:case gh:q===fh?(q=Math.min(e.height/m,e.width/l),l*=q,m*=q):q===gh&&(q=Math.max(e.height/m,e.width/l),l*=q,m*=q,g+=(l-e.width)/2,i+=(m-e.height)/2,k*=1/(l/e.width),j*=1/(m/e.height),l=e.width,m=e.height)}a.drawImage(c,
g,i,k,j,Math.max((e.width-l)/2,0),Math.max((e.height-m)/2,0),Math.min(e.width,l),Math.min(e.height,m))}}};w.u(ek,{Sa:"naturalBounds"},t("Lc"));
ek.prototype.os=function(a,b,c,d){var e=this.xa,g=pj(this),i=this.Wh,j=this.Mt;if(j||!this.Fl&&i&&i.complete)this.Fl=h;i===n&&(b=a=0);g!==kd&&g!==lj?isFinite(e.width)?a=e.width:i!==n&&this.Fl!==p&&(a=this.Ih.P()?this.Ih.width:j?+i.width:i.naturalWidth):(isFinite(a)||(a=this.Ih.P()?this.Ih.width:j?+i.width:i.naturalWidth),c=0);g!==kd&&g!==kj?isFinite(e.height)?b=e.height:i!==n&&this.Fl!==p&&(b=this.Ih.P()?this.Ih.height:j?+i.height:i.naturalHeight):(isFinite(b)||(b=this.Ih.P()?this.Ih.height:j?+i.height:
i.naturalHeight),d=0);e=this.ce;g=this.we;c=Math.max(c,g.width);d=Math.max(d,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);i!==n&&!i.complete&&(isFinite(a)||(a=0),isFinite(b)||(b=0));db(this.Lc,a,b);mj(this,0,0,a,b)};ek.prototype.yj=function(a,b,c,d){sj(this,a,b,c,d)};function J(){this.q=new hd;this.Mb=n}
function K(a,b,c,d,e,g){a.q===n&&w.m("StreamGeometryContext has been closed");e!==f&&e===h?(a.Mb===n&&w.m("Need to call beginFigure first"),d=new Ed(Jd),d.C=b,d.D=c,a.Mb.Aa.add(d)):(a.Mb=new jd,a.Mb.ma=b,a.Mb.na=c,a.Mb.ho=d,a.q.sb.add(a.Mb));g!==f&&(a.Mb.Lf=g)}function Gd(a){a.q===n&&w.m("StreamGeometryContext has been closed");a.Mb===n&&w.m("Need to call beginFigure first");var b=a.Mb.Aa.length;0<b&&a.Mb.Aa.n[b-1].close()}
function Hd(a){a.q===n&&w.m("StreamGeometryContext has been closed");a.Mb===n&&w.m("Need to call beginFigure first");a.Mb.jo=p}J.prototype.moveTo=function(a,b,c){this.q===n&&w.m("StreamGeometryContext has been closed");this.Mb===n&&w.m("Need to call beginFigure first");var d=new Ed(Jd);d.C=a;d.D=b;c&&d.close();this.Mb.Aa.add(d)};
J.prototype.lineTo=function(a,b,c){this.q===n&&w.m("StreamGeometryContext has been closed");this.Mb===n&&w.m("Need to call beginFigure first");var d=new Ed(td);d.C=a;d.D=b;c&&d.close();this.Mb.Aa.add(d)};function L(a,b,c,d,e,g,i,j){a.q===n&&w.m("StreamGeometryContext has been closed");a.Mb===n&&w.m("Need to call beginFigure first");var k=new Ed(Kd);k.Ub=b;k.Ac=c;k.lg=d;k.mg=e;k.C=g;k.D=i;j&&k.close();a.Mb.Aa.add(k)}
function Dd(a,b,c,d,e){a.q===n&&w.m("StreamGeometryContext has been closed");a.Mb===n&&w.m("Need to call beginFigure first");var g=new Ed(Ld);g.Ub=b;g.Ac=c;g.C=d;g.D=e;a.Mb.Aa.add(g)}J.prototype.arcTo=function(a,b,c,d,e,g,i){this.q===n&&w.m("StreamGeometryContext has been closed");this.Mb===n&&w.m("Need to call beginFigure first");var j=new Ed(Md);j.og=a;j.Kh=b;j.pa=c;j.ta=d;j.radiusX=e;j.radiusY=g?g:e;i&&j.close();this.Mb.Aa.add(j)};
function rl(a,b,c,d,e,g,i,j,k,l,m,q,r,s){var v=1-k,a=a*v+c*k,b=b*v+d*k,c=c*v+e*k,d=d*v+g*k,e=e*v+i*k,g=g*v+j*k,j=a*v+c*k,i=b*v+d*k,c=c*v+e*k,d=d*v+g*k;l.x=a;l.y=b;m.x=j;m.y=i;q.x=j*v+c*k;q.y=i*v+d*k;r.x=c;r.y=d;s.x=e;s.y=g}function sl(a){var a=tl(a),b=[];b[0]=a[0];for(var c=1,d=1;c<a.length;c+=2,d+=3)b[d]=a[c],b[d+1]=a[c],b[d+2]=a[c+1];return b}
function tl(a){for(var b=ul(a),c=[],d=Math.floor(b.length/2),e=b.length-1,a=0===a%2?2:1,g=0;g<e;g++){var i=b[g],j=b[g+1],k=b[(d+g-1)%e],l=b[(d+g+a)%e];c[2*g]=i;c[2*g+1]=vl(i.x,i.y,k.x,k.y,j.x,j.y,l.x,l.y)}c[c.length]=c[0];return c}function vl(a,b,c,d,e,g,i,j){c=a-c;i=e-i;0===c||0===i?0===c?(i=(g-j)/i,j=a,e=i*j+(g-i*e)):(d=(b-d)/c,j=e,e=d*j+(b-d*a)):(d=(b-d)/c,i=(g-j)/i,a=b-d*a,j=(g-i*e-a)/(d-i),e=d*j+a);return new F(j,e)}
function ul(a){for(var b=[],c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new F(0.5+0.5*Math.cos(d),0.5+0.5*Math.sin(d));b.push(b[0]);return b}
var bl={None:"Rectangle",Rectangle:function(a,b,c){a=new hd;a.type=qd;a.ma=0;a.na=0;a.C=b;a.D=c;return a},Square:function(a,b,c){a=new hd;a.Zb=fh;a.type=qd;a.ma=0;a.na=0;a.C=b;a.D=c;return a},Ellipse:function(a,b,c){a=new hd;a.type=rd;a.ma=0;a.na=0;a.C=b;a.D=c;a.v=new H(0.156,0.156);a.w=new H(0.844,0.844);return a},Circle:function(a,b,c){a=new hd;a.Zb=fh;a.type=rd;a.ma=0;a.na=0;a.C=b;a.D=c;a.v=new H(0.156,0.156);a.w=new H(0.844,0.844);return a},Connector:"Ellipse",TriangleRight:function(a,b,c){var a=
new hd,d=new jd,e=new Ed;e.C=b;e.D=0.5*c;d.Aa.add(e);b=new Ed;b.C=0;b.D=c;d.Aa.add(b.close());a.sb.add(d);a.v=new H(0,0.25);a.w=new H(0.5,0.75);return a},TriangleDown:function(a,b,c){var a=new hd,d=new jd,e=new Ed;e.C=b;e.D=0;d.Aa.add(e);e=new Ed;e.C=0.5*b;e.D=c;d.Aa.add(e.close());a.sb.add(d);a.v=new H(0.25,0);a.w=new H(0.75,0.5);return a},TriangleLeft:function(a,b,c){var a=new hd,d=new jd;d.ma=b;d.na=c;var e=new Ed;e.C=0;e.D=0.5*c;d.Aa.add(e);c=new Ed;c.C=b;c.D=0;d.Aa.add(c.close());a.sb.add(d);
a.v=new H(0.5,0.25);a.w=new H(1,0.75);return a},TriangleUp:function(a,b,c){var a=new hd,d=new jd;d.ma=b;d.na=c;var e=new Ed;e.C=0;e.D=c;d.Aa.add(e);c=new Ed;c.C=0.5*b;c.D=0;d.Aa.add(c.close());a.sb.add(d);a.v=new H(0.25,0.5);a.w=new H(0.75,1);return a},Line1:function(a,b,c){a=new hd;a.type=md;a.ma=0;a.na=0;a.C=b;a.D=c;return a},Line2:function(a,b,c){a=new hd;a.type=md;a.ma=b;a.na=0;a.C=0;a.D=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new hd;a.type=md;a.ma=0;a.na=c/2;a.C=b;a.D=c/2;return a},
LineV:function(a,b,c){a=new hd;a.type=md;a.ma=b/2;a.na=0;a.C=b/2;a.D=c;return a},Curve1:function(a,b,c){a=new J;K(a,0,0,p);L(a,ic*b,0,1*b,(1-ic)*c,b,c);return a.q},Curve2:function(a,b,c){a=new J;K(a,0,0,p);L(a,0,ic*c,(1-ic)*b,c,b,c);return a.q},Curve3:function(a,b,c){a=new J;K(a,1*b,0,p);L(a,1*b,ic*c,ic*b,1*c,0,1*c);return a.q},Curve4:function(a,b,c){a=new J;K(a,1*b,0,p);L(a,(1-ic)*b,0,0,(1-ic)*c,0,1*c);return a.q},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){a=new J;K(a,0.5*b,
0*c,h);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,h);b=a.q;b.v=new H(0.25,0.5);b.w=new H(0.75,1);return b},Decision:"Diamond",Diamond:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(0,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0.5*c,h);b=a.q;b.v=new H(0.25,0.25);b.w=new H(0.75,0.75);return b},Pentagon:function(a,b,c){var a=ul(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;5>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.2,0.22);b.w=new H(0.8,0.9);return b},DataTransmission:"Hexagon",Hexagon:function(a,
b,c){var a=ul(6),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;6>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.07,0.25);b.w=new H(0.93,0.75);return b},Heptagon:function(a,b,c){var a=ul(7),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;7>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.2,0.15);b.w=new H(0.8,0.85);return b},Octagon:function(a,b,c){var a=ul(8),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;8>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.15,0.15);b.w=new H(0.85,
0.85);return b},Nonagon:function(a,b,c){var a=ul(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;9>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.17,0.13);b.w=new H(0.82,0.82);return b},Decagon:function(a,b,c){var a=ul(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;10>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.16,0.16);b.w=new H(0.84,0.84);return b},Dodecagon:function(a,b,c){var a=ul(12),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;12>e;e++)d.lineTo(a[e].x*b,a[e].y*c);
Gd(d);b=d.q;b.v=new H(0.16,0.16);b.w=new H(0.84,0.84);return b},FivePointedStar:function(a,b,c){var a=tl(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;10>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.312,0.383);b.w=new H(0.693,0.765);return b},SixPointedStar:function(a,b,c){var a=tl(6),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;12>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.17,0.251);b.w=new H(0.833,0.755);return b},SevenPointedStar:function(a,b,c){var a=tl(7),d=new J;
K(d,a[0].x*b,a[0].y*c,h);for(var e=1;14>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.363,0.361);b.w=new H(0.641,0.709);return b},EightPointedStar:function(a,b,c){var a=tl(8),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;16>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.252,0.255);b.w=new H(0.75,0.75);return b},NinePointedStar:function(a,b,c){var a=tl(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;18>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.355,0.361);b.w=new H(0.645,
0.651);return b},TenPointedStar:function(a,b,c){var a=tl(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;20>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.281,0.261);b.w=new H(0.723,0.748);return b},FivePointedBurst:function(a,b,c){var a=sl(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.312,0.383);b.w=new H(0.693,0.765);return b},SixPointedBurst:function(a,b,c){var a=sl(6),d=new J;
K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.17,0.251);b.w=new H(0.833,0.755);return b},SevenPointedBurst:function(a,b,c){var a=sl(7),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.363,0.361);b.w=new H(0.641,0.709);return b},EightPointedBurst:function(a,b,c){var a=sl(8),d=new J;K(d,a[0].x*b,a[0].y*
c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.252,0.255);b.w=new H(0.75,0.75);return b},NinePointedBurst:function(a,b,c){var a=sl(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.355,0.361);b.w=new H(0.645,0.651);return b},TenPointedBurst:function(a,b,c){var a=sl(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=
3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.281,0.261);b.w=new H(0.723,0.748);return b},Cloud:function(a,b,c){a=new J;K(a,0.08034461*b,0.1944299*c,h);L(a,-0.09239631*b,0.07836421*c,0.1406031*b,-0.0542823*c,0.2008615*b,0.05349299*c);L(a,0.2450511*b,-0.00697547*c,0.3776197*b,-0.01112067*c,0.4338609*b,0.074219*c);L(a,0.4539471*b,0,0.6066018*b,-0.02526587*c,0.6558228*b,0.07004196*c);L(a,0.6914277*b,-0.01904177*c,0.8921095*b,-0.01220843*c,0.8921095*b,0.08370865*
c);L(a,1.036446*b,0.04105738*c,1.020377*b,0.3022052*c,0.9147671*b,0.3194596*c);L(a,1.04448*b,0.360238*c,0.992256*b,0.5219009*c,0.9082935*b,0.562044*c);L(a,1.032337*b,0.5771781*c,1.018411*b,0.8120651*c,0.9212406*b,0.8217117*c);L(a,1.028411*b,0.9571472*c,0.8556702*b,1.052487*c,0.7592566*b,0.9156953*c);L(a,0.7431877*b,1.009325*c,0.5624123*b,1.021761*c,0.5101666*b,0.9310455*c);L(a,0.4820677*b,1.031761*c,0.3030112*b,1.002796*c,0.2609328*b,0.9344623*c);L(a,0.2329994*b,1.01518*c,0.03213784*b,1.01518*c,0.08034461*
b,0.870098*c);L(a,-0.02812061*b,0.9032597*c,-0.01205169*b,0.6835638*c,0.06829292*b,0.6545475*c);L(a,-0.01812061*b,0.6089503*c,-0.00606892*b,0.4555777*c,0.06427569*b,0.4265613*c);L(a,-0.01606892*b,0.3892545*c,-0.01205169*b,0.1944299*c,0.08034461*b,0.1944299*c);Gd(a);b=a.q;b.v=new H(0.1,0.1);b.w=new H(0.9,0.9);return b},Gate:"Crescent",Crescent:function(a,b,c){a=new J;K(a,0,0,h);L(a,1*b,0,1*b,1*c,0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Gd(a);b=a.q;b.v=new H(0.511,0.19);b.w=new H(0.776,0.76);return b},
FramedRectangle:function(a,b,c){var d=new J,e=a?a.gc:0,a=a?a.ys:0;0===e&&(e=0.1);0===a&&(a=0.1);K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,h);K(d,e*b,a*c,p,h);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,h);b=d.q;b.v=new H(e,a);b.w=new H(1-e,1-a);return b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){a=new J;K(a,0,0,h);L(a,ic*b,0,1*b,(0.5-ic/2)*c,1*b,0.5*c);L(a,1*b,(0.5+ic/2)*c,ic*b,1*c,0,1*c);Gd(a);b=a.q;b.v=new H(0,0.2);b.w=new H(0.75,0.8);return b},Heart:function(a,
b,c){a=new J;K(a,0.5*b,1*c,h);L(a,0.1*b,0.8*c,0,0.5*c,0*b,0.3*c);L(a,0*b,0,0.45*b,0,0.5*b,0.3*c);L(a,0.55*b,0,1*b,0,1*b,0.3*c);L(a,b,0.5*c,0.9*b,0.8*c,0.5*b,1*c);Gd(a);b=a.q;b.v=new H(0.15,0.29);b.w=new H(0.86,0.68);return b},Spade:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(0.51*b,0.01*c);L(a,0.6*b,0.2*c,b,0.25*c,b,0.5*c);L(a,b,0.8*c,0.6*b,0.8*c,0.55*b,0.7*c);L(a,0.5*b,0.75*c,0.55*b,0.95*c,0.75*b,c);a.lineTo(0.25*b,c);L(a,0.45*b,0.95*c,0.5*b,0.75*c,0.45*b,0.7*c);L(a,0.4*b,0.8*c,0,0.8*c,0,0.5*
c);L(a,0,0.25*c,0.4*b,0.2*c,0.49*b,0.01*c);Gd(a);b=a.q;b.v=new H(0.19,0.26);b.w=new H(0.8,0.68);return b},Club:function(a,b,c){a=new J;K(a,0.4*b,0.6*c,h);L(a,0.5*b,0.75*c,0.45*b,0.95*c,0.15*b,1*c);a.lineTo(0.85*b,c);L(a,0.55*b,0.95*c,0.5*b,0.75*c,0.6*b,0.6*c);var d=0.2,e=0.3,g=0,i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+
g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e+0.05)*b,(0.5-i+g-0.02)*c,0.65*b,0.36771243*c);d=0.2;e=0;g=-0.3;i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,0.35*b,0.36771243*c);d=0.2;e=-0.3;g=0;i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5+
d+e-0.05)*b,(0.5-i+g-0.02)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,0.4*b,0.6*c);Gd(a);b=a.q;b.v=new H(0.06,0.39);b.w=new H(0.93,0.58);return b},YinYang:function(a,b,c){var a=0.5,d=new J,a=0.5;K(d,0.5*b,0,h);d.arcTo(270,180,0.5*b,0.5*b,0.5*b);L(d,1*b,a*c,0,a*c,a*b,0,h);var a=0.1,e=0.25;K(d,
(0.5+a)*b,e*c,h,h);d.arcTo(0,-360,0.5*b,c*e,a*b);Gd(d);K(d,0.5*b,0,p);d.arcTo(270,-180,0.5*b,0.5*b,0.5*b);Hd(d);e=0.75;K(d,(0.5+a)*b,e*c,h);d.arcTo(0,360,0.5*b,c*e,a*b);Gd(d);b=d.q;b.Zb=fh;return b},Peace:function(a,b,c){var a=new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,b,0.5*c,h);L(a,b,(0.5-d)*c,(0.5+d)*b,0,0.5*b,0);L(a,(0.5-d)*b,0,0,(0.5-d)*c,0,0.5*c);L(a,0,(0.5+d)*c,(0.5-d)*b,c,0.5*b,c);L(a,(0.5+d)*b,c,b,(0.5+d)*c,b,0.5*c);d=0.4*(4*(Math.SQRT2-1)/3);K(a,0.5*b,0.1*c,h,h);L(a,(0.5+d)*b,0.1*c,0.9*b,(0.5-
d)*c,0.9*b,0.5*c);L(a,0.9*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.5*b,0.9*c);L(a,(0.5-d)*b,0.9*c,0.1*b,(0.5+d)*c,0.1*b,0.5*c);L(a,0.1*b,(0.5-d)*c,(0.5-d)*b,0.1*c,0.5*b,0.1*c);var d=0.07,e=0,g=-0.707*0.11,i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,
(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=-0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+
d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);b=a.q;b.v=new H(0.146,0.146);b.w=new H(0.853,0.853);b.Zb=fh;return b},NotAllowed:function(a,b,c){var a=0.5*ic,d=0.5,e=new J;K(e,0.5*b,(0.5-d)*c,h);L(e,(0.5-a)*b,(0.5-d)*c,(0.5-d)*b,
(0.5-a)*c,(0.5-d)*b,0.5*c);L(e,(0.5-d)*b,(0.5+a)*c,(0.5-a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);L(e,(0.5+a)*b,(0.5+d)*c,(0.5+d)*b,(0.5+a)*c,(0.5+d)*b,0.5*c);L(e,(0.5+d)*b,(0.5-a)*c,(0.5+a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);var d=0.4,a=0.4*ic,g=new F(0,0),i=new F(0,0),j=new F(0,0),k=new F(0,0);rl(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.42,g,i,j,k,k);var l=new F(0,0),m=new F(0,0),q=new F(0,0);rl(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.58,k,k,q,l,m);var r=new F(0,0),s=new F(0,0),v=new F(0,0);rl(0.5,0.5+
d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.42,r,s,v,k,k);var y=new F(0,0),C=new F(0,0),E=new F(0,0);rl(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.58,k,k,E,y,C);K(e,E.x*b,E.y*c,h,h);L(e,y.x*b,y.y*c,C.x*b,C.y*c,(0.5-d)*b,0.5*c);L(e,(0.5-d)*b,(0.5-a)*c,(0.5-a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);L(e,g.x*b,g.y*c,i.x*b,i.y*c,j.x*b,j.y*c);e.lineTo(E.x*b,E.y*c);Gd(e);K(e,v.x*b,v.y*c,h,h);e.lineTo(q.x*b,q.y*c);L(e,l.x*b,l.y*c,m.x*b,m.y*c,(0.5+d)*b,0.5*c);L(e,(0.5+d)*b,(0.5+a)*c,(0.5+a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);
L(e,r.x*b,r.y*c,s.x*b,s.y*c,v.x*b,v.y*c);Gd(e);e.q.Zb=fh;return e.q},Fragile:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.25*b,0);a.lineTo(0.2*b,0.15*c);a.lineTo(0.3*b,0.25*c);a.lineTo(0.29*b,0.33*c);a.lineTo(0.35*b,0.25*c);a.lineTo(0.3*b,0.15*c);a.lineTo(0.4*b,0);a.lineTo(1*b,0);L(a,1*b,0.25*c,0.75*b,0.5*c,0.55*b,0.5*c);a.lineTo(0.55*b,0.9*c);a.lineTo(0.7*b,0.9*c);a.lineTo(0.7*b,1*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.9*c);a.lineTo(0.45*b,0.9*c);a.lineTo(0.45*b,0.5*c);L(a,0.25*b,0.5*c,0,0.25*
c,0,0);Gd(a);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,0.4);return b},HourGlass:function(a,b,c){a=new J;K(a,0.65*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.35*b,0.5*c);a.lineTo(0,0);a.lineTo(1*b,0);Gd(a);return a.q},Lightning:function(a,b,c){a=new J;K(a,0*b,0.55*c,h);a.lineTo(0.75*b,0);a.lineTo(0.25*b,0.45*c);a.lineTo(0.9*b,0.48*c);a.lineTo(0.4*b,1*c);a.lineTo(0.65*b,0.55*c);Gd(a);return a.q},Parallelogram1:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,a*b,0,h);d.lineTo(1*b,
0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);Gd(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},Input:"Output",Output:function(a,b,c){a=new J;K(a,0,1*c,h);a.lineTo(0.1*b,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);Gd(a);b=a.q;b.v=new H(0.1,0);b.w=new H(0.9,1);return b},Parallelogram2:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.25);var d=new J;K(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);Gd(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},ThickCross:function(a,b,c){a=a?a.gc:0;0===a&&(a=
0.25);var d=new J;K(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);Gd(d);b=d.q;b.v=new H(0.5-a/2,0.5-a/2);b.w=new H(0.5+a/2,0.5+a/2);return b},ThickX:function(a,b,c){var a=0.25/Math.SQRT2,d=new J;K(d,0.3*b,0,h);d.lineTo(0.5*
b,0.2*c);d.lineTo(0.7*b,0);d.lineTo(1*b,0.3*c);d.lineTo(0.8*b,0.5*c);d.lineTo(1*b,0.7*c);d.lineTo(0.7*b,1*c);d.lineTo(0.5*b,0.8*c);d.lineTo(0.3*b,1*c);d.lineTo(0,0.7*c);d.lineTo(0.2*b,0.5*c);d.lineTo(0,0.3*c);Gd(d);b=d.q;b.v=new H(0.5-a,0.5-a);b.w=new H(0.5+a,0.5+a);return b},ThinCross:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*
c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);Gd(d);return d.q},ThinX:function(a,b,c){a=new J;K(a,0.1*b,0,h);a.lineTo(0.5*b,0.4*c);a.lineTo(0.9*b,0);a.lineTo(1*b,0.1*c);a.lineTo(0.6*b,0.5*c);a.lineTo(1*b,0.9*c);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.6*c);a.lineTo(0.1*b,1*c);a.lineTo(0,0.9*c);a.lineTo(0.4*b,0.5*c);a.lineTo(0,0.1*c);Gd(a);return a.q},RightTriangle:function(a,b,
c){a=new J;K(a,0,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);Gd(a);b=a.q;b.v=new H(0,0.5);b.w=new H(0.5,1);return b},RoundedIBeam:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,0);L(a,0.5*b,0.25*c,0.5*b,0.75*c,1*b,1*c);a.lineTo(0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Gd(a);return a.q},RoundedRectangle:function(a,b,c){var d=a?a.gc:0;0>=d&&(d=5);var d=Math.min(d,b/3),d=Math.min(d,c/3),a=d*ic,e=new J;K(e,d,0,h);e.lineTo(b-d,0);L(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);L(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);L(e,
a,c,0,c-a,0,c-d);e.lineTo(0,d);L(e,0,a,a,0,d,0);Gd(e);b=e.q;1<a?(b.v=new H(0,0,a,a),b.w=new H(1,1,-a,-a)):(b.v=Jb,b.w=Rb);return b},Border:function(a,b,c){a=a?a.gc:0;0>=a&&(a=5);var a=Math.min(a,b/3),a=Math.min(a,c/3),d=new J;K(d,a,0,h);d.lineTo(b-a,0);L(d,b-0,0,b,0,b,a);d.lineTo(b,c-a);L(d,b,c-0,b-0,c,b-a,c);d.lineTo(a,c);L(d,0,c,0,c-0,0,c-a);d.lineTo(0,a);L(d,0,0,0,0,a,0);Gd(d);b=d.q;b.v=Jb;b.w=Rb;return b},SquareIBeam:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.2);var d=new J;K(d,0,0,h);d.lineTo(1*
b,0);d.lineTo(1*b,a*c);d.lineTo((0.5+a/2)*b,a*c);d.lineTo((0.5+a/2)*b,(1-a)*c);d.lineTo(1*b,(1-a)*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);d.lineTo(0,(1-a)*c);d.lineTo((0.5-a/2)*b,(1-a)*c);d.lineTo((0.5-a/2)*b,a*c);d.lineTo(0,a*c);Gd(d);return d.q},Trapezoid:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.2);var d=new J;K(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var a=a?a.gc:
0,d=new J;K(d,a,0,h);d.lineTo(0,0);d.lineTo(1*b,0);d.lineTo(0.9*b,1*c);d.lineTo(0.1*b,1*c);Gd(d);b=d.q;b.v=new H(0.1,0);b.w=new H(0.9,1);return b},GenderMale:function(a,b,c){var a=new J,d=0.4*ic,e=0.4,g=new F(0,0),i=new F(0,0),j=new F(0,0),k=new F(0,0);K(a,(0.5-e)*b,0.5*c,h);L(a,(0.5-e)*b,(0.5-d)*c,(0.5-d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);rl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.44,j,k,i,g,g);L(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);var l=new F(i.x,i.y);rl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+
e,0.5,0.56,g,g,i,j,k);g=new F(i.x,i.y);a.lineTo((0.1*l.x+0.855)*b,0.1*l.y*c);a.lineTo(0.85*b,0.1*l.y*c);a.lineTo(0.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.15*c);a.lineTo((0.1*g.x+0.9)*b,0.15*c);a.lineTo((0.1*g.x+0.9)*b,(0.1*g.y+0.05*0.9)*c);a.lineTo(g.x*b,g.y*c);L(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);e=0.35;d=0.35*ic;K(a,0.5*b,(0.5-e)*c,h,h);L(a,(0.5-d)*b,(0.5-e)*c,(0.5-e)*
b,(0.5-d)*c,(0.5-e)*b,0.5*c);L(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5-d)*c,(0.5+d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);K(a,(0.5-e)*b,0.5*c,h);b=a.q;b.v=new H(0.202,0.257);b.w=new H(0.692,0.839);b.Zb=fh;return b},GenderFemale:function(a,b,c){var a=new J,d=0.375,e=0,g=-0.125,i=d*(4*(Math.SQRT2-1)/3);K(a,(0.525+e)*b,(0.5+d+g)*c,h);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,
(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.475+e)*b,(0.5+d+g)*c);a.lineTo(0.475*b,0.85*c);a.lineTo(0.425*b,0.85*c);a.lineTo(0.425*b,0.9*c);a.lineTo(0.475*b,0.9*c);a.lineTo(0.475*b,1*c);a.lineTo(0.525*b,1*c);a.lineTo(0.525*b,0.9*c);a.lineTo(0.575*b,0.9*c);a.lineTo(0.575*b,0.85*c);a.lineTo(0.525*b,0.85*c);Gd(a);d=0.325;e=0;g=-0.125;i=d*(4*(Math.SQRT2-
1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h,h);L(a,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5-i+e)*b,(0.5+d+g)*c,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+d+e)*b,(0.5+g)*c);K(a,(0.525+e)*b,(0.5+d+g)*c,h);b=a.q;b.v=new H(0.232,0.136);b.w=new H(0.782,0.611);b.Zb=fh;return b},PlusLine:function(a,b,c){a=new J;K(a,0,0.5*c,p);a.lineTo(1*b,0.5*
c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.q},XLine:function(a,b,c){a=new J;K(a,0,1*c,p);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);return a.q},AsteriskLine:function(a,b,c){var a=new J,d=0.2/Math.SQRT2;K(a,d*b,(1-d)*c,p);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0*c);a.lineTo(0.5*b,1*c);return a.q},CircleLine:function(a,b,c){var a=0.5*ic,d=new J;K(d,1*b,0.5*c,p);L(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(d,
(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);L(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);L(d,(0.5+a)*b,0,1*b,(0.5-a)*c,1*b,0.5*c);b=d.q;b.v=new H(0.146,0.146);b.w=new H(0.853,0.853);b.Zb=fh;return b},Pie:function(a,b,c){var a=new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,(0.5*Math.SQRT2/2+0.5)*b,(0.5-0.5*Math.SQRT2/2)*c,h);L(a,0.7*b,0*c,0.5*b,0*c,0.5*b,0*c);L(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);L(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.5*b,1*c);L(a,(0.5+d+0)*b,1*c,1*b,(0.5+d+0)*c,1*b,0.5*c);a.lineTo(0.5*b,0.5*c);Gd(a);
return a.q},PiePiece:function(a,b,c){var a=0.5*(ic/Math.SQRT2),d=Math.SQRT2/2,e=1-Math.SQRT2/2,g=new J;K(g,b,c,h);L(g,b,(1-a)*c,(d+a)*b,(e+a)*c,d*b,e*c);g.lineTo(0,c);Gd(g);return g.q},StopSign:function(a,b,c){var d=1/(Math.SQRT2+2),e=new J;K(e,d*b,0,h);e.lineTo((1-d)*b,0);e.lineTo(1*b,d*c);e.lineTo(1*b,(1-d)*c);e.lineTo((1-d)*b,1*c);e.lineTo(d*b,1*c);e.lineTo(0,(1-d)*c);e.lineTo(0,d*c);Gd(e);b=e.q;a&&Eb(a.v)&&(a.v=new H(d/2,d/2));a&&Eb(a.w)&&(a.w=new H(1-d/2,1-d/2));return b},LogicImplies:function(a,
b,c){a=a?a.gc:0;0===a&&(a=0.2);var d=new J;K(d,(1-a)*b,0*c,p);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);b=d.q;b.v=new H(0,0);b.w=new H(0.8,0.5);return b},LogicIff:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.2);var d=new J;K(d,(1-a)*b,0*c,p);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);d.moveTo(a*b,0);d.lineTo(0,0.5*c);d.lineTo(a*b,c);b=d.q;b.v=new H(0.2,0);b.w=new H(0.8,0.5);return b},LogicNot:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(1*
b,0);a.lineTo(1*b,1*c);return a.q},LogicAnd:function(a,b,c){a=new J;K(a,0,1*c,p);a.lineTo(0.5*b,0);a.lineTo(1*b,1*c);b=a.q;b.v=new H(0.25,0.5);b.w=new H(0.75,1);return b},LogicOr:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);b=a.q;b.v=new H(0.219,0);b.w=new H(0.78,0.409);return b},LogicXor:function(a,b,c){a=new J;K(a,0.5*b,0,p);a.lineTo(0.5*b,1*c);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);var d=0.5*ic;L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,
0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.q;b.Zb=fh;return b},LogicTruth:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(1*b,0);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.q},LogicFalsity:function(a,b,c){a=new J;K(a,0,1*c,p);a.lineTo(1*b,1*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);return a.q},LogicThereExists:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(1*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);return a.q},
LogicForAll:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);a.moveTo(0.25*b,0.5*c);a.lineTo(0.75*b,0.5*c);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,0.5);return b},LogicIsDefinedAs:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(b,0);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.q;b.v=new H(0.01,0.01);b.w=new H(0.99,0.49);return b},LogicIntersect:function(a,b,c){var a=0.5*ic,d=new J;K(d,0,1*c,p);d.lineTo(0,0.5*c);L(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);L(d,(0.5+a)*
b,0,1*b,(0.5-a)*c,1*b,0.5*c);d.lineTo(1*b,1*c);b=d.q;b.v=new H(0,0.5);b.w=new H(1,1);return b},LogicUnion:function(a,b,c){var a=0.5*ic,d=new J;K(d,1*b,0,p);d.lineTo(1*b,0.5*c);L(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);d.lineTo(0,0);b=d.q;b.v=new H(0,0);b.w=new H(1,0.5);return b},Arrow:function(a,b,c){var d=a?a.gc:0,a=a?a.ys:0;0===d&&(d=0.3);0===a&&(a=0.3);var e=new J;K(e,0,(0.5-a/2)*c,h);e.lineTo((1-d)*b,(0.5-a/2)*c);e.lineTo((1-d)*b,0);e.lineTo(1*b,0.5*c);
e.lineTo((1-d)*b,1*c);e.lineTo((1-d)*b,(0.5+a/2)*c);e.lineTo(0,(0.5+a/2)*c);Gd(e);b=e.q;b.v=new H(0,0.5-a/2);d=vl(0,0.5+a/2,1,0.5+a/2,1-d,1,1,0.5);b.w=new H(d.x,d.y);return b},ISOProcess:"Chevron",Chevron:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.5*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);Gd(a);return a.q},DoubleArrow:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.3*b,0.214*c);a.lineTo(0.3*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.786*
c);a.lineTo(0,1*c);Gd(a);K(a,0.3*b,0.214*c,p);a.lineTo(0.3*b,0.786*c);Hd(a);return a.q},DoubleEndArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.3*b,0.7*c);a.lineTo(0.3*b,1*c);a.lineTo(0,0.5*c);a.lineTo(0.3*b,0);a.lineTo(0.3*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);Gd(a);b=a.q;c=vl(0,0.5,0.3,0,0,0.3,0.3,0.3);b.v=new H(c.x,c.y);c=vl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.w=new H(c.x,c.y);return b},IBeamArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);
a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.2*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.2*b,0);a.lineTo(0.2*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);Gd(a);b=a.q;b.v=new H(0,0.3);c=vl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.w=new H(c.x,c.y);return b},Pointer:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0);Gd(a);b=a.q;b.v=new H(0.2,0.35);c=vl(0.2,0.65,1,0.65,0,1,1,0.5);b.w=new H(c.x,c.y);return b},RoundedPointer:function(a,
b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Gd(a);b=a.q;b.v=new H(0.4,0.35);c=vl(0.2,0.65,1,0.65,0,1,1,0.5);b.w=new H(c.x,c.y);return b},SplitEndArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0,0.7*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);Gd(a);b=a.q;b.v=new H(0.2,0.3);c=vl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.w=new H(c.x,c.y);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,
b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.7*b,0);Gd(a);b=a.q;b.v=new H(0,0);b.w=new H(0.7,1);return b},Cone1:function(a,b,c){var a=0.5*ic,d=0.1*ic,e=new J;K(e,0,0.9*c,h);e.lineTo(0.5*b,0);e.lineTo(1*b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);Gd(e);b=e.q;b.v=new H(0.25,0.5);b.w=new H(0.75,0.97);return b},Cone2:function(a,b,c){a=new J;K(a,0,0.9*c,h);L(a,(1-0.85/0.9)*b,1*c,0.85/0.9*b,1*c,1*b,0.9*c);a.lineTo(0.5*
b,0);a.lineTo(0,0.9*c);Gd(a);K(a,0,0.9*c,p);L(a,(1-0.85/0.9)*b,0.8*c,0.85/0.9*b,0.8*c,1*b,0.9*c);Hd(a);b=a.q;b.v=new H(0.25,0.5);b.w=new H(0.75,0.82);return b},Cube1:function(a,b,c){a=new J;K(a,0.5*b,1*c,h);a.lineTo(1*b,0.85*c);a.lineTo(1*b,0.15*c);a.lineTo(0.5*b,0*c);a.lineTo(0*b,0.15*c);a.lineTo(0*b,0.85*c);Gd(a);K(a,0.5*b,1*c,p);a.lineTo(0.5*b,0.3*c);a.lineTo(0,0.15*c);a.moveTo(0.5*b,0.3*c);a.lineTo(1*b,0.15*c);Hd(a);b=a.q;b.v=new H(0,0.3);b.w=new H(0.5,0.85);return b},Cube2:function(a,b,c){a=
new J;K(a,0,0.3*c,h);a.lineTo(0*b,1*c);a.lineTo(0.7*b,c);a.lineTo(1*b,0.7*c);a.lineTo(1*b,0*c);a.lineTo(0.3*b,0*c);Gd(a);K(a,0,0.3*c,p);a.lineTo(0.7*b,0.3*c);a.lineTo(1*b,0*c);a.moveTo(0.7*b,0.3*c);a.lineTo(0.7*b,1*c);Hd(a);b=a.q;b.v=new H(0,0.3);b.w=new H(0.7,1);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var a=0.5*ic,d=0.1*ic,e=new J;K(e,0,0.1*c,h);L(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);L(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*
b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);e.lineTo(0,0.1*c);K(e,0,0.1*c,p);L(e,0,(0.1+d)*c,(0.5-a)*b,0.2*c,0.5*b,0.2*c);L(e,(0.5+a)*b,0.2*c,1*b,(0.1+d)*c,1*b,0.1*c);Hd(e);b=e.q;b.v=new H(0,0.2);b.w=new H(1,0.9);return b},Cylinder2:function(a,b,c){var a=0.5*ic,d=0.1*ic,e=new J;K(e,0,0.9*c,h);e.lineTo(0,0.1*c);L(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);L(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(1*b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);K(e,0,0.9*
c,p);L(e,0,(0.9-d)*c,(0.5-a)*b,0.8*c,0.5*b,0.8*c);L(e,(0.5+a)*b,0.8*c,1*b,(0.9-d)*c,1*b,0.9*c);Hd(e);b=e.q;b.v=new H(0,0.1);b.w=new H(1,0.8);return b},Cylinder3:function(a,b,c){var a=0.1*ic,d=0.5*ic,e=new J;K(e,0.1*b,0,h);e.lineTo(0.9*b,0);L(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);L(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);K(e,0.1*b,0,p);L(e,(0.1+a)*b,0,0.2*b,(0.5-d)*c,0.2*b,0.5*c);L(e,0.2*b,(0.5+d)*c,(0.1+
a)*b,1*c,0.1*b,1*c);Hd(e);b=e.q;b.v=new H(0.2,0);b.w=new H(0.9,1);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var a=0.1*ic,d=0.5*ic,e=new J;K(e,0.9*b,0,h);L(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);L(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);e.lineTo(0.9*b,0);K(e,0.9*b,0,p);L(e,(0.9-a)*b,0,0.8*b,(0.5-d)*c,0.8*b,0.5*c);L(e,0.8*b,(0.5+d)*c,(0.9-a)*b,1*c,0.9*b,1*c);Hd(e);b=e.q;b.v=new H(0.1,0);
b.w=new H(0.8,1);return b},Prism1:function(a,b,c){a=new J;K(a,0.25*b,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(b,0.5*c);a.lineTo(0.5*b,c);a.lineTo(0,c);Gd(a);K(a,0.25*b,0.25*c,p);a.lineTo(0.5*b,c);Hd(a);b=a.q;b.v=new H(0.408,0.172);b.w=new H(0.833,0.662);return b},Prism2:function(a,b,c){a=new J;K(a,0,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);Gd(a);K(a,0,c,p);a.lineTo(0.25*b,0.5*c);a.lineTo(b,0.25*c);a.moveTo(0,0.25*c);a.lineTo(0.25*b,0.5*c);Hd(a);b=a.q;
b.v=new H(0.25,0.5);b.w=new H(0.75,0.75);return b},Pyramid1:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(b,0.75*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.75*c);Gd(a);K(a,0.5*b,0,p);a.lineTo(0.5*b,1*c);Hd(a);b=a.q;b.v=new H(0.25,0.367);b.w=new H(0.75,0.875);return b},Pyramid2:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(b,0.85*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.85*c);Gd(a);K(a,0.5*b,0,p);a.lineTo(0.5*b,0.7*c);a.lineTo(0,0.85*c);a.moveTo(0.5*b,0.7*c);a.lineTo(1*b,0.85*c);Hd(a);b=a.q;b.v=new H(0.25,
0.367);b.w=new H(0.75,0.875);return b},Actor:function(a,b,c){var d=0.2*ic,e=0.1*ic,a=0.5,g=0.1,i=new J;K(i,a*b,(g+0.1)*c,h);L(i,(a-d)*b,(g+0.1)*c,(a-0.2)*b,(g+e)*c,(a-0.2)*b,g*c);L(i,(a-0.2)*b,(g-e)*c,(a-d)*b,(g-0.1)*c,a*b,(g-0.1)*c);L(i,(a+d)*b,(g-0.1)*c,(a+0.2)*b,(g-e)*c,(a+0.2)*b,g*c);L(i,(a+0.2)*b,(g+e)*c,(a+d)*b,(g+0.1)*c,a*b,(g+0.1)*c);d=0.05;e=ic*d;K(i,0.5*b,0.2*c,h);i.lineTo(0.95*b,0.2*c);a=0.95;g=0.25;L(i,(a+e)*b,(g-d)*c,(a+d)*b,(g-e)*c,(a+d)*b,g*c);i.lineTo(1*b,0.6*c);i.lineTo(0.85*b,0.6*
c);i.lineTo(0.85*b,0.35*c);d=0.025;e=ic*d;a=0.825;g=0.35;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.8*b,1*c);i.lineTo(0.55*b,1*c);i.lineTo(0.55*b,0.7*c);d=0.05;e=ic*d;a=0.5;g=0.7;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.45*b,1*c);i.lineTo(0.2*b,1*c);i.lineTo(0.2*b,0.35*c);d=0.025;e=ic*d;a=0.175;g=0.35;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-
d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.15*b,0.6*c);i.lineTo(0*b,0.6*c);i.lineTo(0*b,0.25*c);d=0.05;e=ic*d;a=0.05;g=0.25;L(i,(a-d)*b,(g-e)*c,(a-e)*b,(g-d)*c,a*b,(g-d)*c);i.lineTo(0.5*b,0.2*c);b=i.q;b.v=new H(0.2,0.2);b.w=new H(0.8,0.65);return b},Card:function(a,b,c){a=new J;K(a,1*b,0*c,h);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,0.2*c);a.lineTo(0.2*b,0*c);Gd(a);b=a.q;b.v=new H(0,0.2);b.w=new H(1,1);return b},Collate:function(a,b,c){a=new J;K(a,0.5*b,0.5*c,h);a.lineTo(0,0);a.lineTo(1*
b,0);a.lineTo(0.5*b,0.5*c);K(a,0.5*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,0.25);return b},CreateRequest:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);K(d,0,a*c,p);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);Hd(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1-a);return b},Database:function(a,b,c){var a=new J,d=0.5*ic,e=0.1*ic;K(a,1*b,0.1*c,h);a.lineTo(1*
b,0.9*c);L(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);L(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);K(a,1*b,0.1*c,p);L(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);L(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);L(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);L(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);a.moveTo(1*b,0.3*c);L(a,1*b,(0.3+e)*c,(0.5+d)*b,0.4*c,0.5*b,0.4*c);L(a,(0.5-d)*b,0.4*c,0,(0.3+e)*c,0,
0.3*c);Hd(a);b=a.q;b.v=new H(0,0.4);b.w=new H(1,0.9);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0,1*c);L(a,0.25*b,0.9*c,0.25*b,0.1*c,0,0);Gd(a);b=a.q;b.v=new H(0.226,0);b.w=new H(0.81,1);return b},DiskStorage:function(a,b,c){var a=new J,d=0.5*ic,e=0.1*ic;K(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);L(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);L(a,0,(0.1-e)*
c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);K(a,1*b,0.1*c,p);L(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);L(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);L(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);L(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);Hd(a);b=a.q;b.v=new H(0,0.3);b.w=new H(1,0.9);return b},Display:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);a.lineTo(0,0.5*c);Gd(a);b=a.q;b.v=new H(0.25,0);b.w=
new H(0.75,1);return b},DividedEvent:function(a,b,c){a=a?a.gc:0;0===a?a=0.2:0.15>a&&(a=0.15);var d=new J,e=0.2*ic;K(d,0,0.2*c,h);L(d,0,(0.2-e)*c,(0.2-e)*b,0,0.2*b,0);d.lineTo(0.8*b,0);L(d,(0.8+e)*b,0,1*b,(0.2-e)*c,1*b,0.2*c);d.lineTo(1*b,0.8*c);L(d,1*b,(0.8+e)*c,(0.8+e)*b,1*c,0.8*b,1*c);d.lineTo(0.2*b,1*c);L(d,(0.2-e)*b,1*c,0,(0.8+e)*c,0,0.8*c);d.lineTo(0,0.2*c);K(d,0,a*c,p);d.lineTo(1*b,a*c);Hd(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1-a);return b},DividedProcess:function(a,b,c){a=a?a.gc:0;0.1>a&&(a=
0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);K(d,0,a*c,p);d.lineTo(1*b,a*c);Hd(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1);return b},Document:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Gd(a);b=a.q;b.v=new H(0,0);b.w=new H(1,0.6);return b},ExternalOrganization:function(a,b,c){a=a?a.gc:0;0.2>a&&(a=0.2);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);
K(d,a*b,0,p);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);Hd(d);b=d.q;b.v=new H(a/2,a/2);b.w=new H(1-a/2,1-a/2);return b},ExternalProcess:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);Gd(a);K(a,0.1*b,0.4*c,p);a.lineTo(0.1*b,0.6*c);a.moveTo(0.9*b,0.6*c);a.lineTo(0.9*b,0.4*c);a.moveTo(0.6*b,0.1*c);a.lineTo(0.4*b,0.1*c);a.moveTo(0.4*b,0.9*c);a.lineTo(0.6*b,0.9*
c);Hd(a);b=a.q;b.v=new H(0.25,0.25);b.w=new H(0.75,0.75);return b},File:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);Gd(a);K(a,0.75*b,0,p);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.25*c);Hd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,1);return b},Interrupt:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);K(a,1*b,0.5*c,p);a.lineTo(1*b,1*c);K(a,1*b,0.5*c,p);a.lineTo(1*b,0);b=a.q;b.v=new H(0,0.25);b.w=new H(0.5,
0.75);return b},InternalStorage:function(a,b,c){var d=a?a.gc:0,a=a?a.ys:0;0===d&&(d=0.1);0===a&&(a=0.1);var e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo(1*b,1*c);e.lineTo(0,1*c);Gd(e);K(e,d*b,0,p);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);Hd(e);b=e.q;b.v=new H(d,a);b.w=new H(1,1);return b},Junction:function(a,b,c){var a=new J,d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,g=0.5*ic;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+g)*c,(0.5+g)*b,1*c,0.5*b,1*c);L(a,(0.5-g)*b,1*c,0,(0.5+g)*c,0,0.5*c);L(a,0,(0.5-g)*c,(0.5-
g)*b,0,0.5*b,0);L(a,(0.5+g)*b,0,1*b,(0.5-g)*c,1*b,0.5*c);K(a,(e+d)*b,(e+d)*c,p);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);Hd(a);b=a.q;b.Zb=fh;return b},LinedDocument:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Gd(a);K(a,0.1*b,0,p);a.lineTo(0.1*b,0.75*c);Hd(a);b=a.q;b.v=new H(0.1,0);b.w=new H(1,0.6);return b},LoopLimit:function(a,b,c){a=new J;K(a,0,1*c,h);a.lineTo(0,0.25*c);a.lineTo(0.25*b,0);
a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);Gd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,1);return b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){var a=new J,d=0.5*ic;K(a,0.5*b,1*c,h);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.6*b,0.9*c);a.lineTo(1*b,0.9*c);a.lineTo(1*b,1*c);a.lineTo(0.5*b,1*c);b=a.q;b.v=new H(0.15,0.15);b.w=new H(0.85,0.8);return b},ManualInput:function(a,
b,c){a=new J;K(a,1*b,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.25*c);Gd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,1);return b},MessageFromUser:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.7);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(a*b,0.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);b=d.q;b.v=new H(0,0);b.w=new H(a,1);return b},MicroformProcessing:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.25);var d=new J;K(d,0,0,h);d.lineTo(0.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.5*b,(1-a)*c);
d.lineTo(0,1*c);Gd(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1-a);return b},MicroformRecording:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.15*c);a.lineTo(1*b,0.85*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);Gd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,0.75);return b},MultiDocument:function(a,b,c){c/=0.8;a=new J;K(a,b,0,h);a.lineTo(b,0.5*c);L(a,0.96*b,0.47*c,0.93*b,0.45*c,0.9*b,0.44*c);a.lineTo(0.9*b,0.6*c);L(a,0.86*b,0.57*c,0.83*b,0.55*c,0.8*b,0.54*c);a.lineTo(0.8*b,0.7*c);L(a,
0.4*b,0.4*c,0.4*b,1*c,0,0.7*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);a.lineTo(0.1*b,0.1*c);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);Gd(a);K(a,0.1*b,0.2*c,p);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.54*c);a.moveTo(0.2*b,0.1*c);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.44*c);Hd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(0.8,0.77);return b},MultiProcess:function(a,b,c){a=new J;K(a,0.1*b,0.1*c,h);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.8*c);a.lineTo(0.9*b,0.8*c);a.lineTo(0.9*b,0.9*
c);a.lineTo(0.8*b,0.9*c);a.lineTo(0.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);Gd(a);K(a,0.2*b,0.1*c,p);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.8*c);a.moveTo(0.1*b,0.2*c);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.9*c);Hd(a);b=a.q;b.v=new H(0,0.2);b.w=new H(0.8,1);return b},OfflineStorage:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=1-a,e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo(0.5*b,1*c);Gd(e);K(e,0.5*a*b,a*c,p);e.lineTo((1-0.5*a)*b,a*c);Hd(e);b=e.q;b.v=new H(d/4+0.5*a,a);b.w=
new H(3*d/4+0.5*a,a+0.5*d);return b},OffPageConnector:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.75*b,1*c);a.lineTo(0,1*c);Gd(a);b=a.q;b.v=new H(0,0);b.w=new H(0.75,1);return b},Or:function(a,b,c){var a=new J,d=0.5*ic;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);K(a,1*b,0.5*c,p);a.lineTo(0,0.5*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*
b,0);Hd(a);b=a.q;b.Zb=fh;return b},PaperTape:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,0.3*c);L(a,0.5*b,0.6*c,0.5*b,0,1*b,0.3);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Gd(a);b=a.q;b.v=new H(0,0.49);b.w=new H(1,0.75);return b},PrimitiveFromCall:function(a,b,c){var d=a?a.gc:0,a=a?a.ys:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo((1-a)*b,0.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);Gd(e);b=e.q;b.v=new H(d,0);b.w=new H(1-a,1);return b},PrimitiveToCall:function(a,
b,c){var d=a?a.gc:0,a=a?a.ys:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=new J;K(e,0,0,h);e.lineTo((1-a)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);Gd(e);b=e.q;b.v=new H(d,0);b.w=new H(1-a,1);return b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);K(d,(1-a)*b,0,p);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);Hd(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},Process:function(a,
b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);K(d,a*b,0,p);d.lineTo(a*b,1*c);Hd(d);b=d.q;b.v=new H(a,0);b.w=new H(1,1);return b},Sort:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);Gd(a);K(a,0,0.5*c,p);a.lineTo(1*b,0.5*c);Hd(a);b=a.q;b.v=new H(0.25,0.25);b.w=new H(0.75,0.5);return b},Start:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*
b,1*c);L(a,0,1*c,0,0,0.25*b,0);K(a,0.25*b,0,p);a.lineTo(0.25*b,1*c);a.moveTo(0.75*b,0);a.lineTo(0.75*b,1*c);Hd(a);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,1);return b},Terminator:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);L(a,0,1*c,0,0,0.25*b,0);b=a.q;b.v=new H(0.23,0);b.w=new H(0.77,1);return b},TransmittalTape:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.75*b,(1-a)*c);
d.lineTo(0,(1-a)*c);Gd(d);b=d.q;b.v=new H(0,0);b.w=new H(1,1-a);return b},AndGate:function(a,b,c){var a=new J,d=0.5*ic;K(a,0,0,h);a.lineTo(0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);a.lineTo(0,1*c);Gd(a);b=a.q;b.v=new H(0,0);b.w=new H(0.55,1);return b},Buffer:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);Gd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(0.5,0.75);return b},Clock:function(a,b,c){var a=new J,d=0.5*ic;K(a,1*b,0.5*c,h);
L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);K(a,1*b,0.5*c,p);a.lineTo(1*b,0.5*c);K(a,0.8*b,0.75*c,p);a.lineTo(0.8*b,0.25*c);a.lineTo(0.6*b,0.25*c);a.lineTo(0.6*b,0.75*c);a.lineTo(0.4*b,0.75*c);a.lineTo(0.4*b,0.25*c);a.lineTo(0.2*b,0.25*c);a.lineTo(0.2*b,0.75*c);Hd(a);b=a.q;b.Zb=fh;return b},Ground:function(a,b,c){a=new J;K(a,0.5*b,0,p);a.lineTo(0.5*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*
b,0.6*c);a.moveTo(0.3*b,0.8*c);a.lineTo(0.7*b,0.8*c);a.moveTo(0.4*b,1*c);a.lineTo(0.6*b,1*c);return a.q},Inverter:function(a,b,c){var a=new J,d=0.1*ic;K(a,0.8*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.8*b,0.5*c);K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);L(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);L(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);L(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.q;b.v=new H(0,0.25);b.w=new H(0.4,0.75);return b},NandGate:function(a,
b,c){var a=new J,d=0.5*ic,e=0.4*ic,g=0.1*ic;K(a,0.8*b,0.5*c,h);L(a,0.8*b,(0.5+e)*c,(0.4+d)*b,1*c,0.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.4*b,0);L(a,(0.4+d)*b,0,0.8*b,(0.5-e)*c,0.8*b,0.5*c);K(a,1*b,0.5*c,h);L(a,1*b,(0.5+g)*c,(0.9+g)*b,0.6*c,0.9*b,0.6*c);L(a,(0.9-g)*b,0.6*c,0.8*b,(0.5+g)*c,0.8*b,0.5*c);L(a,0.8*b,(0.5-g)*c,(0.9-g)*b,0.4*c,0.9*b,0.4*c);L(a,(0.9+g)*b,0.4*c,1*b,(0.5-g)*c,1*b,0.5*c);b=a.q;b.v=new H(0,0.05);b.w=new H(0.55,0.95);return b},NorGate:function(a,b,c){var a=new J,d=
0.5,e=ic*d,g=0,i=0.5;K(a,0.8*b,0.5*c,h);L(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0,1*c);L(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);L(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=0.1*ic;g=0.9;i=0.5;K(a,(g-d)*b,i*c,h);L(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);L(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);L(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);L(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.q;b.v=new H(0.2,0.25);b.w=new H(0.6,0.75);return b},OrGate:function(a,b,c){var a=new J,d=0.5*
ic;K(a,0,0,h);L(a,(0+d+d)*b,0*c,0.8*b,(0.5-d)*c,1*b,0.5*c);L(a,0.8*b,(0.5+d)*c,(0+d+d)*b,1*c,0,1*c);L(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);Gd(a);b=a.q;b.v=new H(0.2,0.25);b.w=new H(0.75,0.75);return b},XnorGate:function(a,b,c){var a=new J,d=0.5,e=ic*d,g=0.2,i=0.5;K(a,0.1*b,0,p);L(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);K(a,0.8*b,0.5*c,h);L(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0.2*b,1*c);L(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);L(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=0.1*ic;g=0.9;i=0.5;K(a,
(g-d)*b,i*c,h);L(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);L(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);L(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);L(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.q;b.v=new H(0.4,0.25);b.w=new H(0.65,0.75);return b},XorGate:function(a,b,c){var a=new J,d=0.5*ic;K(a,0.1*b,0,p);L(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);K(a,0.2*b,0,h);L(a,(0.2+d)*b,0*c,0.9*b,(0.5-d)*c,1*b,0.5*c);L(a,0.9*b,(0.5+d)*c,(0.2+d)*b,1*c,0.2*b,1*c);L(a,0.45*b,0.75*c,0.45*b,
0.25*c,0.2*b,0);Gd(a);b=a.q;b.v=new H(0.4,0.25);b.w=new H(0.8,0.75);return b},Capacitor:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(0,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.q},Resistor:function(a,b,c){a=new J;K(a,0,0.5*c,p);a.lineTo(0.1*b,0);a.lineTo(0.2*b,1*c);a.lineTo(0.3*b,0);a.lineTo(0.4*b,1*c);a.lineTo(0.5*b,0);a.lineTo(0.6*b,1*c);a.lineTo(0.7*b,0.5*c);return a.q},Inductor:function(a,b,c){var a=new J,d=0.1*ic,e=0.1,g=0.5;K(a,(e-0.5*d)*b,(g+0.1)*c,p);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+
d)*c,(e+0.1)*b,(g+d)*c);e=0.3;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);g=e=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.7;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.9;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,(e+0.5*d)*b,(g+0.1)*c);return a.q},ACvoltageSource:function(a,
b,c){var a=new J,d=0.5*ic;K(a,0*b,0.5*c,p);L(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);L(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);a.moveTo(0.1*b,0.5*c);L(a,0.5*b,0*c,0.5*b,1*c,0.9*b,0.5*c);b=a.q;b.Zb=fh;return b},DCvoltageSource:function(a,b,c){a=new J;K(a,0,0.75*c,p);a.lineTo(0,0.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.q},Diode:function(a,b,c){a=new J;K(a,1*b,0,p);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);a.lineTo(0,
0);a.lineTo(1*b,0.5*c);a.lineTo(1*b,1*c);b=a.q;b.v=new H(0,0.25);b.w=new H(0.5,0.75);return b},Wifi:function(a,b,c){var d=b,e=c,b=0.38*b,c=0.6*c,a=new J,g=0.8*ic,i=0.8,j=0,k=0.5,d=(d-b)/2,e=(e-c)/2;K(a,j*b+d,(k+i)*c+e,h);L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,j*b+d,(k-i)*c+e,(j-i+0.5*g)*b+d,(k-g)*c+e,(j-i+0.5*g)*b+d,k*c+e);L(a,(j-i+0.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);Gd(a);g=0.4*ic;i=0.4;j=0.2;
k=0.5;K(a,j*b+d,(k+i)*c+e,h);L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,j*b+d,(k-i)*c+e,(j-i+0.5*g)*b+d,(k-g)*c+e,(j-i+0.5*g)*b+d,k*c+e);L(a,(j-i+0.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);Gd(a);g=0.2*ic;i=0.2;k=j=0.5;K(a,(j-i)*b+d,k*c+e,h);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,
j*b+d,(k+i)*c+e);L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);g=0.4*ic;i=0.4;j=0.8;k=0.5;K(a,j*b+d,(k-i)*c+e,h);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);L(a,j*b+d,(k+i)*c+e,(j+i-0.5*g)*b+d,(k+g)*c+e,(j+i-0.5*g)*b+d,k*c+e);L(a,(j+i-0.5*g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);Gd(a);g=0.8*ic;i=0.8;j=1;k=0.5;K(a,j*b+d,(k-i)*c+e,h);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,
(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);L(a,j*b+d,(k+i)*c+e,(j+i-0.5*g)*b+d,(k+g)*c+e,(j+i-0.5*g)*b+d,k*c+e);L(a,(j+i-0.5*g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);Gd(a);return a.q},Email:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);Gd(a);K(a,0,0,p);a.lineTo(0.5*b,0.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(0.45*b,0.54*c);a.moveTo(1*b,1*c);a.lineTo(0.55*b,0.54*c);Hd(a);return a.q},Ethernet:function(a,b,c){a=new J;K(a,
0.35*b,0,h);a.lineTo(0.65*b,0);a.lineTo(0.65*b,0.4*c);a.lineTo(0.35*b,0.4*c);a.lineTo(0.35*b,0);Gd(a);K(a,0.1*b,1*c,h,h);a.lineTo(0.4*b,1*c);a.lineTo(0.4*b,0.6*c);a.lineTo(0.1*b,0.6*c);a.lineTo(0.1*b,1*c);Gd(a);K(a,0.6*b,1*c,h,h);a.lineTo(0.9*b,1*c);a.lineTo(0.9*b,0.6*c);a.lineTo(0.6*b,0.6*c);a.lineTo(0.6*b,1*c);Gd(a);K(a,0,0.5*c,p);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.5*b,0.4*c);a.moveTo(0.75*b,0.5*c);a.lineTo(0.75*b,0.6*c);a.moveTo(0.25*b,0.5*c);a.lineTo(0.25*b,0.6*c);Hd(a);return a.q},
Power:function(a,b,c){var a=new J,d=0.4*ic,e=0.4,g=new F(0,0),i=new F(0,0),j=new F(0,0),k=new F(0,0);new F(0,0);rl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);new F(i.x,i.y);K(a,i.x*b,i.y*c,h);L(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);rl(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);L(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);d=0.3*ic;e=0.3;rl(0.5-e,
0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);a.lineTo(i.x*b,i.y*c);L(a,k.x*b,k.y*c,j.x*b,j.y*c,(0.5-e)*b,0.5*c);L(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);rl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);L(a,k.x*b,k.y*c,j.x*b,j.y*c,i.x*b,i.y*c);Gd(a);K(a,0.45*b,0,h);a.lineTo(0.45*b,0.5*c);a.lineTo(0.55*b,0.5*c);a.lineTo(0.55*b,0);Gd(a);b=a.q;b.v=new H(0.25,0.55);b.w=new H(0.75,0.8);return b},Fallout:function(a,
b,c){var a=new J,d=0.5*ic;K(a,0*b,0.5*c,h);L(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);L(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);var e=d=0;K(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.4;e=0;Gd(a);K(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.2;e=-0.3;Gd(a);K(a,
(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);Gd(a);b=a.q;b.Zb=fh;return b},IrritationHazard:function(a,b,c){a=new J;K(a,0.2*b,0*c,h);a.lineTo(0.5*b,0.3*c);a.lineTo(0.8*b,0*c);a.lineTo(1*b,0.2*c);a.lineTo(0.7*b,0.5*c);a.lineTo(1*b,0.8*c);a.lineTo(0.8*b,1*c);a.lineTo(0.5*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0*b,0.8*c);a.lineTo(0.3*b,0.5*c);a.lineTo(0*b,0.2*c);Gd(a);b=a.q;b.v=new H(0.3,0.3);b.w=new H(0.7,0.7);return b},ElectricalHazard:function(a,
b,c){a=new J;K(a,0.37,0*c,h);a.lineTo(0.5*b,0.11*c);a.lineTo(0.77*b,0.04*c);a.lineTo(0.33*b,0.49*c);a.lineTo(1*b,0.37*c);a.lineTo(0.63*b,0.86*c);a.lineTo(0.77*b,0.91*c);a.lineTo(0.34*b,1*c);a.lineTo(0.34*b,0.78*c);a.lineTo(0.44*b,0.8*c);a.lineTo(0.65*b,0.56*c);a.lineTo(0*b,0.68*c);Gd(a);return a.q},FireHazard:function(a,b,c){a=new J;K(a,0.1*b,1*c,h);L(a,-0.25*b,0.63*c,0.45*b,0.44*c,0.29*b,0*c);L(a,0.48*b,0.17*c,0.54*b,0.35*c,0.51*b,0.42*c);L(a,0.59*b,0.29*c,0.58*b,0.28*c,0.59*b,0.18*c);L(a,0.8*b,
0.34*c,0.88*b,0.43*c,0.75*b,0.6*c);L(a,0.87*b,0.48*c,0.88*b,0.43*c,0.88*b,0.31*c);L(a,1.17*b,0.76*c,0.82*b,0.8*c,0.9*b,1*c);Gd(a);b=a.q;b.v=new H(0.05,0.645);b.w=new H(0.884,0.908);return b},BpmnActivityLoop:function(a,b,c){var a=new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,(0.5*Math.SQRT2/2+0.5)*b,(1-(0.5-0.5*Math.SQRT2/2))*c,p);L(a,1*b,0.7*c,1*b,0.5*c,1*b,0.5*c);L(a,1*b,(0.5-d+0)*c,(0.5+d+0)*b,0*c,0.5*b,0*c);L(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);L(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.35*b,0.98*
c);a.moveTo(0.35*b,0.8*c);a.lineTo(0.35*b,1*c);a.lineTo(0.15*b,1*c);return a.q},BpmnActivityParallel:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(0,1*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.q},BpmnActivitySequential:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(1*b,0);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);return a.q},BpmnActivityAdHoc:function(a,b,c){a=new J;K(a,0,0,p);K(a,1*b,1*c,p);K(a,0,0.5*c,p);L(a,0.2*b,0.35*c,0.3*b,0.35*
c,0.5*b,0.5*c);L(a,0.7*b,0.65*c,0.8*b,0.65*c,1*b,0.5*c);return a.q},BpmnActivityCompensation:function(a,b,c){a=new J;K(a,0,0.5*c,h);a.lineTo(0.5*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(0.5*b,1*c);Gd(a);return a.q},BpmnTaskMessage:function(a,b,c){a=new J;K(a,0,0.2*c,h);a.lineTo(1*b,0.2*c);a.lineTo(1*b,0.8*c);a.lineTo(0,0.8*c);a.lineTo(0,0.8*c);Gd(a);K(a,0,0.2*c,p);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,0.2*c);Hd(a);return a.q},BpmnTaskScript:function(a,
b,c){a=new J;K(a,0.7*b,1*c,h);a.lineTo(0.3*b,1*c);L(a,0.6*b,0.5*c,0,0.5*c,0.3*b,0);a.lineTo(0.7*b,0);L(a,0.4*b,0.5*c,1*b,0.5*c,0.7*b,1*c);Gd(a);K(a,0.45*b,0.73*c,p);a.lineTo(0.7*b,0.73*c);a.moveTo(0.38*b,0.5*c);a.lineTo(0.63*b,0.5*c);a.moveTo(0.31*b,0.27*c);a.lineTo(0.56*b,0.27*c);Hd(a);return a.q},BpmnTaskUser:function(a,b,c){a=new J;K(a,0,0,p);K(a,0.335*b,(1-0.555)*c,h);a.lineTo(0.335*b,0.595*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.665*b,(1-0.555)*c);L(a,0.88*b,0.46*c,0.98*b,0.54*c,1*b,0.68*c);
a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.68*c);L(a,0.02*b,0.54*c,0.12*b,0.46*c,0.335*b,(1-0.555)*c);a.lineTo(0.365*b,0.405*c);var d=0.5-0.285,e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;L(a,(0.5-(e+d)/2)*b,(d+(d+g)/2)*c,(0.5-d)*b,(d+g)*c,(0.5-d)*b,d*c);L(a,(0.5-d)*b,(d-g)*c,(0.5-e)*b,(d-d)*c,0.5*b,(d-d)*c);L(a,(0.5+e)*b,(d-d)*c,(0.5+d)*b,(d-g)*c,(0.5+d)*b,d*c);L(a,(0.5+d)*b,(d+g)*c,(0.5+(e+d)/2)*b,(d+(d+g)/2)*c,0.635*b,0.405*c);a.lineTo(0.635*b,0.405*c);a.lineTo(0.665*b,(1-0.555)*
c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.335*b,0.595*c);K(a,0.2*b,1*c,p);a.lineTo(0.2*b,0.8*c);K(a,0.8*b,1*c,p);a.lineTo(0.8*b,0.8*c);return a.q},BpmnEventConditional:function(a,b,c){a=new J;K(a,0.1*b,0,h);a.lineTo(0.9*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*b,1*c);Gd(a);K(a,0.2*b,0.2*c,p);a.lineTo(0.8*b,0.2*c);a.moveTo(0.2*b,0.4*c);a.lineTo(0.8*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.2*b,0.8*c);a.lineTo(0.8*b,0.8*c);Hd(a);return a.q},BpmnEventError:function(a,b,c){a=new J;K(a,
0,1*c,h);a.lineTo(0.33*b,0);a.lineTo(0.66*b,0.5*c);a.lineTo(1*b,0);a.lineTo(0.66*b,1*c);a.lineTo(0.33*b,0.5*c);Gd(a);return a.q},BpmnEventEscalation:function(a,b,c){a=new J;K(a,0,0,p);K(a,1*b,1*c,p);K(a,0.1*b,1*c,h);a.lineTo(0.5*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.5*c);Gd(a);return a.q},BpmnEventTimer:function(a,b,c){var a=new J,d=0.5*ic;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,
(0.5-d)*c,1*b,0.5*c);K(a,0.5*b,0,p);a.lineTo(0.5*b,0.15*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0.85*c);a.moveTo(0,0.5*c);a.lineTo(0.15*b,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(0.85*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.58*b,0.1*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.78*b,0.54*c);Hd(a);b=a.q;b.Zb=fh;return b}},wl;for(wl in bl)bl[wl.toLowerCase()]=wl;
var xl={Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",
OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",None:""},al,yl={},zl;for(zl in bl){var Dl=bl[zl];"string"===typeof Dl&&(Dl=bl[Dl]);"string"===typeof Dl&&(Dl=bl[Dl]);Dl&&(yl[zl]=Dl(n,100,100));yl[zl].oe()}al=yl;var El={};
function cl(a){if(xl){for(var b in xl){var c=xd(xl[b],p);El[b]=c;El[b.toLowerCase()]=b}xl=f}return El[a]}V.FigureGenerators=bl;V.ArrowheadGeometries=El;
function S(a){0===arguments.length?x.call(this):x.call(this,a);this.Ym=this.Yg="";this.aq=n;this.Hq=this.yq=this.Jp=this.or=this.qp=this.dp=h;this.Sq=this.Nq=this.Mq=p;this.mn=h;this.er="";this.br=h;this.Ek=this.Tq=this.Oq=this.cr=n;this.Ot=p;this.Vg=this.dr=n;this.Qq="";this.Ml=n;this.Pq=(new bb(NaN,NaN)).freeze();this.Uq="";this.Nl=n;this.Md="";this.Pp=h;this.G=this.cp=this.gk=n;this.gj=(new F(NaN,NaN)).freeze();this.bn=new F(NaN,NaN);this.jq="";this.hj=n;this.kq=Jb;this.tq=nc;this.mq=oc;this.rp=
n;this.Qp=h;this.bq=Fl;this.Lf=p;this.pn=(new F(6,6)).freeze();this.on="gray";this.nn=4;this.gB=-1;this.aj=h;this.lu=this.he=p}w.Q("Part",S);w.Ea(S,x);
S.prototype.xb=function(a){x.prototype.xb.call(this,a);a.Yg=this.Yg;a.Ym=this.Ym;a.aq=this.aq;a.dp=this.dp;a.qp=this.qp;a.or=this.or;a.Jp=this.Jp;a.yq=this.yq;a.Hq=this.Hq;a.Mq=this.Mq;a.Nq=this.Nq;a.Sq=this.Sq;a.mn=this.mn;a.er=this.er;a.br=this.br;a.cr=this.cr;a.Oq=this.Oq;a.Tq=this.Tq;a.Ot=p;a.dr=this.dr;a.Vg=n;a.Qq=this.Qq;a.Pq.Ua(this.Pq);a.Uq=this.Uq;a.Md=this.Md;a.Pp=this.Pp;a.cp=this.cp;a.gj.Ua(this.gj);a.bn.Ua(this.bn);a.jq=this.jq;a.kq=this.kq.O();a.tq=this.tq.O();a.mq=this.mq.O();a.rp=
this.rp;a.Qp=this.Qp;a.bq=this.bq;a.Lf=this.Lf;a.pn.Ua(this.pn);a.on=this.on;a.nn=this.nn};S.prototype.Ah=function(a){x.prototype.Ah.call(this,a);tj(a);a.Ek=n;a.Ml=n;a.Nl=n;a.hj=n};S.prototype.toString=function(){var a=w.Uk(Object.getPrototypeOf(this))+"#"+w.ec(this);this.data&&(a+="("+ke(this.data)+")");return a};S.LayoutNone=0;var Li;S.LayoutAdded=Li=1;var Qi;S.LayoutRemoved=Qi=2;var Sj;S.LayoutShown=Sj=4;var Tj;S.LayoutHidden=Tj=8;S.LayoutNodeSized=16;var Xi;S.LayoutGroupLayout=Xi=32;var Fl;
S.LayoutStandard=Fl=Li|Qi|Sj|Tj|16|Xi;S.prototype.nm=function(a,b,c,d,e,g,i){var j=this.h;j!==n&&(a===ie&&"elements"===b?e instanceof x&&Mi(e,e,function(a){Ni(j,a)}):a===je&&"elements"===b&&e instanceof x&&Mi(e,e,function(a){Pi(j,a)}),j.Rc(a,b,c,d,e,g,i))};S.prototype.updateTargetBindings=S.prototype.vb=function(a){x.prototype.vb.call(this,a);if(this.data!==n)for(a=this.elements;a.next();){var b=a.value;b instanceof x&&Mi(b,b,function(a){a.data!==n&&a.vb()})}};
w.u(S,{HF:"adornments"},function(){return this.Vg===n?n:this.Vg.l});S.prototype.findAdornment=S.prototype.Zn=function(a){u&&w.k(a,"string",S,"findAdornment:category");var b=this.Vg;return b===n?n:b.qa(a)};
S.prototype.addAdornment=S.prototype.Gk=function(a,b){if(b!==n){u&&(w.k(a,"string",S,"addAdornment:category"),w.i(b,of,S,"addAdornment:ad"));var c=n,d=this.Vg;d!==n&&(c=d.qa(a));if(c!==b){if(c!==n){var e=c.h;e!==n&&e.remove(c)}d===n&&(this.Vg=d=new ka("string",of));b.Yg!==a&&(b.Nc=a);d.add(a,b);c=this.h;c!==n&&(c.add(b),b.data=this.data)}}};
S.prototype.removeAdornment=S.prototype.dl=function(a){u&&w.k(a,"string",S,"removeAdornment:category");var b=this.Vg;if(b!==n){var c=b.qa(a);if(c!==n){var d=c.h;d!==n&&d.remove(c)}b.remove(a);0===b.count&&(this.Vg=n)}};S.prototype.clearAdornments=S.prototype.yh=function(){var a=this.Vg;if(a!==n){for(var b=[],a=a.l;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.dl(b[c])}};
S.prototype.updateAdornments=S.prototype.Qi=function(){a:{var a=this.h;if(a!==n){var b=n;if(this.Qa&&this.tE){var c=this.$v;if(this.wa.P()&&c!==n&&this.mb()&&c.Yk()&&c.wa.P()){b=this.Zn("Selection");if(b===n){b=this.uE;b===n&&(this instanceof U?b=a.DD:this instanceof S&&(b=this instanceof vf?a.dD:a.SD));if(!(b instanceof of))break a;xf(b);b=b.copy();if(!(b instanceof of))break a;b.Nc="Selection";b.Cc=c}if(b!==n){a=b.placeholder;if(a!==n){var d=c.Vk(),e=0;c instanceof V&&(e=c.Za);a.xa=new bb((c.Sa.width+
e)*d,(c.Sa.height+e)*d)}b.angle=c.bo();b.type!==Ug?b.location=c.Ab(Jb):b.R()}}this.Gk("Selection",b)}else this.dl("Selection")}}c=this.h;if(c!==n){c=c.Rb.We.n;b=c.length;for(a=0;a<b;a++)d=c[a],d.isEnabled&&d.updateAdornments(this)}};w.u(S,{Oa:"layer"},t("G"));w.u(S,{h:"diagram"},function(){var a=this.G;return a!==n?a.h:n});w.g(S,"layerName",S.prototype.Qd);
w.defineProperty(S,{Qd:"layerName"},t("Ym"),function(a){var b=this.Ym;if(b!==a){w.k(a,"string",S,"layerName");var c=this.h;if(!(c!==n&&c.Tr(a)==n)&&(this.Ym=a,this.j("layerName",b,a),b=this.Oa,b!==n&&b.name!==a&&(c=b.h,c!==n&&(a=c.Tr(a),a!==n&&a!==b)))){var d=b.se(-1,this,h);0<=d&&c.Rc(je,"parts",b,this,n,d,h);d=a.jm(99999999,this,h);0<=d&&c.Rc(ie,"parts",a,n,this,h,d);d=this.lo;if(d!==n){var e=c.La;c.La=h;d(this,b,a);c.La=e}}}});w.g(S,"layerChanged",S.prototype.lo);
w.defineProperty(S,{lo:"layerChanged"},t("aq"),function(a){var b=this.aq;b!==a&&(a!==n&&w.k(a,"function",S,"layerChanged"),this.aq=a,this.j("layerChanged",b,a))});w.g(S,"location",S.prototype.location);w.defineProperty(S,{location:"location"},t("gj"),function(a){var b=this.gj;if(!b.I(a)){u&&w.i(a,F,S,"location");this.gj=a=a.O();if(this.Kc===p){var c=this.qb,d=this.bn,e=c.copy();c.U(a.x-d.x,a.y-d.y);c.I(e)||this.j("position",e,c);Vj(this)}this.j("location",b,a)}});
function Vj(a){if(a.aj===p){var b=a.h;b!==n&&(b.fh.add(a),a instanceof T&&!b.sa.tb&&a.Qg(),b.yb());a.aj=h}}function Gl(a){if(a.aj!==p){var b=a.qb,c=a.Ib,d=c.copy();c.Ia();c.x=b.x;c.y=b.y;c.freeze();rj(a,d,c);a.aj=p}}w.u(S,{Xb:"locationObject"},function(){if(this.hj===n){var a=this.Mv;a!==f&&a!==n&&""!==a?(a=this.Pe(a),this.hj=a!==n?a:this):this.hj=this}return this.hj.visible?this.hj:this});w.g(S,"minLocation",S.prototype.MD);
w.defineProperty(S,{MD:"minLocation"},t("tq"),function(a){var b=this.tq;b.I(a)||(u&&w.i(a,F,S,"minLocation"),this.tq=a=a.O(),this.j("minLocation",b,a))});w.g(S,"maxLocation",S.prototype.FD);w.defineProperty(S,{FD:"maxLocation"},t("mq"),function(a){var b=this.mq;b.I(a)||(u&&w.i(a,F,S,"maxLocation"),this.mq=a=a.O(),this.j("maxLocation",b,a))});w.g(S,"locationObjectName",S.prototype.Mv);
w.defineProperty(S,{Mv:"locationObjectName"},t("jq"),function(a){var b=this.jq;b!==a&&(u&&w.k(a,"string",S,"locationObjectName"),this.jq=a,this.hj=n,Aj(this),this.j("locationObjectName",b,a))});w.g(S,"locationSpot",S.prototype.bg);w.defineProperty(S,{bg:"locationSpot"},t("kq"),function(a){var b=this.kq;b.I(a)||(u&&(w.i(a,H,S,"locationSpot"),tb(a)||w.m("Part.locationSpot must be a specific Spot value, not: "+a)),this.kq=a=a.O(),Aj(this),this.j("locationSpot",b,a))});
S.prototype.move=S.prototype.move=function(a){this.position=a;this.Kc===p&&Gl(this)};
S.prototype.isVisible=S.prototype.mb=function(){if(!this.Mg)return p;var a=this.Oa;if(a!==n&&!a.visible)return p;a=this.cb;if(a!==n&&(!a.Te||!a.mb()))return p;if(this instanceof T){a=this.SC();if(a!==n&&!a.yd)return p;a=this.zd;if(a!==n){var b={};b[w.ec(this)]=h;return Hl(a,b)}}else if(this instanceof U){var b=h,c=this.h;c!==n&&(b=c.Yc);c=this.ga;if(c!==n){if(b&&!c.yd)return p;c=Il(c);if(c===n||c===a)return p}c=this.la;if(c!==n){if(!b&&!c.yd)return p;b=Il(c);if(b===n||b===a)return p}}return h};
function Hl(a,b){var c=a.ga;if(c!==n){var d=c.zd;if(d!==n)b[w.ec(c)]||(b[w.ec(c)]=h,Hl(d,b));else if(!c.mb())return p}c=a.la;if(c!==n)if(d=c.zd,d!==n)b[w.ec(c)]||(b[w.ec(c)]=h,Hl(d,b));else if(!c.mb())return p;return h}
function Jl(a,b,c){zb(c)&&(c=Ob);var d=b.Sa;if(b===n||b===a)return new F(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);c=new F(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);b.transform.Ta(c);for(b=b.fa;b!==n&&b!==a;)b.transform.Ta(c),b=b.fa;a.xk.Ta(c);c.offset(-a.Vc.x,-a.Vc.y);return c}S.prototype.ensureBounds=S.prototype.Ei=function(){Ih(this,Infinity,Infinity);this.Dc()};
S.prototype.Dc=function(){qj(this);if(this.Kc===p){var a=this.position,b=this.location;if(!b.P()||!a.P())Kl(this,a,b),qj(this);Gl(this)}else{this instanceof of&&(this.T!==Ug&&this.pb!==n)&&(this.hj=this.pb,a=this.Cc,this.type!==Ug&&a!==n&&(this.location=a.Ab(Jb)));var c=this.MB;c.set(this.Ib);zj(this);this.Ib.Ia();var d=this.he;this.yj(0,0,this.Vc.width,this.Vc.height);a=this.position;b=this.location;Kl(this,a,b);b=this.Ib;b.x=a.x;b.y=a.y;b.freeze();qj(this);rj(this,c,b);c.I(b)?this.he=d:this.be()&&
(!Ua(c.width,b.width)||!Ua(c.height,b.height))&&this.F(16);this.aj=p}};function Kl(a,b,c){var d=NaN,e=NaN,g=a.bg,e=a.Xb;zb(g)&&w.m("Spot must be real: "+g.toString());var i=e.Sa,d=a.bn;d.pm(0,0,i.width,i.height,g);if(e!==a){e.transform.Ta(d);e.Za&&(g=e.rh/2,d.offset(-g,-g));for(e=e.fa;e!==n&&e!==a;)e.transform.Ta(d),e=e.fa}a.xk.Ta(d);d.offset(-a.Vc.x,-a.Vc.y);a=a.bn;c.P()?(d=c.x-a.x,e=c.y-a.y,b.copy(),b.U(d,e)):b.P()&&(d=b.x,e=b.y,c.copy(),c.U(d+a.x,e+a.y))}
function Oi(a,b){a.lu=p;var c=a.h;if(c!==n){a.updateAdornments();var d=a.HF;if(d!==n){qj(a);for(zj(a);d.next();)Ih(d.value,Infinity,Infinity),d.value.Dc()}a instanceof T&&bj(c,a);!a.Oa.zc&&!b&&Ci(c);var d=a.Ib,e=c.$a;e.P()?a.he?d.Se(e)||(a.he=p,Nh(c)):d.Se(e)&&(a.he=h):c.tk=h;a.Ib.P()&&Nh(c,a.Ib)}}S.prototype.Xk=ca(h);
function Mh(a,b){if(a.Mg){var c=a.Ib;if(!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){var d=a.transform,e=a.fa,g=a.zm;g.reset();e!==n&&(e.Lh()?g.multiply(e.je):e.fa!==n&&g.multiply(e.fa.je));g.multiply(a.Nd);a.xe!==n&&(yj(a,b,a.xe,h,h),b.fillRect(c.x,c.y,c.width,c.height));a.xe===n&&a.ye===n&&(b.fillStyle="rgba(0,0,0,0.4)",b.fillRect(c.x,c.y,c.width,c.height));if(a.ye!==n){d.is()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);var i=a.Sa,e=c=0,g=i.width,i=i.height,j=0;a instanceof V&&(i=a.Ha.Fb,
c=i.x,e=i.y,g=i.width,i=i.height,j=a.rh);yj(a,b,a.ye,h);b.fillRect(c-j/2,e-j/2,g+j,i+j);d.is()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy)))}}}}S.prototype.be=ca(h);w.g(S,"isInDocumentBounds",S.prototype.Hv);w.defineProperty(S,{Hv:"isInDocumentBounds"},t("Pp"),function(a){var b=this.Pp;b!==a&&(u&&w.k(a,"boolean",S,"isInDocumentBounds"),this.Pp=a,this.j("isInDocumentBounds",b,a))});w.g(S,"category",S.prototype.Nc);
w.defineProperty(S,{Nc:"category"},t("Yg"),function(a){var b=this.Yg;if(b!==a){w.k(a,"string",S,"category");this.Yg=a;this.j("category",b,a);var c=this.h,d=this.data;if(c!==n&&d!==n){var e=c.V;this instanceof U?(e instanceof O?e.wE(d,a):e instanceof De&&e.ZH(d,a),c=c.findTemplateForLinkData(d,a),c instanceof U&&(xf(c),c=c.copy(),c instanceof U&&Ll(this,c,a))):this instanceof of||(e!==n&&e.aw(d,a),c=c.findTemplateForNodeData(d,a),c instanceof S&&(xf(c),c=c.copy(),c instanceof S&&Ll(this,c,a)))}this instanceof
of&&(a=this.Ik,a!==n&&(c=a.Vg,c!==n&&c.remove(b),0===c.count&&(a.Vg=n),a.Gk(this.Yg,this)))}});function Ll(a,b,c){a.yh();var d=a.data,e=a.Qd,g=a.Qa,i=h,j=h,k=p;a instanceof T&&(i=a.Dh,j=a.yd,k=a.Lo);b.Ah(a);b.xb(a);a.Yg=c;a.R();vj(a);b=a.h;c=h;b!==n&&(c=b.ub,b.ub=h);a.Hm=d;d!==n&&a.vb();b!==n&&(b.ub=c);d=a.Qd;d!==e&&(a.Ym=e,a.Qd=d);a instanceof T&&(a.Dh=i,a.yd=j,a.Lo=k);a.Qa=g}
S.prototype.canCopy=S.prototype.OI=function(){if(!this.xC)return p;var a=this.Oa;if(a===n)return h;if(!a.vj)return p;a=a.h;return a===n?h:!a.vj?p:h};S.prototype.canDelete=S.prototype.TI=function(){if(!this.HC)return p;var a=this.Oa;if(a===n)return h;if(!a.Jk)return p;a=a.h;return a===n?h:!a.Jk?p:h};S.prototype.canEdit=S.prototype.VI=function(){if(!this.GE)return p;var a=this.Oa;if(a===n)return h;if(!a.Nn)return p;a=a.h;return a===n?h:!a.Nn?p:h};
S.prototype.canGroup=S.prototype.ZI=function(){if(!this.eD)return p;var a=this.Oa;if(a===n)return h;if(!a.In)return p;a=a.h;return a===n?h:!a.In?p:h};S.prototype.canMove=S.prototype.bJ=function(){if(!this.PD)return p;var a=this.Oa;if(a===n)return h;if(!a.Kk)return p;a=a.h;return a===n?h:!a.Kk?p:h};S.prototype.canPrint=S.prototype.dJ=function(){if(!this.YD)return p;var a=this.Oa;if(a===n)return h;if(!a.Hr)return p;a=a.h;return a===n?h:!a.Hr?p:h};
S.prototype.canReshape=S.prototype.hJ=function(){if(!this.gE)return p;var a=this.Oa;if(a===n)return h;if(!a.Kn)return p;a=a.h;return a===n?h:!a.Kn?p:h};S.prototype.canResize=S.prototype.iJ=function(){if(!this.hE)return p;var a=this.Oa;if(a===n)return h;if(!a.Ln)return p;a=a.h;return a===n?h:!a.Ln?p:h};S.prototype.canRotate=S.prototype.jJ=function(){if(!this.mE)return p;var a=this.Oa;if(a===n)return h;if(!a.Mn)return p;a=a.h;return a===n?h:!a.Mn?p:h};
S.prototype.canSelect=S.prototype.Nk=function(){if(!this.Kj)return p;var a=this.Oa;if(a===n)return h;if(!a.ke)return p;a=a.h;return a===n?h:!a.ke?p:h};w.g(S,"copyable",S.prototype.xC);w.defineProperty(S,{xC:"copyable"},t("dp"),function(a){var b=this.dp;b!==a&&(u&&w.k(a,"boolean",S,"copyable"),this.dp=a,this.j("copyable",b,a))});w.g(S,"deletable",S.prototype.HC);
w.defineProperty(S,{HC:"deletable"},t("qp"),function(a){var b=this.qp;b!==a&&(u&&w.k(a,"boolean",S,"deletable"),this.qp=a,this.j("deletable",b,a))});w.g(S,"textEditable",S.prototype.GE);w.defineProperty(S,{GE:"textEditable"},t("or"),function(a){var b=this.or;b!==a&&(u&&w.k(a,"boolean",S,"textEditable"),this.or=a,this.j("textEditable",b,a),this.updateAdornments())});w.g(S,"groupable",S.prototype.eD);
w.defineProperty(S,{eD:"groupable"},t("Jp"),function(a){var b=this.Jp;b!==a&&(u&&w.k(a,"boolean",S,"groupable"),this.Jp=a,this.j("groupable",b,a))});w.g(S,"movable",S.prototype.PD);w.defineProperty(S,{PD:"movable"},t("yq"),function(a){var b=this.yq;b!==a&&(u&&w.k(a,"boolean",S,"movable"),this.yq=a,this.j("movable",b,a))});w.g(S,"printable",S.prototype.YD);
w.defineProperty(S,{YD:"printable"},t("Hq"),function(a){var b=this.Hq;b!==a&&(u&&w.k(a,"boolean",S,"printable"),this.Hq=a,this.j("printable",b,a))});w.g(S,"reshapable",S.prototype.gE);w.defineProperty(S,{gE:"reshapable"},t("Mq"),function(a){var b=this.Mq;b!==a&&(u&&w.k(a,"boolean",S,"reshapable"),this.Mq=a,this.j("reshapable",b,a),this.updateAdornments())});w.g(S,"resizable",S.prototype.hE);
w.defineProperty(S,{hE:"resizable"},t("Nq"),function(a){var b=this.Nq;b!==a&&(u&&w.k(a,"boolean",S,"resizable"),this.Nq=a,this.j("resizable",b,a),this.updateAdornments())});w.g(S,"rotatable",S.prototype.mE);w.defineProperty(S,{mE:"rotatable"},t("Sq"),function(a){var b=this.Sq;b!==a&&(u&&w.k(a,"boolean",S,"rotatable"),this.Sq=a,this.j("rotatable",b,a),this.updateAdornments())});w.g(S,"selectable",S.prototype.Kj);
w.defineProperty(S,{Kj:"selectable"},t("mn"),function(a){var b=this.mn;b!==a&&(u&&w.k(a,"boolean",S,"selectable"),this.mn=a,this.j("selectable",b,a),this.updateAdornments())});w.g(S,"selectionObjectName",S.prototype.Fs);w.defineProperty(S,{Fs:"selectionObjectName"},t("er"),function(a){var b=this.er;b!==a&&(u&&w.k(a,"string",S,"selectionObjectName"),this.er=a,this.Ek=n,this.j("selectionObjectName",b,a))});w.g(S,"selectionAdorned",S.prototype.tE);
w.defineProperty(S,{tE:"selectionAdorned"},t("br"),function(a){var b=this.br;b!==a&&(u&&w.k(a,"boolean",S,"selectionAdorned"),this.br=a,this.j("selectionAdorned",b,a),this.updateAdornments())});w.g(S,"selectionAdornmentTemplate",S.prototype.uE);w.defineProperty(S,{uE:"selectionAdornmentTemplate"},t("cr"),function(a){var b=this.cr;b!==a&&(u&&w.i(a,of,S,"selectionAdornmentTemplate"),this instanceof U&&(a.type=Ug),this.cr=a,this.j("selectionAdornmentTemplate",b,a))});
w.u(S,{$v:"selectionObject"},function(){if(this.Ek===n){var a=this.Fs;a!==n&&""!==a?(a=this.Pe(a),this.Ek=a!==n?a:this):this instanceof U?(a=this.path,this.Ek=a!==n?a:this):this.Ek=this}return this.Ek});w.g(S,"isSelected",S.prototype.Qa);
w.defineProperty(S,{Qa:"isSelected"},t("Ot"),function(a){var b=this.Ot;if(b!==a){u&&w.k(a,"boolean",S,"isSelected");var c=this.h;if(!a||this.Nk()&&!(c!==n&&c.selection.count>=c.GD)){this.Ot=a;var d=p;if(c!==n){d=c.ub;c.ub=h;var e=c.selection;e.Ia();a?e.add(this):e.remove(this);e.freeze()}this.j("isSelected",b,a);this.updateAdornments();a=this.vE;a!==n&&a(this);c!==n&&(c.yb(),c.ub=d)}}});w.g(S,"selectionChanged",S.prototype.vE);
w.defineProperty(S,{vE:"selectionChanged"},t("dr"),function(a){var b=this.dr;b!==a&&(a!==n&&w.k(a,"function",S,"selectionChanged"),this.dr=a,this.j("selectionChanged",b,a))});w.g(S,"resizeAdornmentTemplate",S.prototype.iE);w.defineProperty(S,{iE:"resizeAdornmentTemplate"},t("Oq"),function(a){var b=this.Oq;b!==a&&(u&&w.i(a,of,S,"resizeAdornmentTemplate"),this.Oq=a,this.j("resizeAdornmentTemplate",b,a))});w.g(S,"resizeObjectName",S.prototype.kE);
w.defineProperty(S,{kE:"resizeObjectName"},t("Qq"),function(a){var b=this.Qq;b!==a&&(u&&w.k(a,"string",S,"resizeObjectName"),this.Qq=a,this.Ml=n,this.j("resizeObjectName",b,a))});w.u(S,{RH:"resizeObject"},function(){if(this.Ml===n){var a=this.kE;a!==n&&""!==a?(a=this.Pe(a),this.Ml=a!==n?a:this):this.Ml=this}return this.Ml});w.g(S,"resizeCellSize",S.prototype.jE);
w.defineProperty(S,{jE:"resizeCellSize"},t("Pq"),function(a){var b=this.Pq;b.I(a)||(u&&w.i(a,bb,S,"resizeCellSize"),this.Pq=a=a.O(),this.j("resizeCellSize",b,a))});w.g(S,"rotateAdornmentTemplate",S.prototype.nE);w.defineProperty(S,{nE:"rotateAdornmentTemplate"},t("Tq"),function(a){var b=this.Tq;b!==a&&(u&&w.i(a,of,S,"rotateAdornmentTemplate"),this.Tq=a,this.j("rotateAdornmentTemplate",b,a))});w.g(S,"rotateObjectName",S.prototype.oE);
w.defineProperty(S,{oE:"rotateObjectName"},t("Uq"),function(a){var b=this.Uq;b!==a&&(u&&w.k(a,"string",S,"rotateObjectName"),this.Uq=a,this.Nl=n,this.j("rotateObjectName",b,a))});w.u(S,{VH:"rotateObject"},function(){if(this.Nl===n){var a=this.oE;a!==n&&""!==a?(a=this.Pe(a),this.Nl=a!==n?a:this):this.Nl=this}return this.Nl});w.g(S,"text",S.prototype.text);w.defineProperty(S,{text:"text"},t("Md"),function(a){var b=this.Md;b!==a&&(u&&w.k(a,"string",S,"text"),this.Md=a,this.j("text",b,a))});
w.g(S,"containingGroup",S.prototype.cb);
w.defineProperty(S,{cb:"containingGroup"},t("gk"),function(a){if(this.be()){var b=this.gk;if(b!==a){u&&a!==n&&w.i(a,vf,S,"containingGroup");if(a!==n&&(this===a||a.js(this)))this===a&&w.m("Cannot make a Group a member of itself: "+this.toString()),w.m("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString());this.F(Qi);var c=this.h;b!==n?Ml(b,this):this instanceof vf&&c!==n&&c.Pl.remove(this);this.gk=a;a!==n?Nl(a,this):this instanceof vf&&c!==n&&c.Pl.add(this);
this.F(Li);if(c!==n){var d=this.data,e=c.V;d!==n&&e instanceof O&&e.Xz(d,e.kb(a!==n?a.data:n))}d=this.Xy;d!==n&&(e=h,c!==n&&(e=c.La,c.La=h),d(this,b,a),c!==n&&(c.La=e));if(this instanceof vf){c=new ma(S);nf(c,this,h,p);for(c=c.l;c.next();)if(d=c.value,d instanceof T)for(d=d.ve;d.next();)e=d.value,Ti(e)}if(this instanceof T)for(d=this.ve;d.next();)e=d.value,Ti(e);this.j("containingGroup",b,a);a!==n&&a.fw()}}else w.m("cannot set the Part.containingGroup of a Link or Adornment")});
function tj(a){a=a.cb;a!==n&&(a.R(),a.pb!==n&&a.pb.R(),a.Qg())}S.prototype.fs=function(){var a=this.gk;a!==n&&Nl(a,this)};S.prototype.gs=function(){var a=this.gk;a!==n&&Ml(a,this)};S.prototype.$l=function(){var a=this.data;if(a!==n){var b=this.h;b!==n&&(b=b.V,b!==n&&b.eE(a))}};w.g(S,"containingGroupChanged",S.prototype.Xy);
w.defineProperty(S,{Xy:"containingGroupChanged"},t("cp"),function(a){var b=this.cp;b!==a&&(a!==n&&w.k(a,"function",S,"containingGroupChanged"),this.cp=a,this.j("containingGroupChanged",b,a))});w.u(S,{tM:"topLevelPart"},function(){return Ol(this,this)});S.prototype.findTopLevelPart=S.prototype.DK=function(){return Ol(this,this)};function Ol(a,b){var c=b.cb;return c!==n?Ol(a,c):b instanceof T&&(c=b.zd,c!==n)?Ol(a,c):b}
w.u(S,{ls:"isTopLevel"},function(){return this.cb!==n||this instanceof T&&this.Li?p:h});S.prototype.isMemberOf=S.prototype.js=function(a){return!(a instanceof vf)?p:Pl(this,this,a)};function Pl(a,b,c){if(b===c||c===n)return p;var d=b.cb;return d!==n&&(d===c||Pl(a,d,c))?h:b instanceof T&&(b=b.zd,b!==n)?Pl(a,b,c):p}S.prototype.findCommonContainingGroup=S.prototype.zG=function(a){return Ql(this,this,a)};
function Ql(a,b,c){if(b===n||c===n)return n;var d=b.cb;if(d===n)return n;if(b===c)return d;var e=c.cb;return e===n?n:d===e?e:Pl(a,c,d)?d:Pl(a,b,e)?e:Ql(a,d,e)}w.g(S,"isLayoutPositioned",S.prototype.sz);w.defineProperty(S,{sz:"isLayoutPositioned"},t("Qp"),function(a){var b=this.Qp;b!==a&&(u&&w.k(a,"boolean",S,"isLayoutPositioned"),this.Qp=a,this.j("isLayoutPositioned",b,a),this.F(a?Sj:Tj))});w.g(S,"layoutConditions",S.prototype.zD);
w.defineProperty(S,{zD:"layoutConditions"},t("bq"),function(a){var b=this.bq;b!==a&&(u&&w.k(a,"number",S,"layoutConditions"),this.bq=a,this.j("layoutConditions",b,a))});S.prototype.canLayout=S.prototype.Jr=function(){if(!this.sz||!this.mb())return p;var a=this.Oa;return a!==n&&a.zc||this instanceof T&&this.Li?p:h};
S.prototype.invalidateLayout=S.prototype.F=function(a){a===f&&(a=16777215);var b;!this.sz||0===(a&this.zD)?b=p:(b=this.Oa,b!==n&&b.zc||this instanceof T&&this.Li?b=p:(b=this.h,b=b!==n&&b.sa.tb?p:h));if(b)if(b=this.gk,b!==n){var c=b.Pb;c!==n?c.F():b.F(a)}else a=this.h,a!==n&&(c=a.Pb,c!==n&&c.F())};w.g(S,"dragComputation",S.prototype.dz);
w.defineProperty(S,{dz:"dragComputation"},t("rp"),function(a){var b=this.rp;b!==a&&(a!==n&&w.k(a,"function",S,"dragComputation"),this.rp=a,this.j("dragComputation",b,a))});w.g(S,"isShadowed",S.prototype.jo);w.defineProperty(S,{jo:"isShadowed"},t("Lf"),function(a){var b=this.Lf;b!==a&&(u&&w.k(a,"boolean",S,"isShadowed"),this.Lf=a,vj(this),this.j("isShadowed",b,a))});w.g(S,"shadowOffset",S.prototype.aI);
w.defineProperty(S,{aI:"shadowOffset"},t("pn"),function(a){var b=this.pn;b.I(a)||(u&&w.i(a,F,S,"shadowOffset"),this.pn=a=a.O(),vj(this),this.j("shadowOffset",b,a))});w.g(S,"shadowColor",S.prototype.shadowColor);w.defineProperty(S,{shadowColor:"shadowColor"},t("on"),function(a){var b=this.on;b!==a&&(u&&w.k(a,"string",S,"shadowColor"),this.on=a,vj(this),this.j("shadowColor",b,a))});w.g(S,"shadowBlur",S.prototype.shadowBlur);
w.defineProperty(S,{shadowBlur:"shadowBlur"},t("nn"),function(a){var b=this.nn;b!==a&&(u&&w.k(a,"number",S,"shadowBlur"),this.nn=a,vj(this),this.j("shadowBlur",b,a))});function of(a){0===arguments.length?S.call(this,jh):S.call(this,a);this.Qd="Adornment";this.Ja=n;this.mn=p;this.gj=new F(NaN,NaN);this.Ph=new z(G);this.mh=n;this.Wc=(new z(F)).freeze();this.Pu=new F;this.pb=n}w.Q("Adornment",of);w.Ea(of,S);da=of.prototype;
da.toString=function(){var a=this.Ik;return"Adornment("+this.Nc+")"+(a!==n?a.toString():"")};da.Yh=function(){return this.Ja&&this.Ja.ca instanceof U?this.Ja.ca.Yh():n};da.Gp=ca(n);da.Nv=function(){var a=this.Cc.ca,b=this.Cc;if(a instanceof U&&b instanceof V){var c=a.path,b=c.Ha;a.Nv();for(var b=c.Ha,a=this.Ga,c=a.length,d=0;d<c;d++){var e=a.n[d];e.Mi&&e instanceof V&&(e.Ha=b)}}};da.ox=function(){var a=this.Ik;return a instanceof U?a.Wc:n};w.u(of,{placeholder:"placeholder"},t("pb"));
w.g(of,"adornedObject",of.prototype.Cc);w.defineProperty(of,{Cc:"adornedObject"},t("Ja"),function(a){u&&a!==n&&w.i(a,P,S,"adornedObject:val");var b=this.Ik,c=n;a!==n&&(c=a.ca);b!==n&&(a===n||b!==c)&&b.dl(this.Nc);this.Ja=a;c&&c.Gk(this.Nc,this)});w.u(of,{Ik:"adornedPart"},function(){var a=this.Ja;return a!==n?a.ca:n});of.prototype.Xk=function(){var a=this.Ja;if(a===n)return h;a=a.ca;return a===n||!a.Kc};of.prototype.be=ca(p);w.u(of,{cb:"containingGroup"},ca(n));
of.prototype.nm=function(a,b,c,d,e,g,i){if(a===ie&&"elements"===b)if(e instanceof dh)this.pb===n?this.pb=e:this.pb!==e&&w.m("Cannot insert a second Placeholder into the visual tree of an Adornment.");else{if(e instanceof x){var j=Wk(e,e,function(a){return a instanceof dh});j instanceof dh&&(this.pb===n?this.pb=j:this.pb!==j&&w.m("Cannot insert a second Placeholder into the visual tree of an Adornment."))}}else a===je&&"elements"===b&&(d===this.pb?this.pb=n:d instanceof x&&this.pb.Ki(d)&&(this.pb=
n));S.prototype.nm.call(this,a,b,c,d,e,g,i)};of.prototype.updateAdornments=of.prototype.Qi=aa();of.prototype.$l=aa();function T(a){0===arguments.length?S.call(this,jh):S.call(this,a);this.ed=new z(U);this.Wm=this.gq=this.fq=n;this.Wp=h;this.Ar=p;this.vr=n;this.Zo=this.Xp=h;this.$o=(new hb(2)).freeze();this.fd=this.Xg=n}w.Q("Node",T);w.Ea(T,S);T.prototype.xb=function(a){S.prototype.xb.call(this,a);a.fq=this.fq;a.gq=this.gq;a.Wp=this.Wp;a.Ar=this.Ar;a.vr=this.vr;a.Xp=this.Xp;a.Zo=this.Zo;a.$o.Ua(this.$o)};
T.prototype.Ah=function(a){S.prototype.Ah.call(this,a);a.Qg();a.Xg=this.Xg;a.fd=n};var Rl;T.DirectionDefault=Rl=w.s(T,"DirectionDefault",0);T.DirectionAbsolute=w.s(T,"DirectionAbsolute",1);var Sl;T.DirectionRotatedNode=Sl=w.s(T,"DirectionRotatedNode",2);var hj;T.DirectionRotatedNodeOrthogonal=hj=w.s(T,"DirectionRotatedNodeOrthogonal",3);function Tl(a,b){b!==n&&(a.Xg==n&&(a.Xg=new ma(Ul)),a.Xg.add(b))}
T.prototype.nm=function(a,b,c,d,e,g,i){a===ie&&"elements"===b?this.fd=n:a===je&&"elements"===b&&(this.h===n?this.fd=n:d instanceof P&&Vk(this,d,function(a,b){Wj(a,b,h)}));S.prototype.nm.call(this,a,b,c,d,e,g,i)};T.prototype.invalidateConnectedLinks=T.prototype.Qg=function(a){a===f&&(a=n);for(var b=this.ve;b.next();){var c=b.value;if(!(a!==n&&a.contains(c))){var d=c.Pc;d!==n&&(d.Ld=n);var e=c.Cd;e!==n&&e!==d&&(e.Ld=n);c.Tb()}}};T.prototype.Xk=ca(h);w.g(T,"avoidable",T.prototype.Ly);
w.defineProperty(T,{Ly:"avoidable"},t("Zo"),function(a){var b=this.Zo;if(b!==a){u&&w.k(a,"boolean",T,"avoidable");this.Zo=a;var c=this.h;c!==n&&bj(c,this);this.j("avoidable",b,a)}});w.g(T,"avoidableMargin",T.prototype.jC);w.defineProperty(T,{jC:"avoidableMargin"},t("$o"),function(a){"number"===typeof a?a=new hb(a):w.i(a,hb,T,"avoidableMargin");var b=this.$o;if(!b.I(a)){this.$o=a=a.O();var c=this.h;c!==n&&bj(c,this);this.j("avoidableMargin",b,a)}});
T.prototype.canAvoid=T.prototype.LI=function(){return this.Ly&&!this.Li};T.prototype.getAvoidableRectangle=T.prototype.IK=function(a){a===f&&(a=new G);a.set(this.wa);a.Fn(this.jC);return a};function Il(a){for(;a!==n&&!a.mb();)a=a.cb;return a}w.u(T,{ve:"linksConnected"},function(){return this.ed.l});
T.prototype.findLinksConnected=T.prototype.AG=function(a){a===f&&(a=n);if(a===n)return this.ed.l;u&&w.k(a,"string",T,"findLinksConnected:pid");var b=new Ja(this.ed),c=this;b.Uv=function(b){return b.ga===c&&b.Gi===a||b.la===c&&b.Pj===a};return b};T.prototype.findLinksOutOf=T.prototype.Ur=function(a){a===f&&(a=n);var b=new Ja(this.ed),c=this;b.Uv=function(b){return b.ga!==c?p:a===n?h:b.Gi===a};return b};
T.prototype.findLinksInto=T.prototype.Bf=function(a){a===f&&(a=n);var b=new Ja(this.ed),c=this;b.Uv=function(b){return b.la!==c?p:a===n?h:b.Pj===a};return b};
T.prototype.findNodesConnected=T.prototype.OC=function(a){a===f&&(a=n);for(var b=n,c=n,d=this.ed.l;d.next();){var e=d.value;if(e.ga===this){if(a===n||e.Gi===a)e=e.la,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}else if(e.la===this&&(a===n||e.Pj===a))e=e.ga,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}return b!==n?b.l:c!==n?new Ia(c):w.If};
T.prototype.findNodesOutOf=T.prototype.QC=function(a){a===f&&(a=n);for(var b=n,c=n,d=this.ed.l;d.next();){var e=d.value;if(e.ga===this&&(a===n||e.Gi===a))e=e.la,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}return b!==n?b.l:c!==n?new Ia(c):w.If};
T.prototype.findNodesInto=T.prototype.PC=function(a){a===f&&(a=n);for(var b=n,c=n,d=this.ed.l;d.next();){var e=d.value;if(e.la===this&&(a===n||e.Pj===a))e=e.ga,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}return b!==n?b.l:c!==n?new Ia(c):w.If};w.g(T,"linkConnected",T.prototype.AD);w.defineProperty(T,{AD:"linkConnected"},t("fq"),function(a){var b=this.fq;b!==a&&(a!==n&&w.k(a,"function",T,"linkConnected"),this.fq=a,this.j("linkConnected",b,a))});w.g(T,"linkDisconnected",T.prototype.BD);
w.defineProperty(T,{BD:"linkDisconnected"},t("gq"),function(a){var b=this.gq;b!==a&&(a!==n&&w.k(a,"function",T,"linkDisconnected"),this.gq=a,this.j("linkDisconnected",b,a))});function Vl(a,b,c){if(!a.ed.contains(b)){a.ed.add(b);var d=a.AD;if(d!==n){var e=h,g=a.h;g!==n&&(e=g.La,g.La=h);d(a,b,c);g!==n&&(g.La=e)}a.Dh&&(c=h,g=a.h,g!==n&&(c=g.Yc),c?b.ga===a&&(a.Dh=p):b.la===a&&(a.Dh=p))}}
function Wl(a,b,c){if(a.ed.remove(b)){var d=a.BD,e=a.h;if(d!==n){var g=h;e!==n&&(g=e.La,e.La=h);d(a,b,c);e!==n&&(e.La=g)}!a.Dh&&!(e!==n&&e.sa.tb)&&(b=a.ed.count,0===b?a.Dh=h:1===b&&Yi(a))}}function Yi(a){if(0!==a.ed.count){var b=h,c=a.h;c!==n&&(b=c.Yc);for(c=a.ed.l;c.next();){var d=c.value;if(b){if(d.ga===a){a.Dh=p;return}}else if(d.la===a){a.Dh=p;return}}a.Dh=h}}T.prototype.fs=function(){S.prototype.fs.call(this);Yi(this);var a=this.Wm;a!==n&&Xl(a,this)};
T.prototype.gs=function(){S.prototype.gs.call(this);var a=this.Wm;a!==n&&a.Fe!==n&&(a.Fe.remove(this),a.R())};T.prototype.$l=function(){if(0<this.ed.count){var a=this.h;if(a===n)return;for(var b=this.ed.copy().l;b.next();)a.remove(b.value)}S.prototype.$l.call(this)};w.u(T,{Li:"isLinkLabel"},function(){return this.Wm!==n});w.g(T,"labeledLink",T.prototype.zd);
w.defineProperty(T,{zd:"labeledLink"},t("Wm"),function(a){var b=this.Wm;if(b!==a){u&&a!==n&&w.i(a,U,T,"labeledLink");var c=this.h,d=this.data;if(b!==n&&(b.Fe!==n&&(b.Fe.remove(this),b.R()),c!==n&&d!==n)){var e=b.data,g=c.V;if(e!==n&&g instanceof O){var i=g.kb(d);i!==f&&g.NH(e,i)}}this.Wm=a;a!==n&&(Xl(a,this),c!==n&&d!==n&&(e=a.data,g=c.V,e!==n&&g instanceof O&&(i=g.kb(d),i!==f&&g.ZB(e,i))));Aj(this);this.j("labeledLink",b,a)}});
T.prototype.findPort=T.prototype.Xr=function(a){u&&w.k(a,"string",T,"findPort:pid");this.fd===n&&Xj(this);if(this.fd!==n){var b=this.fd.qa(a);if(b!==n)return b}if(""!==a&&this.fd!==n&&(b=this.fd.qa(""),b!==n))return b;this.fd===n&&Xj(this);return this};w.u(T,{port:"port"},function(){return this.Xr("")});w.u(T,{ports:"ports"},function(){this.fd===n&&Xj(this);return this.fd!==n?this.fd.l:w.If});function Xj(a){a.fd!==n&&a.fd.clear();Vk(a,a,function(a,c){Yj(a,c)})}
function Yj(a,b){var c=b.Xe;c!==n&&(a.fd===n&&(a.fd=new ka("string",P)),a.fd.add(c,b))}function Wj(a,b,c){var d=b.Xe;if(d!==n&&(a.fd!==n&&a.fd.remove(d),b=a.h,b!==n&&c)){c=n;for(a=a.AG(d);a.next();)c===n&&(c=[]),c.push(a.value);if(c!==n)for(a=0;a<c.length;a++)b.remove(c[a])}}
T.prototype.isInTreeOf=T.prototype.jL=function(a){if(a===n||a===this)return p;var b=h,c=this.h;c!==n&&(b=c.Yc);if(b)a:{for(b=this;b!==a;){for(var c=n,d=b.Bf();d.next()&&!(c=d.value.ga,c!==b););if(c===n){a=p;break a}b=c}a=h}else a:{for(b=this;b!==a;){c=n;for(d=b.Ur();d.next()&&!(c=d.value.la,c!==b););if(c===n){a=p;break a}b=c}a=h}return a};
T.prototype.findTreeParentLink=T.prototype.zv=function(){var a=h,b=this.h;b!==n&&(a=b.Yc);b=this.ed.l;if(a)for(;b.next();){if(a=b.value,a.ga!==this)return a}else for(;b.next();)if(a=b.value,a.la!==this)return a;return n};T.prototype.findTreeParentNode=T.prototype.SC=function(){var a=h,b=this.h;b!==n&&(a=b.Yc);b=this.ed.l;if(a)for(;b.next();){if(a=b.value,a=a.ga,a!==this)return a}else for(;b.next();)if(a=b.value,a=a.la,a!==this)return a;return n};
T.prototype.findTreeChildrenLinks=T.prototype.yv=function(){var a=h,b=this.h;b!==n&&(a=b.Yc);return a?this.Ur():this.Bf()};
T.prototype.findTreeChildrenNodes=T.prototype.EK=function(){var a=h,b=this.h;b!==n&&(a=b.Yc);var c=b=n,d=this.ed.l;if(a)for(;d.next();)a=d.value,a.ga===this&&(a=a.la,b!==n?b.add(a):c!==n&&c!==a?(b=new z(T),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.la===this&&(a=a.ga,b!==n?b.add(a):c!==n&&c!==a?(b=new z(T),b.add(c),b.add(a)):c=a);return b!==n?b.l:c!==n?new Ia(c):w.If};T.prototype.findTreeParts=T.prototype.FK=function(){var a=new ma(S);nf(a,this,p,h);return a};
T.prototype.collapseTree=T.prototype.fv=function(){var a=this.h;if(a!==n&&!a.ag){a.ag=h;var b=a.Yc,c=new ma(T);c.add(this);Yl(this,c,b);a.ag=p}};function Yl(a,b,c){a.yd=p;for(var d=c?a.Ur():a.Bf();d.next();){var e=d.value,g=e.aD(a);g!==n&&(g!==a&&!b.contains(g))&&(b.add(g),vj(e),e.yh(),vj(g),g.yh(),tj(g),g.F(Tj),g.yd&&(g.Lo=g.yd,Yl(g,b,c)))}}T.prototype.expandTree=T.prototype.uv=function(){var a=this.h;if(a!==n&&!a.ag){a.ag=h;var b=a.Yc,c=new ma(T);c.add(this);Zl(this,c,b);a.ag=p}};
function Zl(a,b,c){a.yd=h;for(var d=c?a.Ur():a.Bf();d.next();){var e=d.value,g=e.aD(a);g!==n&&(g!==a&&!b.contains(g))&&(b.add(g),vj(e),e.Qi(),vj(g),g.Qi(),tj(g),g.F(Sj),g.Lo&&(g.Lo=p,Zl(g,b,c)))}}w.g(T,"isTreeExpanded",T.prototype.yd);
w.defineProperty(T,{yd:"isTreeExpanded"},t("Wp"),function(a){var b=this.Wp;if(b!==a){u&&w.k(a,"boolean",T,"isTreeExpanded");this.Wp=a;var c=this.h;c!==n&&Nh(c);this.j("isTreeExpanded",b,a);b=this.RE;if(b!==n){var d=h;c!==n&&(d=c.La,c.La=h);b(this);c!==n&&(c.La=d)}c!==n&&c.sa.tb||(a?this.uv():this.fv())}});w.g(T,"wasTreeExpanded",T.prototype.Lo);
w.defineProperty(T,{Lo:"wasTreeExpanded"},t("Ar"),function(a){var b=this.Ar;b!==a&&(u&&w.k(a,"boolean",T,"wasTreeExpanded"),this.Ar=a,this.j("wasTreeExpanded",b,a))});w.g(T,"treeExpandedChanged",T.prototype.RE);w.defineProperty(T,{RE:"treeExpandedChanged"},t("vr"),function(a){var b=this.vr;b!==a&&(a!==n&&w.k(a,"function",T,"treeExpandedChanged"),this.vr=a,this.j("treeExpandedChanged",b,a))});w.g(T,"isTreeLeaf",T.prototype.Dh);
w.defineProperty(T,{Dh:"isTreeLeaf"},t("Xp"),function(a){var b=this.Xp;b!==a&&(u&&w.k(a,"boolean",T,"isTreeLeaf"),this.Xp=a,this.j("isTreeLeaf",b,a))});
function U(){S.call(this,Ug);this.Kf=n;this.ah="";this.Ep=n;this.dh=Hb;this.$g=NaN;this.Zg=Rl;this.bh=NaN;this.Vf=n;this.uh="";this.ur=n;this.wh=Hb;this.th=NaN;this.sh=Rl;this.vh=NaN;this.Lq=this.Kq=p;this.Uo=ij;this.ep=0;this.gp=ij;this.hp=NaN;this.kn=nk;this.hr=0.5;this.mh=this.Fe=n;this.Wc=(new z(F)).freeze();this.Ig=n;this.vi=p;this.Vx=n;this.vn=p;this.ml=this.Vh=this.Ha=n;this.ze=0;this.Ph=new z(G);this.Pu=new F;this.NB=this.LB=n;this.Tw=p}w.Q("Link",U);w.Ea(U,S);
U.prototype.xb=function(a){S.prototype.xb.call(this,a);a.ah=this.ah;a.Ep=this.Ep;a.dh=this.dh.O();a.$g=this.$g;a.Zg=this.Zg;a.bh=this.bh;a.uh=this.uh;a.ur=this.ur;a.wh=this.wh.O();a.th=this.th;a.sh=this.sh;a.vh=this.vh;a.Kq=this.Kq;a.Lq=this.Lq;a.Uo=this.Uo;a.ep=this.ep;a.gp=this.gp;a.hp=this.hp;a.kn=this.kn;a.hr=this.hr};U.prototype.Ah=function(a){S.prototype.Ah.call(this,a);this.ah=a.ah;this.uh=a.uh;a.mh=n;a.Ig=n;a.Tb();a.ml=this.ml;a.ze=this.ze};var nk;U.Normal=nk=w.s(U,"Normal",1);var gk;
U.Orthogonal=gk=w.s(U,"Orthogonal",2);var $f;U.AvoidsNodes=$f=w.s(U,"AvoidsNodes",3);var ij;U.None=ij=w.s(U,"None",0);var hk;U.Bezier=hk=w.s(U,"Bezier",9);var ik;U.JumpGap=ik=w.s(U,"JumpGap",10);var jk;U.JumpOver=jk=w.s(U,"JumpOver",11);var kk;U.End=kk=w.s(U,"End",17);var lk;U.Scale=lk=w.s(U,"Scale",18);var mk;U.Stretch=mk=w.s(U,"Stretch",19);var hl;U.OrientAlong=hl=w.s(U,"OrientAlong",21);var $l;U.OrientPlus90=$l=w.s(U,"OrientPlus90",22);var am;U.OrientMinus90=am=w.s(U,"OrientMinus90",23);var bm;
U.OrientOpposite=bm=w.s(U,"OrientOpposite",24);var cm;U.OrientUpright=cm=w.s(U,"OrientUpright",25);var dm;U.OrientPlus90Upright=dm=w.s(U,"OrientPlus90Upright",26);var em;U.OrientMinus90Upright=em=w.s(U,"OrientMinus90Upright",27);var fm;U.OrientUpright45=fm=w.s(U,"OrientUpright45",28);U.prototype.Xk=function(){var a=this.ga;if(a!==n&&(a.Kc||a.aj))return p;a=this.la;return a!==n&&(a.Kc||a.aj)?p:h};U.prototype.be=ca(p);
function Uk(a,b){var c;switch(a){default:case ij:c=0;break;case hl:c=b;break;case $l:c=b+90;break;case am:c=b-90;break;case bm:c=b+180;break;case cm:c=dd(b);90<c&&270>c&&(c-=180);break;case dm:c=dd(b+90);90<c&&270>c&&(c-=180);break;case em:c=dd(b-90);90<c&&270>c&&(c-=180);break;case fm:c=dd(b);if(45<c&&135>c||225<c&&315>c)return 0;90<c&&270>c&&(c-=180)}return dd(c)}w.g(U,"fromNode",U.prototype.ga);
w.defineProperty(U,{ga:"fromNode"},t("Kf"),function(a){var b=this.Kf;if(b!==a){u&&a!==n&&w.i(a,T,U,"fromNode");var c=this.Pc;b!==n&&(this.Vf!==b&&Wl(b,this,c),c!==n&&(c.Ld=n),gm(this),b.F(Qi));this.Kf=a;this.Vh=n;this.Tb();var d=this.h;if(d!==n){var e=this.data,g=d.V;if(e!==n)if(g instanceof O){var i=a!==n?a.data:n;g.dw(e,g.kb(i))}else g instanceof De&&(i=a!==n?a.data:n,d.Yc?g.Ff(e,g.kb(i)):(b!==n&&g.Ff(b.data,f),g.Ff(i,g.kb(this.Vf!==n?this.Vf.data:n))))}e=this.Pc;g=this.iz;g!==n&&(i=h,d!==n&&(i=
d.La,d.La=h),g(this,c,e),d!==n&&(d.La=i));a!==n&&(this.Vf!==a&&Vl(a,this,e),e!==n&&(e.Ld=n),hm(this),a.F(Li));this.j("fromNode",b,a);Ti(this)}});w.g(U,"fromPortId",U.prototype.Gi);
w.defineProperty(U,{Gi:"fromPortId"},t("ah"),function(a){var b=this.ah;if(b!==a){u&&w.k(a,"string",U,"fromPortId");var c=this.Pc;c!==n&&(c.Ld=n);gm(this);this.ah=a;var d=this.Pc;d!==n&&(d.Ld=n);var e=this.h;if(e!==n){var g=this.data,i=e.V;g!==n&&i instanceof O&&i.Gs(g,a)}c!==d&&(this.Vh=n,this.Tb(),g=this.iz,g!==n&&(i=h,e!==n&&(i=e.La,e.La=h),g(this,c,d),e!==n&&(e.La=i)));hm(this);this.j("fromPortId",b,a)}});w.u(U,{Pc:"fromPort"},function(){var a=this.Kf;return a===n?n:a.Xr(this.ah)});
w.g(U,"fromPortChanged",U.prototype.iz);w.defineProperty(U,{iz:"fromPortChanged"},t("Ep"),function(a){var b=this.Ep;b!==a&&(a!==n&&w.k(a,"function",U,"fromPortChanged"),this.Ep=a,this.j("fromPortChanged",b,a))});w.g(U,"toNode",U.prototype.la);
w.defineProperty(U,{la:"toNode"},t("Vf"),function(a){var b=this.Vf;if(b!==a){u&&a!==n&&w.i(a,T,U,"toNode");var c=this.Cd;b!==n&&(this.Kf!==b&&Wl(b,this,c),c!==n&&(c.Ld=n),gm(this),b.F(Qi));this.Vf=a;this.Vh=n;this.Tb();var d=this.h;if(d!==n){var e=this.data,g=d.V;if(e!==n)if(g instanceof O){var i=a!==n?a.data:n;g.ew(e,g.kb(i))}else g instanceof De&&(i=a!==n?a.data:n,d.Yc?(b!==n&&g.Ff(b.data,f),g.Ff(i,g.kb(this.Kf!==n?this.Kf.data:n))):g.Ff(e,g.kb(i)))}e=this.Cd;g=this.fA;g!==n&&(i=h,d!==n&&(i=d.La,
d.La=h),g(this,c,e),d!==n&&(d.La=i));a!==n&&(this.Kf!==a&&Vl(a,this,e),e!==n&&(e.Ld=n),hm(this),a.F(Li));this.j("toNode",b,a);Ti(this)}});w.g(U,"toPortId",U.prototype.Pj);
w.defineProperty(U,{Pj:"toPortId"},t("uh"),function(a){var b=this.uh;if(b!==a){u&&w.k(a,"string",U,"toPortId");var c=this.Cd;c!==n&&(c.Ld=n);gm(this);this.uh=a;var d=this.Cd;d!==n&&(d.Ld=n);var e=this.h;if(e!==n){var g=this.data,i=e.V;g!==n&&i instanceof O&&i.Hs(g,a)}c!==d&&(this.Vh=n,this.Tb(),g=this.fA,g!==n&&(i=h,e!==n&&(i=e.La,e.La=h),g(this,c,d),e!==n&&(e.La=i)));hm(this);this.j("toPortId",b,a)}});w.u(U,{Cd:"toPort"},function(){var a=this.Vf;return a===n?n:a.Xr(this.uh)});
w.g(U,"toPortChanged",U.prototype.fA);w.defineProperty(U,{fA:"toPortChanged"},t("ur"),function(a){var b=this.ur;b!==a&&(a!==n&&w.k(a,"function",U,"toPortChanged"),this.ur=a,this.j("toPortChanged",b,a))});w.g(U,"fromSpot",U.prototype.jb);w.defineProperty(U,{jb:"fromSpot"},t("dh"),function(a){var b=this.dh;b.I(a)||(u&&w.i(a,H,U,"fromSpot"),this.dh=a=a.O(),this.j("fromSpot",b,a),this.Tb())});w.g(U,"fromEndSegmentLength",U.prototype.Tk);
w.defineProperty(U,{Tk:"fromEndSegmentLength"},t("$g"),function(a){var b=this.$g;b!==a&&(u&&w.k(a,"number",U,"fromEndSegmentLength"),0>a&&w.ra(a,">= 0",U,"fromEndSegmentLength"),this.$g=a,this.j("fromEndSegmentLength",b,a),this.Tb())});w.g(U,"fromEndSegmentDirection",U.prototype.$r);w.defineProperty(U,{$r:"fromEndSegmentDirection"},t("Zg"),function(a){var b=this.Zg;b!==a&&(u&&w.ib(a,T,U,"fromEndSegmentDirection"),this.Zg=a,this.j("fromEndSegmentDirection",b,a),this.Tb())});
w.g(U,"fromShortLength",U.prototype.as);w.defineProperty(U,{as:"fromShortLength"},t("bh"),function(a){var b=this.bh;b!==a&&(u&&w.k(a,"number",U,"fromShortLength"),this.bh=a,this.j("fromShortLength",b,a),this.Tb())});w.g(U,"toSpot",U.prototype.nb);w.defineProperty(U,{nb:"toSpot"},t("wh"),function(a){var b=this.wh;b.I(a)||(u&&w.i(a,H,U,"toSpot"),this.wh=a=a.O(),this.j("toSpot",b,a),this.Tb())});w.g(U,"toEndSegmentLength",U.prototype.gl);
w.defineProperty(U,{gl:"toEndSegmentLength"},t("th"),function(a){var b=this.th;b!==a&&(u&&w.k(a,"number",U,"toEndSegmentLength"),0>a&&w.ra(a,">= 0",U,"toEndSegmentLength"),this.th=a,this.j("toEndSegmentLength",b,a),this.Tb())});w.g(U,"toEndSegmentDirection",U.prototype.Ns);w.defineProperty(U,{Ns:"toEndSegmentDirection"},t("sh"),function(a){var b=this.sh;b!==a&&(u&&w.ib(a,T,U,"toEndSegmentDirection"),this.sh=a,this.j("toEndSegmentDirection",b,a),this.Tb())});w.g(U,"toShortLength",U.prototype.Os);
w.defineProperty(U,{Os:"toShortLength"},t("vh"),function(a){var b=this.vh;b!==a&&(u&&w.k(a,"number",U,"toShortLength"),this.vh=a,this.j("toShortLength",b,a),this.Tb())});function Ti(a){var b=a.ga,c=a.la;b!==n&&c!==n?im(a,b.zG(c)):im(a,n)}function im(a,b){var c=a.gk;if(c!==b){c!==n&&Ml(c,a);a.gk=b;b!==n&&Nl(b,a);var d=a.Xy;if(d!==n){var e=h,g=a.h;g!==n&&(e=g.La,g.La=h);d(a,c,b);g!==n&&(g.La=e)}a.vi&&(a.LB===c||a.NB===c)&&a.Tb()}}
U.prototype.getOtherNode=U.prototype.aD=function(a){u&&w.i(a,T,U,"getOtherNode:node");var b=this.ga;return a===b?this.la:b};U.prototype.getOtherPort=U.prototype.OK=function(a){u&&w.i(a,P,U,"getOtherPort:port");var b=this.Pc;return a===b?this.Cd:b};w.u(U,{kL:"isLabeledLink"},function(){return this.Fe===n?p:0<this.Fe.count});w.u(U,{Jj:"labelNodes"},function(){return this.Fe===n?w.If:this.Fe.l});function Xl(a,b){a.Fe===n&&(a.Fe=new ma(T));a.Fe.add(b);a.R()}
U.prototype.fs=function(){S.prototype.fs.call(this);jm(this)&&Vg(this,this.wa);var a=this.Kf,b=this.Vf;if(a!==n){var c=this.Pc;c!==n&&(c.Ld=n);Vl(a,this,c);hm(this)}b!==n&&(c=this.Cd,c!==n&&(c.Ld=n),Vl(b,this,c),hm(this))};U.prototype.gs=function(){S.prototype.gs.call(this);jm(this)&&Vg(this,this.wa);var a=this.Kf,b=this.Vf;if(a!==n){var c=this.Pc;c!==n&&(c.Ld=n);Wl(a,this,c);gm(this)}b!==n&&(c=this.Cd,c!==n&&(c.Ld=n),Wl(b,this,c),gm(this))};
U.prototype.$l=function(){if(this.Fe!==n){var a=this.h;if(a===n)return;for(var b=this.Fe.copy().l;b.next();)a.remove(b.value)}b=this.data;b!==n&&(a=this.h,a!==n&&(a=a.V,a instanceof O?a.OH(b):a instanceof De&&a.Ff(b,f)))};U.prototype.move=U.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;S.prototype.move.call(this,a);this.Zk(c,b);for(a=this.Jj;a.next();){var d=a.value,e=d.position;d.move(new F(e.x+c,e.y+b))}};w.g(U,"relinkableFrom",U.prototype.$D);
w.defineProperty(U,{$D:"relinkableFrom"},t("Kq"),function(a){var b=this.Kq;b!==a&&(u&&w.k(a,"boolean",U,"relinkableFrom"),this.Kq=a,this.j("relinkableFrom",b,a))});w.g(U,"relinkableTo",U.prototype.aE);w.defineProperty(U,{aE:"relinkableTo"},t("Lq"),function(a){var b=this.Lq;b!==a&&(u&&w.k(a,"boolean",U,"relinkableTo"),this.Lq=a,this.j("relinkableTo",b,a))});U.prototype.canRelinkFrom=U.prototype.eJ=function(){if(!this.$D)return p;var a=this.Oa;if(a!==n&&!a.wj)return p;a=a.h;return a!==n&&!a.wj?p:h};
U.prototype.canRelinkTo=U.prototype.fJ=function(){if(!this.aE)return p;var a=this.Oa;if(a!==n&&!a.wj)return p;a=a.h;return a!==n&&!a.wj?p:h};w.u(U,{path:"path"},function(){var a=this.mh;if(a!==n)return a;a=this.Ga;a=Bj(this,a,a.length);return a instanceof V?this.mh=a:n});U.prototype.Gp=t("path");U.prototype.ox=t("Wc");U.prototype.Yh=function(){this.updateRoute();var a=this.oe();return this.Vx=a};
U.prototype.oe=function(){var a=Infinity,b=Infinity,c=this.ja,d;if(0===c)return new G(NaN,NaN,0,0);if(1===c)c=this.p(0),a=Math.min(c.x,a),b=Math.min(c.y,b),d=new G(c.x,c.y,0,0);else if(2===c){d=this.p(0);var e=this.p(1),a=Math.min(d.x,e.x),b=Math.min(d.y,e.y);d=new G(d,e)}else if(this.kv()===hk&&3<=c&&!this.fc)if(e=this.p(0),a=e.x,b=e.y,d=new G(a,b,0,0),3===c){var c=this.p(1),a=Math.min(c.x,a),b=Math.min(c.y,b),g=this.p(2),a=Math.min(g.x,a),b=Math.min(g.y,b);wc(e.x,e.y,c.x,c.y,c.x,c.y,g.x,g.y,0.5,
d)}else for(var i,j,k=3;k<c;k+=3)i=this.p(k-2),k+3>=c&&(k=c-1),j=this.p(k-1),g=this.p(k),wc(e.x,e.y,i.x,i.y,j.x,j.y,g.x,g.y,0.5,d),a=Math.min(g.x,a),b=Math.min(g.y,b),e=g;else{d=this.p(0);e=this.p(1);a=Math.min(d.x,e.x);b=Math.min(d.y,e.y);d=new G(d,e);for(k=2;k<c;k++)e=this.p(k),a=Math.min(e.x,a),b=Math.min(e.y,b),d.jw(e)}this.Pu.U(a-d.x,b-d.y);return d};w.u(U,{LD:"midPoint"},function(){this.updateRoute();return km(this)});
function km(a){var b=a.ja;if(0===b)return qc;if(1===b)return a.p(0);if(2===b){var c=a.p(0),d=a.p(1);return new F((c.x+d.x)/2,(c.y+d.y)/2)}if(a.kv()===hk&&3<=b&&!a.fc){if(3===b)return a.p(1);var c=(b-1)/3|0,e=3*(c/2|0);if(1===c%2){var c=a.p(e),d=a.p(e+1),g=a.p(e+2),a=a.p(e+3),e=new F,b=d.x,i=d.y,d=g.x,j=g.y,g=(b+d)/2,k=(i+j)/2,i=((c.y+i)/2+k)/2,j=(k+(j+a.y)/2)/2;e.x=(((c.x+b)/2+g)/2+(g+(d+a.x)/2)/2)/2;e.y=(i+j)/2;return e}return a.p(e)}e=0;g=[];for(i=0;i<b-1;i++)c=a.p(i),d=a.p(i+1),Ta(c.x,d.x)?(c=
d.y-c.y,0>c&&(c=-c)):Ta(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.am(d)),g.push(c),e+=c;for(d=i=c=0;c<e/2&&i<b;){d=g[i];if(c+d>e/2)break;c+=d;i++}b=a.p(i);a=a.p(i+1);if(b.x===a.x)return b.y>a.y?new F(b.x,b.y-(e/2-c)):new F(b.x,b.y+(e/2-c));if(b.y===a.y)return b.x>a.x?new F(b.x-(e/2-c),b.y):new F(b.x+(e/2-c),b.y);c=(e/2-c)/d;return new F(b.x+c*(a.x-b.x),b.y+c*(a.y-b.y))}w.u(U,{KD:"midAngle"},function(){this.updateRoute();return lm(this)});
function lm(a){var b=a.ja;if(2>b)return NaN;if(a.kv()===hk&&4<=b&&!a.fc){var c=(b-1)/3|0,d=3*(c/2|0);if(1===c%2){var d=Math.floor(d),b=a.p(d),e=a.p(d+1),c=a.p(d+2),a=a.p(d+3),d=e.x,e=e.y,g=c.x,c=c.y,i=(d+g)/2,j=(e+c)/2;return ab(((b.x+d)/2+i)/2,((b.y+e)/2+j)/2,(i+(g+a.x)/2)/2,(j+(c+a.y)/2)/2)}if(0<d&&d+1<b)return b=a.p(d-1),e=a.p(d+1),b.Bi(e)}c=b/2|0;if(0===b%2)return b=a.p(c-1),e=a.p(c),b.Bi(e);b=a.p(c-1);e=a.p(c);c=a.p(c+1);a=b.am(e);d=e.am(c);return a>d?b.Bi(e):e.Bi(c)}w.g(U,"points",U.prototype.points);
w.defineProperty(U,{points:"points"},t("Wc"),function(a){u&&w.i(a,z,U,"points");var b=this.Wc;if(b!==a&&a!==n){for(var c=a.l;c.next();){var d=c.value;d.freeze()}a.freeze();this.Wc=a.copy();this.$f();mm(this);for(var c=a.count,e=new z,g=0;g<c;g++)d=a.n[g],e.add(d.copy());this.j("points",b,e)}});w.u(U,{ja:"pointsCount"},function(){return this.Wc.count});U.prototype.getPoint=U.prototype.p=function(a){return this.Wc.n[a]};
U.prototype.setPoint=U.prototype.J=function(a,b){u&&(w.i(b,F,U,"setPoint"),b.P()||w.m("Link.setPoint called with a Point that does not have real numbers: "+b.toString()));this.Ig===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Wc.cw(a,b)};
U.prototype.insertPoint=U.prototype.A=function(a,b){u&&(w.i(b,F,U,"insertPoint"),b.P()||w.m("Link.insertPoint called with a Point that does not have real numbers: "+b.toString()));this.Ig===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Wc.yc(a,b)};
U.prototype.addPoint=U.prototype.vd=function(a){u&&(w.i(a,F,U,"addPoint"),a.P()||w.m("Link.addPoint called with a Point that does not have real numbers: "+a.toString()));this.Ig===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Wc.add(a)};U.prototype.removePoint=U.prototype.fE=function(a){this.Ig===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Wc.Ye(a)};
U.prototype.clearPoints=U.prototype.Rn=function(){this.Ig===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Wc.clear()};U.prototype.movePoints=U.prototype.Zk=function(a,b){for(var c=new z(F),d=this.Wc.l;d.next();){var e=d.value;c.add(new F(e.x+a,e.y+b))}this.points=c};U.prototype.startRoute=U.prototype.fl=function(){if(this.Ig===n){for(var a=new z(F),b=this.Wc.l;b.next();)a.add(b.value.O());this.Ig=a;this.Wc.Ia()}};
U.prototype.commitRoute=U.prototype.zi=function(){if(this.Ig!==n){for(var a=this.Ig,b=Infinity,c=Infinity,d=a.count,e=0;e<d;e++)var g=a.n[e],b=Math.min(g.x,b),c=Math.min(g.y,c);for(var i=Infinity,j=Infinity,k=this.Wc,l=k.count,e=0;e<l;e++)g=k.n[e],i=Math.min(g.x,i),j=Math.min(g.y,j);if(l===d)for(e=0;e<l;e++)if(g=a.n[e],d=k.n[e],g.x-b!==d.x-i||g.y-c!==d.y-j){this.$f();break}this.Ig=n;this.Wc.freeze();mm(this);b=new z(F);for(e=0;e<l;e++)g=k.n[e],b.add(g.copy());this.j("points",a,b)}};
U.prototype.rollbackRoute=U.prototype.SH=function(){this.Ig=n};function mm(a){0===a.Wc.count?a.vi=p:(a.vi=h,nm(a,p))}U.prototype.invalidateRoute=U.prototype.Tb=function(){if(!this.vn&&(!this.h||!this.h.sa.tb)){this.vi=p;this.$f();var a=this.Gp();a!==n&&a.R()}};U.prototype.updateRoute=U.prototype.iA=function(){if(!this.vi&&!this.Tw){var a=h;try{this.Tw=h,this.fl(),a=this.computePoints()}finally{this.Tw=p,a?this.zi():this.SH()}}};
U.prototype.computePoints=U.prototype.zJ=function(){var a=this.ga,b=n,b=a===n?n:this.Pc;if(b!==n){var c=Zj(b);if(c===a||!a.mb()){var d=Il(a);d!==n&&d!==a?(a=d,b=d.Xr("")):a=d}else b=c}this.LB=a;if(a===n||b===n||!a.location.P())return p;var e=this.la,g=n,g=e===n?n:this.Cd;if(g!==n){var i=Zj(g);if(i===e||!e.mb()){var j=Il(e);j!==n&&j!==e?(e=j,g=j.Xr("")):e=j}else g=i}this.NB=e;if(e===n||g===n||!e.location.P())return p;var k=this.ja,l=om(this,b),m=pm(this,g),q=b===g,r=this.fc,s=this.yf===hk;this.Vh=
q&&!r?s=h:p;var v=this.Yu===ij||q;if(!r&&l===Gb&&m===Gb&&!q){var y=p;if(!v&&3<=k)var C=this.getLinkPoint(a,b,Gb,h,p,e,g),E=this.getLinkPoint(e,g,Gb,p,p,a,b),y=qm(this,0,C,k-1,E);if(!y)if(this.Rn(),s){var I=a,D=b,M=e,N=g,Z=this.getLinkPoint(I,D,Gb,h,p,M,N),va=this.getLinkPoint(M,N,Gb,p,p,I,D),la=va.x-Z.x,ta=va.y-Z.y,Ea=this.computeCurviness(),Ha=0,cb=0,rb=Z.x+la/3,Xa=Z.y+ta/3,Na=rb,gb=Xa;Ua(ta,0)?gb=0<la?gb-Ea:gb+Ea:(Ha=-la/ta,cb=Math.sqrt(Ea*Ea/(Ha*Ha+1)),0>Ea&&(cb=-cb),Na=(0>ta?-1:1)*cb+rb,gb=Ha*
(Na-rb)+Xa);var rb=Z.x+2*la/3,Xa=Z.y+2*ta/3,Ya=rb,nb=Xa;Ua(ta,0)?nb=0<la?nb-Ea:nb+Ea:(Ya=(0>ta?-1:1)*cb+rb,nb=Ha*(Ya-rb)+Xa);this.Rn();this.vd(Z);this.vd(new F(Na,gb));this.vd(new F(Ya,nb));this.vd(va);this.J(0,this.getLinkPoint(I,D,Gb,h,p,M,N));this.J(3,this.getLinkPoint(M,N,Gb,p,p,I,D))}else{var vd=a,ne=b,Nd=e,Ub=g,Fc=this.getLinkPoint(vd,ne,Gb,h,p,Nd,Ub),ae=this.getLinkPoint(Nd,Ub,Gb,p,p,vd,ne);if(this.hasCurviness()){var pe=ae.x-Fc.x,Rf=ae.y-Fc.y,Vc=this.computeCurviness(),yd=Fc.x+pe/2,cc=Fc.y+
Rf/2,Sf=yd,Mc=cc;if(Ua(Rf,0))Mc=0<pe?Mc-Vc:Mc+Vc;else{var Pe=-pe/Rf,pf=Math.sqrt(Vc*Vc/(Pe*Pe+1));0>Vc&&(pf=-pf);Sf=(0>Rf?-1:1)*pf+yd;Mc=Pe*(Sf-yd)+cc}this.vd(Fc);this.vd(new F(Sf,Mc))}else this.vd(Fc);this.vd(ae)}}else{var qf=this.Gh===$f;v&&(r&&qf||q)&&this.Rn();var Wc=this.computeCurviness(),Nc=this.getLinkPoint(a,b,l,h,r,e,g),Qe=0,ce=0,Mb=0;if(r||l!==Gb||q){var de=this.getEndSegmentLength(a,b,l,h),Mb=this.getLinkDirection(a,b,Nc,l,h,r,e,g);q&&(Mb-=r?90:30,0>Wc&&(Mb-=180));0>Mb?Mb+=360:360<=Mb&&
(Mb-=360);q&&(de+=Math.abs(Wc));0===Mb?Qe=de:90===Mb?ce=de:180===Mb?Qe=-de:270===Mb?ce=-de:(Qe=de*Math.cos(Mb*Math.PI/180),ce=de*Math.sin(Mb*Math.PI/180));if(zb(l)&&q)var qe=b.Ab(Ob),Nc=this.getLinkPointFromPoint(a,b,qe,new F(qe.x+1E3*Qe,qe.y+1E3*ce),h)}var lc=this.getLinkPoint(e,g,m,p,r,a,b),wb=0,Xc=0,Nb=0;if(r||m!==Gb||q){var Qd=this.getEndSegmentLength(e,g,m,p),Nb=this.getLinkDirection(e,g,lc,m,p,r,a,b);q&&(Nb+=r?0:30,0>Wc&&(Nb+=180));0>Nb?Nb+=360:360<=Nb&&(Nb-=360);q&&(Qd+=Math.abs(Wc));0===Nb?
wb=Qd:90===Nb?Xc=Qd:180===Nb?wb=-Qd:270===Nb?Xc=-Qd:(wb=Qd*Math.cos(Nb*Math.PI/180),Xc=Qd*Math.sin(Nb*Math.PI/180));zb(m)&&q&&(qe=g.Ab(Ob),lc=this.getLinkPointFromPoint(e,g,qe,new F(qe.x+1E3*wb,qe.y+1E3*Xc),p))}var re=Nc;if(r||l!==Gb||q)re=new F(Nc.x+Qe,Nc.y+ce);var Cb=lc;if(r||m!==Gb||q)Cb=new F(lc.x+wb,lc.y+Xc);if(v||r||!zb(l)||!(3<k&&qm(this,0,Nc,k-2,Cb)))if(!v&&!r&&zb(m)&&3<k&&qm(this,1,re,k-1,lc))this.J(0,Nc);else if(!v&&!r&&4<k&&qm(this,1,re,k-2,Cb))this.J(0,Nc),this.J(k-1,lc);else if(!v&&r&&
6<=k&&!qf&&qm(this,1,re,k-2,Cb))this.J(0,Nc),this.J(k-1,lc);else{this.Rn();this.vd(Nc);(r||l!==Gb||q)&&this.vd(re);if(r){var R=re,Vb=Mb,Q=Cb,ha=Nb,Ab=a,Fb=e,Vb=-45<=Vb&&45>Vb?0:45<=Vb&&135>Vb?90:135<=Vb&&225>Vb?180:270,ha=-45<=ha&&45>ha?0:45<=ha&&135>ha?90:135<=ha&&225>ha?180:270,Ga=Ab.wa.copy(),oa=Fb.wa.copy();if(Ga.P()&&oa.P()){Ga.Pg(8,8);oa.Pg(8,8);Ga.jw(R);oa.jw(Q);var Aa,Pa;if(0===Vb)if(Q.x>R.x||270===ha&&Q.y<R.y&&oa.right>R.x||90===ha&&Q.y>R.y&&oa.right>R.x)Aa=new F(Q.x,R.y),Pa=new F(Q.x,(R.y+
Q.y)/2),180===ha?(Aa.x=rm(this,R.x,Q.x),Pa.x=Aa.x,Pa.y=Q.y):270===ha&&Q.y<R.y||90===ha&&Q.y>R.y?(Aa.x=R.x<oa.left?rm(this,R.x,oa.left):R.x<oa.right&&(270===ha&&R.y<oa.top||90===ha&&R.y>oa.bottom)?rm(this,R.x,Q.x):oa.right,Pa.x=Aa.x,Pa.y=Q.y):0===ha&&(R.x<oa.left&&R.y>oa.top&&R.y<oa.bottom)&&(Aa.x=R.x,Aa.y=R.y<Q.y?Math.min(Q.y,oa.top):Math.max(Q.y,oa.bottom),Pa.y=Aa.y);else{Aa=new F(R.x,Q.y);Pa=new F((R.x+Q.x)/2,Q.y);if(180===ha||90===ha&&Q.y<Ga.top||270===ha&&Q.y>Ga.bottom){if(180===ha&&(oa.ua(R)||
Ga.ua(Q)))Aa.y=rm(this,R.y,Q.y);else if(Q.y<R.y&&(180===ha||90===ha))Aa.y=rm(this,Ga.top,Math.max(Q.y,oa.bottom));else if(Q.y>R.y&&(180===ha||270===ha))Aa.y=rm(this,Ga.bottom,Math.min(Q.y,oa.top));Pa.x=Q.x;Pa.y=Aa.y}if(Aa.y>Ga.top&&Aa.y<Ga.bottom)if(Q.x>=Ga.left&&Q.x<=R.x||R.x<=oa.right&&R.x>=Q.x){if(90===ha||270===ha)Aa=new F(Math.max((R.x+Q.x)/2,R.x),R.y),Pa=new F(Aa.x,Q.y)}else Aa.y=270===ha||(0===ha||180===ha)&&Q.y<R.y?Math.min(Q.y,0===ha?Ga.top:Math.min(Ga.top,oa.top)):Math.max(Q.y,0===ha?Ga.bottom:
Math.max(Ga.bottom,oa.bottom)),Pa.x=Q.x,Pa.y=Aa.y}else if(180===Vb)if(Q.x<R.x||270===ha&&Q.y<R.y&&oa.left<R.x||90===ha&&Q.y>R.y&&oa.left<R.x)Aa=new F(Q.x,R.y),Pa=new F(Q.x,(R.y+Q.y)/2),0===ha?(Aa.x=rm(this,R.x,Q.x),Pa.x=Aa.x,Pa.y=Q.y):270===ha&&Q.y<R.y||90===ha&&Q.y>R.y?(Aa.x=R.x>oa.right?rm(this,R.x,oa.right):R.x>oa.left&&(270===ha&&R.y<oa.top||90===ha&&R.y>oa.bottom)?rm(this,R.x,Q.x):oa.left,Pa.x=Aa.x,Pa.y=Q.y):180===ha&&(R.x>oa.right&&R.y>oa.top&&R.y<oa.bottom)&&(Aa.x=R.x,Aa.y=R.y<Q.y?Math.min(Q.y,
oa.top):Math.max(Q.y,oa.bottom),Pa.y=Aa.y);else{Aa=new F(R.x,Q.y);Pa=new F((R.x+Q.x)/2,Q.y);if(0===ha||90===ha&&Q.y<Ga.top||270===ha&&Q.y>Ga.bottom){if(0===ha&&(oa.ua(R)||Ga.ua(Q)))Aa.y=rm(this,R.y,Q.y);else if(Q.y<R.y&&(0===ha||90===ha))Aa.y=rm(this,Ga.top,Math.max(Q.y,oa.bottom));else if(Q.y>R.y&&(0===ha||270===ha))Aa.y=rm(this,Ga.bottom,Math.min(Q.y,oa.top));Pa.x=Q.x;Pa.y=Aa.y}if(Aa.y>Ga.top&&Aa.y<Ga.bottom)if(Q.x<=Ga.right&&Q.x>=R.x||R.x>=oa.left&&R.x<=Q.x){if(90===ha||270===ha)Aa=new F(Math.min((R.x+
Q.x)/2,R.x),R.y),Pa=new F(Aa.x,Q.y)}else Aa.y=270===ha||(0===ha||180===ha)&&Q.y<R.y?Math.min(Q.y,180===ha?Ga.top:Math.min(Ga.top,oa.top)):Math.max(Q.y,180===ha?Ga.bottom:Math.max(Ga.bottom,oa.bottom)),Pa.x=Q.x,Pa.y=Aa.y}else if(90===Vb)if(Q.y>R.y||180===ha&&Q.x<R.x&&oa.bottom>R.y||0===ha&&Q.x>R.x&&oa.bottom>R.y)Aa=new F(R.x,Q.y),Pa=new F((R.x+Q.x)/2,Q.y),270===ha?(Aa.y=rm(this,R.y,Q.y),Pa.x=Q.x,Pa.y=Aa.y):180===ha&&Q.x<R.x||0===ha&&Q.x>R.x?(Aa.y=R.y<oa.top?rm(this,R.y,oa.top):R.y<oa.bottom&&(180===
ha&&R.x<oa.left||0===ha&&R.x>oa.right)?rm(this,R.y,Q.y):oa.bottom,Pa.x=Q.x,Pa.y=Aa.y):90===ha&&(R.y<oa.top&&R.x>oa.left&&R.x<oa.right)&&(Aa.x=R.x<Q.x?Math.min(Q.x,oa.left):Math.max(Q.x,oa.right),Aa.y=R.y,Pa.x=Aa.x);else{Aa=new F(Q.x,R.y);Pa=new F(Q.x,(R.y+Q.y)/2);if(270===ha||0===ha&&Q.x<Ga.left||180===ha&&Q.x>Ga.right){if(270===ha&&(oa.ua(R)||Ga.ua(Q)))Aa.x=rm(this,R.x,Q.x);else if(Q.x<R.x&&(270===ha||0===ha))Aa.x=rm(this,Ga.left,Math.max(Q.x,oa.right));else if(Q.x>R.x&&(270===ha||180===ha))Aa.x=
rm(this,Ga.right,Math.min(Q.x,oa.left));Pa.x=Aa.x;Pa.y=Q.y}if(Aa.x>Ga.left&&Aa.x<Ga.right)if(Q.y>=Ga.top&&Q.y<=R.y||R.y<=oa.bottom&&R.y>=Q.y){if(0===ha||180===ha)Aa=new F(R.x,Math.max((R.y+Q.y)/2,R.y)),Pa=new F(Q.x,Aa.y)}else Aa.x=180===ha||(90===ha||270===ha)&&Q.x<R.x?Math.min(Q.x,90===ha?Ga.left:Math.min(Ga.left,oa.left)):Math.max(Q.x,90===ha?Ga.right:Math.max(Ga.right,oa.right)),Pa.x=Aa.x,Pa.y=Q.y}else if(Q.y<R.y||180===ha&&Q.x<R.x&&oa.top<R.y||0===ha&&Q.x>R.x&&oa.top<R.y)Aa=new F(R.x,Q.y),Pa=
new F((R.x+Q.x)/2,Q.y),90===ha?(Aa.y=rm(this,R.y,Q.y),Pa.x=Q.x,Pa.y=Aa.y):180===ha&&Q.x<R.x||0===ha&&Q.x>=R.x?(Aa.y=R.y>oa.bottom?rm(this,R.y,oa.bottom):R.y>oa.top&&(180===ha&&R.x<oa.left||0===ha&&R.x>oa.right)?rm(this,R.y,Q.y):oa.top,Pa.x=Q.x,Pa.y=Aa.y):270===ha&&(R.y>oa.bottom&&R.x>oa.left&&R.x<oa.right)&&(Aa.x=R.x<Q.x?Math.min(Q.x,oa.left):Math.max(Q.x,oa.right),Aa.y=R.y,Pa.x=Aa.x);else{Aa=new F(Q.x,R.y);Pa=new F(Q.x,(R.y+Q.y)/2);if(90===ha||0===ha&&Q.x<Ga.left||180===ha&&Q.x>Ga.right){if(90===
ha&&(oa.ua(R)||Ga.ua(Q)))Aa.x=rm(this,R.x,Q.x);else if(Q.x<R.x&&(90===ha||0===ha))Aa.x=rm(this,Ga.left,Math.max(Q.x,oa.right));else if(Q.x>R.x&&(90===ha||180===ha))Aa.x=rm(this,Ga.right,Math.min(Q.x,oa.left));Pa.x=Aa.x;Pa.y=Q.y}if(Aa.x>Ga.left&&Aa.x<Ga.right)if(Q.y<=Ga.bottom&&Q.y>=R.y||R.y>=oa.top&&R.y<=Q.y){if(0===ha||180===ha)Aa=new F(R.x,Math.min((R.y+Q.y)/2,R.y)),Pa=new F(Q.x,Aa.y)}else Aa.x=180===ha||(90===ha||270===ha)&&Q.x<R.x?Math.min(Q.x,270===ha?Ga.left:Math.min(Ga.left,oa.left)):Math.max(Q.x,
270===ha?Ga.right:Math.max(Ga.right,oa.right)),Pa.x=Aa.x,Pa.y=Q.y}var Yc;var xc=Vb,ld=Aa,xb=Pa,Zc=ha;if(this.Gh!==$f)Yc=p;else{var Ib=this.h;if(Ib===n||Ga.ua(Q)||oa.ua(R)||Ab===Fb||this.Oa.zc)Yc=p;else{var eb;Ib.ud===n&&(Ib.ud=new sm);var yc=this!==n?this.cb:n;if(Ib.ud.hs||Ib.ud.group!==yc){if(yc===n){var Re,se;if(Ib.$h)if(Ib.Zr.P()){var zd=Ib.Zr.copy();zd.Fn(Ib.padding);se=zd}else{for(var rf,Tf=h,kg=Ib.gb,te=kg.length,Rd=0;Rd<te;Rd++){var ue=kg.n[Rd];if(ue.visible&&!ue.zc)for(var Ad=ue.Nb,Se=Ad.length,
Wb=0;Wb<Se;Wb++){var Oc=Ad.n[Wb];if(Oc.Hv&&Oc.mb()){var ve=Oc.wa;ve.P()&&(Tf?(Tf=p,rf=ve.copy()):rf.Oi(ve))}}}Tf&&(rf=new G(0,0,0,0));rf.Fn(Ib.padding);se=rf}else se=Ib.wc.copy();Re=se;Re.Pg(100,100);Ib.ud.initialize(Re);for(var $c=Ib.bl;$c.next();){var Te=$c.value,we=Te.Oa;we===n||(!we.visible||we.zc)||$i(Ib,Te,n)}}else{var Sd=yc.wa.copy();Sd.Pg(20,20);Ib.ud.initialize(Sd);for(var Td=yc.Gc;Td.next();){var xe=Td.value;xe instanceof T&&$i(Ib,xe,n)}}Ib.ud.group=yc;Ib.ud.hs=p}else tm(Ib.ud);eb=Ib.ud;
if(um(eb,Math.min(R.x,ld.x),Math.min(R.y,ld.y),Math.abs(R.x-ld.x),Math.abs(R.y-ld.y))&&um(eb,Math.min(ld.x,xb.x),Math.min(ld.y,xb.y),Math.abs(ld.x-xb.x),Math.abs(ld.y-xb.y))&&um(eb,Math.min(xb.x,Q.x),Math.min(xb.y,Q.y),Math.abs(xb.x-Q.x),Math.abs(xb.y-Q.y)))Yc=p;else{var yb=Ga.copy().Oi(oa);yb.Pg(2*eb.Vl,2*eb.Ul);vm(eb,R,xc,Q,Zc,yb);var Bd=wm(eb,Q.x,Q.y);if(!eb.abort&&Bd===xm){tm(eb);var lb=eb.yE;yb.Pg(eb.Vl*lb,eb.Ul*lb);vm(eb,R,xc,Q,Zc,yb);Bd=wm(eb,Q.x,Q.y)}!eb.abort&&Bd===xm&&(tm(eb),lb=eb.xD,yb.Pg(eb.Vl*
lb,eb.Ul*lb),vm(eb,R,xc,Q,Zc,yb),Bd=wm(eb,Q.x,Q.y));!eb.abort&&(Bd===xm&&eb.XE)&&(tm(eb),vm(eb,R,xc,Q,Zc,eb.Fb),Bd=wm(eb,Q.x,Q.y));if(!eb.abort&&Bd<xm&&0!==wm(eb,Q.x,Q.y)){ym(this,eb,Q.x,Q.y,Zc,h);var Bb=this.p(2);if(4>this.ja)0===xc||180===xc?(Bb.x=R.x,Bb.y=Q.y):(Bb.x=Q.x,Bb.y=R.y),this.J(2,Bb),this.A(3,Bb);else{var zc=this.p(3);if(0===xc||180===xc)if(Ua(Bb.x,zc.x)){var wa=0===xc?Math.max(Bb.x,R.x):Math.min(Bb.x,R.x);this.J(2,new F(wa,R.y));this.J(3,new F(wa,zc.y))}else Ua(Bb.y,zc.y)?(Math.abs(R.y-
Bb.y)<=eb.Ul/2&&(this.J(2,new F(Bb.x,R.y)),this.J(3,new F(zc.x,R.y))),this.A(2,new F(Bb.x,R.y))):this.J(2,new F(R.x,Bb.y));else if(90===xc||270===xc)if(Ua(Bb.y,zc.y)){var ya=90===xc?Math.max(Bb.y,R.y):Math.min(Bb.y,R.y);this.J(2,new F(R.x,ya));this.J(3,new F(zc.x,ya))}else Ua(Bb.x,zc.x)?(Math.abs(R.x-Bb.x)<=eb.Vl/2&&(this.J(2,new F(R.x,Bb.y)),this.J(3,new F(R.x,zc.y))),this.A(2,new F(R.x,Bb.y))):this.J(2,new F(Bb.x,R.y))}Yc=h}else Yc=p}}}Yc||(this.vd(Aa),this.vd(Pa))}}(r||m!==Gb||q)&&this.vd(Cb);
this.vd(lc)}}return h};function zm(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
U.prototype.getLinkPointFromPoint=U.prototype.NK=function(a,b,c,d){if(a===n||b===n)return c;if(!a.mb()){var e=Il(a);e!==n&&e!==a&&(b=e.port)}var g,a=n;if(b.fa===n)e=d.x,d=d.y,g=c.x,c=c.y;else{a=b.fa.je;e=1/(a.m11*a.m22-a.m12*a.m21);g=a.m22*e;var i=-a.m12*e,j=-a.m21*e,k=a.m11*e,l=e*(a.m21*a.dy-a.m22*a.dx),m=e*(a.m12*a.dx-a.m11*a.dy),e=d.x*g+d.y*j+l,d=d.x*i+d.y*k+m;g=c.x*g+c.y*j+l;c=c.x*i+c.y*k+m}i=new F;b.bs(e,d,g,c,i);a&&i.transform(a);return i};
function Am(a,b){var c=a.Ld;c===n&&(c=new Bm,c.port=a,c.Ug=a.ca,a.Ld=c);return Cm(c,b)}U.prototype.getLinkPoint=U.prototype.MK=function(a,b,c,d,e,g,i){if(tb(c))return c=b.Ab(c);if(ub(c)&&(c=Am(b,this),c!==n))return c=c.qo;c=b.Ab(Ob);this.ja>(e?6:2)?(i=d?this.p(1):this.p(this.ja-2),e&&(i=zm(c,i.copy()))):(i=i.Ab(Ob),e&&(i=zm(c,i)));return this.getLinkPointFromPoint(a,b,c,i,d)};
U.prototype.getLinkDirection=U.prototype.LK=function(a,b,c,d,e,g,i,j){a:if(tb(d))c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:0.5>d.x?225:0.5<d.x?45:0;else{if(ub(d)&&(d=Am(b,this),d!==n))switch(d.fe){case w.nd:c=270;break a;case w.Sc:c=180;break a;default:case w.cd:c=0;break a;case w.bd:c=90;break a}d=b.Ab(Ob);this.ja>(g?6:2)?(j=e?this.p(1):this.p(this.ja-2),j=g?zm(d,j.copy()):c):j=j.Ab(Ob);c=Math.abs(j.x-d.x)>Math.abs(j.y-d.y)?j.x>=d.x?0:180:j.y>=d.y?90:270}g=Rl;
g=e?this.$r:this.Ns;g===Rl&&(g=e?b.$r:b.Ns);switch(g){case Sl:a=a.angle;c+=a;360<=c&&(c-=360);break;case Rl:case hj:a=a.angle;if(0===a)break;45<=a&&135>a?c+=90:135<=a&&225>a?c+=180:225<=a&&315>a&&(c+=270);360<=c&&(c-=360)}return c};U.prototype.getEndSegmentLength=U.prototype.KK=function(a,b,c,d){if(ub(c)&&(a=Am(b,this),a!==n))return a.sv;a=NaN;a=d?this.Tk:this.gl;isNaN(a)&&(a=d?b.Tk:b.gl);isNaN(a)&&(a=10);return a};
U.prototype.computeSpot=U.prototype.rC=function(a){return a?om(this,this.Pc):pm(this,this.Cd)};function om(a,b){var c=a.jb;Eb(c)&&(b===f&&(b=a.Pc),b!==n&&(c=b.jb));return c===Hb?Gb:c}function pm(a,b){var c=a.nb;Eb(c)&&(b===f&&(b=a.Cd),b!==n&&(c=b.nb));return c===Hb?Gb:c}U.prototype.computeShortLength=U.prototype.DJ=function(a){return a?Dm(this):Em(this)};function Dm(a){var b=a.as;isNaN(b)&&(a=a.Pc,a!==n&&(b=a.as));return isNaN(b)?0:b}
function Em(a){var b=a.Os;isNaN(b)&&(a=a.Cd,a!==n&&(b=a.Os));return isNaN(b)?0:b}w.u(U,{fc:"isOrthogonal"},function(){var a=this.kn;return a===gk||a===$f});U.prototype.computeCurve=U.prototype.kv=function(){if(this.Vh===n){var a=this.fc;this.Vh=this.Pc===this.Cd&&!a}return this.Vh?hk:this.yf};function Fm(a){if(a.yf===hk)return 0;a=a.yC;if(isNaN(a)||0>a)a=10;return a}
U.prototype.computeCurviness=U.prototype.tJ=function(){var a=this.Yy;if(isNaN(a)){var b=this.ze;if(0!==b){var c=this.ml,a=c!==n?c.spacing:10,c=Math.abs(b),a=a/2+((c-1)/2|0)*a;0===c%2&&(a=-a);0>b&&(a=-a)}else a=10}return a};U.prototype.hasCurviness=U.prototype.VK=function(){return!isNaN(this.Yy)||0!==this.ze&&!this.fc};
function qm(a,b,c,d,e){var g=a.Yu;if(a.fc){if(g===lk)return p;g===mk&&(g=kk)}switch(g){case lk:var i=a.p(b),j=a.p(d);if(!i.I(c)||!j.I(e)){var g=i.x,i=i.y,k=j.x-g,l=j.y-i,m=Math.sqrt(k*k+l*l);if(!Ua(m,0)){var q;Ua(k,0)?q=0>l?-Math.PI/2:Math.PI/2:(q=Math.atan(l/Math.abs(k)),0>k&&(q=Math.PI-q));var j=c.x,r=c.y,k=e.x-j,s=e.y-r,l=Math.sqrt(k*k+s*s);Ua(k,0)?s=0>s?-Math.PI/2:Math.PI/2:(s=Math.atan(s/Math.abs(k)),0>k&&(s=Math.PI-s));m=l/m;q=s-q;a.J(b,c);for(b+=1;b<d;b++)c=a.p(b),k=c.x-g,l=c.y-i,c=Math.sqrt(k*
k+l*l),Ua(c,0)||(Ua(k,0)?l=0>l?-Math.PI/2:Math.PI/2:(l=Math.atan(l/Math.abs(k)),0>k&&(l=Math.PI-l)),k=l+q,c*=m,a.J(b,new F(j+c*Math.cos(k),r+c*Math.sin(k))));a.J(d,e)}}return h;case mk:i=a.p(b);r=a.p(d);if(!i.I(c)||!r.I(e)){g=i.x;i=i.y;j=r.x;r=r.y;m=(j-g)*(j-g)+(r-i)*(r-i);k=c.x;q=c.y;var l=e.x,s=e.y,v=0,y=1,v=0!==l-k?(s-q)/(l-k):9E9;0!==v&&(y=Math.sqrt(1+1/(v*v)));a.J(b,c);for(b+=1;b<d;b++){var c=a.p(b),C=c.x,E=c.y,I=0.5;0!==m&&(I=((g-C)*(g-j)+(i-E)*(i-r))/m);var D=g+I*(j-g),M=i+I*(r-i),c=Math.sqrt((C-
D)*(C-D)+(E-M)*(E-M));E<v*(C-D)+M&&(c=-c);0<v&&(c=-c);C=k+I*(l-k);I=q+I*(s-q);0!==v?(c=C+c/y,a.J(b,new F(c,I-(c-C)/v))):a.J(b,new F(C,I+c))}a.J(d,e)}return h;case kk:return a.fc&&(g=a.p(b),i=a.p(b+1),j=a.p(b+2),Ua(g.y,i.y)?Ua(i.x,j.x)?a.J(b+1,new F(i.x,c.y)):Ua(i.y,j.y)&&a.J(b+1,new F(c.x,i.y)):Ua(g.x,i.x)&&(Ua(i.y,j.y)?a.J(b+1,new F(c.x,i.y)):Ua(i.x,j.x)&&a.J(b+1,new F(i.x,c.y))),g=a.p(d),i=a.p(d-1),j=a.p(d-2),Ua(g.y,i.y)?Ua(i.x,j.x)?a.J(d-1,new F(i.x,e.y)):Ua(i.y,j.y)&&a.J(d-1,new F(e.x,i.y)):Ua(g.x,
i.x)&&(Ua(i.y,j.y)?a.J(d-1,new F(e.x,i.y)):Ua(i.x,j.x)&&a.J(d-1,new F(i.x,e.y)))),a.J(b,c),a.J(d,e),h;default:return p}}function rm(a,b,c){return a.hasCurviness()?(a=a.computeCurviness(),(b+c)/2+a):(b+c)/2}
function ym(a,b,c,d,e,g){var i=b.Vl,j=b.Ul,k=wm(b,c,d),l=c,m=d;for(0===e?l+=i:90===e?m+=j:180===e?l-=i:m-=j;k>Gm&&wm(b,l,m)===k-Hm;)c=l,d=m,0===e?l+=i:90===e?m+=j:180===e?l-=i:m-=j,k-=Hm;if(g){if(k>Gm)if(180===e||0===e)c=Math.floor(c/i)*i+i/2;else if(90===e||270===e)d=Math.floor(d/j)*j+j/2}else c=Math.floor(c/i)*i+i/2,d=Math.floor(d/j)*j+j/2;k>Gm&&(g=e,l=c,m=d,0===e?(g=90,m+=j):90===e?(g=180,l-=i):180===e?(g=270,m-=j):270===e&&(g=0,l+=i),wm(b,l,m)===k-Hm?ym(a,b,l,m,g,p):(l=c,m=d,0===e?(g=270,m-=j):
90===e?(g=0,l+=i):180===e?(g=90,m+=j):270===e&&(g=180,l-=i),wm(b,l,m)===k-Hm&&ym(a,b,l,m,g,p)));a.vd(new F(c,d))}U.prototype.findClosestSegment=U.prototype.tK=function(a){u&&w.i(a,F,U,"findClosestSegment:p");for(var b=a.x,a=a.y,c=this.p(0),d=this.p(1),e=$a(b,a,c.x,c.y,d.x,d.y),g=0,i=1;i<this.ja-1;i++){var c=this.p(i+1),j=$a(b,a,d.x,d.y,c.x,c.y),d=c;j<e&&(g=i,e=j)}return g};U.prototype.invalidateGeometry=U.prototype.$f=function(){this.mh=this.Ha=n;this.R()};
w.u(U,{Xc:"geometry"},function(){this.Ha===n&&(this.updateRoute(),this.Ha=Im(this));return this.Ha});U.prototype.Nv=function(){if(this.Ha===n&&this.vi!==p){this.Ha=Im(this);var a=this.Gp();if(a!==n){a.Ha=this.Ha;for(var b=this.Ga,c=b.length,d=0;d<c;d++){var e=b.n[d];e!==a&&(e.Mi&&e instanceof V)&&(e.Ha=this.Ha)}}}};
function Im(a){var b=a.ja;if(2>b){var a=new hd(id),c=new jd(0,0);a.sb.add(c);return a}var d,e=a.p(0).copy(),g=new F(Infinity,Infinity);g.x=Math.min(e.x,g.x);g.y=Math.min(e.y,g.y);var i=a.kv();if(i===hk&&3<=b&&!Ta(a.Js,0))if(3===b){var j=a.p(1),c=Math.min(e.x,j.x);d=Math.min(e.y,j.y);j=a.p(2);c=Math.min(c,j.x);d=Math.min(d,j.y)}else{if(a.fc)for(j=0;j<b;j++)c=a.Wc.n[j],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);else for(var k,j=3;j<b;j+=3)j+3>=b&&(j=b-1),k=a.p(j),g.x=Math.min(k.x,g.x),g.y=Math.min(k.y,
g.y);c=g.x;d=g.y}else{for(j=0;j<b;j++)c=a.Wc.n[j],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);c=g.x;d=g.y}c-=a.Pu.x;d-=a.Pu.y;e.x-=c;e.y-=d;if(2===b){var l=a.p(1).copy();l.x-=c;l.y-=d;0!==Dm(a)&&Jm(a,e,h,g);0!==Em(a)&&Jm(a,l,p,g);a=new hd(md);a.ma=e.x;a.na=e.y;a.C=l.x;a.D=l.y;return a}l=new J;0!==Dm(a)&&Jm(a,e,h,g);K(l,e.x,e.y,p,p);if(i===hk&&3<=b&&!Ta(a.Js,0))if(3===b)j=a.p(1),b=j.x-c,e=j.y-d,j=a.p(2).copy(),j.x-=c,j.y-=d,0!==Em(a)&&Jm(a,j,p,g),L(l,b,e,b,e,j.x,j.y);else if(a.fc){e=new F(c,d);i=a.p(1).copy();
k=new F(c,d);for(var b=new F(c,d),g=a.p(0),m=n,q=a.Js/3,j=1;j<a.ja-1;j++){var m=a.p(j),r=g,s=m,v=a.p(Km(a,m,j,p));if(!Ta(r.x,s.x)||!Ta(s.x,v.x))if(!Ta(r.y,s.y)||!Ta(s.y,v.y)){var y=q,C=k,E=b;isNaN(y)&&(y=a.Js/3);var I=r.x,r=r.y,D=s.x,s=s.y,M=v.x,v=v.y,N=y*Lm(I,r,D,s),y=y*Lm(D,s,M,v);Ta(r,s)&&Ta(D,M)&&(D>I?v>s?(C.x=D-N,C.y=s-N,E.x=D+y,E.y=s+y):(C.x=D-N,C.y=s+N,E.x=D+y,E.y=s-y):v>s?(C.x=D+N,C.y=s-N,E.x=D-y,E.y=s+y):(C.x=D+N,C.y=s+N,E.x=D-y,E.y=s-y));Ta(I,D)&&Ta(s,v)&&(s>r?(M>D?(C.x=D-N,C.y=s-N,E.x=
D+y):(C.x=D+N,C.y=s-N,E.x=D-y),E.y=s+y):(M>D?(C.x=D-N,C.y=s+N,E.x=D+y):(C.x=D+N,C.y=s+N,E.x=D-y),E.y=s-y));if(Ta(I,D)&&Ta(D,M)||Ta(r,s)&&Ta(s,v))I=0.5*(I+M),r=0.5*(r+v),C.x=I,C.y=r,E.x=I,E.y=r;1===j?(i.x=0.5*(g.x+m.x),i.y=0.5*(g.y+m.y)):2===j&&(Ta(g.x,a.p(0).x)&&Ta(g.y,a.p(0).y))&&(i.x=0.5*(g.x+m.x),i.y=0.5*(g.y+m.y));L(l,i.x-c,i.y-d,k.x-c,k.y-d,m.x-c,m.y-d);e.set(k);i.set(b);g=m}}j=g.x;g=g.y;a=a.p(a.ja-1);j=0.5*(j+a.x);g=0.5*(g+a.y);L(l,b.x-c,b.y-d,j-c,g-d,a.x-c,a.y-d)}else for(j=3;j<b;j+=3)g=a.p(j-
2),j+3>=b&&(j=b-1),e=a.p(j-1),k=a.p(j),j===b-1&&0!==Em(a)&&(k=k.copy(),Jm(a,k,p,jc)),L(l,g.x-c,g.y-d,e.x-c,e.y-d,k.x-c,k.y-d);else{m=a.p(0);for(j=1;j<b;){j=Km(a,m,j,1<j);q=a.p(j);if(j>=b-1){m!==q&&(0!==Em(a)&&(q=q.copy(),Jm(a,q,p,jc)),Mm(a,l,-c,-d,m,q));break}j=Km(a,q,j+1,j<b-3);g=a;e=l;i=-c;k=-d;C=a.p(j);Ua(m.y,q.y)&&Ua(q.x,C.x)?(E=Fm(g),E=Math.min(E,Math.abs(q.x-m.x)/2),E=I=Math.min(E,Math.abs(C.y-q.y)/2),Ua(E,0)?(Mm(g,e,i,k,m,q),m=q):(r=q.x,y=q.y,D=r,s=y,r=q.x>m.x?q.x-E:q.x+E,s=C.y>q.y?q.y+I:q.y-
I,Mm(g,e,i,k,m,new F(r,y)),Dd(e,q.x+i,q.y+k,D+i,s+k),m=new F(D,s))):Ua(m.x,q.x)&&Ua(q.y,C.y)?(E=Fm(g),I=Math.min(E,Math.abs(q.y-m.y)/2),I=E=Math.min(I,Math.abs(C.x-q.x)/2),Ua(E,0)?(Mm(g,e,i,k,m,q),m=q):(r=q.x,s=y=q.y,y=q.y>m.y?q.y-I:q.y+I,D=C.x>q.x?q.x+E:q.x-E,Mm(g,e,i,k,m,new F(r,y)),Dd(e,q.x+i,q.y+k,D+i,s+k),m=new F(D,s))):(Mm(g,e,i,k,m,q),m=q)}}return l.q}
function Lm(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return Ta(a,0)?b:Ta(b,0)?a:Math.sqrt(a*a+b*b)}
function Jm(a,b,c,d){var e=a.ja;if(!(2>e))if(c){var g=a.p(1),c=g.x-d.x,d=g.y-d.y,g=Lm(b.x,b.y,c,d);0!==g&&(e=2===e?0.5*g:g,a=Dm(a),a>e&&(a=e),c=a*(c-b.x)/g,a=a*(d-b.y)/g,b.x+=c,b.y+=a)}else g=a.p(e-2),c=g.x-d.x,d=g.y-d.y,g=Lm(b.x,b.y,c,d),0!==g&&(e=2===e?0.5*g:g,a=Em(a),a>e&&(a=e),c=a*(b.x-c)/g,a=a*(b.y-d)/g,b.x-=c,b.y-=a)}
function Km(a,b,c,d){for(var e=a.ja,g=b;Ta(b.x,g.x)&&Ta(b.y,g.y);){if(c>=e)return e-1;g=a.p(c++)}if(!Ta(b.x,g.x)&&!Ta(b.y,g.y))return c-1;for(var i=g;Ta(b.x,g.x)&&Ta(g.x,i.x)&&(!d||(b.y>=g.y?g.y>=i.y:g.y<=i.y))||Ta(b.y,g.y)&&Ta(g.y,i.y)&&(!d||(b.x>=g.x?g.x>=i.x:g.x<=i.x));){if(c>=e)return e-1;i=a.p(c++)}return c-2}
function Mm(a,b,c,d,e,g){if(jm(a)){var i=new z("number"),j;a:if(j=a.h,j===n)j=0;else{Math.min(e.x,g.x);Math.min(e.y,g.y);Math.max(e.x,g.x);Math.max(e.y,g.y);for(j=j.Lv;j.next();){var k=j.value;if(k!==n&&k.visible)for(k=k.cl;k.next();){var l=k.value;if(l===a){0<i.length&&i.sort(function(a,b){return a-b});j=i.length;break a}if(l instanceof U&&a.mb()&&l.mb()&&jm(l)){var m=l.Yh();if(m.P()&&(a.Yh().Se(m)&&!a.usesSamePort(l))&&(m=l.path,m!==n&&m.Yk()))for(var m=e,q=g,r=i,s=l.ja,v=1;v<s;v++){var y=l.p(v-
1),C=l.p(v),E=new F,I;b:{I=m;var D=q,M=E;if(Ua(I.x,D.x)){if(Ua(y.y,C.y)&&Math.min(I.y,D.y)<=y.y&&Math.max(I.y,D.y)>=y.y&&Math.min(y.x,C.x)<=I.x&&Math.max(y.x,C.x)>=I.x&&!Ua(y.x,C.x)){M.x=I.x;M.y=y.y;I=h;break b}}else if(Ua(y.x,C.x)&&Math.min(I.x,D.x)<=y.x&&Math.max(I.x,D.x)>=y.x&&Math.min(y.y,C.y)<=I.y&&Math.max(y.y,C.y)>=I.y&&!Ua(y.y,C.y)){M.x=y.x;M.y=I.y;I=h;break b}M.x=0;M.y=0;I=p}I&&(Ua(m.y,q.y)?r.add(E.x):r.add(E.y))}}}}0<i.length&&i.sort(function(a,b){return a-b});j=i.length}m=e.x;m=e.y;if(0<
j)if(Ua(e.y,g.y))if(e.x<g.x)for(k=0;k<j;){r=Math.max(e.x,Math.min(i.n[k++]-5,g.x-10));b.lineTo(r+c,g.y+d);m=r+c;for(q=Math.min(r+10,g.x);k<j;)if(l=i.n[k],l<q+10)k++,q=Math.min(l+5,g.x);else break;l=(r+q)/2+c;l=g.y-10+d;r=q+c;q=g.y+d;a.yf===ik?K(b,r,q,p,p):L(b,m,l,r,l,r,q)}else for(k=j-1;0<=k;){r=Math.min(e.x,Math.max(i.n[k--]+5,g.x+10));b.lineTo(r+c,g.y+d);m=r+c;for(q=Math.max(r-10,g.x);0<=k;)if(l=i.n[k],l>q-10)k--,q=Math.max(l-5,g.x);else break;l=g.y-10+d;r=q+c;q=g.y+d;a.yf===ik?K(b,r,q,p,p):L(b,
m,l,r,l,r,q)}else if(Ua(e.x,g.x))if(e.y<g.y)for(k=0;k<j;){r=Math.max(e.y,Math.min(i.n[k++]-5,g.y-10));b.lineTo(g.x+c,r+d);m=r+d;for(q=Math.min(r+10,g.y);k<j;)if(l=i.n[k],l<q+10)k++,q=Math.min(l+5,g.y);else break;l=g.x-10+c;r=g.x+c;q+=d;a.yf===ik?K(b,r,q,p,p):L(b,l,m,l,q,r,q)}else for(k=j-1;0<=k;){r=Math.min(e.y,Math.max(i.n[k--]+5,g.y+10));b.lineTo(g.x+c,r+d);m=r+d;for(q=Math.max(r-10,g.y);0<=k;)if(l=i.n[k],l>q-10)k--,q=Math.max(l-5,g.y);else break;l=g.x-10+c;r=g.x+c;q+=d;a.yf===ik?K(b,r,q,p,p):L(b,
l,m,l,q,r,q)}}b.lineTo(g.x+c,g.y+d)}w.u(U,{Av:"firstPickIndex"},function(){return 2>=this.ja?0:this.fc||om(this)!==Gb?1:0});w.u(U,{vz:"lastPickIndex"},function(){var a=this.ja;return 0===a?0:2>=a?a-1:this.fc||pm(this)!==Gb?a-2:a-1});function jm(a){a=a.yf;return a===jk||a===ik}function nm(a,b){if(b||jm(a)){var c=a.h;c!==n&&(!c.Xi.contains(a)&&a.Vx!==n)&&c.Xi.add(a,a.Vx)}}
function Vg(a,b){var c=a.Oa;if(!(c===n||!c.visible||c.zc)){var d=c.h;if(d!==n)for(var e=p,d=d.Lv;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=h,i=p,g=g.cl;g.next();){var j=g.value;j instanceof U&&(j===a?i=h:i&&Nm(a,j,b))}else if(e)for(g=g.cl;g.next();)j=g.value,j instanceof U&&Nm(a,j,b)}}}function Nm(a,b,c){if(b!==n&&jm(b)&&b.Ha!==n){var d=b.Yh();if(d.P()&&(a.Yh().Se(d)||c.Se(b.Yh())))a.usesSamePort(b)||b.$f()}}
U.prototype.usesSamePort=U.prototype.zM=function(a){var b=this.ja,c=a.ja;if(0<b&&0<c){if(this.p(0).Fi(a.p(0))||this.p(b-1).Fi(a.p(c-1)))return h}else if(this.ga===a.ga||this.la===a.la)return h;return p};w.g(U,"adjusting",U.prototype.Yu);w.defineProperty(U,{Yu:"adjusting"},t("Uo"),function(a){var b=this.Uo;b!==a&&(u&&w.ib(a,U,U,"adjusting"),this.Uo=a,this.j("adjusting",b,a))});w.g(U,"corner",U.prototype.yC);
w.defineProperty(U,{yC:"corner"},t("ep"),function(a){var b=this.ep;b!==a&&(u&&w.k(a,"number",U,"corner"),this.ep=a,this.$f(),this.j("corner",b,a))});w.g(U,"curve",U.prototype.yf);w.defineProperty(U,{yf:"curve"},t("gp"),function(a){var b=this.gp;b!==a&&(u&&w.ib(a,U,U,"curve"),this.gp=a,this.Tb(),nm(this,b===ik||b===jk||a===ik||a===jk),this.j("curve",b,a))});w.g(U,"curviness",U.prototype.Yy);
w.defineProperty(U,{Yy:"curviness"},t("hp"),function(a){var b=this.hp;b!==a&&(u&&w.k(a,"number",U,"curviness"),this.hp=a,this.Tb(),this.j("curviness",b,a))});w.g(U,"routing",U.prototype.Gh);w.defineProperty(U,{Gh:"routing"},t("kn"),function(a){var b=this.kn;b!==a&&(u&&w.ib(a,U,U,"routing"),this.kn=a,this.Vh=n,this.Tb(),nm(this,b===gk||b===$f||a===gk||a===$f),this.j("routing",b,a))});w.g(U,"smoothness",U.prototype.Js);
w.defineProperty(U,{Js:"smoothness"},t("hr"),function(a){var b=this.hr;b!==a&&(u&&w.k(a,"number",U,"smoothness"),this.hr=a,this.$f(),this.j("smoothness",b,a))});
function hm(a){var b=a.Kf;if(b!==n){var c=a.Vf;if(c!==n){var d=a.ah,a=a.uh,e;a:{if(!(c===n||b.Xg===n))for(e=b.Xg.l;e.next();){var g=e.value;if(g.xo===b&&g.vs===c&&g.Rv===d&&g.Sv===a||g.xo===c&&g.vs===b&&g.Rv===a&&g.Sv===d){e=g;break a}}e=n}for(var i=g=n,j=b.ed.n,k=j.length,l=0;l<k;l++){var m=j[l];if(m.Kf===b&&m.ah===d&&m.Vf===c&&m.uh===a||m.Kf===c&&m.ah===a&&m.Vf===b&&m.uh===d)i===n?i=m:(g===n&&(g=new z(U),g.add(i)),g.add(m))}if(g!==n){e===n&&(e=new Ul,e.xo=b,e.Rv=d,e.vs=c,e.Sv=a,Tl(b,e),Tl(c,e));
e.links=g;for(l=0;l<g.count;l++)if(m=g.n[l],0===m.ze){b=1;for(c=0;c<g.count;c++)Math.abs(g.n[c].ze)===b&&(b++,c=-1);m.ml=e;m.ze=m.ga===e.xo?b:-b;m.Tb()}}}}}
function gm(a){var b=a.ml;if(b!==n){var c=a.ze;a.ml=n;a.ze=0;a.Tb();b.links.remove(a);if(2>b.links.count)1===b.links.count&&(c=b.links.n[0],c.ml=n,c.ze=0,c.Tb()),c=b.xo,b!==n&&c.Xg!==n&&c.Xg.remove(b),c=b.vs,b!==n&&c.Xg!==n&&c.Xg.remove(b);else{c=Math.abs(c);a=0===c%2;for(b=b.links.l;b.next();){var d=b.value,e=Math.abs(d.ze),g=0===e%2;e>c&&a===g&&(d.ze=0<d.ze?d.ze-2:d.ze+2,d.Tb())}}}}function Ul(){w.jc(this);this.links=this.Sv=this.vs=this.Rv=this.xo=n;this.spacing=10}
w.Pd(Ul,{xo:h,Rv:h,vs:h,Sv:h,links:h,spacing:h});function sm(){w.jc(this);this.group=n;this.hs=h;this.abort=p;this.Of=this.Nf=1;this.oq=this.nq=-1;this.Ed=this.Dd=8;this.Vb=n;this.XE=p;this.yE=22;this.xD=111}w.Pd(sm,{group:h,hs:h,abort:h,XE:h,yE:h,xD:h});var Gm=1,Hm=1,xm=999999999,Om=xm;
sm.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;this.Nf=Math.floor((a.x-this.Dd)/this.Dd)*this.Dd;this.Of=Math.floor((b-this.Ed)/this.Ed)*this.Ed;this.nq=Math.ceil((c+2*this.Dd)/this.Dd)*this.Dd;this.oq=Math.ceil((d+2*this.Ed)/this.Ed)*this.Ed;a=1+(Math.ceil((this.nq-this.Nf)/this.Dd)|0);b=1+(Math.ceil((this.oq-this.Of)/this.Ed)|0);if(this.Vb===n||this.zn<a-1||this.An<b-1){c=[];for(d=0;d<=a;d++){for(var e=[],g=0;g<=b;g++)e[g]=0;c[d]=e}this.Vb=
c;this.zn=a-1;this.An=b-1}if(this.Vb!==n)for(a=0;a<=this.zn;a++)for(b=0;b<=this.An;b++)this.Vb[a][b]=Om}};w.u(sm,{Fb:n},function(){return new G(this.Nf,this.Of,this.nq-this.Nf,this.oq-this.Of)});w.g(sm,"cellWidth",sm.prototype.Vl);w.defineProperty(sm,{Vl:n},t("Dd"),function(a){0<a&&a!==this.Dd&&(this.Dd=a,this.initialize(this.Fb))});w.g(sm,"cellHeight",sm.prototype.Ul);w.defineProperty(sm,{Ul:n},t("Ed"),function(a){0<a&&a!==this.Ed&&(this.Ed=a,this.initialize(this.Fb))});
function Pm(a,b,c){return a.Nf<=b&&b<=a.nq&&a.Of<=c&&c<=a.oq}function wm(a,b,c){if(!Pm(a,b,c))return 0;b-=a.Nf;b/=a.Dd;c-=a.Of;c/=a.Ed;return a.Vb[b|0][c|0]}function aj(a,b,c){Pm(a,b,c)&&(b-=a.Nf,b/=a.Dd,c-=a.Of,c/=a.Ed,a.Vb[b|0][c|0]=0)}function tm(a){if(a.Vb!==n)for(var b=0;b<=a.zn;b++)for(var c=0;c<=a.An;c++)a.Vb[b][c]>=Gm&&(a.Vb[b][c]|=xm)}
function um(a,b,c,d,e){if(b>a.nq||b+d<a.Nf||c>a.oq||c+e<a.Of)return h;var b=(b-a.Nf)/a.Dd|0,c=(c-a.Of)/a.Ed|0,d=Math.max(0,d)/a.Dd+1|0,g=Math.max(0,e)/a.Ed+1|0;0>b&&(d+=b,b=0);0>c&&(g+=c,c=0);if(0>d||0>g)return h;e=Math.min(b+d-1,a.zn)|0;for(d=Math.min(c+g-1,a.An)|0;b<=e;b++)for(g=c;g<=d;g++)if(0===a.Vb[b][g])return p;return h}
function Qm(a,b,c,d,e,g,i,j,k){if(!(b<g||b>i||c<j||c>k)){var l,m;l=b|0;m=c|0;var q=a.Vb[l][m];if(q>=Gm&&q<xm){e?m+=d:l+=d;for(q+=Hm;g<=l&&(l<=i&&j<=m&&m<=k)&&!(q>=a.Vb[l][m]);)a.Vb[l][m]=q,q+=Hm,e?m+=d:l+=d}l=e?m:l;if(e)if(0<d)for(c+=d;c<l;c+=d)Qm(a,b,c,1,!e,g,i,j,k),Qm(a,b,c,-1,!e,g,i,j,k);else for(c+=d;c>l;c+=d)Qm(a,b,c,1,!e,g,i,j,k),Qm(a,b,c,-1,!e,g,i,j,k);else if(0<d)for(b+=d;b<l;b+=d)Qm(a,b,c,1,!e,g,i,j,k),Qm(a,b,c,-1,!e,g,i,j,k);else for(b+=d;b>l;b+=d)Qm(a,b,c,1,!e,g,i,j,k),Qm(a,b,c,-1,!e,g,
i,j,k)}}function Rm(a,b,c,d,e,g,i,j,k,l,m){for(var q=b|0,r=c|0,s=a.Vb[q][r];0===s&&q>j&&q<k&&r>l&&r<m;)if(i?r+=g:q+=g,s=a.Vb[q][r],1>=Math.abs(q-d)&&1>=Math.abs(r-e))return a.abort=h,0;q=b|0;r=c|0;s=a.Vb[q][r];b=Gm;for(a.Vb[q][r]=b;0===s&&q>j&&q<k&&r>l&&r<m;)i?r+=g:q+=g,s=a.Vb[q][r],a.Vb[q][r]=b,b+=Hm;return i?r:q}
function vm(a,b,c,d,e,g){if(a.Vb!==n){a.abort=p;var i=b.x,j=b.y;if(Pm(a,i,j)){var i=i-a.Nf,i=i/a.Dd,j=j-a.Of,j=j/a.Ed,k=d.x,l=d.y;if(Pm(a,k,l))if(k-=a.Nf,k/=a.Dd,l-=a.Of,l/=a.Ed,1>=Math.abs(i-k)&&1>=Math.abs(j-l))a.abort=h;else{var m=g.x,b=g.y,d=g.x+g.width,q=g.y+g.height,m=m-a.Nf,m=m/a.Dd,b=b-a.Of,b=b/a.Ed,d=d-a.Nf,d=d/a.Dd,q=q-a.Of,q=q/a.Ed,g=Math.max(0,Math.min(a.zn,m|0)),d=Math.min(a.zn,Math.max(0,d|0)),b=Math.max(0,Math.min(a.An,b|0)),q=Math.min(a.An,Math.max(0,q|0)),i=i|0,j=j|0,k=k|0,l=l|0,
m=i,r=j,s=0===c||90===c?1:-1;(c=90===c||270===c)?r=Rm(a,i,j,k,l,s,c,g,d,b,q):m=Rm(a,i,j,k,l,s,c,g,d,b,q);if(!a.abort){a:{for(var c=0===e||90===e?1:-1,e=90===e||270===e,s=k|0,v=l|0,y=a.Vb[s][v];0===y&&s>g&&s<d&&v>b&&v<q;)if(e?v+=c:s+=c,y=a.Vb[s][v],1>=Math.abs(s-i)&&1>=Math.abs(v-j)){a.abort=h;break a}s=k|0;v=l|0;y=a.Vb[s][v];for(a.Vb[s][v]=Om;0===y&&s>g&&s<d&&v>b&&v<q;)e?v+=c:s+=c,y=a.Vb[s][v],a.Vb[s][v]=Om}a.abort||(Qm(a,m,r,1,p,g,d,b,q),Qm(a,m,r,-1,p,g,d,b,q),Qm(a,m,r,1,h,g,d,b,q),Qm(a,m,r,-1,h,
g,d,b,q))}}}}}function Bm(){w.jc(this);this.fg=this.port=this.Ug=n;this.us=p}w.Pd(Bm,{Ug:h,port:h,fg:h,us:h});Bm.prototype.toString=function(){for(var a=this.fg,b=this.Ug.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];d!==n&&(b+="\n  "+d.toString())}return b};
function Sm(a,b,c,d){b=b.offsetY;switch(b){case w.bd:return 90;case w.Sc:return 180;case w.nd:return 270;case w.cd:return 0}switch(b){case w.bd|w.nd:return 180<c?270:90;case w.Sc|w.cd:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case w.Sc|w.nd:return c>a&&c<=180+a?180:270;case w.nd|w.cd:return c>180-a&&c<=360-a?270:0;case w.cd|w.bd:return c>a&&c<=180+a?90:0;case w.bd|w.Sc:return c>180-a&&c<=360-a?180:90;case w.Sc|w.nd|w.cd:return 90<c&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case w.nd|w.cd|w.bd:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case w.cd|w.bd|w.Sc:return c>a&&c<=180-a?90:c>180-a&&270>=c?180:0;case w.bd|w.Sc|w.nd:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&b!==(w.Sc|w.nd|w.cd|w.bd)&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function Cm(a,b){var c=a.fg;if(c===n){if(!a.us){c=a.us;a.us=h;var d=a.Ug.ve;a.fg=[];for(var e=0,g=new G(a.port.Ab(Jb),a.port.Ab(Rb)),d=d.l;d.next();){var i=d.value;if(i.mb()){var j=Gb,j=i.Pc===a.port?om(i,a.port):pm(i,a.port);if(ub(j)){var k;k=i.Pc===a.port?i.Cd:i.Pc;if(k!==n&&k.ca!==n){var l=k.Ab(Ob);k=k.Ld;k=k!==n?Cm(k,i):n;k!==n&&(l=k.qo);k=g.cv.Bi(l);var j=Sm(g,j,k,i.fc),m;0===j?(m=w.cd,180<k&&(k-=360)):m=90===j?w.bd:180===j?w.Sc:w.nd;(j=a.fg[e])?(j.link=i,j.angle=k,j.fe=m):(j=new Tm(i,k,m),a.fg[e]=
j);j.Qv.set(l);e++}}}}a.fg.sort(Bm.prototype.uH);g=a.fg.length;d=-1;for(e=i=0;e<g;e++)j=a.fg[e],j!==n&&(j.fe!==d&&(d=j.fe,i=0),j.hm=i,i++);d=-1;i=0;for(e=g-1;0<=e;e--)j=a.fg[e],j!==n&&(j.fe!==d&&(d=j.fe,i=j.hm+1),j.Nr=i);e=a.fg;for(g=0;g<e.length;g++)if(d=e[g],d!==n){l=d;j=a.port;i=d=f;switch(l.fe){case w.bd:d=j.Ab(Rb);i=j.Ab(Pb);break;case w.Sc:d=j.Ab(Pb);i=j.Ab(Jb);break;case w.nd:d=j.Ab(Jb);i=j.Ab(Lb);break;default:case w.cd:d=j.Ab(Lb),i=j.Ab(Rb)}j=i.y-d.y;k=(l.hm+1)/(l.Nr+1);l=l.qo;l.x=d.x+(i.x-
d.x)*k;l.y=d.y+j*k}e=a.fg;for(g=0;g<e.length;g++)if(i=e[g],i!==n){d=i;k=i;m=k.link;i=m.getEndSegmentLength(a.Ug,a.port,Gb,m.Pc===a.port);l=k.hm;if(!(0>l)&&(j=k.Nr,!(1>=j)&&m.fc)){m=k.Qv;var q=k.qo;if(k.fe===w.Sc||k.fe===w.bd)l=j-1-l;i=((k=k.fe===w.Sc||k.fe===w.cd)?m.y<q.y:m.x<q.x)?i+8*l:(k?m.y===q.y:m.x===q.x)?i:i+8*(j-1-l)}d.sv=i}a.us=c}c=a.fg}for(e=0;e<c.length;e++)if(g=c[e],g!==n&&g.link===b)return g;return n}
Bm.prototype.uH=function(a,b){return a===b?0:a===n?-1:b===n?1:a.fe<b.fe?-1:a.fe>b.fe?1:a.angle<b.angle?-1:a.angle>b.angle?1:0};function Tm(a,b,c){this.link=a;this.angle=b;this.fe=c;this.Qv=new F;this.hm=this.Nr=this.hm=0;this.qo=new F;this.sv=0}w.Pd(Tm,{link:h,angle:h,fe:h,Qv:h,hm:h,Nr:h,qo:h,sv:h});
Tm.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.fe.toString()+":"+this.hm.toString()+"/"+this.Nr.toString()+" "+this.qo.toString()+" "+this.sv.toString()+" "+this.Qv.toString()};function vf(a){0===arguments.length?T.call(this,jh):T.call(this,a);this.qq=new ma(S);this.en=new ma(vf);this.yk=this.rq=this.pq=n;this.xr=p;this.Vp=h;this.zr=p;this.pb=this.nr=n;this.bp=p;this.rd=new ci;this.rd.group=this}w.Q("Group",vf);w.Ea(vf,T);da=vf.prototype;
da.xb=function(a){T.prototype.xb.call(this,a);a.pq=this.pq;a.rq=this.rq;a.yk=this.yk;a.xr=this.xr;a.Vp=this.Vp;a.zr=this.zr;a.nr=this.nr;var b=Wk(a,a,function(a){return a instanceof dh});a.pb=b instanceof dh?b:n;a.bp=this.bp;this.rd!==n?(a.rd=this.rd.copy(),a instanceof vf&&(a.rd.group=a)):(a.rd!==n&&(a.rd.group=n),a.rd=n)};
da.Ah=function(a){T.prototype.Ah.call(this,a);for(var b=a.xv(),a=a.Gc;a.next();){var c=a.value;c.R();c.F(Tj);c.yh();c instanceof vf&&(c.lw=c.Te,Um(c,b));if(c instanceof T)c.Qg(b);else if(c instanceof U)for(c=c.Jj;c.next();)c.value.Qg(b)}};
da.nm=function(a,b,c,d,e,g,i){if(a===ie&&"elements"===b)if(e instanceof dh)this.pb===n?this.pb=e:this.pb!==e&&w.m("Cannot insert a second Placeholder into the visual tree of a Group.");else{if(e instanceof x){var j=Wk(e,e,function(a){return a instanceof dh});j instanceof dh&&(this.pb===n?this.pb=j:this.pb!==j&&w.m("Cannot insert a second Placeholder into the visual tree of a Group."))}}else a===je&&"elements"===b&&(d===this.pb?this.pb=n:d instanceof x&&this.pb.Ki(d)&&(this.pb=n));T.prototype.nm.call(this,
a,b,c,d,e,g,i)};da.yj=function(a,b,c,d){this.hj=this.pb;x.prototype.yj.call(this,a,b,c,d);this.pb!==n&&(a=this.pb.ln,this.location=new F(a.x,a.y))};da.Xk=function(){if(!T.prototype.Xk.call(this))return p;for(var a=this.Gc;a.next();){var b=a.value;if(b instanceof T){if(b.mb()&&b.Kc)return p}else if(b instanceof U&&b.mb()&&b.Kc&&b.ga!==this&&b.la!==this)return p}return h};w.u(vf,{placeholder:"placeholder"},t("pb"));w.g(vf,"computesBoundsAfterDrag",vf.prototype.Wy);
w.defineProperty(vf,{Wy:"computesBoundsAfterDrag"},t("bp"),function(a){var b=this.bp;b!==a&&(w.k(a,"boolean",vf,"computesBoundsAfterDrag"),this.bp=a,this.j("computesBoundsAfterDrag",b,a))});w.u(vf,{Gc:"memberParts"},function(){return this.qq.l});function Nl(a,b){if(a.qq.add(b)){b instanceof vf&&a.en.add(b);var c=a.HD;if(c!==n){var d=h,e=a.h;e!==n&&(d=e.La,e.La=h);c(a,b);e!==n&&(e.La=d)}}c=a.pb;c===n&&(c=a);c.R()}
function Ml(a,b){if(a.qq.remove(b)){b instanceof vf&&a.en.remove(b);var c=a.JD;if(c!==n){var d=h,e=a.h;e!==n&&(d=e.La,e.La=h);c(a,b);e!==n&&(e.La=d)}}c=a.pb;c===n&&(c=a);c.R()}vf.prototype.$l=function(){if(0<this.qq.count){var a=this.h;if(a===n)return;for(var b=this.qq.copy().l;b.next();)a.remove(b.value)}T.prototype.$l.call(this)};vf.prototype.fw=function(){var a=this.Oa;a!==n&&a.fw(this)};w.g(vf,"layout",vf.prototype.Pb);
w.defineProperty(vf,{Pb:"layout"},t("rd"),function(a){var b=this.rd;b!==a&&(a!==n&&w.i(a,ci,vf,"layout"),b!==n&&(b.h=n,b.group=n),this.rd=a,a!==n&&(a.h=this.h,a.group=this),this.j("layout",b,a))});w.g(vf,"memberAdded",vf.prototype.HD);w.defineProperty(vf,{HD:"memberAdded"},t("pq"),function(a){var b=this.pq;b!==a&&(a!==n&&w.k(a,"function",vf,"memberAdded"),this.pq=a,this.j("memberAdded",b,a))});w.g(vf,"memberRemoved",vf.prototype.JD);
w.defineProperty(vf,{JD:"memberRemoved"},t("rq"),function(a){var b=this.rq;b!==a&&(a!==n&&w.k(a,"function",vf,"memberRemoved"),this.rq=a,this.j("memberRemoved",b,a))});w.g(vf,"memberValidation",vf.prototype.ps);w.defineProperty(vf,{ps:"memberValidation"},t("yk"),function(a){var b=this.yk;b!==a&&(a!==n&&w.k(a,"function",vf,"memberValidation"),this.yk=a,this.j("memberValidation",b,a))});
vf.prototype.canAddMembers=vf.prototype.KI=function(a){var b=this.h;if(b===n)return p;b=b.Yf;for(a=b.findUnnestedNodes(a).l;a.next();)if(!b.isValidMember(this,a.value))return p;return h};vf.prototype.addMembers=vf.prototype.FI=function(a,b){var c=this.h;if(c===n)return p;for(var c=c.Yf,d=h,e=c.findUnnestedNodes(a).l;e.next();){var g=e.value;!b||c.isValidMember(this,g)?g.cb=this:d=p}return d};w.g(vf,"ungroupable",vf.prototype.TE);
w.defineProperty(vf,{TE:"ungroupable"},t("xr"),function(a){var b=this.xr;b!==a&&(w.k(a,"boolean",vf,"ungroupable"),this.xr=a,this.j("ungroupable",b,a))});vf.prototype.canUngroup=vf.prototype.mJ=function(){if(!this.TE)return p;var a=this.Oa;if(a!==n&&!a.On)return p;a=a.h;return a!==n&&!a.On?p:h};vf.prototype.findSubGraphParts=vf.prototype.xv=function(){var a=new ma(S);nf(a,this,h,p);a.remove(this);return a};
vf.prototype.collapseSubGraph=vf.prototype.ev=function(){var a=this.h;if(a!==n&&!a.ag){a.ag=h;var b=this.xv();Um(this,b);a.ag=p}};function Um(a,b){a.Te=p;for(var c=a.Gc;c.next();){var d=c.value;d.R();d.F(Tj);d.yh();d instanceof vf&&(d.lw=d.Te,Um(d,b));if(d instanceof T)d.Qg(b);else if(d instanceof U)for(d=d.Jj;d.next();)d.value.Qg(b)}}vf.prototype.expandSubGraph=vf.prototype.tv=function(){var a=this.h;if(a!==n&&!a.ag){a.ag=h;var b=this.xv();Vm(this,b);a.ag=p}};
function Vm(a,b){a.Te=h;for(var c=a.Gc;c.next();){var d=c.value;d.R();d.F(Sj);d.Qi();d instanceof vf&&d.lw&&Vm(d,b);if(d instanceof T)d.Qg(b);else if(d instanceof U)for(d=d.Jj;d.next();)d.value.Qg(b)}}w.g(vf,"isSubGraphExpanded",vf.prototype.Te);
w.defineProperty(vf,{Te:"isSubGraphExpanded"},t("Vp"),function(a){var b=this.Vp;if(b!==a){w.k(a,"boolean",vf,"isSubGraphExpanded");this.Vp=a;var c=this.h;c!==n&&Nh(c);this.j("isSubGraphExpanded",b,a);b=this.FE;if(b!==n){var d=h;c!==n&&(d=c.La,c.La=h);b(this);c!==n&&(c.La=d)}c!==n&&c.sa.tb||(a?this.tv():this.ev())}});w.g(vf,"wasSubGraphExpanded",vf.prototype.lw);
w.defineProperty(vf,{lw:"wasSubGraphExpanded"},t("zr"),function(a){var b=this.zr;b!==a&&(w.k(a,"boolean",vf,"wasSubGraphExpanded"),this.zr=a,this.j("wasSubGraphExpanded",b,a))});w.g(vf,"subGraphExpandedChanged",vf.prototype.FE);w.defineProperty(vf,{FE:"subGraphExpandedChanged"},t("nr"),function(a){var b=this.nr;b!==a&&(a!==n&&w.k(a,"function",vf,"subGraphExpandedChanged"),this.nr=a,this.j("subGraphExpandedChanged",b,a))});
vf.prototype.move=vf.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;T.prototype.move.call(this,a);for(a=this.xv().l;a.next();){var d=a.value,e=d.position;T.prototype.move.call(d,new F(e.x+c,e.y+b))}};function dh(){P.call(this);this.ie=(new hb(0)).freeze();this.ln=new G(NaN,NaN,NaN,NaN)}w.Q("Placeholder",dh);w.Ea(dh,P);dh.prototype.xb=function(a){P.prototype.xb.call(this,a);a.ie=this.ie.O();a.ln=this.ln.copy()};
dh.prototype.zj=function(a){if(this.background===n&&this.Lk===n)return p;var b=this.Sa;return jb(0,0,b.width,b.height,a.x,a.y)};
dh.prototype.os=function(){var a=this.ca;(a===n||!(a instanceof vf)&&!(a instanceof of))&&w.m("Placeholder is not inside a Group or Adornment.");if(a instanceof vf){var b;a:{b=this.ca;if(b instanceof vf&&b.Wy&&this.ln.P()){var c=b.h;if(c!==n&&(c=c.Fa,c instanceof Ff&&!c.sp&&c.dc!==n&&!c.dc.contains(b))){b=this.ln;break a}}b=this.ca;if(b instanceof vf){for(var d=c=Infinity,e=-Infinity,g=-Infinity,i=b.Gc;i.next();){var j=i.value;if(j.mb()){if(j instanceof U){if(j.$b)continue;if(j.ga===b||j.la===b)continue}j=
j.wa;j.left<c&&(c=j.left);j.top<d&&(d=j.top);j.right>e&&(e=j.right);j.bottom>g&&(g=j.bottom)}}!isFinite(c)||!isFinite(d)?(b=b.location,c=this.padding,b=new G(b.x+c.left,b.y+c.top,0,0)):b=new G(c,d,e-c,g-d)}else b=new G;c=this.padding;b=new G(b.x-c.left,b.y-c.top,b.width+c.left+c.right,b.height+c.top+c.bottom)}this.ln=b;c=this.Lc;db(c,b.width||0,b.height||0);mj(this,0,0,c.width,c.height);c=a.Gc;for(d=p;c.next();)if(c.value.mb()){d=h;break}d&&(!isNaN(b.x)&&!isNaN(b.y))&&(a.location=new F(b.x,b.y))}else b=
this.xa,c=this.Lc,a=this.padding,db(c,b.width+(a.left+a.right)||0,b.height+(a.top+a.bottom)||0),mj(this,-a.left,-a.top,c.width,c.height)};dh.prototype.yj=function(a,b,c,d){var e=this.wa;e.x=a;e.y=b;e.width=c;e.height=d};w.g(dh,"padding",dh.prototype.padding);w.defineProperty(dh,{padding:"padding"},t("ie"),function(a){"number"===typeof a?a=new hb(a):w.i(a,hb,x,"padding");var b=this.ie;b.I(a)||(this.ie=a=a.O(),this.j("padding",b,a))});
function ci(){w.jc(this);this.tx=this.ba=n;this.Nt=this.Sp=h;this.Zp=this.Yp=p;this.Wo=(new F(0,0)).freeze();this.zx=h;this.B=n}w.Q("Layout",ci);ci.prototype.cloneProtected=ci.prototype.xb=function(a){a.Sp=this.Sp;a.Nt=this.Nt;a.Zp=this.Zp;a.Wo=this.Wo.O()};ci.prototype.copy=ci.prototype.copy=function(){var a=new this.constructor;this.xb(a);return a};
ci.prototype.toString=function(){var a=w.Uk(Object.getPrototypeOf(this)),a=a+"(";this.group!==n&&(a+=" in "+this.group);this.h!==n&&(a+=" for "+this.h);return a+")"};w.g(ci,"diagram",ci.prototype.h);w.defineProperty(ci,{h:"diagram"},t("ba"),function(a){this.ba!==a&&(a!==n&&w.i(a,A,ci,"diagram"),this.ba=a)});w.g(ci,"group",ci.prototype.group);w.defineProperty(ci,{group:"group"},t("tx"),function(a){this.tx!==a&&(a!==n&&w.i(a,vf,ci,"group"),this.tx=a)});w.g(ci,"isOngoing",ci.prototype.uD);
w.defineProperty(ci,{uD:"isOngoing"},t("Sp"),function(a){this.Sp!==a&&(w.k(a,"boolean",ci,"isOngoing"),this.Sp=a)});w.g(ci,"isInitial",ci.prototype.tD);w.defineProperty(ci,{tD:"isInitial"},t("Nt"),function(a){w.k(a,"boolean",ci,"isInitial");this.Nt=a;a||(this.Yp=h)});w.g(ci,"isValidLayout",ci.prototype.Ue);w.defineProperty(ci,{Ue:"isValidLayout"},t("Yp"),function(a){this.Yp!==a&&(this.Yp=a,a||(a=this.h,a!==n&&(a.ct=h)))});
ci.prototype.invalidateLayout=ci.prototype.F=function(){if(this.Yp){var a=this.h;if(a!==n&&!a.sa.tb&&(this.uD&&a.Bg||this.tD&&!a.Bg))this.Ue=p,a.yn=h,a.yb(h)}};w.g(ci,"isViewportSized",ci.prototype.ms);w.defineProperty(ci,{ms:"isViewportSized"},t("Zp"),function(a){this.Zp!==a&&(this.Zp=a)&&this.F()});w.g(ci,"isRouting",ci.prototype.ks);w.defineProperty(ci,{ks:"isRouting"},t("zx"),function(a){this.zx!==a&&(w.k(a,"boolean",ci,"isRouting"),this.zx=a)});w.g(ci,"network",ci.prototype.Qc);
w.defineProperty(ci,{Qc:"network"},t("B"),function(a){var b=this.B;b!==a&&(a!==n&&w.i(a,Wm,ci,"network"),b!==n&&Xm(b,n),this.B=a,a!==n&&Xm(a,this))});ci.prototype.createNetwork=ci.prototype.nv=function(){var a=new Wm;Xm(a,this);return a};ci.prototype.makeNetwork=ci.prototype.mH=function(a){var b=this.createNetwork();a instanceof A?(b.Fr(a.bl,h),b.Fr(a.links,h)):a instanceof vf?b.Fr(a.Gc):b.Fr(a.l);return b};
ci.prototype.updateParts=ci.prototype.xM=function(){var a=this.h;if(a===n&&this.B!==n)for(var b=this.B.ka.l;b.next();){var c=b.value.fb;if(c!==n&&(a=c.h,a!==n))break}this.Ue=h;a!==n&&a.hc("Layout");this.commitLayout();a!==n&&a.ne("Layout")};ci.prototype.commitLayout=ci.prototype.iv=aa();
ci.prototype.doLayout=ci.prototype.Pr=function(a){a===n&&w.m("Layout.doLayout(collection) argument must not be null");var b=new ma(S);a===this.h?(Ym(this,b,a.bl,h,this.Gz,h,p,h),Ym(this,b,a.cl,h,this.Gz,h,p,h)):a===this.group?Ym(this,b,a.Gc,p,this.Gz,h,p,h):b.Le(a.l);var c=b.count;if(0<c){a=this.h;a!==n&&a.hc("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.kd.x,e=d,g=this.kd.y,i=0,j=0,b=b.l;b.next();){var k=b.value;k.Ei();var l=k.ya,m=l.width,l=l.height;k.move(new F(e,g));delete k.rB;e+=Math.max(m,
50)+20;j=Math.max(j,Math.max(l,50));i>=c-1?(i=0,e=d,g+=j+20,j=0):i++}a!==n&&a.ne("Layout")}this.Ue=h};ci.prototype.Gz=function(a){return!a.location.P()||a instanceof vf&&a.rB?h:p};function Ym(a,b,c,d,e,g,i,j){for(c=c.l;c.next();){var k=c.value;if(!d||k.ls)if(!e||e(k))k.Jr()&&(g&&k instanceof T?k.Li||(k instanceof vf&&k.Pb===n?Ym(a,b,k.Gc,p,e,g,i,j):b.add(k)):i&&k instanceof U?b.add(k):j&&(k.be()&&!(k instanceof T))&&b.add(k))}}w.g(ci,"arrangementOrigin",ci.prototype.kd);
w.defineProperty(ci,{kd:"arrangementOrigin"},t("Wo"),function(a){this.Wo.I(a)||(u&&w.i(a,F,ci,"arrangementOrigin"),this.Wo.Ua(a),this.F())});function Zm(a,b){var c=a.group;if(c!==n){var d=c.location;if(isNaN(d.x)||isNaN(d.y))return b;var e=c.placeholder;e!==n?(d=e.Ab(Jb),d.x+=e.padding.left,d.y+=e.padding.top):d=c.position.copy();return d}return b}function Wm(){w.jc(this);this.rd=n;this.clear()}w.Q("LayoutNetwork",Wm);
Wm.prototype.clear=function(){if(this.yr)for(var a=this.yr.l;a.next();){var b=a.value;b.clear();b.B=n}if(this.up)for(a=this.up.l;a.next();)b=a.value,b.clear(),b.B=n;this.yr=new ma($m);this.up=new ma(an);this.Lx=new ka(T,$m);this.Ex=new ka(U,an)};Wm.prototype.toString=function(){return"LayoutNetwork"+(this.Pb!==n?"("+this.Pb.toString()+")":"")};w.u(Wm,{Pb:"layout"},t("rd"));function Xm(a,b){u&&b!==n&&w.i(b,ci,Wm,"setLayout");a.rd=b}w.u(Wm,{ka:"vertexes"},t("yr"));w.u(Wm,{mc:"edges"},t("up"));
Wm.prototype.createVertex=Wm.prototype.Bj=function(){return new $m};Wm.prototype.createEdge=Wm.prototype.Un=function(){return new an};
Wm.prototype.addParts=Wm.prototype.Fr=function(a,b){if(a!==n){b===f&&(b=p);w.k(b,"boolean",Wm,"addParts:toplevelonly");for(var c=a.l;c.next();){var d=c.value;if(d instanceof T&&(!b||d.ls)&&d.Jr()&&!d.Li)if(d instanceof vf&&d.Pb===n)this.Fr(d.Gc,p);else if(this.Re(d)===n){var e=this.Bj();e.Ug=d;this.Hk(e)}}for(c.reset();c.next();)if(d=c.value,d instanceof U&&(!b||d.ls)&&d.Jr()&&this.vv(d)===n){var g=d.ga,e=d.la;g!==e&&(g=this.wv(g),e=this.wv(e),g!==n&&e!==n&&this.km(g,e,d))}}};
Wm.prototype.findGroupVertex=Wm.prototype.wv=function(a){if(a===n)return n;a=Il(a);if(a===n)return n;var b=this.Re(a);if(b!==n)return b;a=a.cb;return a!==n&&(b=this.Re(a),b!==n)?b:n};Wm.prototype.addVertex=Wm.prototype.Hk=function(a){if(a!==n){u&&w.i(a,$m,Wm,"addVertex:vertex");this.yr.add(a);var b=a.fb;b!==n&&this.Lx.add(b,a);a.B=this}};Wm.prototype.addNode=Wm.prototype.Gn=function(a){if(a===n)return n;u&&w.i(a,T,Wm,"addNode:node");var b=this.Re(a);b===n&&(b=this.Bj(),b.Ug=a,this.Hk(b));return b};
Wm.prototype.deleteVertex=Wm.prototype.KC=function(a){if(a!==n&&(u&&w.i(a,$m,Wm,"deleteVertex:vertex"),bn(this,a))){for(var b=a.Tf,c=b.count-1;0<=c;c--){var d=b.oa(c);this.Wn(d)}b=a.df;for(c=b.count-1;0<=c;c--)d=b.oa(c),this.Wn(d)}};function bn(a,b){if(b===n)return p;var c=a.yr.remove(b);c&&(a.Lx.remove(b.fb),b.B=n);return c}Wm.prototype.deleteNode=Wm.prototype.QJ=function(a){a!==n&&(u&&w.i(a,T,Wm,"deleteNode:node"),a=this.Re(a),a!==n&&this.KC(a))};
Wm.prototype.findVertex=Wm.prototype.Re=function(a){if(a===n)return n;u&&w.i(a,T,Wm,"findVertex:node");return this.Lx.qa(a)};Wm.prototype.addEdge=Wm.prototype.En=function(a){if(a!==n){u&&w.i(a,an,Wm,"addEdge:edge");this.up.add(a);var b=a.Ra;b!==n&&this.vv(b)===n&&this.Ex.add(b,a);b=a.S;b!==n&&b.aC(a);b=a.W;b!==n&&b.XB(a);a.B=this}};
Wm.prototype.addLink=Wm.prototype.EI=function(a){if(a===n)return n;u&&w.i(a,U,Wm,"addLink:link");var b=a.ga,c=a.la,d=this.vv(a);d===n?(d=this.Un(),d.Ra=a,b!==n&&(d.W=this.Gn(b)),c!==n&&(d.S=this.Gn(c)),this.En(d)):(d.W=b!==n?this.Gn(b):n,d.S=c!==n?this.Gn(c):n);return d};Wm.prototype.deleteEdge=Wm.prototype.Wn=function(a){if(a!==n){u&&w.i(a,an,Wm,"deleteEdge:edge");var b=a.S;b!==n&&b.JC(a);b=a.W;b!==n&&b.IC(a);cn(this,a)}};function cn(a,b){b!==n&&a.up.remove(b)&&(a.Ex.remove(b.Ra),b.B=n)}
Wm.prototype.deleteLink=Wm.prototype.PJ=function(a){a!==n&&(u&&w.i(a,U,Wm,"deleteLink:link"),a=this.vv(a),a!==n&&this.Wn(a))};Wm.prototype.findEdge=Wm.prototype.vv=function(a){if(a===n)return n;u&&w.i(a,U,Wm,"findEdge:link");return this.Ex.qa(a)};
Wm.prototype.linkVertexes=Wm.prototype.km=function(a,b,c){if(a===n||b===n)return n;u&&(w.i(a,$m,Wm,"linkVertexes:fromVertex"),w.i(b,$m,Wm,"linkVertexes:toVertex"),c!==n&&w.i(c,U,Wm,"linkVertexes:link"));if(a.B===this&&b.B===this){var d=this.Un();d.Ra=c;d.W=a;d.S=b;this.En(d);return d}return n};Wm.prototype.reverseEdge=Wm.prototype.Wv=function(a){if(a!==n){u&&w.i(a,an,Wm,"reverseEdge:edge");var b=a.W,c=a.S;b===n||c===n||(b.IC(a),c.JC(a),a.Wv(),b.aC(a),c.XB(a))}};
Wm.prototype.deleteSelfEdges=Wm.prototype.qv=function(){for(var a=[],b=this.mc.l;b.next();){var c=b.value;c.W===c.S&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.Wn(a[c])};Wm.prototype.deleteArtificialVertexes=Wm.prototype.qG=function(){for(var a=[],b=this.ka.l;b.next();){var c=b.value;c.fb===n&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.KC(a[b]);a=[];for(b=this.mc.l;b.next();)c=b.value,c.Ra===n&&a.push(c);c=a.length;for(b=0;b<c;b++)this.Wn(a[b])};
Wm.prototype.splitIntoSubNetworks=Wm.prototype.cI=function(){this.qG();for(var a=[],b=this.mc.l;b.next();){var c=b.value;(c.W===n||c.S===n)&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.Wn(a[c]);this.qv();a=new z(Wm);for(c=h;c;)for(var c=p,d=this.ka.l;d.next();)if(b=d.value,0<b.Tf.count||0<b.df.count){c=this.Pb.createNetwork();a.add(c);dn(this,c,b);c=h;break}a.sort(function(a,b){return a===n||b===n||a===b?0:b.ka.count-a.ka.count});return a};
function dn(a,b,c){if(c!==n&&c.B!==b){bn(a,c);b.Hk(c);for(var d=c.Hb;d.next();){var e=d.value;e.B!==b&&(cn(a,e),b.En(e),dn(a,b,e.W))}for(d=c.Gb;d.next();)e=d.value,e.B!==b&&(cn(a,e),b.En(e),dn(a,b,e.S))}}Wm.prototype.getParts=Wm.prototype.findAllParts=Wm.prototype.sK=function(){for(var a=new ma(S),b=this.ka.l;b.next();)a.add(b.value.fb);for(b=this.mc.l;b.next();)a.add(b.value.Ra);return a};
function $m(){w.jc(this);this.B=n;this.L=(new G(0,0,10,10)).freeze();this.K=(new F(5,5)).freeze();this.clear()}w.Q("LayoutVertex",$m);$m.prototype.clear=function(){this.fb=n;this.Tf=new z(an);this.df=new z(an)};$m.prototype.toString=function(){return"LayoutVertex#"+w.ec(this)+(this.fb!==n?"("+this.fb.toString()+")":"")};w.g($m,"network",$m.prototype.Qc);w.defineProperty($m,{Qc:"network"},t("B"),function(a){this.B!==a&&(a!==n&&w.i(a,Wm,$m,"network"),this.B=a)});w.g($m,"node",$m.prototype.Ug);
w.defineProperty($m,{Ug:"node"},t("fb"),function(a){if(this.fb!==a){u&&a!==n&&w.i(a,T,$m,"node");this.fb=a;a.Ei();var b=a.wa,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0);isNaN(d)&&(d=0);this.L.U(c,d,e,b);c=a.Xb;c!==a&&!(a instanceof vf)?(a=c.wa,this.K.U(a.x+a.width/2,a.y+a.height/2)):this.K.U(e/2,b/2)}});w.g($m,"bounds",$m.prototype.Fb);w.defineProperty($m,{Fb:"bounds"},t("L"),function(a){this.L.I(a)||(u&&w.i(a,G,$m,"bounds"),this.L.Ua(a))});w.g($m,"focus",$m.prototype.focus);
w.defineProperty($m,{focus:"focus"},t("K"),function(a){this.K.I(a)||(u&&w.i(a,F,$m,"focus"),this.K.Ua(a))});w.g($m,"centerX",$m.prototype.pa);w.defineProperty($m,{pa:"centerX"},function(){return this.L.x+this.K.x},function(a){var b=this.L;b.x+this.K.x!==a&&(u&&w.o(a,$m,"centerX"),b.Ia(),b.x=a-this.K.x,b.freeze())});w.g($m,"centerY",$m.prototype.ta);
w.defineProperty($m,{ta:"centerY"},function(){return this.L.y+this.K.y},function(a){var b=this.L;b.y+this.K.y!==a&&(u&&w.o(a,$m,"centerY"),b.Ia(),b.y=a-this.K.y,b.freeze())});w.g($m,"focusX",$m.prototype.BG);w.defineProperty($m,{BG:"focusX"},function(){return this.K.x},function(a){var b=this.K;b.x!==a&&(b.Ia(),b.x=a,b.freeze())});w.g($m,"focusY",$m.prototype.CG);w.defineProperty($m,{CG:"focusY"},function(){return this.K.y},function(a){var b=this.K;b.y!==a&&(b.Ia(),b.y=a,b.freeze())});w.g($m,"x",$m.prototype.x);
w.defineProperty($m,{x:"x"},function(){return this.L.x},function(a){var b=this.L;b.x!==a&&(b.Ia(),b.x=a,b.freeze())});w.g($m,"y",$m.prototype.y);w.defineProperty($m,{y:"y"},function(){return this.L.y},function(a){var b=this.L;b.y!==a&&(b.Ia(),b.y=a,b.freeze())});w.g($m,"width",$m.prototype.width);w.defineProperty($m,{width:"width"},function(){return this.L.width},function(a){var b=this.L;b.width!==a&&(b.Ia(),b.width=a,b.freeze())});w.g($m,"height",$m.prototype.height);
w.defineProperty($m,{height:"height"},function(){return this.L.height},function(a){var b=this.L;b.height!==a&&(b.Ia(),b.height=a,b.freeze())});$m.prototype.commit=$m.prototype.hv=function(){var a=this.fb;a!==n&&a.move(this.Fb.position)};$m.prototype.addSourceEdge=$m.prototype.aC=function(a){a!==n&&(u&&w.i(a,an,$m,"addSourceEdge:edge"),this.Tf.contains(a)||this.Tf.add(a))};$m.prototype.deleteSourceEdge=$m.prototype.JC=function(a){a!==n&&(u&&w.i(a,an,$m,"deleteSourceEdge:edge"),this.Tf.remove(a))};
$m.prototype.addDestinationEdge=$m.prototype.XB=function(a){a!==n&&(u&&w.i(a,an,$m,"addDestinationEdge:edge"),this.df.contains(a)||this.df.add(a))};$m.prototype.deleteDestinationEdge=$m.prototype.IC=function(a){a!==n&&(u&&w.i(a,an,$m,"deleteDestinationEdge:edge"),this.df.remove(a))};w.u($m,{bI:"sourceVertexes"},function(){for(var a=new ma($m),b=this.Hb;b.next();){var c=b.value.W;c!==n&&!a.contains(c)&&a.add(c)}return a.l});
w.u($m,{sG:"destinationVertexes"},function(){for(var a=new ma($m),b=this.Gb;b.next();){var c=b.value.S;c!==n&&!a.contains(c)&&a.add(c)}return a.l});w.u($m,{ka:"vertexes"},function(){for(var a=new ma($m),b=this.Hb;b.next();){var c=b.value,c=c.W;c!==n&&!a.contains(c)&&a.add(c)}for(b=this.Gb;b.next();)c=b.value,c=c.S,c!==n&&!a.contains(c)&&a.add(c);return a.l});w.u($m,{Hb:"sourceEdges"},function(){return this.Tf.l});w.u($m,{Gb:"destinationEdges"},function(){return this.df.l});
w.u($m,{mc:"edges"},function(){for(var a=new z(an),b=this.Hb;b.next();){var c=b.value;a.add(c)}for(b=this.Gb;b.next();)c=b.value,a.add(c);return a.l});w.u($m,{yG:"edgesCount"},function(){return this.Tf.count+this.df.count});var en;$m.standardComparer=en=function(a,b){u&&w.i(a,$m,$m,"standardComparer:m");u&&w.i(b,$m,$m,"standardComparer:n");var c=a.fb,d=b.fb;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:d!==n?-1:0};
$m.smartComparer=function(a,b){u&&w.i(a,$m,$m,"smartComparer:m");u&&w.i(b,$m,$m,"smartComparer:n");if(a!==n){if(b!==n){var c=a.fb,d=b.fb;if(c!==n){if(d!==n){var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;
else{if(isNaN(i))return-1;if(0!==g-i)return g-i}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return d!==n?-1:0}return 1}return b!==n?-1:0};function an(){w.jc(this);this.B=n;this.clear()}w.Q("LayoutEdge",an);an.prototype.clear=function(){this.S=this.W=this.Ra=n};an.prototype.toString=function(){return"LayoutEdge#"+w.ec(this)+(this.Ra!==n?"("+this.Ra.toString()+")":"")};w.g(an,"network",an.prototype.Qc);
w.defineProperty(an,{Qc:"network"},t("B"),function(a){this.B!==a&&(u&&a!==n&&w.i(a,Wm,an,"network"),this.B=a)});w.g(an,"link",an.prototype.link);w.defineProperty(an,{link:"link"},t("Ra"),function(a){this.Ra!==a&&(u&&a!==n&&w.i(a,U,an,"link"),this.Ra=a)});w.g(an,"fromVertex",an.prototype.jz);w.defineProperty(an,{jz:"fromVertex"},t("W"),function(a){this.W!==a&&(u&&a!==n&&w.i(a,$m,an,"fromVertex"),this.W=a)});w.g(an,"toVertex",an.prototype.gA);
w.defineProperty(an,{gA:"toVertex"},t("S"),function(a){this.S!==a&&(u&&a!==n&&w.i(a,$m,an,"toVertex"),this.S=a)});an.prototype.Wv=function(){var a=this.W;this.W=this.S;this.S=a};an.prototype.commit=an.prototype.hv=aa();an.prototype.getOtherVertex=an.prototype.IG=function(a){u&&w.i(a,$m,an,"getOtherVertex:v");return this.S===a?this.W:this.W===a?this.S:n};
function dj(){ci.call(this);this.ms=h;this.Br=this.Cr=NaN;this.Ui=(new bb(NaN,NaN)).freeze();this.ph=(new bb(10,10)).freeze();this.Ba=uk;this.Tc=sk;this.uc=ok;this.rc=fn}w.Q("GridLayout",dj);w.Ea(dj,ci);dj.prototype.cloneProtected=dj.prototype.xb=function(a){ci.prototype.xb.call(this,a);a.Cr=this.Cr;a.Br=this.Br;a.Ui=this.Ui.O();a.ph=this.ph.O();a.Ba=this.Ba;a.Tc=this.Tc;a.uc=this.uc;a.rc=this.rc};
dj.prototype.doLayout=dj.prototype.Pr=function(a){var b=this.h;b===n&&w.m("The diagram for this layout is not set.");this.kd=Zm(this,this.kd);var c=new ma(S);a===this.h?(Ym(this,c,a.bl,h,n,h,p,h),Ym(this,c,a.links,h,n,h,p,h),Ym(this,c,a.cl,h,n,h,p,h)):a===this.group?Ym(this,c,a.Gc,p,n,h,p,h):c.Le(a.l);for(a=c.copy().l;a.next();){var d=a.value;if(d instanceof U&&(d.ga!==n||d.la!==n))c.remove(d);else if(d.Ei(),d instanceof vf)for(d=d.Gc;d.next();)c.remove(d.value)}c=c.sg();if(0!==c.length){switch(this.ng){case rk:c.reverse();
break;case ok:c.sort(this.zh);break;case pk:c.sort(this.zh),c.reverse()}d=this.YE;isNaN(d)&&(d=0);a=this.lA;a=isNaN(a)?Math.max(this.h.$a.width-b.padding.left-b.padding.right,0):Math.max(this.lA,0);0>=d&&0>=a&&(d=1);var e=this.spacing.width;isFinite(e)||(e=0);var g=this.spacing.height;isFinite(g)||(g=0);b.hc("Layout");switch(this.Db){case vk:var i=Math.max(this.Pk.width,1);if(!isFinite(i))for(var j=i=0;j<c.length;j++)var k=c[j],l=k.ya,i=Math.max(i,l.width);var i=Math.max(i+e,1),m=Math.max(this.Pk.height,
1);if(!isFinite(m))for(j=m=0;j<c.length;j++)k=c[j],l=k.ya,m=Math.max(m,l.height);for(var m=Math.max(m+g,1),q=this.le,r=this.kd.x,s=r,v=this.kd.y,y=0,C=0,j=0;j<c.length;j++){var k=c[j],l=k.ya,E=Math.ceil((l.width+e)/i)*i,I=Math.ceil((l.height+g)/m)*m,D;switch(q){case tk:D=Math.abs(s-l.width)+r;break;default:D=s+l.width-r}if(0<d&&y>d-1||0<a&&0<y&&D>a)y=0,s=r,v+=C,C=0;C=Math.max(C,I);switch(q){case tk:l=-l.width;break;default:l=0}k.move(new F(s+l,v));switch(q){case tk:s-=E;break;default:s+=E}y++}break;
case uk:i=Math.max(this.Pk.width,1);for(k=j=y=v=0;k<c.length;k++)m=c[k],q=m.ya,r=Jl(m,m.Xb,m.bg),v=Math.max(v,r.x),y=Math.max(y,q.width-r.x),j=Math.max(j,r.y);s=this.le;switch(s){case tk:v+=e;break;default:y+=e}var i=isFinite(i)?Math.max(i+e,1):Math.max(v+y,1),M=v=this.kd.x,y=this.kd.y,E=C=0,l=Math.max(this.Pk.height,1),I=j=0;D=h;for(k=0;k<c.length;k++){m=c[k];q=m.ya;r=Jl(m,m.Xb,m.bg);if(0<C)switch(s){case tk:M=Math.floor((M-v-(q.width-r.x))/i)*i+v;break;default:M=Math.ceil((M-v+r.x)/i)*i+v}else switch(s){case tk:E=
M+r.x+q.width;break;default:E=M-r.x}var N;switch(s){case tk:N=-(M+r.x)+v+E;break;default:N=M+q.width-r.x-v-E}if(0<d&&C>d-1||0<a&&0<C&&N>a){for(M=0;M<C&&k!==C;M++){N=c[k-C+M];var Z=Jl(N,N.Xb,N.bg);N.move(new F(N.position.x,N.position.y+j-Z.y))}I+=g;y=D?y+I:y+(I+j);C=I=j=0;M=v;D=p}j=Math.max(j,r.y);I=Math.max(I,q.height-r.y);isFinite(l)&&(I=Math.max(I,Math.max(q.height,l)-r.y));D?m.move(new F(M-r.x,y-r.y)):m.move(new F(M-r.x,y));switch(s){case tk:M-=r.x+e;break;default:M+=q.width-r.x+e}C++}for(M=0;M<
C&&k!==C;M++)N=c[k-C+M],Z=Jl(N,N.Xb,N.bg),N.move(new F(N.position.x,N.position.y+j-Z.y))}b.ne("Layout");this.Ue=h}};w.g(dj,"wrappingWidth",dj.prototype.lA);w.defineProperty(dj,{lA:"wrappingWidth"},t("Cr"),function(a){if(this.Cr!==a&&(0<a||isNaN(a)))this.Cr=a,this.ms=isNaN(a),this.F()});w.g(dj,"wrappingColumn",dj.prototype.YE);w.defineProperty(dj,{YE:"wrappingColumn"},t("Br"),function(a){if(this.Br!==a&&(0<a||isNaN(a)))this.Br=a,this.F()});w.g(dj,"cellSize",dj.prototype.Pk);
w.defineProperty(dj,{Pk:"cellSize"},t("Ui"),function(a){this.Ui.I(a)||(this.Ui.Ua(a),this.F())});w.g(dj,"spacing",dj.prototype.spacing);w.defineProperty(dj,{spacing:"spacing"},t("ph"),function(a){this.ph.I(a)||(this.ph.Ua(a),this.F())});w.g(dj,"alignment",dj.prototype.Db);w.defineProperty(dj,{Db:"alignment"},t("Ba"),function(a){if(this.Ba!==a&&(u&&w.i(a,ja,dj,"alignment"),a===uk||a===vk))this.Ba=a,this.F()});w.g(dj,"arrangement",dj.prototype.le);
w.defineProperty(dj,{le:"arrangement"},t("Tc"),function(a){if(this.Tc!==a&&(u&&w.i(a,ja,dj,"arrangement"),a===sk||a===tk))this.Tc=a,this.F()});w.g(dj,"sorting",dj.prototype.ng);w.defineProperty(dj,{ng:"sorting"},t("uc"),function(a){if(this.uc!==a&&(u&&w.i(a,ja,dj,"sorting"),a===qk||a===rk||a===ok||a===pk))this.uc=a,this.F()});w.g(dj,"comparer",dj.prototype.zh);w.defineProperty(dj,{zh:"comparer"},t("rc"),function(a){this.rc!==a&&(u&&w.k(a,"function",dj,"comparer"),this.rc=a,this.F())});var fn;
dj.standardComparer=fn=function(a,b){u&&w.i(a,S,dj,"standardComparer:a");u&&w.i(b,S,dj,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
dj.smartComparer=function(a,b){u&&w.i(a,S,dj,"standardComparer:a");u&&w.i(b,S,dj,"standardComparer:b");if(a!==n){if(b!==n){var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;else{if(isNaN(i))return-1;
if(0!==g-i)return g-i}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return b!==n?-1:0};var vk;dj.Position=vk=w.s(dj,"Position",0);var uk;dj.Location=uk=w.s(dj,"Location",1);var sk;dj.LeftToRight=sk=w.s(dj,"LeftToRight",2);var tk;dj.RightToLeft=tk=w.s(dj,"RightToLeft",3);var qk;dj.Forward=qk=w.s(dj,"Forward",4);var rk;dj.Reverse=rk=w.s(dj,"Reverse",5);var ok;dj.Ascending=ok=w.s(dj,"Ascending",6);var pk;dj.Descending=pk=w.s(dj,"Descending",7);
function wk(){ci.call(this);this.hx=this.Lm=this.dd=0;this.tp=360;this.gx=Ik;this.kk=0;this.UA=Ik;this.lt=this.Xf=this.QB=0;this.Uu=new gn;this.ot=this.Kl=0;this.mF=600;this.Iq=NaN;this.Yo=1;this.Wd=0;this.Xd=360;this.Tc=Ik;this.da=Ek;this.uc=Bk;this.rc=en;this.ph=6;this.Cq=Lk}w.Q("CircularLayout",wk);w.Ea(wk,ci);
wk.prototype.cloneProtected=wk.prototype.xb=function(a){ci.prototype.xb.call(this,a);a.Iq=this.Iq;a.Yo=this.Yo;a.Wd=this.Wd;a.Xd=this.Xd;a.Tc=this.Tc;a.da=this.da;a.uc=this.uc;a.rc=this.rc;a.ph=this.ph;a.Cq=this.Cq};wk.prototype.createNetwork=wk.prototype.nv=function(){var a=new hn;Xm(a,this);return a};
wk.prototype.doLayout=wk.prototype.Pr=function(a){this.Qc===n&&(this.Qc=this.makeNetwork(a));a=this.Qc.ka;if(1>=a.count)1==a.count&&(a=a.zb(),a.pa=0,a.ta=0);else{var b=new z(jn);b.Le(a.l);var a=new z(jn),c=new z(jn),b=this.sort(b),a=new z(jn),c=new z(jn),d=this.gx,e=this.UA,g=this.dd,i=this.Lm,j=this.hx,k=this.tp,l=this.kk,m=this.QB,q=this.Xf,r=this.lt,d=this.le,e=this.ws,g=this.ZD;if(!isFinite(g)||0>=g)g=NaN;i=this.hC;if(!isFinite(i)||0>=i)i=1;j=this.og;isFinite(j)||(j=0);k=this.Kh;if(!isFinite(k)||
360<k||1>k)k=360;l=this.spacing;isFinite(l)||(l=NaN);d===Jk&&e===Kk?d=Ik:d===Jk&&e!==Kk&&(e=Kk,d=this.le);if((this.direction===Ck||this.direction===Dk)&&this.ng!==Bk){for(var s=0;!(s>=b.length);s+=2){a.add(b.oa(s));if(s+1>=b.length)break;c.add(b.oa(s+1))}this.direction===Ck?(this.le===Jk&&a.reverse(),b=new z(jn),b.Le(a),b.Le(c)):(this.le===Jk&&c.reverse(),b=new z(jn),b.Le(c),b.Le(a))}for(var v=b.length,y=m=0,s=0;s<b.length;s++){var q=j+k*y*(this.direction===Ek?1:-1)/v,C=b.oa(s).zf;isNaN(C)&&(C=kn(b.oa(s),
q));if(360>k&&(0===s||s===b.length-1))C/=2;m+=C;y++}if(isNaN(g)||d===Jk){isNaN(l)&&(l=6);if(d!==Ik&&d!==Jk){C=-Infinity;for(s=0;s<v;s++){var r=b.oa(s),E=b.oa(s===v-1?0:s+1);isNaN(r.zf)&&kn(r,0);isNaN(E.zf)&&kn(E,0);C=Math.max(C,(r.zf+E.zf)/2)}r=C+l;d===Gk?(q=2*Math.PI/v,g=(C+l)/q):g=ln(this,r*(360<=k?v:v-1),i,j*Math.PI/180,k*Math.PI/180)}else g=ln(this,m+(360<=k?v:v-1)*(d!==Jk?l:1.6*l),i,j*Math.PI/180,k*Math.PI/180);q=g*i}else if(q=g*i,y=mn(this,g,q,j*Math.PI/180,k*Math.PI/180),isNaN(l)){if(d===Ik||
d===Jk)l=(y-m)/(360<=k?v:v-1)}else if(d===Ik||d===Jk)s=(y-m)/(360<=k?v:v-1),s<l?(g=ln(this,m+l*(360<=k?v:v-1),i,j*Math.PI/180,k*Math.PI/180),q=g*i):l=s;else{C=-Infinity;for(s=0;s<v;s++)r=b.oa(s),E=b.oa(s===v-1?0:s+1),isNaN(r.zf)&&kn(r,0),isNaN(E.zf)&&kn(E,0),C=Math.max(C,(r.zf+E.zf)/2);r=C+l;s=ln(this,r*(360<=k?v:v-1),i,j*Math.PI/180,k*Math.PI/180);s>g?(g=s,q=g*i):r=y/(360<=k?v:v-1)}this.gx=d;this.UA=e;this.dd=g;this.Lm=i;this.hx=j;this.tp=k;this.kk=l;this.QB=m;this.Xf=q;this.lt=r;c=[b,a,c];b=c[0];
a=c[1];c=c[2];d=this.gx;e=this.dd;i=this.hx;j=this.tp;k=this.kk;l=this.Xf;m=this.lt;if((this.direction===Ck||this.direction===Dk)&&d===Jk)nn(this,b,j,i-j/2,Ek);else if(this.direction===Ck||this.direction===Dk){g=0;switch(d){case Hk:g=180*on(this,e,l,i,m)/Math.PI;break;case Ik:m=b=0;g=a.zb();g!==n&&(b=kn(g,Math.PI/2));g=c.zb();g!==n&&(m=kn(g,Math.PI/2));g=180*on(this,e,l,i,k+(b+m)/2)/Math.PI;break;case Gk:g=j/b.length}if(this.direction===Ck){switch(d){case Hk:pn(this,a,i,Fk);break;case Ik:qn(this,
a,i,Fk);break;case Gk:rn(this,a,j/2,i,Fk)}switch(d){case Hk:pn(this,c,i+g,Ek);break;case Ik:qn(this,c,i+g,Ek);break;case Gk:rn(this,c,j/2,i+g,Ek)}}else{switch(d){case Hk:pn(this,c,i,Fk);break;case Ik:qn(this,c,i,Fk);break;case Gk:rn(this,c,j/2,i,Fk)}switch(d){case Hk:pn(this,a,i+g,Ek);break;case Ik:qn(this,a,i+g,Ek);break;case Gk:rn(this,a,j/2,i+g,Ek)}}}else switch(d){case Hk:pn(this,b,i,this.direction);break;case Ik:qn(this,b,i,this.direction);break;case Gk:rn(this,b,j,i,this.direction);break;case Jk:nn(this,
b,j,i,this.direction)}}this.updateParts();this.Qc=n;this.Ue=h};function rn(a,b,c,d,e){for(var g=a.tp,i=a.dd,a=a.Xf,d=d*Math.PI/180,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=d+(e===Ek?k*c/(360<=g?j:j-1):-(k*c)/j),m=b.oa(k),q=i*Math.tan(l)/a,q=Math.sqrt((i*i+a*a*q*q)/(1+q*q));m.pa=q*Math.cos(l);m.ta=q*Math.sin(l);m.Xu=180*l/Math.PI}}
function qn(a,b,c,d){for(var e=a.dd,g=a.Xf,i=a.kk,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.oa(k),m=b.oa(k===j-1?0:k+1),q=g*Math.sin(c);l.pa=e*Math.cos(c);l.ta=q;l.Xu=180*c/Math.PI;isNaN(l.zf)&&kn(l,0);isNaN(m.zf)&&kn(m,0);l=on(a,e,g,d===Ek?c:-c,(l.zf+m.zf)/2+i);c+=d===Ek?l:-l}}function pn(a,b,c,d){for(var e=a.dd,g=a.Xf,i=a.lt,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.oa(k);l.pa=e*Math.cos(c);l.ta=g*Math.sin(c);l.Xu=180*c/Math.PI;l=on(a,e,g,d===Ek?c:-c,i);c+=d===Ek?l:-l}}
function nn(a,b,c,d,e){var g=a.ot,g=a.tp;a.Kl=0;a.Uu=new gn;if(360>c){for(g=d+(e===Ek?g:-g);0>g;)g+=360;g%=360;180<g&&(g-=360);g*=Math.PI/180;a.ot=g;sn(a,b,c,d,e)}else tn(a,b,c,d,e);a.Uu.hv(b)}
function tn(a,b,c,d,e){var g=a.dd,i=a.Xf,j=a.kk,k=a.Lm,l=g*Math.cos(d*Math.PI/180),m=i*Math.sin(d*Math.PI/180),q=b.sg();if(3===q.length)q[0].pa=g*Math.cos(0),q[0].ta=i*Math.sin(0),q[1].pa=q[0].pa-q[0].width/2-q[1].width/2-j,q[1].y=q[0].y,q[2].pa=(q[0].pa+q[1].pa)/2,q[2].y=q[0].y-q[2].height-j;else if(4===q.length)q[0].pa=g*Math.cos(0),q[0].ta=i*Math.sin(0),q[2].pa=-q[0].pa,q[2].ta=q[0].ta,q[1].pa=0,q[1].y=Math.min(q[0].y,q[2].y)-q[1].height-j,q[3].pa=0,q[3].y=Math.max(q[0].y+q[0].height+j,q[2].y+
q[2].height+j);else{for(g=0;g<q.length;g++){q[g].pa=l;q[g].ta=m;if(g>=q.length-1)break;i=un(a,l,m,q,g,e);i[0]||(i=vn(a,l,m,q,g,e));l=i[1];m=i[2]}a.Kl++;if(!(23<a.Kl)){var l=q[0].pa,m=q[0].ta,g=q[q.length-1].pa,i=q[q.length-1].ta,r=Math.abs(l-g)-((q[0].width+q[q.length-1].width)/2+j),s=Math.abs(m-i)-((q[0].height+q[q.length-1].height)/2+j),j=0;1>Math.abs(s)?Math.abs(l-g)<(q[0].width+q[q.length-1].width)/2&&(j=0):j=0<s?s:1>Math.abs(r)?0:r;r=p;r=Math.abs(g)>Math.abs(i)?0<g!==m>i:0<i!==l<g;if(r=e===Ek?
r:!r)j=-Math.abs(j),j=Math.min(j,-q[q.length-1].width),j=Math.min(j,-q[q.length-1].height);l=a.Uu;if(0<j&&0>l.Pm||Math.abs(j)<Math.abs(l.Pm)&&!(0>j&&0<l.Pm)){l.Pm=j;l.Rl=[];l.Dn=[];for(m=0;m<q.length;m++)l.Rl[m]=q[m].Fb.x,l.Dn[m]=q[m].Fb.y}1<Math.abs(j)&&(a.dd=8>a.Kl?a.dd-j/(2*Math.PI):5>q.length&&10<j?a.dd/2:a.dd-(0<j?1.7:-2.3),a.Xf=a.dd*k,tn(a,b,c,d,e))}}}
function sn(a,b,c,d,e){for(var g=a.dd,i=a.Xf,j=a.Lm,k=g*Math.cos(d*Math.PI/180),l=i*Math.sin(d*Math.PI/180),m=b.sg(),q=0;q<m.length;q++){m[q].pa=k;m[q].ta=l;if(q>=m.length-1)break;var r=un(a,k,l,m,q,e);r[0]||(r=vn(a,k,l,m,q,e));k=r[1];l=r[2]}a.Kl++;if(!(23<a.Kl)){b.oa(b.length-1);k=Math.atan2(l,k);k=e===Ek?a.ot-k:k-a.ot;k=Math.abs(k)<Math.abs(k-2*Math.PI)?k:k-2*Math.PI;g=k*(g+i)/2;i=a.Uu;if(Math.abs(g)<Math.abs(i.Pm)){i.Pm=g;i.Rl=[];i.Dn=[];for(k=0;k<m.length;k++)i.Rl[k]=m[k].Fb.x,i.Dn[k]=m[k].Fb.y}1<
Math.abs(g)&&(a.dd=8>a.Kl?a.dd-g/(2*Math.PI):a.dd-(0<g?1.7:-2.3),a.Xf=a.dd*j,sn(a,b,c,d,e))}}function un(a,b,c,d,e,g){var i=a.dd,j=a.Xf,k=0,l=0,a=(d[e].width+d[e+1].width)/2+a.kk,m=p;if(0<=c!==(g===Ek)){if(k=b+a,k>i){k=b-a;if(k<-i)return[p,k,l];m=h}}else if(k=b-a,k<-i){k=b+a;if(k>i)return[p,k,l];m=h}l=Math.sqrt(1-Math.min(1,k*k/(i*i)))*j;0>c!==m&&(l=-l);return Math.abs(c-l)>(d[e].height+d[e+1].height)/2?[p,k,l]:[h,k,l]}
function vn(a,b,c,d,e,g){var i=a.dd,j=a.Xf,k=0,l=0,a=(d[e].height+d[e+1].height)/2+a.kk,m=p;if(0<=b!==(g===Ek)){if(l=c-a,l<-j){l=c+a;if(l>j)return[p,k,l];m=h}}else if(l=c+a,l>j){l=c-a;if(l<-j)return[p,k,l];m=h}k=Math.sqrt(1-Math.min(1,l*l/(j*j)))*i;0>b!==m&&(k=-k);return Math.abs(b-k)>(d[e].width+d[e+1].width)/2?[p,k,l]:[h,k,l]}function gn(){this.Pm=-Infinity;this.Dn=this.Rl=n}
gn.prototype.hv=function(a){if(!(this.Rl===n||this.Dn===n))for(var b=0;b<this.Rl.length;b++){var c=a.oa(b);c.x=this.Rl[b];c.y=this.Dn[b]}};wk.prototype.commitLayout=wk.prototype.iv=function(){this.commitNodes();this.ks&&this.commitLinks()};wk.prototype.commitNodes=wk.prototype.Vy=function(){for(var a=this.BF,b=this.B.ka.l,c;b.next();)c=b.value,c.x+=a.x,c.y+=a.y,c.commit()};wk.prototype.commitLinks=wk.prototype.Uy=function(){for(var a=this.B.mc.l;a.next();)a.value.commit()};
function mn(a,b,c,d,e){var g=a.mF;if(0.001>Math.abs(a.Lm-1))return d!==f&&e!==f?e*b:2*Math.PI*b;var a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,j;j=d!==f&&e!==f?e/(g+1):Math.PI/(2*(g+1));for(var k=0;k<=g;k++)var l=Math.sin(d!==f&&e!==f?d+k*e/g:k*Math.PI/(2*g)),i=i+Math.sqrt(1-a*a*l*l)*j;return d!==f&&e!==f?(b>c?b:c)*i:4*(b>c?b:c)*i}function ln(a,b,c,d,e){return b/(d!==f&&e!==f?mn(a,1,c,d,e):mn(a,1,c))}
function on(a,b,c,d,e){if(0.001>Math.abs(a.Lm-1))return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,a=2*Math.PI/(700*a.B.ka.count);b>c&&(d+=Math.PI/2);for(var j=0;;j++){var k=Math.sin(d+j*a),i=i+(b>c?b:c)*Math.sqrt(1-g*g*k*k)*a;if(i>=e)return j*a}return 0}
wk.prototype.sort=function(a){switch(this.ng){case zk:break;case Ak:a.reverse();break;case xk:a.sort(this.zh);break;case yk:a.sort(this.zh);a.reverse();break;case Bk:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new z(jn),c=0;c<a.length;c++){var e=-1,g=-1;if(0===c)for(var i=0;i<a.length;i++){var j=a.oa(i).yG;j>e&&(e=j,g=i)}else for(i=0;i<a.length;i++)j=b[i],j>e&&(e=j,g=i);d.add(a.oa(g));b[g]=-1;g=a.oa(g);e=g.Hb;for(g=g.Gb;e.next();)i=e.value,i=i.jz,i=a.indexOf(i),0>i||0<=b[i]&&b[i]++;for(;g.next();)i=
g.value,i=i.gA,i=a.indexOf(i),0>i||0<=b[i]&&b[i]++}a=[];for(b=0;b<d.length;b++){j=d.oa(b);a[b]=[];for(var c=j.Gb,e=j.Hb,k,l;c.next();)k=c.value,l=d.indexOf(k.gA),l!==b&&0>a[b].indexOf(l)&&a[b].push(l);for(;e.next();)k=e.value,l=d.indexOf(k.jz),l!==b&&0>a[b].indexOf(l)&&a[b].push(l)}j=[];for(b=0;b<a.length;b++)j[b]=0;for(var c=[],m=[],q=[],e=[],g=new z(jn),i=b=0;b<a.length;b++){var r=a[b].length;if(1===r)e.push(b);else if(0===r)g.add(d.oa(b));else{if(0===i)c.push(b);else{for(var s=Infinity,v=Infinity,
y=-1,C=[],r=0;r<c.length;r++)if(0>a[c[r]].indexOf(c[r===c.length-1?0:r+1]))C.push(r===c.length-1?0:r+1);if(0===C.length)for(r=0;r<c.length;r++)C.push(r);for(r=0;r<C.length;r++){var E=C[r],I;l=a[b];k=m;I=q;for(var D=j,M=E,N=c,Z=0,va=0;va<k.length;va++){var la=D[k[va]],ta=D[I[va]],Ea=0,Ha=0;la<ta?(Ea=la,Ha=ta):(Ea=ta,Ha=la);if(Ea<M&&M<=Ha)for(la=0;la<l.length;la++)ta=l[la],0>N.indexOf(ta)||Ea<D[ta]&&D[ta]<Ha||(Ea===D[ta]||Ha===D[ta])||Z++;else for(la=0;la<l.length;la++)ta=l[la],0>N.indexOf(ta)||Ea<
D[ta]&&D[ta]<Ha&&!(Ea===D[ta]||Ha===D[ta])&&Z++}I=Z;for(k=D=0;k<a[b].length;k++)l=c.indexOf(a[b][k]),0<=l&&(l=Math.abs(E-(l>=E?l+1:l)),D+=l<c.length+1-l?l:c.length+1-l);for(k=0;k<m.length;k++)l=j[m[k]],M=j[q[k]],l>=E&&l++,M>=E&&M++,l>M&&(N=M,M=l,l=N),M-l<(c.length+2)/2===(l<E&&E<=M)&&D++;if(I<s||I===s&&D<v)s=I,v=D,y=E}c.splice(y,0,b);for(r=0;r<c.length;r++)j[c[r]]=r;for(r=0;r<a[b].length;r++)s=a[b][r],0<=c.indexOf(s)&&(m.push(b),q.push(s))}i++}}m=p;for(q=c.length;;){m=h;for(j=0;j<e.length;j++)if(b=
e[j],r=a[b][0],l=c.indexOf(r),0<=l){for(i=v=0;i<a[r].length;i++)s=a[r][i],s=c.indexOf(s),0>s||s===l||(y=s>l?s-l:l-s,v+=s<l!==y>q-y?1:-1);c.splice(0>v?l:l+1,0,b);e.splice(j,1);j--}else m=p;if(m)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)l=c[b],g.add(d.oa(l));return g;default:w.m("Invalid sorting type.")}return a};w.g(wk,"radius",wk.prototype.ZD);w.defineProperty(wk,{ZD:"radius"},t("Iq"),function(a){if(this.Iq!==a&&(0<a||isNaN(a)))this.Iq=a,this.F()});w.g(wk,"aspectRatio",wk.prototype.hC);
w.defineProperty(wk,{hC:"aspectRatio"},t("Yo"),function(a){this.Yo!==a&&0<a&&(this.Yo=a,this.F())});w.g(wk,"startAngle",wk.prototype.og);w.defineProperty(wk,{og:"startAngle"},t("Wd"),function(a){this.Wd!==a&&(this.Wd=a,this.F())});w.g(wk,"sweepAngle",wk.prototype.Kh);w.defineProperty(wk,{Kh:"sweepAngle"},t("Xd"),function(a){this.Xd!==a&&(this.Xd=0<a&&360>=a?a:360,this.F())});w.g(wk,"arrangement",wk.prototype.le);
w.defineProperty(wk,{le:"arrangement"},t("Tc"),function(a){if(this.Tc!==a&&(u&&w.i(a,ja,wk,"arrangement"),a===Jk||a===Ik||a===Hk||a===Gk))this.Tc=a,this.F()});w.g(wk,"direction",wk.prototype.direction);w.defineProperty(wk,{direction:"direction"},t("da"),function(a){if(this.da!==a&&(u&&w.i(a,ja,wk,"direction"),a===Ek||a===Fk||a===Ck||a===Dk))this.da=a,this.F()});w.g(wk,"sorting",wk.prototype.ng);
w.defineProperty(wk,{ng:"sorting"},t("uc"),function(a){if(this.uc!==a&&(u&&w.i(a,ja,wk,"sorting"),a===zk||a===Ak||a===xk||yk||a===Bk))this.uc=a,this.F()});w.g(wk,"comparer",wk.prototype.zh);w.defineProperty(wk,{zh:"comparer"},t("rc"),function(a){this.rc!==a&&(u&&w.k(a,"function",wk,"comparer"),this.rc=a,this.F())});w.g(wk,"spacing",wk.prototype.spacing);w.defineProperty(wk,{spacing:"spacing"},t("ph"),function(a){this.ph!==a&&(this.ph=a,this.F())});w.g(wk,"nodeDiameterFormula",wk.prototype.ws);
w.defineProperty(wk,{ws:"nodeDiameterFormula"},t("Cq"),function(a){if(this.Cq!==a&&(u&&w.i(a,ja,wk,"nodeDiameterFormula"),a===Lk||a===Kk))this.Cq=a,this.F()});w.u(wk,{CF:"actualXRadius"},t("dd"));w.u(wk,{DF:"actualYRadius"},t("Xf"));w.u(wk,{BI:"actualSpacing"},t("kk"));w.u(wk,{BF:"actualCenter"},function(){return isNaN(this.kd.x)||isNaN(this.kd.y)?new F(0,0):new F(this.kd.x+this.CF,this.kd.y+this.DF)});var Ik;wk.ConstantSpacing=Ik=w.s(wk,"ConstantSpacing",0);var Hk;
wk.ConstantDistance=Hk=w.s(wk,"ConstantDistance",1);var Gk;wk.ConstantAngle=Gk=w.s(wk,"ConstantAngle",2);var Jk;wk.Packed=Jk=w.s(wk,"Packed",3);var Ek;wk.Clockwise=Ek=w.s(wk,"Clockwise",4);var Fk;wk.Counterclockwise=Fk=w.s(wk,"Counterclockwise",5);var Ck;wk.BidirectionalLeft=Ck=w.s(wk,"BidirectionalLeft",6);var Dk;wk.BidirectionalRight=Dk=w.s(wk,"BidirectionalRight",7);var zk;wk.Forwards=zk=w.s(wk,"Forwards",8);var Ak;wk.Reverse=Ak=w.s(wk,"Reverse",9);var xk;wk.Ascending=xk=w.s(wk,"Ascending",10);
var yk;wk.Descending=yk=w.s(wk,"Descending",11);var Bk;wk.Optimized=Bk=w.s(wk,"Optimized",12);var Lk;wk.Pythagorean=Lk=w.s(wk,"Pythagorean",13);var Kk;wk.Circular=Kk=w.s(wk,"Circular",14);function hn(){Wm.call(this)}w.Q("CircularNetwork",hn);w.Ea(hn,Wm);hn.prototype.createVertex=hn.prototype.Bj=function(){return new jn};hn.prototype.createEdge=hn.prototype.Un=function(){return new wn};function jn(){$m.call(this);this.uA=this.Km=NaN}w.Q("CircularVertex",jn);w.Ea(jn,$m);
function kn(a,b){var c=a.B;if(c===n)return NaN;c=c.Pb;if(c===n)return NaN;if(c.le===Jk)if(c.ws===Kk)a.Km=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.Km=Math.min(a.height/c,a.width/d)}else a.Km=c.ws===Kk?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.Km}w.g(jn,"diameter",jn.prototype.zf);w.defineProperty(jn,{zf:"diameter"},t("Km"),ba("Km"));w.g(jn,"actualAngle",jn.prototype.Xu);
w.defineProperty(jn,{Xu:"actualAngle"},t("uA"),ba("uA"));function wn(){an.call(this)}w.Q("CircularEdge",wn);w.Ea(wn,an);function xn(){ci.call(this);this.Wf=n;this.$p=0;this.Jf=(new bb(100,100)).freeze();this.Xo=p;this.Gd=this.oh=h;this.dn=100;this.wp=1;this.Kp=1E3;this.pp=0.05;this.op=50;this.mp=150;this.np=0;this.kp=20;this.jp=25}w.Q("ForceDirectedLayout",xn);w.Ea(xn,ci);
xn.prototype.cloneProtected=xn.prototype.xb=function(a){ci.prototype.xb.call(this,a);a.Jf=this.Jf.O();a.Xo=this.Xo;a.oh=this.oh;a.Gd=this.Gd;a.dn=this.dn;a.wp=this.wp;a.Kp=this.Kp;a.pp=this.pp;a.op=this.op;a.mp=this.mp;a.np=this.np;a.kp=this.kp;a.jp=this.jp};xn.prototype.createNetwork=xn.prototype.nv=function(){var a=new yn;Xm(a,this);return a};
xn.prototype.doLayout=xn.prototype.Pr=function(a){this.Qc===n&&(this.Qc=this.makeNetwork(a));a=this.Ov;if(0<this.B.ka.count){this.B.qv();for(var b=this.B.ka.l;b.next();){var c=b.value;c.Wi=this.electricalCharge(c);c.cn=this.gravitationalMass(c)}for(b=this.B.mc.l;b.next();)c=b.value,c.kr=this.springStiffness(c),c.ei=this.springLength(c);this.$p=0;a:{if(!(3>this.B.ka.count)){var d=b=0,c=this.B.ka.l;c.next();for(var e=c.value.L;c.next();){if(c.value.L.Se(e)&&(b++,1<b)){b=h;break a}if(10<d)break;d++}}b=
p}if(b){b=this.B;for(d=b.cI().l;d.next();){this.Qc=e=d.value;for(c=this.B.ka.l;c.next();){for(var e=c.value,g=0,i=e.ka;i.next();)g++;e.kf=g;e.nj=1;e.ol=n;e.Jg=n}zn(this,0,a)}this.Qc=b;d.reset();u&&w.i(b,yn,xn,"arrangeConnectedGraphs:singletons");for(var c=this.av,j=d.count,e=h,i=g=0,k=[],l=0;l<j+b.ka.count+2;l++)k[l]=n;j=0;for(d.reset();d.next();){var m=d.value,l=this.oe(m);if(e)e=p,g=l.x+l.width/2,i=l.y+l.height/2,k[0]=new F(l.right+c.width,l.top),k[1]=new F(l.left,l.bottom+c.height),j=2;else{var q=
An(k,j,new F(g,i),new bb(l.width,l.height),c),r=k[q],s=new F(r.x+l.width+c.width,r.y),v=new F(r.x,r.y+l.height+c.height);q+1<j&&k.splice(q+1,0,n);k[q]=s;k[q+1]=v;j++;q=r.x-l.x;l=r.y-l.y;for(m=m.ka.l;m.next();){var y=m.value;y.pa+=q;y.ta+=l}}}for(m=b.ka.l;m.next();)y=m.value,l=y.L,2>j?(g=l.x+l.width/2,i=l.y+l.height/2,k[0]=new F(l.right+c.width,l.top),k[1]=new F(l.left,l.bottom+c.height),j=2):(q=An(k,j,new F(g,i),new bb(l.width,l.height),c),r=k[q],s=new F(r.x+l.width+c.width,r.y),v=new F(r.x,r.y+l.height+
c.height),q+1<j&&k.splice(q+1,0,n),k[q]=s,k[q+1]=v,j++,y.pa=r.x+y.width/2,y.ta=r.y+y.height/2);for(d.reset();d.next();){e=d.value;for(g=e.ka.l;g.next();)c=g.value,b.Hk(c);for(e=e.mc.l;e.next();)c=e.value,b.En(c)}}Bn(this,a);this.updateParts()}this.dn=a;this.Qc=n;this.Ue=h};xn.prototype.oe=function(a){u&&w.i(a,yn,xn,"computeBounds:net");for(var b=new G,c=h,a=a.ka.l;a.next();){var d=a.value;c?(c=p,b.set(d.L)):b.Oi(d.L)}return b};
function Cn(a,b,c){u&&(w.o(b,xn,"computeClusterLayoutIterations:level"),w.o(c,xn,"computeClusterLayoutIterations:maxiter"));return Math.max(Math.min(a.B.ka.count,c*(b+1)/11),10)}
function zn(a,b,c){u&&(w.o(b,xn,"layoutClusters:level"),w.o(c,xn,"layoutClusters:maxiter"));var d;u&&w.o(b,xn,"hasClusters:level");if(10<b||3>a.B.ka.count)d=p;else{a.Wf===n?a.Wf=new z(Dn):a.Wf.clear();a.Wf.Le(a.B.ka);d=a.Wf;d.sort(function(a,b){return a===n||b===n||a===b?0:b.kf-a.kf});for(var e=d.count-1;0<=e&&1>=d.n[e].kf;)e--;d=1<d.count-e}if(d){d=a.im;a.im*=1+1/(b+1);u&&w.o(b,xn,"pushSubNetwork:level");for(var e=a.B,g=new yn,i=a.Wf.l;i.next();){var j=i.value;if(1<j.kf){g.Hk(j);var k={oA:j.kf,pA:j.width,
nA:j.height,$E:j.K.x,aF:j.K.y};j.Jg===n&&(j.Jg=new z);j.Jg.add(k);j.Yx=j.Jg.count-1}else break}for(var l=e.mc.l;l.next();){var m=l.value;if(m.W.B===g&&m.S.B===g)g.En(m);else if(m.W.B===g){var q=m.W.ol;q===n&&(q=new z(Dn),m.W.ol=q);q.add(m.S);m.W.kf--;m.W.nj+=m.S.nj}else m.S.B===g&&(q=m.S.ol,q===n&&(q=new z(Dn),m.S.ol=q),q.add(m.W),m.S.kf--,m.S.nj+=m.W.nj)}for(l=g.mc.l;l.next();)m=l.value,m.ei*=Math.max(1,sc((m.W.nj+m.S.nj)/(4*b+1)));for(i=g.ka.l;i.next();)if(j=i.value,q=j.ol,q!==n&&0<q.count&&(k=
j.Jg.n[j.Jg.count-1],k=k.oA-j.kf,!(0>=k))){for(var r=0,s=0,v=q.count-k;v<q.count;v++){for(var y=q.n[v],m=n,l=y.mc.l;l.next();){var C=l.value;if(C.IG(y)===j){m=C;break}}m!==n&&(s+=m.ei,r+=y.width*y.height)}q=j.pa;l=j.ta;m=j.width;v=j.height;y=j.K;C=m*v;1>C&&(C=1);r=sc((r+C+4*s*s/(k*k))/C);k=(r-1)*m/2;r=(r-1)*v/2;j.Fb=new G(q-y.x-k,l-y.y-r,m+2*k,v+2*r);j.focus=new F(y.x+k,y.y+r)}a.Qc=g;g=Math.max(0,Cn(a,b,c));a.Ov+=g;zn(a,b+1,c);Bn(a,g);u&&(w.i(e,yn,xn,"popNetwork:oldnet"),w.o(b,xn,"popNetwork:level"));
for(c=a.B.ka.l;c.next();)g=c.value,g.B=e,g.Jg!==n&&(i=g.Jg.n[g.Yx],g.kf=i.oA,j=i.$E,k=i.aF,g.Fb=new G(g.pa-j,g.ta-k,i.pA,i.nA),g.focus=new F(j,k),g.Yx--);for(c=a.B.mc.l;c.next();)c.value.B=e;a.Qc=e;c=a.Wf;c===n?c=new z(Dn):c.clear();c.Le(e.ka);c.sort(function(a,b){return a===n||b===n||a===b?0:b.kf-a.kf});for(e=c.l;e.next();)En(a,e.value,b);a.im=d}}
function En(a,b,c){u&&(w.i(b,Dn,xn,"surroundNode:oldnet"),w.o(c,xn,"surroundNode:level"));var d=b.ol;if(!(d===n||0===d.count)){var c=b.pa,e=b.ta,g=b.width,i=b.height;b.Jg!==n&&0<b.Jg.count&&(i=b.Jg.n[0],g=i.pA,i=i.nA);for(var g=sc(g*g+i*i)/2,j=p,k=i=0,l=0,m=b.ka.l;m.next();){var q=m.value;1>=q.kf?k++:(j=h,l++,i+=Math.atan2(b.ta-q.ta,b.pa-q.pa))}if(0!==k){0<l&&(i/=l);l=b=0;b=j?2*Math.PI/(k+1):2*Math.PI/k;0===k%2&&(l=b/2);1<d.count&&d.sort(function(a,b){return a===n||b===n||a===b?0:b.width*b.height-
a.width*a.height});j=0===k%2?0:1;for(m=d.l;m.next();)if(q=m.value,!(1<q.kf)&&!a.isFixed(q)){d=n;for(k=q.mc.l;k.next();){d=k.value;break}var k=q.width,r=q.height,k=sc(k*k+r*r)/2,d=g+d.ei+k,k=i+(b*(j/2>>1)+l)*(0==j%2?1:-1);q.pa=c+d*Math.cos(k);q.ta=e+d*Math.sin(k);j++}}}}
function An(a,b,c,d,e){var g=9E19,i=-1,j=0;a:for(;j<b;j++){var k=a[j],l=k.x-c.x,m=k.y-c.y,l=l*l+m*m;if(l<g){for(m=j-1;0<=m;m--)if(a[m].y>k.y&&a[m].x-k.x<d.width+e.width)continue a;for(m=j+1;m<b;m++)if(a[m].x>k.x&&a[m].y-k.y<d.height+e.height)continue a;i=j;g=l}}return i}xn.prototype.EF=function(a){var b=a.fb;if(b!==n)for(b=b.OC();b.next();){var c=b.value;if("Comment"===c.Nc){var d=this.B.Re(c);d===n&&(d=this.B.Gn(c),d.Wi=this.AC,c=this.B.km(a,d,n),c!==n&&(c.ei=this.BC))}}};
function Fn(a,b){u&&(w.i(a,Dn,xn,"getNodeDistance:vertexA"),w.i(b,Dn,xn,"getNodeDistance:vertexB"));var c=a.L,d=c.x,e=c.y,g=c.width,c=c.height,i=b.L,j=i.x,k=i.y,l=i.width,i=i.height;return d+g<j?e>k+i?(d=d+g-j,e=e-k-i,sc(d*d+e*e)):e+c<k?(d=d+g-j,e=e+c-k,sc(d*d+e*e)):j-(d+g):d>j+l?e>k+i?(d=d-j-l,e=e-k-i,sc(d*d+e*e)):e+c<k?(d=d-j-l,e=e+c-k,sc(d*d+e*e)):d-(j+l):e>k+i?e-(k+i):e+c<k?k-(e+c):0.1}
function Bn(a,b){u&&w.o(b,xn,"performIterations:num");a.Wf=n;for(var c=a.$p+b;a.$p<c&&!(a.$p++,!Gn(a)););a.Wf=n}
function Gn(a){a.Wf===n&&(a.Wf=new z(Dn),a.Wf.Le(a.B.ka));var b=a.Wf;if(0>=b.count)return p;var c=b.n[0];c.Rd=0;c.Sd=0;for(var d=c.pa,e=d,g=c.ta,i=g,c=1;c<b.count;c++){var j=b.n[c];j.Rd=0;j.Sd=0;var k=j.pa,j=j.ta,d=Math.min(d,k),e=Math.max(e,k),g=Math.min(g,j),i=Math.max(i,j)}(i=e-d>i-g)?b.sort(function(a,b){return a===n||b===n||a===b?0:a.pa-b.pa}):b.sort(function(a,b){return a===n||b===n||a===b?0:a.ta-b.ta});for(var l=0,m=k=0,c=0;c<b.count;c++){j=b.n[c];d=j.pa;e=j.ta;k=j.Wi*a.electricalFieldX(d,
e);m=j.Wi*a.electricalFieldY(d,e);j.Rd+=k;j.Sd+=m;k=j.cn*a.gravitationalFieldX(d,e);m=j.cn*a.gravitationalFieldY(d,e);j.Rd+=k;j.Sd+=m;for(var q=a.im,r=c+1;r<b.count;r++)if(g=b.n[r],g!==j){var m=g.pa,s=g.ta;if(Math.abs(d-m)>q){if(i)break}else if(Math.abs(e-s)>q){if(!i)break}else{var v=Fn(j,g);1>v?(d>m?(k=Math.abs(g.L.right-j.L.left),k=Hn(1+k)):d<m?(k=Math.abs(g.L.left-j.L.right),k=-Hn(1+k)):(k=Math.max(g.width,j.width),k=Hn(1+k)-k/2),e>s?(m=Math.abs(g.L.bottom-j.L.top),m=Hn(1+m)):d<m?(m=Math.abs(g.L.top-
j.L.bottom),m=-Hn(1+m)):(m=Math.max(g.height,j.height),m=Hn(1+m)-m/2)):(l=-(j.Wi*g.Wi)/(v*v),k=l*((m-d)/v),m=l*((s-e)/v));j.Rd+=k;j.Sd+=m;g.Rd-=k;g.Sd-=m}}}for(c=a.B.mc.l;c.next();)i=c.value,j=i.W,g=i.S,d=j.pa,e=j.ta,m=g.pa,s=g.ta,v=Fn(j,g),1>v?(k=(d>m?1:-1)*Hn(1+Math.max(g.width,j.width)),m=(e>s?1:-1)*Hn(1+Math.max(g.height,j.height))):(l=i.kr*(v-i.ei),k=l*((m-d)/v),m=l*((s-e)/v)),j.Rd+=k,j.Sd+=m,g.Rd-=k,g.Sd-=m;c=0;d=Math.max(a.im/20,50);for(e=0;e<b.count;e++)j=b.n[e],a.isFixed(j)||(g=j.Rd,i=j.Sd,
g<-d?g=-d:g>d&&(g=d),i<-d?i=-d:i>d&&(i=d),j.pa+=g,j.ta+=i,c=Math.max(c,g*g+i*i));return c>a.fz*a.fz}function Hn(a){return Math.floor(a*Math.random())}xn.prototype.commitLayout=xn.prototype.iv=function(){this.Zz();this.commitNodes();this.ks&&this.commitLinks()};xn.prototype.Zz=function(){if(this.qm)for(var a=this.B.mc.l;a.next();){var b=a.value.Ra;b!==n&&(b.jb=Hb,b.nb=Hb)}};
xn.prototype.commitNodes=xn.prototype.Vy=function(){var a=0,b=0;if(this.fC)var b=this.oe(this.B),c=this.kd,a=c.x-b.x,b=c.y-b.y;for(var c=new G,d=this.B.ka.l;d.next();){var e=d.value;if(0!==a||0!==b)c.set(e.L),c.x+=a,c.y+=b,e.Fb=c;e.commit()}};xn.prototype.commitLinks=xn.prototype.Uy=function(){for(var a=this.B.mc.l;a.next();)a.value.commit()};xn.prototype.springStiffness=xn.prototype.kM=function(a){a=a.kr;return!isNaN(a)?a:this.FC};
xn.prototype.springLength=xn.prototype.jM=function(a){a=a.ei;return!isNaN(a)?a:this.EC};xn.prototype.electricalCharge=xn.prototype.pK=function(a){a=a.Wi;return!isNaN(a)?a:this.CC};xn.prototype.electricalFieldX=xn.prototype.qK=ca(0);xn.prototype.electricalFieldY=xn.prototype.rK=ca(0);xn.prototype.gravitationalMass=xn.prototype.SK=function(a){a=a.cn;return!isNaN(a)?a:this.DC};xn.prototype.gravitationalFieldX=xn.prototype.QK=ca(0);xn.prototype.gravitationalFieldY=xn.prototype.RK=ca(0);
xn.prototype.isFixed=xn.prototype.rD=function(a){return a.xx};w.u(xn,{KJ:"currentIteration"},t("$p"));w.g(xn,"arrangementSpacing",xn.prototype.av);w.defineProperty(xn,{av:"arrangementSpacing"},t("Jf"),function(a){this.Jf.I(a)||(this.Jf.Ua(a),this.F())});w.g(xn,"arrangesToOrigin",xn.prototype.fC);w.defineProperty(xn,{fC:"arrangesToOrigin"},t("Xo"),function(a){this.Xo!==a&&(this.Xo=a,this.F())});w.g(xn,"setsPortSpots",xn.prototype.qm);
w.defineProperty(xn,{qm:"setsPortSpots"},t("oh"),function(a){this.oh!==a&&(this.oh=a,this.F())});w.g(xn,"comments",xn.prototype.Ty);w.defineProperty(xn,{Ty:"comments"},t("Gd"),function(a){this.Gd!==a&&(this.Gd=a,this.F())});w.g(xn,"maxIterations",xn.prototype.Ov);w.defineProperty(xn,{Ov:"maxIterations"},t("dn"),function(a){this.dn!==a&&0<=a&&(this.dn=a,this.F())});w.g(xn,"epsilonDistance",xn.prototype.fz);
w.defineProperty(xn,{fz:"epsilonDistance"},t("wp"),function(a){this.wp!==a&&0<a&&(this.wp=a,this.F())});w.g(xn,"infinityDistance",xn.prototype.im);w.defineProperty(xn,{im:"infinityDistance"},t("Kp"),function(a){this.Kp!==a&&1<a&&(this.Kp=a,this.F())});w.g(xn,"defaultSpringStiffness",xn.prototype.FC);w.defineProperty(xn,{FC:"defaultSpringStiffness"},t("pp"),function(a){this.pp!==a&&(this.pp=a,this.F())});w.g(xn,"defaultSpringLength",xn.prototype.EC);
w.defineProperty(xn,{EC:"defaultSpringLength"},t("op"),function(a){this.op!==a&&(this.op=a,this.F())});w.g(xn,"defaultElectricalCharge",xn.prototype.CC);w.defineProperty(xn,{CC:"defaultElectricalCharge"},t("mp"),function(a){this.mp!==a&&(this.mp=a,this.F())});w.g(xn,"defaultGravitationalMass",xn.prototype.DC);w.defineProperty(xn,{DC:"defaultGravitationalMass"},t("np"),function(a){this.np!==a&&(this.np=a,this.F())});w.g(xn,"defaultCommentSpringLength",xn.prototype.BC);
w.defineProperty(xn,{BC:"defaultCommentSpringLength"},t("kp"),function(a){this.kp!==a&&(this.kp=a,this.F())});w.g(xn,"defaultCommentElectricalCharge",xn.prototype.AC);w.defineProperty(xn,{AC:"defaultCommentElectricalCharge"},t("jp"),function(a){this.jp!==a&&(this.jp=a,this.F())});function yn(){Wm.call(this)}w.Q("ForceDirectedNetwork",yn);w.Ea(yn,Wm);yn.prototype.createVertex=yn.prototype.Bj=function(){return new Dn};yn.prototype.createEdge=yn.prototype.Un=function(){return new In};
function Dn(){$m.call(this);this.xx=p;this.cn=this.Wi=NaN;this.nj=this.kf=this.Sd=this.Rd=0;this.Jg=this.ol=n;this.Yx=0}w.Q("ForceDirectedVertex",Dn);w.Ea(Dn,$m);w.g(Dn,"isFixed",Dn.prototype.rD);w.defineProperty(Dn,{rD:"isFixed"},t("xx"),ba("xx"));w.g(Dn,"charge",Dn.prototype.dG);w.defineProperty(Dn,{dG:"charge"},t("Wi"),ba("Wi"));w.g(Dn,"mass",Dn.prototype.oH);w.defineProperty(Dn,{oH:"mass"},t("cn"),ba("cn"));w.g(Dn,"forceX",Dn.prototype.DG);w.defineProperty(Dn,{DG:"forceX"},t("Rd"),ba("Rd"));
w.g(Dn,"forceY",Dn.prototype.EG);w.defineProperty(Dn,{EG:"forceY"},t("Sd"),ba("Sd"));function In(){an.call(this);this.ei=this.kr=NaN}w.Q("ForceDirectedEdge",In);w.Ea(In,an);w.g(In,"stiffness",In.prototype.eI);w.defineProperty(In,{eI:"stiffness"},t("kr"),ba("kr"));w.g(In,"length",In.prototype.length);w.defineProperty(In,{length:"length"},t("ei"),ba("ei"));
function X(){ci.call(this);this.od=this.Jd=25;this.da=0;this.Gm=Jn;this.Zm=Kn;this.Tm=Ln;this.Cl=4;this.ym=Mn;this.ni=Nn;this.oh=h;this.ob=this.Wt=this.bb=-1;this.hf=this.sq=0;this.qd=this.ff=this.Dg=this.jh=this.pd=n;this.zq=0;this.eu=this.Il=n;this.Pf=0;this.Aq=n;this.Fg=[];this.Fg.length=100}w.Q("LayeredDigraphLayout",X);w.Ea(X,ci);
X.prototype.cloneProtected=X.prototype.xb=function(a){ci.prototype.xb.call(this,a);a.Jd=this.Jd;a.od=this.od;a.da=this.da;a.Gm=this.Gm;a.Zm=this.Zm;a.Tm=this.Tm;a.Cl=this.Cl;a.ym=this.ym;a.ni=this.ni;a.oh=this.oh};X.prototype.createNetwork=X.prototype.nv=function(){var a=new On;Xm(a,this);return a};
X.prototype.doLayout=X.prototype.Pr=function(a){this.Qc===n&&(this.Qc=this.makeNetwork(a));this.kd=Zm(this,this.kd);this.Wt=-1;this.hf=this.sq=0;this.Aq=this.eu=this.Il=n;for(a=0;a<this.Fg.length;a++)this.Fg[a]=n;if(0<this.B.ka.count){this.B.qv();for(a=this.B.mc.l;a.next();)a.value.wb=p;switch(this.Gm){default:case Pn:var b=0,c=this.B.ka.count-1,a=[];a.length=c+1;for(var d=this.B.ka.l;d.next();)d.value.Da=h;for(;Qn(this.B)!==n;){for(d=Rn(this.B);d!==n;)a[c]=d,c--,d.Da=p,d=Rn(this.B);for(d=Sn(this.B);d!==
n;)a[b]=d,b++,d.Da=p,d=Sn(this.B);u&&w.i(this.B,Wm,X,"greedyCycleRemovalFindNodeMaxDegDiff:network");for(var d=n,e=0,g=this.B.ka.l;g.next();){var i=g.value;if(i.Da){for(var j=0,k=i.Gb;k.next();)k.value.S.Da&&j++;for(var k=0,l=i.Hb;l.next();)l.value.W.Da&&k++;if(d===n||e<j-k)d=i,e=j-k}}d!==n&&(a[b]=d,b++,d.Da=p)}for(b=0;b<this.B.ka.count;b++)a[b].ea=b;for(a=this.B.mc.l;a.next();)b=a.value,b.W.ea>b.S.ea&&(this.B.Wv(b),b.wb=h);break;case Jn:for(b=this.B.ka.l;b.next();)b.value.jk=-1,b.value.Nm=-1;for(a=
this.B.mc.l;a.next();)a.value.zp=p;this.zq=0;for(b.reset();b.next();)0===b.value.Hb.count&&Tn(this,b.value);for(b.reset();b.next();)-1===b.value.jk&&Tn(this,b.value);for(a.reset();a.next();)b=a.value,b.zp||(c=b.W,d=c.Nm,e=b.S,g=e.Nm,e.jk<c.jk&&d<g&&(this.B.Wv(b),b.wb=h))}for(a=this.B.ka.l;a.next();)b=a.value,b.G=-1;this.bb=-1;this.assignLayers();for(a.reset();a.next();)this.bb=Math.max(this.bb,a.value.G);c=this.B.mc.l;for(b=[];c.next();)a=c.value,a.Da=p,b.push(a);for(c=0;c<b.length;c++)if(a=b[c],
!a.Da&&!((a.W.fb===n||a.S.fb===n)&&a.W.G===a.S.G)){g=j=i=k=0;e=a.W;d=a.S;if(a.Ra!==n){j=a.Ra;if(j===n)continue;var m=e.fb,g=d.fb;if(m===n||g===n)continue;var q=j.ga,i=j.la,r=j.Pc,k=j.Cd;a.wb&&(j=q,l=r,q=i,r=k,i=j,k=l);var l=e.K.copy(),j=a.S.K.copy(),s=a.wb?d.L.copy():e.L.copy(),r=isNaN(s.x)?l.copy():Jl(q,r,Ob);m!==q&&(!isNaN(s.x)&&q.mb())&&(m=e.L.copy(),isNaN(m.x)||(r.x+=s.x-m.x,r.y+=s.y-m.y));m=a.wb?e.L.copy():d.L.copy();k=isNaN(m.x)?j.copy():Jl(i,k,Ob);g!==i&&(!isNaN(m.x)&&i.mb())&&(g=d.L,isNaN(g.x)||
(k.x+=m.x-g.x,k.y+=m.y-g.y));90===this.da||270===this.da?(g=Math.round((r.x-l.x)/this.od),i=r.x,j=Math.round((k.x-j.x)/this.od),k=k.x):(g=Math.round((r.y-l.y)/this.od),i=r.y,j=Math.round((k.y-j.y)/this.od),k=k.y);a.Ge=g;a.nf=i;a.He=j;a.pf=k}else a.Ge=0,a.nf=0,a.He=0,a.pf=0;l=e.G;r=d.G;m=a;u&&w.i(m,Un,X,"_goesAround:edge");q=0;s=m.Ra;if(s!==n){if(s.Pc!==n){var v=s.ga;om(s)===Vn(this,m,h)?q+=1:this.qm&&v!==n&&1===v.ports.count&&m.wb&&(q+=1)}s.Cd!==n&&(v=s.la,pm(s)===Vn(this,m,p)?q+=2:this.qm&&v!==n&&
1===v.ports.count&&m.wb&&(q+=2))}m=1===q||3===q?h:p;if(q=2===q||3===q?h:p)s=this.B.Bj(),s.fb=n,s.jl=1,s.G=l,s.jj=e,this.B.Hk(s),e=this.B.km(e,s,a.Ra),e.Da=p,e.wb=a.wb,e.Ge=g,e.He=0,e.nf=i,e.pf=0,e=s;v=1;m&&v--;if(l-r>v&&0<l){a.Da=p;s=this.B.Bj();s.fb=n;s.jl=2;s.G=l-1;this.B.Hk(s);e=this.B.km(e,s,a.Ra);e.Da=h;e.wb=a.wb;e.Ge=q?0:g;e.He=0;e.nf=q?0:i;e.pf=0;e=s;for(l--;l-r>v&&0<l;)s=this.B.Bj(),s.fb=n,s.jl=3,s.G=l-1,this.B.Hk(s),e=this.B.km(e,s,a.Ra),e.Da=h,e.wb=a.wb,e.Ge=0,e.He=0,e.nf=0,e.pf=0,e=s,l--;
e=this.B.km(s,d,a.Ra);e.Da=!m;m&&(s.jj=d);e.wb=a.wb;e.Ge=0;e.He=j;e.nf=0;e.pf=k}else a.Da=h}b=this.pd=[];for(c=0;c<=this.bb;c++)b[c]=0;for(a=this.B.ka.l;a.next();)a.value.ea=-1;this.initializeIndices();this.Wt=-1;for(c=this.hf=this.sq=0;c<=this.bb;c++)b[c]>b[this.hf]&&(this.Wt=b[c]-1,this.hf=c),b[c]<b[this.sq]&&(this.sq=c);this.Aq=[];for(c=0;c<b.length;c++)this.Aq[c]=[];for(a.reset();a.next();)c=a.value,b=c.G,this.Aq[b][c.ea]=c;this.ob=-1;for(a=0;a<=this.bb;a++){b=Wn(this,a);c=0;d=this.pd[a];for(e=
0;e<d;e++)g=b[e],c+=Xn(this,g,h),g.Z=c,c+=1,c+=Xn(this,g,p);this.ob=Math.max(this.ob,c-1);Yn(this,a,b)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.Qc=n;this.Ue=h};function Zn(a){u&&w.i(a,an,X,"linkMinLength:edge");for(var b=a.S,c=0,a=a.W.Gb;a.next();)a.value.S===b&&c++;return 1<c?2:1}function $n(a){u&&w.i(a,an,X,"linkLengthWeight:edge");return 1}function ao(a){u&&w.i(a,an,X,"linkStraightenWeight:edge");var b=a.W.fb,a=a.S.fb;return b===n&&a===n?8:b===n||a===n?4:1}
function bo(a,b,c){u&&(w.i(b,co,X,"nodeMinLayerSpace:v"),w.k(c,"boolean",X,"nodeMinLayerSpace:topleft"));return b.fb===n?0:90===a.da||270===a.da?c?b.K.y+10:b.L.height-b.K.y+10:c?b.K.x+10:b.L.width-b.K.x+10}
function Xn(a,b,c){u&&(w.i(b,co,X,"nodeMinColumnSpace:v"),w.k(c,"boolean",X,"nodeMinColumnSpace:topleft"));if(b.fb===n)return 0;var d=c?b.Kx:b.Jx;if(d!==f)return d;d=a.da;return 90===d||270===d?c?b.Kx=b.K.x/a.od+1|0:b.Jx=(b.L.width-b.K.x)/a.od+1|0:c?b.Kx=b.K.y/a.od+1|0:b.Jx=(b.L.height-b.K.y)/a.od+1|0}function eo(a){a.Il===n&&(a.Il=[]);for(var b=0,c=a.B.ka.l,d;c.next();)d=c.value,a.Il[b]=d.G,b++,a.Il[b]=d.Z,b++,a.Il[b]=d.ea,b++;return a.Il}
function fo(a,b){u&&w.i(b,Array,X,"restoreLayout:layout");for(var c=0,d=a.B.ka.l,e;d.next();)e=d.value,e.G=b[c],c++,e.Z=b[c],c++,e.ea=b[c],c++}
function ho(a,b,c){u&&(w.o(b,X,"crossingMatrix:unfixedLayer"),w.o(c,X,"crossingMatrix:direction"));var d=Wn(a,b),e=a.pd[b];a.eu||(a.eu=[]);for(var g=a.eu,i,j=0;j<e;j++){i=0;var k=d[j],l=k.jj,m,q;if(l!==n&&l.G===k.G)if(k=l.ea,k>j)for(q=j+1;q<k;q++)m=d[q],(m.jj!==l||m.jl!==l.jl)&&i++;else for(q=j-1;q>k;q--)m=d[q],(m.jj!==l||m.jl!==l.jl)&&i++;var r,s,v,y,C,E;if(0<=c){k=d[j].Tf;for(l=0;l<k.count;l++)if(r=k.n[l],r.Da&&r.W.G!==b){m=r.W.ea;q=r.pf;r=r.nf;for(s=l+1;s<k.count;s++)v=k.n[s],v.Da&&v.W.G!==b&&
(y=v.W.ea,C=v.pf,v=v.nf,q<C&&(m>y||m===y&&r>v)&&i++,C<q&&(y>m||y===m&&v>r)&&i++)}}if(0>=c){k=d[j].df;for(l=0;l<k.count;l++)if(r=k.n[l],r.Da&&r.S.G!==b){m=r.S.ea;q=r.pf;r=r.nf;for(s=l+1;s<k.count;s++)v=k.n[s],v.Da&&v.S.G!==b&&(y=v.S.ea,C=v.pf,v=v.nf,r<v&&(m>y||m===y&&q>C)&&i++,v<r&&(y>m||y===m&&C>q)&&i++)}}g[j*e+j]=i;for(k=j+1;k<e;k++){var I=0,D=0;if(0<=c){i=d[j].Tf;E=d[k].Tf;for(l=0;l<i.count;l++)if(r=i.n[l],r.Da&&r.W.G!==b){m=r.W.ea;r=r.nf;for(s=0;s<E.count;s++)v=E.n[s],v.Da&&v.W.G!==b&&(y=v.W.ea,
v=v.nf,(m<y||m===y&&r<v)&&D++,(y<m||y===m&&v<r)&&I++)}}if(0>=c){i=d[j].df;E=d[k].df;for(l=0;l<i.count;l++)if(r=i.n[l],r.Da&&r.S.G!==b){m=r.S.ea;q=r.pf;for(s=0;s<E.count;s++)v=E.n[s],v.Da&&v.S.G!==b&&(y=v.S.ea,C=v.pf,(m<y||m===y&&q<C)&&D++,(y<m||y===m&&C<q)&&I++)}}g[j*e+k]=I;g[k*e+j]=D}}Yn(a,b,d);return g}X.prototype.countCrossings=X.prototype.JJ=function(){var a,b=0,c,d;for(a=0;a<=this.bb;a++){c=ho(this,a,1);d=this.pd[a];for(var e=0;e<d;e++)for(var g=e;g<d;g++)b+=c[e*d+g]}return b};
function io(a){u&&w.k(h,"boolean",X,"countBends:weighted");for(var b=0,c=0;c<=a.bb;c++){var d=a,e=c;u&&(w.o(e,X,"bends:unfixedLayer"),w.o(1,X,"bends:direction"),w.k(h,"boolean",X,"bends:weighted"));for(var g=Wn(d,e),i=d.pd[e],j=0,k=f,k=0;k<i;k++){var l=g[k].df,m,q,r;if("undefined"!==typeof l)for(var s=0;s<l.count;s++)m=l.n[s],m.Da&&m.S.G!==e&&(q=m.W.Z+m.Ge,r=m.S.Z+m.He,j+=(Math.abs(q-r)+1)*ao(m))}Yn(d,e,g);b+=j}return b}
X.prototype.normalize=function(){var a=Infinity;this.ob=-1;for(var b=this.B.ka.l,c;b.next();)c=b.value,a=Math.min(a,c.Z-Xn(this,c,h)),this.ob=Math.max(this.ob,c.Z+Xn(this,c,p));for(b.reset();b.next();)b.value.Z-=a;this.ob-=a};
function ro(a,b,c){u&&(w.o(b,X,"barycenters:unfixedLayer"),w.o(c,X,"barycenters:direction"));var d=Wn(a,b),e=a.pd[b],g=[],i;for(i=0;i<e;i++){var j=d[i],k=n;0>=c&&(k=j.Tf);var l=n;0<=c&&(l=j.df);var m=0,q=0,r=j.jj;r!==n&&r.G===j.G&&(m+=r.Z-1,q++);if(k!==n)for(r=0;r<k.count;r++){var j=k.n[r],s=j.W;j.Da&&(!j.wb&&s.G!==b)&&(m+=s.Z+j.Ge,q++)}if(l!==n)for(k=0;k<l.count;k++)j=l.n[k],r=j.S,j.Da&&(!j.wb&&r.G!==b)&&(m+=r.Z+j.He,q++);g[i]=0===q?-1:m/q}Yn(a,b,d);return g}
function yo(a,b,c){u&&(w.o(b,X,"medians:unfixedLayer"),w.o(c,X,"medians:direction"));for(var d=Wn(a,b),e=a.pd[b],g=[],i=0;i<e;i++){var j=d[i],k=n;0>=c&&(k=j.Tf);var l=n;0<=c&&(l=j.df);var m=0,q=[],r=j.jj;r!==n&&r.G===j.G&&(q[m]=r.Z-1,m++);if(k!==n)for(r=0;r<k.count;r++){var j=k.n[r],s=j.W;j.Da&&(!j.wb&&s.G!==b)&&(q[m]=s.Z+j.Ge,m++)}if(l!==n)for(k=0;k<l.count;k++)j=l.n[k],r=j.S,j.Da&&(!j.wb&&r.G!==b)&&(q[m]=r.Z+j.He,m++);0===m?g[i]=-1:(q.sort(function(a,b){return a-b}),l=m>>1,g[i]=m&1?q[l]:q[l-1]+
q[l]>>1)}Yn(a,b,d);return g}function zo(a,b,c,d,e,g){u&&(w.i(b,co,X,"tightComponentUnset:v"),w.o(c,X,"tightComponentUnset:component"),w.o(d,X,"tightComponentUnset:unset"),w.k(e,"boolean",X,"tightComponentUnset:forward"),w.k(g,"boolean",X,"tightComponentUnset:backward"));if(b.Kb===d){b.Kb=c;var i,j;if(e)for(var k=b.Gb;k.next();){var l=k.value.S;i=b.G-l.G;j=Zn(k.value);i===j&&zo(a,l,c,d,e,g)}if(g)for(k=b.Hb;k.next();)l=k.value.W,i=l.G-b.G,j=Zn(k.value),i===j&&zo(a,l,c,d,e,g)}}
function Ao(a,b,c,d,e,g){u&&(w.i(b,co,X,"componentUnset:v"),w.o(c,X,"componentUnset:component"),w.o(d,X,"componentUnset:unset"),w.k(e,"boolean",X,"componentUnset:forward"),w.k(g,"boolean",X,"componentUnset:backward"));if(b.Kb===d){b.Kb=c;if(e)for(var i=b.Gb,j;i.next();)j=i.value.S,Ao(a,j,c,d,e,g);if(g)for(b=b.Hb;b.next();)i=b.value.W,Ao(a,i,c,d,e,g)}}function Qn(a){u&&w.i(a,Wm,X,"greedyCycleRemovalFindNode:network");for(a=a.ka.l;a.next();){var b=a.value;if(b.Da)return b}return n}
function Rn(a){u&&w.i(a,Wm,X,"greedyCycleRemovalFindSink:network");for(a=a.ka.l;a.next();){var b=a.value;if(b.Da){for(var c=h,d=b.Gb;d.next();)if(d.value.S.Da){c=p;break}if(c)return b}}return n}function Sn(a){u&&w.i(a,Wm,X,"greedyCycleRemovalFindSource:network");for(a=a.ka.l;a.next();){var b=a.value;if(b.Da){for(var c=h,d=b.Hb;d.next();)if(d.value.W.Da){c=p;break}if(c)return b}}return n}
function Tn(a,b){u&&w.i(b,co,X,"depthFirstSearchCycleRemovalVisit:v");b.jk=a.zq;a.zq++;for(var c=b.Gb;c.next();){var d=c.value,e=d.S;-1===e.jk&&(d.zp=h,Tn(a,e))}b.Nm=a.zq;a.zq++}
X.prototype.assignLayers=X.prototype.II=function(){switch(this.Zm){case Bo:Co(this);break;case Do:for(var a,b=this.B.ka.l;b.next();)a=Eo(this,b.value),this.bb=Math.max(a,this.bb);for(b.reset();b.next();)a=b.value,a.G=this.bb-a.G;break;default:case Kn:Co(this);for(b=this.B.ka.l;b.next();)b.value.Da=p;for(b.reset();b.next();)0===b.value.Hb.count&&Fo(this,b.value);a=Infinity;for(b.reset();b.next();)a=Math.min(a,b.value.G);this.bb=-1;for(b.reset();b.next();)b.value.G-=a,this.bb=Math.max(this.bb,b.value.G)}};
function Co(a){for(var b=a.B.ka.l;b.next();){var c=Go(a,b.value);a.bb=Math.max(c,a.bb)}}function Go(a,b){u&&w.i(b,co,X,"longestPathSinkLayeringLength:v");var c=0;if(-1===b.G){for(var d=b.Gb;d.next();)var e=d.value,g=Zn(e),c=Math.max(c,Go(a,e.S)+g);b.G=c}else c=b.G;return c}function Eo(a,b){u&&w.i(b,co,X,"longestPathSourceLayeringLength:v");var c=0;if(-1===b.G){for(var d,e,g=b.Hb;g.next();)e=g.value,d=Zn(e),c=Math.max(c,Eo(a,e.W)+d);b.G=c}else c=b.G;return c}
function Fo(a,b){u&&w.i(b,co,X,"optimalLinkLengthLayeringDepthFirstSearch:v");if(!b.Da){b.Da=h;for(var c=b.Gb;c.next();)Fo(a,c.value.S);u&&w.i(b,co,X,"optimalLinkLengthLayeringPull:v");for(c=a.B.ka.l;c.next();)c.value.Kb=-1;for(var d=b.Hb;d.next();){var e=d.value,g=Zn(e);e.W.G-e.S.G>g&&zo(a,e.W,0,-1,h,p)}for(zo(a,b,1,-1,h,h);0!==b.Kb;){for(var g=0,d=Infinity,i=0,j=n,k=a.B.ka.l;k.next();){var l=k.value;if(1===l.Kb){for(var m=0,q=p,r=l.Hb;r.next();){var e=r.value,s=e.W,m=m+$n(e);1!==s.Kb&&(g+=$n(e),
s=s.G-l.G,e=Zn(e),d=Math.min(d,s-e))}for(e=l.Gb;e.next();)r=e.value,s=r.S,m-=$n(r),1!==s.Kb?g-=$n(r):q=h;if((j===n||m<i)&&!q)j=l,i=m}}if(0<g){for(c.reset();c.next();)g=c.value,1===g.Kb&&(g.G+=d);b.Kb=0}else j.Kb=0}u&&w.i(b,co,X,"optimalLinkLengthLayeringPush:v");for(c=a.B.ka.l;c.next();)c.value.Kb=-1;for(zo(a,b,1,-1,h,p);0!==b.Kb;){g=0;d=Infinity;i=0;j=n;for(k=a.B.ka.l;k.next();)if(l=k.value,1===l.Kb){m=0;q=p;for(e=l.Hb;e.next();)r=e.value.W,m+=$n(e.value),1!==r.Kb?g+=$n(e.value):q=h;for(e=k.value.Gb;e.next();)r=
e.value,s=r.S,m-=$n(r),1!==s.Kb&&(g-=$n(r),s=l.G-s.G,r=Zn(r),d=Math.min(d,s-r));if((j===n||m>i)&&!q)j=l,i=m}if(0>g){for(c.reset();c.next();)g=c.value,1===g.Kb&&(g.G-=d);b.Kb=0}else j.Kb=0}}}function Vn(a,b,c){u&&(w.i(b,Un,X,"_oppositeSpotDir:edge"),w.k(c,"boolean",X,"_oppositeSpotDir:from"));return 90===a.da?c&&!b.wb||!c&&b.wb?Kb:Qb:180===a.da?c&&!b.wb||!c&&b.wb?Zb:Tb:270===a.da?c&&!b.wb||!c&&b.wb?Qb:Kb:c&&!b.wb||!c&&b.wb?Tb:Zb}
X.prototype.initializeIndices=X.prototype.bL=function(){switch(this.Tm){default:case Ho:for(var a,b=this.B.ka.l;b.next();){var c=b.value;a=c.G;c.ea=this.pd[a];this.pd[a]++}break;case Ln:b=this.B.ka.l;for(a=this.bb;0<=a;a--){for(;b.next();)b.value.G===a&&-1===b.value.ea&&Io(this,b.value);b.reset()}break;case Jo:b=this.B.ka.l;for(a=0;a<=this.bb;a++){for(;b.next();)b.value.G===a&&-1===b.value.ea&&Ko(this,b.value);b.reset()}}};
function Io(a,b){u&&w.i(b,co,X,"depthFirstOutInitializeIndicesVisit:v");var c=b.G;b.ea=a.pd[c];a.pd[c]++;for(var c=b.df.sg(),d=h,e;d;){d=p;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];g.Ge>i.Ge&&(d=h,c[e]=i,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.Da&&(d=d.S,-1===d.ea&&Io(a,d))}
function Ko(a,b){u&&w.i(b,co,X,"depthFirstInInitializeIndicesVisit:v");var c=b.G;b.ea=a.pd[c];a.pd[c]++;for(var c=b.Tf.sg(),d=h,e;d;){d=p;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];g.He>i.He&&(d=h,c[e]=i,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.Da&&(d=d.W,-1===d.ea&&Ko(a,d))}
X.prototype.reduceCrossings=X.prototype.TL=function(){var a=this.countCrossings(),b=eo(this),c,d,e;for(c=0;c<this.Cl;c++){for(d=0;d<=this.bb;d++)Lo(this,d,1),Mo(this,d,1,1);e=this.countCrossings();e<a&&(a=e,b=eo(this));for(d=this.bb;0<=d;d--)Lo(this,d,-1),Mo(this,d,-1,-1);e=this.countCrossings();e<a&&(a=e,b=eo(this))}fo(this,b);for(c=0;c<this.Cl;c++){for(d=0;d<=this.bb;d++)Lo(this,d,0),Mo(this,d,0,0);e=this.countCrossings();e<a&&(a=e,b=eo(this));for(d=this.bb;0<=d;d--)Lo(this,d,0),Mo(this,d,0,0);
e=this.countCrossings();e<a&&(a=e,b=eo(this))}fo(this,b);var g,i,j;switch(this.ym){case No:break;case Oo:for(j=a+1;(d=this.countCrossings())<j;){j=d;for(c=this.bb;0<=c;c--)for(i=0;i<=c;i++){for(g=h;g;){g=p;for(d=c;d>=i;d--)g=Mo(this,d,-1,-1)||g}e=this.countCrossings();e>=a?fo(this,b):(a=e,b=eo(this));for(g=h;g;){g=p;for(d=c;d>=i;d--)g=Mo(this,d,1,1)||g}e=this.countCrossings();e>=a?fo(this,b):(a=e,b=eo(this));for(g=h;g;){g=p;for(d=i;d<=c;d++)g=Mo(this,d,1,1)||g}e>=a?fo(this,b):(a=e,b=eo(this));for(g=
h;g;){g=p;for(d=i;d<=c;d++)g=Mo(this,d,-1,-1)||g}e>=a?fo(this,b):(a=e,b=eo(this));for(g=h;g;){g=p;for(d=c;d>=i;d--)g=Mo(this,d,0,0)||g}e>=a?fo(this,b):(a=e,b=eo(this));for(g=h;g;){g=p;for(d=i;d<=c;d++)g=Mo(this,d,0,0)||g}e>=a?fo(this,b):(a=e,b=eo(this))}}break;default:case Mn:c=this.bb;i=0;for(j=a+1;(d=this.countCrossings())<j;){j=d;for(g=h;g;){g=p;for(d=c;d>=i;d--)g=Mo(this,d,-1,-1)||g}e=this.countCrossings();e>=a?fo(this,b):(a=e,b=eo(this));for(g=h;g;){g=p;for(d=c;d>=i;d--)g=Mo(this,d,1,1)||g}e=
this.countCrossings();e>=a?fo(this,b):(a=e,b=eo(this));for(g=h;g;){g=p;for(d=i;d<=c;d++)g=Mo(this,d,1,1)||g}e>=a?fo(this,b):(a=e,b=eo(this));for(g=h;g;){g=p;for(d=i;d<=c;d++)g=Mo(this,d,-1,-1)||g}e>=a?fo(this,b):(a=e,b=eo(this));for(g=h;g;){g=p;for(d=c;d>=i;d--)g=Mo(this,d,0,0)||g}e>=a?fo(this,b):(a=e,b=eo(this));for(g=h;g;){g=p;for(d=i;d<=c;d++)g=Mo(this,d,0,0)||g}e>=a?fo(this,b):(a=e,b=eo(this))}}fo(this,b)};
function Lo(a,b,c){u&&(w.o(b,X,"medianBarycenterCrossingReduction:unfixedLayer"),w.o(c,X,"medianBarycenterCrossingReduction:direction"));for(var d=Wn(a,b),e=a.pd[b],g=yo(a,b,c),i=ro(a,b,c),c=0;c<e;c++)-1===i[c]&&(i[c]=d[c].Z),-1===g[c]&&(g[c]=d[c].Z);for(var j=h,k;j;){j=p;for(c=0;c<e-1;c++)if(g[c+1]<g[c]||g[c+1]===g[c]&&i[c+1]<i[c])j=h,k=g[c],g[c]=g[c+1],g[c+1]=k,k=i[c],i[c]=i[c+1],i[c+1]=k,k=d[c],d[c]=d[c+1],d[c+1]=k}for(c=g=0;c<e;c++)k=d[c],k.ea=c,g+=Xn(a,k,h),k.Z=g,g+=1,g+=Xn(a,k,p);Yn(a,b,d)}
function Mo(a,b,c,d){u&&(w.o(b,X,"adjacentExchangeCrossingReductionBendStraighten:unfixedLayer"),w.o(c,X,"adjacentExchangeCrossingReductionBendStraighten:directionCR"),w.k(p,"boolean",X,"adjacentExchangeCrossingReductionBendStraighten:straighten"),w.o(d,X,"adjacentExchangeCrossingReductionBendStraighten:directionBS"));var d=Wn(a,b),e=a.pd[b],c=ho(a,b,c),g,i;i=[];for(g=0;g<e;g++)i[g]=-1;var j;j=[];for(g=0;g<e;g++)j[g]=-1;for(var k=p,l=h;l;){l=p;for(g=0;g<e-1;g++){var m=c[d[g].ea*e+d[g+1].ea],q=c[d[g+
1].ea*e+d[g].ea],r=0,s=0,v=d[g].Z,y=d[g+1].Z,C=Xn(a,d[g],h),E=Xn(a,d[g],p),I=Xn(a,d[g+1],h),D=Xn(a,d[g+1],p),C=v-C+I,E=y-E+D,M=d[g].Hb.l;for(M.reset();M.next();)if(D=M.value,D.Da&&D.W.G===b){D=D.W;for(I=0;d[I]!==D;)I++;I<g&&(r+=2*(g-I),s+=2*(g+1-I));I===g+1&&(r+=1);I>g+1&&(r+=4*(I-g),s+=4*(I-(g+1)))}M=d[g].Gb.l;for(M.reset();M.next();)if(D=M.value,D.Da&&D.S.G===b){D=D.S;for(I=0;d[I]!==D;)I++;I===g+1&&(s+=1)}M=d[g+1].Hb.l;for(M.reset();M.next();)if(D=M.value,D.Da&&D.W.G===b){D=D.W;for(I=0;d[I]!==D;)I++;
I<g&&(r+=2*(g+1-I),s+=2*(g-I));I===g&&(s+=1);I>g+1&&(r+=4*(I-(g+1)),s+=4*(I-g))}M=d[g+1].Gb.l;for(M.reset();M.next();)if(D=M.value,D.Da&&D.S.G===b){D=D.S;for(I=0;d[I]!==D;)I++;I===g&&(r+=1)}var I=D=0,M=i[d[g].ea],N=j[d[g].ea],Z=i[d[g+1].ea],va=j[d[g+1].ea];-1!==M&&(D+=Math.abs(M-v),I+=Math.abs(M-E));-1!==N&&(D+=Math.abs(N-v),I+=Math.abs(N-E));-1!==Z&&(D+=Math.abs(Z-y),I+=Math.abs(Z-C));-1!==va&&(D+=Math.abs(va-y),I+=Math.abs(va-C));if(s<r-0.5||s===r&&q<m-0.5||s===r&&q===m&&I<D-0.5)l=k=h,d[g].Z=E,
d[g+1].Z=C,m=d[g],d[g]=d[g+1],d[g+1]=m}}for(g=0;g<e;g++)d[g].ea=g;Yn(a,b,d);return k}
X.prototype.straightenAndPack=X.prototype.rM=function(){var a,b,c=0!==(this.ni&Po);a=this.ni===Nn;1E3<this.B.mc.count&&!a&&(c=p);if(c){b=[];for(a=0;a<=this.bb;a++)b[a]=0;for(var d=this.B.ka.l,e,g;d.next();)e=d.value,a=e.G,g=e.Z,e=Xn(this,e,p),b[a]=Math.max(b[a],g+e);for(d.reset();d.next();)e=d.value,a=e.G,g=e.Z,e.Z=(8*(this.ob-b[a])>>1)+8*g;this.ob*=8}if(0!==(this.ni&Qo))for(b=h;b;){b=p;for(a=this.hf+1;a<=this.bb;a++)b=Ro(this,a,1)||b;for(a=this.hf-1;0<=a;a--)b=Ro(this,a,-1)||b;b=Ro(this,this.hf,
0)||b}if(0!==(this.ni&So)){for(a=this.hf+1;a<=this.bb;a++)To(this,a,1);for(a=this.hf-1;0<=a;a--)To(this,a,-1);To(this,this.hf,0)}c&&(Uo(this,-1),Uo(this,1));if(0!==(this.ni&Qo))for(b=h;b;){b=p;b=Ro(this,this.hf,0)||b;for(a=this.hf+1;a<=this.bb;a++)b=Ro(this,a,0)||b;for(a=this.hf-1;0<=a;a--)b=Ro(this,a,0)||b}};function Ro(a,b,c){u&&(w.o(b,X,"bendStraighten:unfixedLayer"),w.o(c,X,"bendStraighten:direction"));for(var d=p;Vo(a,b,c);)d=h;return d}
function Vo(a,b,c){u&&(w.o(b,X,"shiftbendStraighten:unfixedLayer"),w.o(c,X,"shiftbendStraighten:direction"));var d,e=Wn(a,b),g=a.pd[b],i=ro(a,b,-1);if(0<c)for(d=0;d<g;d++)i[d]=-1;var j=ro(a,b,1);if(0>c)for(d=0;d<g;d++)j[d]=-1;for(var k=p,l=h;l;){l=p;for(d=0;d<g;d++){var m=e[d].Z,q=Xn(a,e[d],h),r=Xn(a,e[d],p),q=0>d-1||m-e[d-1].Z-1>q+Xn(a,e[d-1],p)?m-1:m,r=d+1>=g||e[d+1].Z-m-1>r+Xn(a,e[d+1],h)?m+1:m,s=0,v=0,y=0,C,E,I,D;if(0>=c)for(var M=e[d].Hb.l;M.next();)C=M.value,C.Da&&C.W.G!==b&&(E=ao(C),I=C.Ge,
D=C.He,C=C.W.Z,s+=(Math.abs(m+D-(C+I))+1)*E,v+=(Math.abs(q+D-(C+I))+1)*E,y+=(Math.abs(r+D-(C+I))+1)*E);if(0<=c)for(M=e[d].Gb.l;M.next();)C=M.value,C.Da&&C.S.G!==b&&(E=ao(C),I=C.Ge,D=C.He,C=C.S.Z,s+=(Math.abs(m+I-(C+D))+1)*E,v+=(Math.abs(q+I-(C+D))+1)*E,y+=(Math.abs(r+I-(C+D))+1)*E);D=I=E=0;C=i[e[d].ea];M=j[e[d].ea];-1!==C&&(E+=Math.abs(C-m),I+=Math.abs(C-q),D+=Math.abs(C-r));-1!==M&&(E+=Math.abs(M-m),I+=Math.abs(M-q),D+=Math.abs(M-r));if(v<s||v===s&&I<E)l=k=h,e[d].Z=q;if(y<s||y===s&&D<E)l=k=h,e[d].Z=
r}}Yn(a,b,e);a.normalize();return k}
function To(a,b,c){u&&(w.o(b,X,"medianStraighten:unfixedLayer"),w.o(c,X,"medianStraighten:direction"));for(var d=Wn(a,b),e=a.pd[b],g=yo(a,b,c),i=[],c=0;c<e;c++)i[c]=g[c];for(g=h;g;){g=p;for(c=0;c<e;c++){var j=d[c].Z,k=Xn(a,d[c],h),l=Xn(a,d[c],p),m=0,q;-1===i[c]?0===c&&c===e-1?m=j:0===c?(q=d[c+1].Z,m=q-j===l+Xn(a,d[c+1],h)?j-1:j):c===e-1?(q=d[c-1].Z,m=j-q===k+Xn(a,d[c-1],p)?j+1:j):(q=d[c-1].Z,k=q+Xn(a,d[c-1],p)+k+1,q=d[c+1].Z,l=q-Xn(a,d[c+1],h)-l-1,m=(k+l)/2|0):0===c&&c===e-1?m=i[c]:0===c?(q=d[c+1].Z,
l=q-Xn(a,d[c+1],h)-l-1,m=Math.min(i[c],l)):c===e-1?(q=d[c-1].Z,k=q+Xn(a,d[c-1],p)+k+1,m=Math.max(i[c],k)):(q=d[c-1].Z,k=q+Xn(a,d[c-1],p)+k+1,q=d[c+1].Z,l=q-Xn(a,d[c+1],h)-l-1,k<i[c]&&i[c]<l?m=i[c]:k>=i[c]?m=k:l<=i[c]&&(m=l));m!==j&&(g=h,d[c].Z=m)}}Yn(a,b,d);a.normalize()}
function Wo(a,b){u&&(w.o(b,X,"packAux:column"),w.o(1,X,"packAux:direction"));for(var c=h,d=a.B.ka.l,e;d.next();){e=d.value;var g=Xn(a,e,h),i=Xn(a,e,p);if(e.Z-g<=b&&e.Z+i>=b){c=p;break}}g=p;if(c)for(d.reset();d.next();)e=d.value,e.Z>b&&(e.Z-=1,g=h);return g}
function Xo(a,b){u&&(w.o(b,X,"tightPackAux:column"),w.o(1,X,"tightPackAux:direction"));var c=b,c=b+1,d,e=[],g=[];for(d=0;d<=a.bb;d++)e[d]=p,g[d]=p;for(var i=a.B.ka.l;i.next();){d=i.value;var j=d.Z-Xn(a,d,h),k=d.Z+Xn(a,d,p);j<=b&&k>=b&&(e[d.G]=h);j<=c&&k>=c&&(g[d.G]=h)}j=h;c=p;for(d=0;d<=a.bb;d++)j=j&&!(e[d]&&g[d]);if(j)for(i.reset();i.next();)d=i.value,d.Z>b&&(d.Z-=1,c=h);return c}
function Uo(a,b){u&&w.o(b,X,"componentPack:direction");for(var c=0;c<=a.ob;c++)for(;Wo(a,c););a.normalize();for(c=0;c<a.ob;c++)for(;Xo(a,c););a.normalize();var d,e,g,i;if(0<b)for(c=0;c<=a.ob;c++){d=eo(a);e=io(a);for(g=e+1;e<g;)g=e,Yo(a,c,1),i=io(a),i>e?fo(a,d):i<e&&(e=i,d=eo(a))}if(0>b)for(c=a.ob;0<=c;c--){d=eo(a);e=io(a);for(g=e+1;e<g;)g=e,Yo(a,c,-1),i=io(a),i>e?fo(a,d):i<e&&(e=i,d=eo(a))}a.normalize()}
function Yo(a,b,c){u&&(w.o(b,X,"componentPackAux:column"),w.o(c,X,"componentPackAux:direction"));a.Pf=0;for(var d=a.B.ka.l,e;d.next();)d.value.Kb=-1;if(0<c)for(d.reset();d.next();)e=d.value,e.Z-Xn(a,e,h)<=b&&(e.Kb=a.Pf);if(0>c)for(d.reset();d.next();)e=d.value,e.Z+Xn(a,e,p)>=b&&(e.Kb=a.Pf);a.Pf++;for(d.reset();d.next();)e=d.value,-1===e.Kb&&(Ao(a,e,a.Pf,-1,h,h),a.Pf++);b=[];for(e=0;e<a.Pf*a.Pf;e++)b[e]=p;var g=[];for(e=0;e<(a.bb+1)*(a.ob+1);e++)g[e]=-1;for(d.reset();d.next();){e=d.value;for(var i=
e.G,j=Math.max(0,e.Z-Xn(a,e,h)),k=Math.min(a.ob,e.Z+Xn(a,e,p));j<=k;j++)g[i*(a.ob+1)+j]=e.Kb}for(e=0;e<=a.bb;e++){if(0<c)for(j=0;j<a.ob;j++)-1!==g[e*(a.ob+1)+j]&&(-1!==g[e*(a.ob+1)+j+1]&&g[e*(a.ob+1)+j]!==g[e*(a.ob+1)+j+1])&&(b[g[e*(a.ob+1)+j]*a.Pf+g[e*(a.ob+1)+j+1]]=h);if(0>c)for(j=a.ob;0<j;j--)-1!==g[e*(a.ob+1)+j]&&(-1!==g[e*(a.ob+1)+j-1]&&g[e*(a.ob+1)+j]!==g[e*(a.ob+1)+j-1])&&(b[g[e*(a.ob+1)+j]*a.Pf+g[e*(a.ob+1)+j-1]]=h)}g=[];for(e=0;e<a.Pf;e++)g[e]=h;i=new z("number");for(i.add(0);0!==i.count;)if(k=
i.n[i.count-1],i.Ye(i.count-1),g[k]){g[k]=p;for(e=0;e<a.Pf;e++)b[k*a.Pf+e]&&i.yc(0,e)}if(0<c)for(d.reset();d.next();)e=d.value,g[e.Kb]&&(e.Z-=1);if(0>c)for(d.reset();d.next();)e=d.value,g[e.Kb]&&(e.Z+=1)}X.prototype.commitLayout=X.prototype.iv=function(){if(this.qm){var a,b;270===this.da?(a=Sb,b=$b):90===this.da?(a=$b,b=Sb):180===this.da?(a=Tb,b=Zb):(a=Zb,b=Tb);for(var c=this.B.mc.l,d;c.next();)d=c.value.Ra,d!==n&&(d.jb=a,d.nb=b)}this.commitNodes();this.ks&&this.commitLinks()};
X.prototype.commitNodes=X.prototype.Vy=function(){this.jh=[];this.Dg=[];this.ff=[];this.qd=[];for(var a=0;a<=this.bb;a++)this.jh[a]=0,this.Dg[a]=0,this.ff[a]=0,this.qd[a]=0;for(var a=this.B.ka.l,b,c;a.next();)b=a.value,c=b.G,this.jh[c]=Math.max(this.jh[c],bo(this,b,h)),this.Dg[c]=Math.max(this.Dg[c],bo(this,b,p));b=0;for(var d=this.Jd,e=0;e<=this.bb;e++)c=d,0>=this.jh[e]+this.Dg[e]&&(c=0),0<e&&(b+=c/2),90===this.da||0===this.da?(b+=this.Dg[e],this.ff[e]=b,b+=this.jh[e]):(b+=this.jh[e],this.ff[e]=
b,b+=this.Dg[e]),e<this.bb&&(b+=c/2),this.qd[e]=b;d=this.kd.copy();for(e=0;e<=this.bb;e++)270===this.da?(this.ff[e]=d.y+this.ff[e],this.qd[e]=d.y+this.qd[e]):90===this.da?(this.ff[e]=d.y+b-this.ff[e],this.qd[e]=d.y+b-this.qd[e]):180===this.da?(this.ff[e]=d.x+this.ff[e],this.qd[e]=d.x+this.qd[e]):(this.ff[e]=d.x+b-this.ff[e],this.qd[e]=d.x+b-this.qd[e]);for(a.reset();a.next();){b=a.value;c=b.G;var g=b.Z|0;270===this.da||90===this.da?(e=d.x+this.od*g,c=this.ff[c]):(e=this.ff[c],c=d.y+this.od*g);b.pa=
e;b.ta=c;b.commit()}};
X.prototype.commitLinks=X.prototype.Uy=function(){for(var a=this.B.mc.l,b,c;a.next();)c=a.value.Ra,"undefined"!==typeof c&&c!==n&&(c.fl(),c.Rn(),c.zi());for(a.reset();a.next();)c=a.value.Ra,"undefined"!==typeof c&&c!==n&&c.iA();for(a.reset();a.next();)if(b=a.value,c=b.Ra){c.fl();var d=c,e=d.ga,g=d.la,i=d.Pc,j=d.Cd;if(b.Da){if(c.yf===hk&&4===c.ja){b.wb&&(d=e,e=g,g=d,d=i,i=j,j=d);var k,l,m,q;if(b.W.Z===b.S.Z)k=c.getLinkPoint(e,i,om(c),h,p,g,j).copy(),l=c.getLinkPoint(g,j,pm(c),p,p,e,i).copy(),m=new F((2*
k.x+l.x)/3,(2*k.y+l.y)/3),q=new F((k.x+2*l.x)/3,(k.y+2*l.y)/3),c.Rn(),c.vd(k),c.vd(m),c.vd(q),c.vd(l);else{d=b=p;i!==n&&om(c)===Gb&&(b=h);j!==n&&pm(c)===Gb&&(d=h);if(b||d)k=c.p(0).copy(),m=c.p(1).copy(),q=c.p(2).copy(),l=c.p(3).copy();b&&(90===this.da||270===this.da?(m.x=k.x,m.y=(k.y+l.y)/2):(m.x=(k.x+l.x)/2,m.y=k.y),c.J(1,m),c.J(0,c.getLinkPoint(e,i,om(c),h,p,g,j).copy()));d&&(90===this.da||270===this.da?(q.x=l.x,q.y=(k.y+l.y)/2):(q.x=(k.x+l.x)/2,q.y=l.y),c.J(2,q),c.J(3,c.getLinkPoint(g,j,pm(c),
p,p,e,i).copy()))}}c.zi()}else if(b.W.G===b.S.G)c.zi();else{var r=p,s=p,v,y=c.Av+1;if(c.fc)s=h,v=c.ja,4<v&&c.points.removeRange(2,v-3);else if(c.yf===hk)r=h,v=c.ja,4<v&&c.points.removeRange(2,v-3),y=2;else{v=c.ja;var C=om(c)===Gb,E=pm(c)===Gb;2<v&&C&&E?c.points.removeRange(1,v-2):3<v&&C&&!E?c.points.removeRange(1,v-3):3<v&&!C&&E?c.points.removeRange(2,v-2):4<v&&(!C&&!E)&&c.points.removeRange(2,v-3)}v=b.W;var E=b.S,I;if(b.wb){for(;E!==n&&v!==E;){I=C=n;for(var D=E.Hb.l;D.next()&&!(M=D.value,M.Ra===
b.Ra&&(C=M.W,I=M.S,C.fb===n)););C!==v&&(M=c.p(y-1).copy(),D=new F(C.pa,C.ta),s?180===this.da||0===this.da?2===y?(c.A(y++,new F(M.x,M.y)),c.A(y++,new F(M.x,D.y))):(I=I!==n?new F(I.pa,I.ta):M.copy(),I.y!==D.y&&(I=this.qd[C.G-1],c.A(y++,new F(I,M.y)),c.A(y++,new F(I,D.y)))):2===y?(c.A(y++,new F(M.x,M.y)),c.A(y++,new F(D.x,M.y))):(I=I!==n?new F(I.pa,I.ta):M.copy(),I.x!==D.x&&(I=this.qd[C.G-1],c.A(y++,new F(M.x,I)),c.A(y++,new F(D.x,I)))):2===y?r?(I=Math.max(10,this.jh[E.G]),N=Math.max(10,this.Dg[E.G]),
180===this.da?(E=E.L.x,c.A(y++,new F(E-I,D.y)),c.A(y++,new F(E,D.y)),c.A(y++,new F(E+N,D.y))):90===this.da?(E=E.L.y+E.L.height,c.A(y++,new F(D.x,E+N)),c.A(y++,new F(D.x,E)),c.A(y++,new F(D.x,E-I))):270===this.da?(E=E.L.y,c.A(y++,new F(D.x,E-I)),c.A(y++,new F(D.x,E)),c.A(y++,new F(D.x,E+N))):(E=E.L.x+E.L.width,c.A(y++,new F(E+N,D.y)),c.A(y++,new F(E,D.y)),c.A(y++,new F(E-I,D.y)))):(c.A(y++,M),180===this.da||0===this.da?c.A(y++,new F(M.x,D.y)):c.A(y++,new F(D.x,M.y)),c.A(y++,new F(D.x,D.y))):(I=Math.max(10,
this.jh[C.G]),N=Math.max(10,this.Dg[C.G]),180===this.da?(r&&c.A(y++,new F(D.x-I,D.y)),c.A(y++,D),r&&c.A(y++,new F(D.x+N,D.y))):90===this.da?(r&&c.A(y++,new F(D.x,D.y+N)),c.A(y++,D),r&&c.A(y++,new F(D.x,D.y-I))):270===this.da?(r&&c.A(y++,new F(D.x,D.y-I)),c.A(y++,D),r&&c.A(y++,new F(D.x,D.y+N))):(r&&c.A(y++,new F(D.x+N,D.y)),c.A(y++,D),r&&c.A(y++,new F(D.x-I,D.y)))));E=C}if(j===n||!pm(c).I(Gb))M=c.p(y-1).copy(),D=c.p(y).copy(),s?(C=this.Dg[v.G],180===this.da||0===this.da?(s=M.y,s>=v.L.y&&s<=v.L.bottom&&
(E=v.pa+C,s=s<v.L.y+v.L.height/2?v.L.y-this.od/2:v.L.bottom+this.od/2,c.A(y++,new F(E,M.y)),c.A(y++,new F(E,s))),c.A(y++,new F(D.x,s))):(s=M.x,s>=v.L.x&&s<=v.L.right&&(E=v.ta+C,s=s<v.L.x+v.L.width/2?v.L.x-this.od/2:v.L.right+this.od/2,c.A(y++,new F(M.x,E)),c.A(y++,new F(s,E))),c.A(y++,new F(s,D.y))),c.A(y++,D)):r?(I=Math.max(10,this.jh[v.G]),N=Math.max(10,this.Dg[v.G]),180===this.da?(E=v.L.x+v.L.width,c.J(y-2,new F(E,M.y)),c.J(y-1,new F(E+N,M.y))):90===this.da?(E=v.L.y,c.J(y-2,new F(M.x,E)),c.J(y-
1,new F(M.x,E-I))):270===this.da?(E=v.L.y+v.L.height,c.J(y-2,new F(M.x,E)),c.J(y-1,new F(M.x,E+N))):(E=v.L.x,c.J(y-2,new F(E,M.y)),c.J(y-1,new F(E-I,M.y)))):(180===this.da||0===this.da?c.A(y++,new F(D.x,M.y)):c.A(y++,new F(M.x,D.y)),c.A(y++,D))}else{for(;v!==n&&v!==E;){I=C=n;v=v.Gb.l;for(var M;v.next()&&!(M=v.value,M.Ra===b.Ra&&(C=M.S,I=M.W,I.fb!==n&&(I=n),C.fb===n)););var N;C!==E&&(M=c.p(y-1).copy(),D=new F(C.pa,C.ta),s?180===this.da||0===this.da?(I=I!==n?new F(I.pa,I.ta):M.copy(),I.y!==D.y&&(I=
this.qd[C.G],2===y&&(I=0===this.da?Math.max(I,M.x):Math.min(I,M.x)),c.A(y++,new F(I,M.y)),c.A(y++,new F(I,D.y)))):(I=I!==n?new F(I.pa,I.ta):M.copy(),I.x!==D.x&&(I=this.qd[C.G],2===y&&(I=90===this.da?Math.max(I,M.y):Math.min(I,M.y)),c.A(y++,new F(M.x,I)),c.A(y++,new F(D.x,I)))):(I=Math.max(10,this.jh[C.G]),N=Math.max(10,this.Dg[C.G]),180===this.da?(c.A(y++,new F(D.x+N,D.y)),r&&c.A(y++,D),c.A(y++,new F(D.x-I,D.y))):90===this.da?(c.A(y++,new F(D.x,D.y-I)),r&&c.A(y++,D),c.A(y++,new F(D.x,D.y+N))):270===
this.da?(c.A(y++,new F(D.x,D.y+N)),r&&c.A(y++,D),c.A(y++,new F(D.x,D.y-I))):(c.A(y++,new F(D.x-I,D.y)),r&&c.A(y++,D),c.A(y++,new F(D.x+N,D.y)))));v=C}s&&(M=c.p(y-1).copy(),D=c.p(y).copy(),180===this.da||0===this.da?M.y!==D.y&&(I=0===this.da?Math.min(Math.max((D.x+M.x)/2,this.qd[E.G]),D.x):Math.max(Math.min((D.x+M.x)/2,this.qd[E.G]),D.x),c.A(y++,new F(I,M.y)),c.A(y++,new F(I,D.y))):M.x!==D.x&&(I=90===this.da?Math.min(Math.max((D.y+M.y)/2,this.qd[E.G]),D.y):Math.max(Math.min((D.y+M.y)/2,this.qd[E.G]),
D.y),c.A(y++,new F(M.x,I)),c.A(y++,new F(D.x,I))))}d!==n&&r&&(i!==n&&(zb(om(c))&&(d=c.p(0).copy(),r=c.p(2).copy(),d.I(r)||c.J(1,new F((d.x+r.x)/2,(d.y+r.y)/2))),c.J(0,c.getLinkPoint(e,i,Gb,h,p,g,j))),j!==n&&(zb(pm(c))&&(d=c.p(c.ja-1),r=c.p(c.ja-3),d.I(r)||c.J(c.ja-2,new F((d.x+r.x)/2,(d.y+r.y)/2))),c.J(c.ja-1,c.getLinkPoint(g,j,Gb,p,p,e,i))));c.zi();b.commit()}}e=new z(U);for(a=this.B.mc.l;a.next();)c=a.value.Ra,c!==n&&(c.fc&&!e.contains(c))&&e.add(c);if(0<e.count)if(90===this.da||270===this.da){u&&
w.i(e,z,X,"adjustOverlapsH:routables");a=0;c=new z(Zo);for(k=e.l;k.next();)if(g=k.value,g!==n&&g.fc)for(e=2;e<g.ja-3;e++)i=g.p(e).copy(),j=g.p(e+1).copy(),$o(i.y,j.y)&&!$o(i.x,j.x)&&(l=new Zo,l.G=Math.floor(i.y/2),m=g.p(0).copy(),q=g.p(g.ja-1).copy(),l.zb=m.x*m.x+m.y,l.Ad=q.x*q.x+q.y,l.Yd=Math.min(i.x,j.x),l.wd=Math.max(i.x,j.x),l.ea=e,l.Ra=g,e+2<g.ja&&(m=g.p(e-1).copy(),q=g.p(e+2).copy(),b=0,m.y<i.y?b=q.y<i.y?3:i.x<j.x?2:1:m.y>i.y&&(b=q.y>i.y?0:j.x<i.x?2:1),l.Mh=b),c.add(l));if(1<c.count){c.sort(this.sE);
for(k=0;k<c.count;){e=c.n[k].G;for(l=k+1;l<c.count&&c.n[l].G===e;)l++;if(1<l-k)for(g=k;g<l;){e=c.n[g].wd;for(m=k+1;m<l&&c.n[m].Yd<e;)e=Math.max(e,c.n[m].wd),m++;i=m-g;if(1<i){c.Io(this.Zv,g,g+i);j=1;q=c.n[g].Ad;for(e=g;e<m;e++)b=c.n[e],b.Ad!==q&&(j++,q=b.Ad);c.Io(this.rE,g,g+i);r=1;q=c.n[g].zb;for(e=g;e<m;e++)b=c.n[e],b.zb!==q&&(r++,q=b.zb);j<r?(d=p,r=j,q=c.n[g].Ad,c.Io(this.Zv,g,g+i)):(d=h,q=c.n[g].zb);y=0;for(e=g;e<m;e++){b=c.n[e];if((d?b.zb:b.Ad)!==q)y++,q=d?b.zb:b.Ad;g=b.Ra;i=g.p(b.ea).copy();
j=g.p(b.ea+1).copy();s=4*(y-(r-1)/2);if(g.Gh!==$f||ap(i.x,i.y+s,j.x,j.y+s))a++,g.fl(),g.J(b.ea,new F(i.x,i.y+s)),g.J(b.ea+1,new F(j.x,j.y+s)),g.zi()}}g=m}k=l}}}else{u&&w.i(e,z,X,"adjustOverlapsV:routables");a=0;c=new z(Zo);for(k=e.l;k.next();)if(g=k.value,g!==n&&g.fc)for(e=2;e<g.ja-3;e++)i=g.p(e).copy(),j=g.p(e+1).copy(),$o(i.x,j.x)&&!$o(i.y,j.y)&&(l=new Zo,l.G=Math.floor(i.x/2),m=g.p(0).copy(),q=g.p(g.ja-1).copy(),l.zb=m.x+m.y*m.y,l.Ad=q.x+q.y*q.y,l.Yd=Math.min(i.y,j.y),l.wd=Math.max(i.y,j.y),l.ea=
e,l.Ra=g,e+2<g.ja&&(m=g.p(e-1).copy(),q=g.p(e+2).copy(),b=0,m.x<i.x?b=q.x<i.x?3:i.y<j.y?2:1:m.x>i.x&&(b=q.x>i.x?0:j.y<i.y?2:1),l.Mh=b),c.add(l));if(1<c.count){c.sort(this.sE);for(k=0;k<c.count;){e=c.n[k].G;for(l=k+1;l<c.count&&c.n[l].G===e;)l++;if(1<l-k)for(g=k;g<l;){e=c.n[g].wd;for(m=k+1;m<l&&c.n[m].Yd<e;)e=Math.max(e,c.n[m].wd),m++;i=m-g;if(1<i){c.Io(this.Zv,g,g+i);j=1;q=c.n[g].Ad;for(e=g;e<m;e++)b=c.n[e],b.Ad!==q&&(j++,q=b.Ad);c.Io(this.rE,g,g+i);r=1;q=c.n[g].zb;for(e=g;e<m;e++)b=c.n[e],b.zb!==
q&&(r++,q=b.zb);j<r?(d=p,r=j,q=c.n[g].Ad,c.Io(this.Zv,g,g+i)):(d=h,q=c.n[g].zb);y=0;for(e=g;e<m;e++){b=c.n[e];if((d?b.zb:b.Ad)!==q)y++,q=d?b.zb:b.Ad;g=b.Ra;i=g.p(b.ea).copy();j=g.p(b.ea+1).copy();s=4*(y-(r-1)/2);if(g.Gh!==$f||ap(i.x+s,i.y,j.x+s,j.y))a++,g.fl(),g.J(b.ea,new F(i.x+s,i.y)),g.J(b.ea+1,new F(j.x+s,j.y)),g.zi()}}g=m}k=l}}}};function Zo(){this.ea=this.wd=this.Yd=this.Ad=this.zb=this.G=0;this.Ra=n;this.Mh=0}w.Pd(Zo,{Oa:h,zb:h,Ad:h,Yd:h,wd:h,index:h,link:h,Mh:h});
X.prototype.sE=function(a,b){return!(a instanceof Zo)||!(b instanceof Zo)||a===b?0:a.G<b.G?-1:a.G>b.G?1:a.Yd<b.Yd?-1:a.Yd>b.Yd?1:a.wd<b.wd?-1:a.wd>b.wd?1:0};X.prototype.rE=function(a,b){return!(a instanceof Zo)||!(b instanceof Zo)||a===b?0:a.zb<b.zb?-1:a.zb>b.zb||a.Mh<b.Mh?1:a.Mh>b.Mh||a.Yd<b.Yd?-1:a.Yd>b.Yd?1:a.wd<b.wd?-1:a.wd>b.wd?1:0};
X.prototype.Zv=function(a,b){return!(a instanceof Zo)||!(b instanceof Zo)||a===b?0:a.Ad<b.Ad?-1:a.Ad>b.Ad||a.Mh<b.Mh?1:a.Mh>b.Mh||a.Yd<b.Yd?-1:a.Yd>b.Yd?1:a.wd<b.wd?-1:a.wd>b.wd?1:0};function $o(a,b){u&&(w.o(a,X,"isApprox:a"),w.o(b,X,"isApprox:b"));var c=a-b;return-1<c&&1>c}function ap(a,b,c,d){u&&(w.o(a,X,"isUnoccupied2:px"),w.o(b,X,"isUnoccupied2:py"),w.o(c,X,"isUnoccupied2:qx"),w.o(d,X,"isUnoccupied2:qy"));return h}
function Wn(a,b){var c,d=a.pd[b];if(d>=a.Fg.length){c=[];var e;for(e=0;e<a.Fg.length;e++)c[e]=a.Fg[e];a.Fg=c}"undefined"===typeof a.Fg[d]||a.Fg[d]===n?c=[]:(c=a.Fg[d],a.Fg[d]=n);var d=a.Aq[b],g;for(e=0;e<d.length;e++)g=d[e],g instanceof co&&(c[g.ea]=g);return c}function Yn(a,b,c){a.Fg[a.pd[b]]=c}w.g(X,"layerSpacing",X.prototype.ns);w.defineProperty(X,{ns:"layerSpacing"},t("Jd"),function(a){this.Jd!==a&&("number"===typeof a&&0<=a)&&(this.Jd=a,this.F())});w.g(X,"columnSpacing",X.prototype.hG);
w.defineProperty(X,{hG:"columnSpacing"},t("od"),function(a){this.od!==a&&("number"===typeof a&&0<=a)&&(this.od=a,this.F())});w.g(X,"direction",X.prototype.direction);w.defineProperty(X,{direction:"direction"},t("da"),function(a){this.da!==a&&"number"===typeof a&&(this.da=a,this.F())});w.g(X,"cycleRemoveOption",X.prototype.zC);w.defineProperty(X,{zC:"cycleRemoveOption"},t("Gm"),function(a){if(this.Gm!==a&&(u&&w.i(a,ja,On,"cycleRemoveOption"),a===Pn||a===Jn))this.Gm=a,this.F()});
w.g(X,"layeringOption",X.prototype.yD);w.defineProperty(X,{yD:"layeringOption"},t("Zm"),function(a){if(this.Zm!==a&&(u&&w.i(a,ja,On,"layeringOption"),a===Kn||a===Bo||a===Do))this.Zm=a,this.F()});w.g(X,"initializeOption",X.prototype.oD);w.defineProperty(X,{oD:"initializeOption"},t("Tm"),function(a){if(this.Tm!==a&&(u&&w.i(a,ja,On,"initializeOption"),a===Ln||a===Jo||a===Ho))this.Tm=a,this.F()});w.g(X,"iterations",X.prototype.eH);
w.defineProperty(X,{eH:"iterations"},t("Cl"),function(a){u&&w.o(a,On,"iterations");this.Cl!==a&&("number"===typeof a&&0<=a)&&(this.Cl=a,this.F())});w.g(X,"aggressiveOption",X.prototype.bC);w.defineProperty(X,{bC:"aggressiveOption"},t("ym"),function(a){if(this.ym!==a&&(u&&w.i(a,ja,On,"cycleRemoveOption"),a===No||a===Mn||a===Oo))this.ym=a,this.F()});w.g(X,"packOption",X.prototype.EH);w.defineProperty(X,{EH:"packOption"},t("ni"),function(a){this.ni!==a&&("number"===typeof a&&0<=a&&8>a)&&(this.ni=a,this.F())});
w.g(X,"setsPortSpots",X.prototype.qm);w.defineProperty(X,{qm:"setsPortSpots"},t("oh"),function(a){this.oh!==a&&"boolean"===typeof a&&(this.oh=a,this.F())});w.u(X,{AL:"maxLayer"},t("bb"));w.u(X,{yL:"maxIndex"},t("Wt"));w.u(X,{xL:"maxColumn"},t("ob"));w.u(X,{GL:"minIndexLayer"},t("sq"));w.u(X,{zL:"maxIndexLayer"},t("hf"));var Jn;X.CycleDepthFirst=Jn=w.s(X,"CycleDepthFirst",0);var Pn;X.CycleGreedy=Pn=w.s(X,"CycleGreedy",1);var Kn;X.LayerOptimalLinkLength=Kn=w.s(X,"LayerOptimalLinkLength",0);var Bo;
X.LayerLongestPathSink=Bo=w.s(X,"LayerLongestPathSink",1);var Do;X.LayerLongestPathSource=Do=w.s(X,"LayerLongestPathSource",2);var Ln;X.InitDepthFirstOut=Ln=w.s(X,"InitDepthFirstOut",0);var Jo;X.InitDepthFirstIn=Jo=w.s(X,"InitDepthFirstIn",1);var Ho;X.InitNaive=Ho=w.s(X,"InitNaive",2);var No;X.AggressiveNone=No=w.s(X,"AggressiveNone",0);var Mn;X.AggressiveLess=Mn=w.s(X,"AggressiveLess",1);var Oo;X.AggressiveMore=Oo=w.s(X,"AggressiveMore",2);X.PackNone=0;var Po;X.PackExpand=Po=1;var Qo;
X.PackStraighten=Qo=2;var So;X.PackMedian=So=4;var Nn;X.PackAll=Nn=7;function On(){Wm.call(this)}w.Q("LayeredDigraphNetwork",On);w.Ea(On,Wm);On.prototype.createVertex=On.prototype.Bj=function(){return new co};On.prototype.createEdge=On.prototype.Un=function(){return new Un};function co(){$m.call(this);this.ea=this.Z=this.G=-1;this.Da=p;this.Kb=this.Nm=this.jk=NaN;this.jj=n;this.jl=0;this.Jx=this.Kx=f}w.Q("LayeredDigraphVertex",co);w.Ea(co,$m);w.g(co,"layer",co.prototype.Oa);
w.defineProperty(co,{Oa:"layer"},t("G"),ba("G"));w.g(co,"column",co.prototype.Ec);w.defineProperty(co,{Ec:"column"},t("Z"),ba("Z"));w.g(co,"index",co.prototype.index);w.defineProperty(co,{index:"index"},t("ea"),ba("ea"));w.g(co,"valid",co.prototype.valid);w.defineProperty(co,{valid:"valid"},t("Da"),ba("Da"));w.g(co,"discover",co.prototype.tG);w.defineProperty(co,{tG:"discover"},t("jk"),ba("jk"));w.g(co,"finish",co.prototype.finish);w.defineProperty(co,{finish:"finish"},t("Nm"),ba("Nm"));
w.g(co,"component",co.prototype.iG);w.defineProperty(co,{iG:"component"},t("Kb"),ba("Kb"));w.g(co,"near",co.prototype.vH);w.defineProperty(co,{vH:"near"},t("jj"),function(a){a!==n&&w.i(a,co,co,"layeredDigraphVertex");this.jj=a});function Un(){an.call(this);this.zp=this.wb=this.Da=p;this.pf=this.nf=NaN;this.He=this.Ge=0}w.Q("LayeredDigraphEdge",Un);w.Ea(Un,an);w.g(Un,"valid",Un.prototype.valid);w.defineProperty(Un,{valid:"valid"},t("Da"),ba("Da"));w.g(Un,"rev",Un.prototype.rev);
w.defineProperty(Un,{rev:"rev"},t("wb"),ba("wb"));w.g(Un,"forest",Un.prototype.FG);w.defineProperty(Un,{FG:"forest"},t("zp"),ba("zp"));w.g(Un,"portFromPos",Un.prototype.HH);w.defineProperty(Un,{HH:"portFromPos"},t("nf"),ba("nf"));w.g(Un,"portToPos",Un.prototype.JH);w.defineProperty(Un,{JH:"portToPos"},t("pf"),ba("pf"));w.g(Un,"portFromColOffset",Un.prototype.GH);w.defineProperty(Un,{GH:"portFromColOffset"},t("Ge"),ba("Ge"));w.g(Un,"portToColOffset",Un.prototype.IH);
w.defineProperty(Un,{IH:"portToColOffset"},t("He"),ba("He"));function W(){ci.call(this);this.gd=new ma(T);this.mh=bp;this.ef=cp;this.mr=dp;this.Tc=ep;this.Jf=new bb(10,10);this.ia=new Y;this.ha=new Y}w.Q("TreeLayout",W);w.Ea(W,ci);W.prototype.cloneProtected=W.prototype.xb=function(a){ci.prototype.xb.call(this,a);a.mh=this.mh;a.mr=this.mr;a.Tc=this.Tc;a.Jf=this.Jf.copy();fp(a.ia,this.ia);fp(a.ha,this.ha)};W.prototype.createNetwork=W.prototype.nv=function(){var a=new gp;Xm(a,this);return a};
W.prototype.makeNetwork=W.prototype.mH=function(a){var b=this.createNetwork();a instanceof A?(hp(this,b,a.bl,h),hp(this,b,a.links,h)):a instanceof vf?hp(this,b,a.Gc,p):hp(this,b,a.l,p);return b};
function hp(a,b,c,d){for(c=c.l;c.next();){var e=c.value;if(e instanceof T&&e.Jr()&&"Comment"!==e.Nc&&(!d||e.ls))e.Li||(e instanceof vf&&e.Pb===n?hp(a,b,e.Gc,p):b.Gn(e))}for(c.reset();c.next();)if(e=c.value,e instanceof U&&e.Jr()&&"Comment"!==e.Nc&&(!d||e.ls)){var g=e.ga,a=e.la;if(!(g===n||a===n||g===a)&&"Comment"!==g.Nc&&"Comment"!==a.Nc)g=b.wv(g),a=b.wv(a),g!==n&&a!==n&&b.km(g,a,e)}}
W.prototype.doLayout=W.prototype.Pr=function(a){this.Qc===n&&(this.Qc=this.makeNetwork(a));this.le!==ip&&(this.kd=Zm(this,this.kd));var b=this.h;b===n&&a instanceof A&&(b=a);this.ef=this.path===bp&&b!==n?b.Yc?cp:jp:this.path===bp?cp:this.path;if(0<this.B.ka.count){this.B.qv();for(b=this.B.ka.l;b.next();)a=b.value,a.rk=p,a.Dl=0,a.hb=n,a.Yb=[];for(b=this.gd.l;b.next();){var c=b.value,a=this.B.Re(c);a===n&&this.gd.remove(c)}if(0===this.gd.count){for(a=this.B.ka.l;a.next();)switch(b=a.value,this.ef){case cp:0===
b.Hb.count&&this.gd.add(b.fb);break;case jp:0===b.Gb.count&&this.gd.add(b.fb);break;default:w.m("Unhandled path value "+this.ef.toString())}if(0===this.gd.count){a=999999;b=n;for(c=this.B.ka.l;c.next();){var d=c.value;switch(this.ef){case cp:d.Hb.count<a&&(a=d.Hb.count,b=d);break;case jp:d.Gb.count<a&&(a=d.Gb.count,b=d);break;default:w.m("Unhandled path value "+this.ef.toString())}}b!==n&&this.gd.add(b.fb)}}for(b=this.gd.l;b.next();)c=b.value,a=this.B.Re(c),a!==n&&!a.rk&&(a.rk=h,kp(this,a));for(a=
this.gd.l;a.next();)b=this.B.Re(a.value),lp(this,b);for(a=this.gd.l;a.next();)b=this.B.Re(a.value),mp(this,b);for(a=this.gd.l;a.next();)np(this,this.B.Re(a.value));for(a=this.B.ka.l;a.next();)this.addComments(a.value);for(a=this.gd.l;a.next();)op(this,this.B.Re(a.value));if(this.Tc===ip)for(a=this.gd.l;a.next();)d=a.value,b=this.B.Re(d),d=d.position,c=d.x,d=d.y,isFinite(c)||(c=0),isFinite(d)||(d=0),pp(this,b,c,d);else for(var a=this.kd,c=a.x,e=a.y,a=this.gd.l;a.next();)if(d=a.value,b=this.B.Re(d),
b!==n)switch(pp(this,b,c+b.Ca.x,e+b.Ca.y),this.Tc){case ep:e+=b.Pa.height+this.Jf.height;break;case qp:c+=b.Pa.width+this.Jf.width;break;default:w.m("Unhandled arrangement value "+this.Tc.toString())}this.updateParts()}this.Qc=n;this.gd=new ma(T);this.Ue=h};
function kp(a,b){u&&w.i(b,Y,W,"walkTree:v");if(b!==n){switch(a.ef){case cp:if(0<b.Gb.count){for(var c=new z(Y),d=b.sG;d.next();){var e=d.value;rp(a,b,e)&&c.add(e)}0<c.count&&(b.Yb=c.sg())}break;case jp:if(0<b.Hb.count){c=new z(Y);for(d=b.bI;d.next();)e=d.value,rp(a,b,e)&&c.add(e);0<c.count&&(b.Yb=c.sg())}break;default:w.m("Unhandled path value"+a.ef.toString())}for(var c=b.Yb,d=c.length,g=0;g<d;g++)e=c[g],e.rk=h,e.Dl=b.Dl+1,e.hb=b,a.gd.remove(e.fb);for(g=0;g<d;g++)e=c[g],kp(a,e)}}
function rp(a,b,c){u&&w.i(b,Y,W,"walkOK:v");u&&w.i(c,Y,W,"walkOK:c");if(c.rk){var d;u&&w.i(c,Y,W,"isAncestor:a");u&&w.i(b,Y,W,"isAncestor:b");if(b===n)d=p;else{for(d=b.hb;d!==n&&d!==c;)d=d.hb;d=d===c}if(d||c.Dl>b.Dl)return p;a.removeChild(c.hb,c)}return h}
W.prototype.removeChild=function(a,b){u&&w.i(a,Y,W,"removeChild:p");u&&w.i(b,Y,W,"removeChild:c");if(a!==n&&b!==n){for(var c=a.Yb,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){for(var d=Array(c.length-d),g=0,e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.Yb=d}}};
function lp(a,b){u&&w.i(b,Y,W,"initializeTree:v");if(b!==n){u&&w.i(b,Y,W,"initializeTreeVertexValues:v");var c=sp(a,b);fp(b,c);if(b.hb!==n&&b.hb.Ba===tp){for(var c=b.angle,d=b.hb.Yb,e=0;e<d.length&&b!==d[e];)e++;0===e%2?e!==d.length-1&&(c=90===c?180:180===c?270:270===c?180:270):c=90===c?0:180===c?90:270===c?0:90;b.angle=c}b.rk=h;b.Ba===tp&&a.BE(b);for(var c=0,d=b.Wl,e=0,g=b.Yb,i=g.length,j=0;j<i;j++){var k=g[j];lp(a,k);c+=k.tt+1;d=Math.max(d,k.Vt);e=Math.max(e,k.fi)}b.tt=c;b.Vt=d;b.fi=0<d?e+1:0}}
function sp(a,b){u&&w.i(b,Y,W,"mom:v");switch(a.mr){default:case dp:return b.hb!==n?b.hb:a.ia;case up:return b.hb===n?a.ia:b.hb.hb===n?a.ha:b.hb;case vp:if(b.hb!==n)return b.hb.hb!==n?b.hb.hb:a.ha;case wp:var c=h;if(0===b.Wl)c=p;else for(var d=b.Yb,e=d.length,g=0;g<e;g++)if(0<d[g].Wl){c=p;break}return c&&b.hb!==n?a.ha:b.hb!==n?b.hb:a.ia}}function mp(a,b){u&&w.i(b,Y,W,"assignTree:v");if(b!==n){a.assignTreeVertexValues(b);for(var c=b.Yb,d=c.length,e=0;e<d;e++)mp(a,c[e])}}
W.prototype.assignTreeVertexValues=W.prototype.JI=aa();function np(a,b){u&&w.i(b,Y,W,"sortTree:v");if(b!==n){b.Ba!==tp&&a.BE(b);for(var c=b.Yb,d=c.length,e=0;e<d;e++)np(a,c[e])}}W.prototype.sortTreeVertexChildren=W.prototype.BE=function(a){u&&w.i(a,Y,W,"sortTreeVertexChildren:v");switch(a.uc){case xp:break;case yp:a.Yb.reverse();break;case zp:a.Yb.sort(a.rc);break;case Ap:a.Yb.sort(a.rc);a.Yb.reverse();break;default:w.m("Unhandled sorting value "+a.uc.toString())}};
W.prototype.addComments=W.prototype.EF=function(a){u&&w.i(a,Y,W,"addComments:v");var b=a.oc,c=a.hb,d=0,e=Bp,e=p;c!==n&&(d=c.oc,e=c.Ba,e=Cp(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.Wl,g=new G,i=g.width,g=g.height,j=0,k=a.Fd;if(a.fb!==n)for(var l=a.fb.OC();l.next();){var m=l.value;"Comment"===m.Nc&&m.mb()&&(a.Gd===n&&(a.Gd=[]),a.Gd.push(m),m.Ei(),m=m.ya,b&&!c||!e&&!d&&c||e&&d&&c?(i=Math.max(i,m.width),g+=m.height+Math.abs(j)):(i+=m.width+Math.abs(j),g=Math.max(g,m.height)),j=k)}a.Gd!==n&&
(b&&!c||!e&&!d&&c||e&&d&&c?(i+=Math.abs(a.qc),g=Math.max(0,g-a.height)):(g+=Math.abs(a.qc),i=Math.max(0,i-a.width)),a.Fb=new G(0,0,a.L.width+i,a.L.height+g))};function Cp(a){return a===Dp||a===tp||a===Ep||a===Fp}function Gp(a){return a===Dp||a===tp}function Hp(a){u&&w.i(a,Y,W,"isLeftSideBus:v");var b=a.hb;if(b!==n){var c=b.Db;if(Cp(c)){if(Gp(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===Ep)return h}}return p}
W.prototype.layoutComments=W.prototype.sL=function(a){u&&w.i(a,Y,W,"layoutComments:v");if(a.Gd!==n){var b=a.Ug.ya,c=a.hb,d=a.oc,e=0,g=Bp,g=p;c!==n&&(e=c.oc,g=c.Ba,g=Cp(g));for(var d=90===d||270===d,i=90===e||270===e,j=0===a.Wl,k=Hp(a),l=0,m=a.Gd,q=m.length,r=0;r<q;r++){var c=m[r],s=c.ya;if(d&&!j||!g&&!i&&j||g&&i&&j){if(135<e&&!g||i&&k)if(0<=a.qc){c.location=new F(a.L.x-a.qc-s.width,a.L.y+l);for(var v=c.Bf();v.next();)c=v.value,c.jb=Tb,c.nb=Zb}else{c.location=new F(a.L.x+2*a.K.x-a.qc,a.L.y+l);for(v=
c.Bf();v.next();)c=v.value,c.jb=Zb,c.nb=Tb}else if(0<=a.qc){c.location=new F(a.L.x+2*a.K.x+a.qc,a.L.y+l);for(v=c.Bf();v.next();)c=v.value,c.jb=Zb,c.nb=Tb}else{c.location=new F(a.L.x+a.qc-s.width,a.L.y+l);for(v=c.Bf();v.next();)c=v.value,c.jb=Tb,c.nb=Zb}l=0<=a.Fd?l+(s.height+a.Fd):l+(a.Fd-s.height)}else{if(135<e&&!g||!i&&k)if(0<=a.qc){c.location=new F(a.L.x+l,a.L.y-a.qc-s.height);for(v=c.Bf();v.next();)c=v.value,c.jb=Sb,c.nb=$b}else{c.location=new F(a.L.x+l,a.L.y+2*a.K.y-a.qc);for(v=c.Bf();v.next();)c=
v.value,c.jb=$b,c.nb=Sb}else if(0<=a.qc){c.location=new F(a.L.x+l,a.L.y+2*a.K.y+a.qc);for(v=c.Bf();v.next();)c=v.value,c.jb=$b,c.nb=Sb}else{c.location=new F(a.L.x+l,a.L.y+a.qc-s.height);for(v=c.Bf();v.next();)c=v.value,c.jb=Sb,c.nb=$b}l=0<=a.Fd?l+(s.width+a.Fd):l+(a.Fd-s.width)}}b=l-a.Fd-(d?b.height:b.width);if(this.ef===cp)for(a=a.Gb;a.next();){if(e=a.value,(c=e.link)&&c.Gh!==$f)c.Tk=0<b?b:NaN}else for(a=a.Hb;a.next();)if(e=a.value,(c=e.link)&&c.Gh!==$f)c.gl=0<b?b:NaN}};
function op(a,b){u&&w.i(b,Y,W,"layoutTree:v");if(b!==n){for(var c=b.Yb,d=c.length,e=0;e<d;e++)op(a,c[e]);switch(b.wg){case Ip:Jp(a,b);break;case Kp:if(b.Ba===tp)Jp(a,b);else if(u&&w.i(b,Y,W,"layoutTreeBlock:v"),0===b.Wl){var e=b.hb,c=p,d=0,g=Bp;e!==n&&(d=e.oc,g=e.Ba,c=Cp(g));e=Hp(b);b.aa.U(0,0);b.Pa.U(b.width,b.height);b.hb!==n&&b.Gd!==n&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?b.Ca.U(b.width-2*b.K.x,0):b.Ca.U(0,b.height-2*b.K.y):b.Ca.U(0,0);b.cq=n;b.Rq=n}else{for(var i=Lp(b),
c=90===i||270===i,j=0,k=b.Yb,l=k.length,m=0;m<l;m++)var q=k[m],j=Math.max(j,c?q.Pa.width:q.Pa.height);var r=b.Ba,e=r===Mp,s=r===Np,v=Cp(r),y=Math.max(0,b.tg),d=Op(b),C=b.td,E=Pp(b),I=b.Je,D=0;if(e||s||b.Bk||b.Ck&&1===b.fi)D=Math.max(0,b.hd);var e=b.width,g=b.height,M=0,N=0,Z=0,va=n,la=n,ta=0,Ea=0,Ha=0,cb=0,rb=0,Xa=0,Na=0,gb=0,q=0;v&&!Gp(r)&&135<i&&k.reverse();if(Gp(r))if(1<l)for(m=0;m<l;m++)0===m%2&&m!==l-1?gb=Math.max(gb,c?k[m].Pa.width:k[m].Pa.height):0!==m%2&&(q=Math.max(q,c?k[m].Pa.width:k[m].Pa.height));
else 1===l&&(gb=c?k[0].Pa.width:k[0].Pa.height);if(v){switch(r){case Dp:Ea=135>i?Qp(b,k,gb,M,N):Rp(b,k,gb,M,N);gb=Ea[0];M=Ea[1];N=Ea[2];break;case Ep:for(m=0;m<l;m++){var q=k[m],Ya=q.Pa,va=0===Xa?0:I;c?(q.aa.U(j-Ya.width,cb+va),M=Math.max(M,Ya.width),N=Math.max(N,cb+va+Ya.height),cb+=va+Ya.height):(q.aa.U(Ha+va,j-Ya.height),M=Math.max(M,Ha+va+Ya.width),N=Math.max(N,Ya.height),Ha+=va+Ya.width);Xa++}break;case Fp:for(m=0;m<l;m++)q=k[m],Ya=q.Pa,va=0===Xa?0:I,c?(q.aa.U(C/2+b.K.x,cb+va),M=Math.max(M,Ya.width),
N=Math.max(N,cb+va+Ya.height),cb+=va+Ya.height):(q.aa.U(Ha+va,C/2+b.K.y),M=Math.max(M,Ha+va+Ya.width),N=Math.max(N,Ya.height),Ha+=va+Ya.width),Xa++}va=[];la=[];c?(va[0]=new F(0,0),va[1]=new F(0,N),la[0]=new F(M,0)):(va[0]=new F(0,0),va[1]=new F(M,0),la[0]=new F(0,N));la[1]=new F(M,N)}else for(m=0;m<l;m++){q=k[m];Ya=q.Pa;if(c){0<y&&(0<Xa&&Ha+C+Ya.width>y)&&(Ha<j&&Sp(b,r,j-Ha,0,Na,m-1),rb++,Xa=0,Na=m,Z=N,Ha=0,cb=135<i?-N-I:N+I);Tp(a,q,0,cb);var nb=0;if(0===Xa){if(va=q.cq,la=q.Rq,ta=Ya.width,Ea=Ya.height,
va===n||la===n||i!==Lp(q))va=[],la=[],va[0]=new F(0,0),va[1]=new F(0,Ea),la[0]=new F(ta,0),la[1]=new F(ta,Ea)}else Ea=Up(b,q,va,la,ta,Ea),nb=Ea[0],va=Ea[1],la=Ea[2],ta=Ea[3],Ea=Ea[4],Ha<Ya.width&&0>nb&&(Vp(b,-nb,0,Na,m-1),Wp(va,-nb,0),Wp(la,-nb,0),nb=0);q.aa.U(nb,cb);M=Math.max(M,ta);N=Math.max(N,Z+(0===rb?0:I)+Ya.height);Ha=ta}else{0<y&&(0<Xa&&cb+C+Ya.height>y)&&(cb<j&&Sp(b,r,0,j-cb,Na,m-1),rb++,Xa=0,Na=m,Z=M,cb=0,Ha=135<i?-M-I:M+I);Tp(a,q,Ha,0);nb=0;if(0===Xa){if(va=q.cq,la=q.Rq,ta=Ya.width,Ea=
Ya.height,va===n||la===n||i!==Lp(q))va=[],la=[],va[0]=new F(0,0),va[1]=new F(ta,0),la[0]=new F(0,Ea),la[1]=new F(ta,Ea)}else Ea=Up(b,q,va,la,ta,Ea),nb=Ea[0],va=Ea[1],la=Ea[2],ta=Ea[3],Ea=Ea[4],cb<Ya.height&&0>nb&&(Vp(b,0,-nb,Na,m-1),Wp(va,0,-nb),Wp(la,0,-nb),nb=0);q.aa.U(Ha,nb);N=Math.max(N,Ea);M=Math.max(M,Z+(0===rb?0:I)+Ya.width);cb=Ea}Xa++}0<rb&&(c?(N+=Math.max(0,d),Ha<M&&Sp(b,r,M-Ha,0,Na,l-1),0<D&&(s||Vp(b,D,0,0,l-1),M+=D)):(M+=Math.max(0,d),cb<N&&Sp(b,r,0,N-cb,Na,l-1),0<D&&(s||Vp(b,0,D,0,l-1),
N+=D)));s=j=0;switch(r){case Xp:c?j+=M/2-b.K.x-E/2:s+=N/2-b.K.y-E/2;break;case Bp:0<rb?c?j+=M/2-b.K.x-E/2:s+=N/2-b.K.y-E/2:c?(m=k[0].aa.x+k[0].Ca.x,gb=k[l-1].aa.x+k[l-1].Ca.x+2*k[l-1].K.x,j+=m+(gb-m)/2-b.K.x-E/2):(m=k[0].aa.y+k[0].Ca.y,gb=k[l-1].aa.y+k[l-1].Ca.y+2*k[l-1].K.y,s+=m+(gb-m)/2-b.K.y-E/2);break;case Mp:c?(j-=E,M+=E):(s-=E,N+=E);break;case Np:c?(j+=M-b.width+E,M+=E):(s+=N-b.height+E,N+=E);break;case Dp:c?j=1<l?j+(gb+C/2-b.K.x):j+(k[0].K.x-b.K.x+k[0].Ca.x):s=1<l?s+(gb+C/2-b.K.y):s+(k[0].K.y-
b.K.y+k[0].Ca.y);break;case Ep:c?j+=M+C/2-b.K.x:s+=N+C/2-b.K.y;break;case Fp:break;default:w.m("Unhandled alignment value "+r.toString())}for(m=0;m<l;m++)q=k[m],c?q.aa.U(q.aa.x+q.Ca.x-j,q.aa.y+(135<i?(v?-N:-q.Pa.height)+q.Ca.y-d:g+d+q.Ca.y)):q.aa.U(q.aa.x+(135<i?(v?-M:-q.Pa.width)+q.Ca.x-d:e+d+q.Ca.x),q.aa.y+q.Ca.y-s);l=k=0;v?c?(M=Yp(b,M,j),0>j&&(j=0),135<i&&(s+=N+d),N+=g+d,r===Fp&&(k+=C/2+b.K.x),l+=g+d):(135<i&&(j+=M+d),M+=e+d,N=Zp(b,N,s),0>s&&(s=0),r===Fp&&(l+=C/2+b.K.y),k+=e+d):c?(b.Gd===n?e>M&&
(r=$p(r,e-M,0),k=r[0],l=r[1],M=e,j=0):M=Yp(b,M,j),0>j&&(k-=j,j=0),135<i&&(s+=N+d),N=Math.max(Math.max(N,g),N+g+d),l+=g+d):(135<i&&(j+=M+d),M=Math.max(Math.max(M,e),M+e+d),b.Gd===n?g>N&&(r=$p(r,0,g-N),k=r[0],l=r[1],N=g,s=0):N=Zp(b,N,s),0>s&&(l-=s,s=0),k+=e+d);if(0<rb)i=[],r=[],c?(i[2]=new F(0,g+d),i[3]=new F(i[2].x,N),r[2]=new F(M,i[2].y),r[3]=new F(r[2].x,i[3].y)):(i[2]=new F(e+d,0),i[3]=new F(M,i[2].y),r[2]=new F(i[2].x,N),r[3]=new F(i[3].x,r[2].y));else{i=[];r=[];for(m=0;m<va.length;m++)v=va[m],
i[m+2]=new F(v.x+k,v.y+l);for(m=0;m<la.length;m++)v=la[m],r[m+2]=new F(v.x+k,v.y+l)}c?(i[0]=new F(j,0),i[1]=new F(i[0].x,g),i[2].y<i[1].y&&(i[2].x>i[0].x?i[2]=i[1].copy():i[1].Ua(i[2])),i[3].y<i[2].y&&(i[3].x>i[0].x?i[3]=i[2].copy():i[2]=i[3].copy()),r[0]=new F(j+e,0),r[1]=new F(r[0].x,g),r[2].y<r[1].y&&(r[2].x<r[0].x?r[2]=r[1].copy():r[1].Ua(r[2])),r[3].y<r[2].y&&(r[3].x<r[0].x?r[3]=r[2].copy():r[2]=r[3].copy()),i[2].y-=d/2,r[2].y-=d/2):(i[0]=new F(0,s),i[1]=new F(e,i[0].y),i[2].x<i[1].x&&(i[2].y>
i[0].y?i[2]=i[1].copy():i[1].Ua(i[2])),i[3].x<i[2].x&&(i[3].y>i[0].y?i[3]=i[2].copy():i[2]=i[3].copy()),r[0]=new F(0,s+g),r[1]=new F(e,r[0].y),r[2].x<r[1].x&&(r[2].y<r[0].y?r[2]=r[1].copy():r[1].Ua(r[2])),r[3].x<r[2].x&&(r[3].y<r[0].y?r[3]=r[2].copy():r[2]=r[3].copy()),i[2].x-=d/2,r[2].x-=d/2);b.cq=i;b.Rq=r;b.Ca.U(j,s);b.Pa.U(M,N)}break;default:w.m("Unhandled compaction value "+b.wg.toString())}}}
function Jp(a,b){u&&w.i(b,Y,W,"layoutTreeNone:v");if(0===b.Wl){var c=p,d=0,e=Bp;b.hb!==n&&(d=b.hb.oc,e=b.hb.Ba,c=Cp(e));e=Hp(b);b.aa.U(0,0);b.Pa.U(b.width,b.height);b.hb!==n&&b.Gd!==n&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?b.Ca.U(b.width-2*b.K.x,0):b.Ca.U(0,b.height-2*b.K.y):b.Ca.U(0,0)}else{for(var c=Lp(b),d=90===c||270===c,g=0,e=b.Yb,i=e.length,j=0;j<i;j++)var k=e[j],g=Math.max(g,d?k.Pa.width:k.Pa.height);var l=b.Ba,m=l===Mp,q=l===Np,r=Cp(l),s=Math.max(0,b.tg),v=Op(b),y=
b.td,C=Pp(b),E=m||q?0:C/2,I=b.Je,D=0;if(m||q||b.Bk||b.Ck&&1===b.fi)D=Math.max(0,b.hd);var m=b.width,M=b.height,N=0,Z=0,va=0,la=0,ta=0,Ea=0,Ha=0,cb=0,rb=0,Xa=0;r&&!Gp(l)&&135<c&&e.reverse();if(Gp(l))if(1<i)for(j=0;j<i;j++){var k=e[j],Na=k.Pa;0===j%2&&j!==i-1?rb=Math.max(rb,(d?Na.width:Na.height)+aq(k)-y):0!==j%2&&(Xa=Math.max(Xa,(d?Na.width:Na.height)+aq(k)-y))}else 1===i&&(rb=d?e[0].Pa.width:e[0].Pa.height);if(r)switch(l){case Dp:case tp:Z=135>c?Qp(b,e,rb,N,Z):Rp(b,e,rb,N,Z);rb=Z[0];N=Z[1];Z=Z[2];
break;case Ep:for(j=0;j<i;j++)k=e[j],Na=k.Pa,s=0===Ha?0:I,d?(k.aa.U(g-Na.width,ta+s),N=Math.max(N,Na.width),Z=Math.max(Z,ta+s+Na.height),ta+=s+Na.height):(k.aa.U(la+s,g-Na.height),N=Math.max(N,la+s+Na.width),Z=Math.max(Z,Na.height),la+=s+Na.width),Ha++;break;case Fp:for(g=0;g<i;g++)k=e[g],Na=k.Pa,s=0===Ha?0:I,d?(k.aa.U(y/2+b.K.x,ta+s),N=Math.max(N,Na.width),Z=Math.max(Z,ta+s+Na.height),ta+=s+Na.height):(k.aa.U(la+s,y/2+b.K.y),N=Math.max(N,la+s+Na.width),Z=Math.max(Z,Na.height),la+=s+Na.width),Ha++}else for(j=
0;j<i;j++)k=e[j],Na=k.Pa,d?(0<s&&(0<Ha&&la+y+Na.width>s)&&(la<g&&Sp(b,l,g-la,0,cb,j-1),Ea++,Ha=0,cb=j,va=Z,la=0,ta=135<c?-Z-I:Z+I),Xa=0===Ha?E:y,Tp(a,k,0,ta),k.aa.U(la+Xa,ta),N=Math.max(N,la+Xa+Na.width),Z=Math.max(Z,va+(0===Ea?0:I)+Na.height),la+=Xa+Na.width):(0<s&&(0<Ha&&ta+y+Na.height>s)&&(ta<g&&Sp(b,l,0,g-ta,cb,j-1),Ea++,Ha=0,cb=j,va=N,ta=0,la=135<c?-N-I:N+I),Xa=0===Ha?E:y,Tp(a,k,la,0),k.aa.U(la,ta+Xa),Z=Math.max(Z,ta+Xa+Na.height),N=Math.max(N,va+(0===Ea?0:I)+Na.width),ta+=Xa+Na.height),Ha++;
0<Ea&&(d?(Z+=Math.max(0,v),la<N&&Sp(b,l,N-la,0,cb,i-1),0<D&&(q||Vp(b,D,0,0,i-1),N+=D)):(N+=Math.max(0,v),ta<Z&&Sp(b,l,0,Z-ta,cb,i-1),0<D&&(q||Vp(b,0,D,0,i-1),Z+=D)));D=q=0;switch(l){case Xp:d?q+=N/2-b.K.x-C/2:D+=Z/2-b.K.y-C/2;break;case Bp:0<Ea?d?q+=N/2-b.K.x-C/2:D+=Z/2-b.K.y-C/2:d?(l=e[0].aa.x+e[0].Ca.x,y=e[i-1].aa.x+e[i-1].Ca.x+2*e[i-1].K.x,q+=l+(y-l)/2-b.K.x-C/2):(l=e[0].aa.y+e[0].Ca.y,y=e[i-1].aa.y+e[i-1].Ca.y+2*e[i-1].K.y,D+=l+(y-l)/2-b.K.y-C/2);break;case Mp:d?(q-=C,N+=C):(D-=C,Z+=C);break;
case Np:d?(q+=N-b.width+C,N+=C):(D+=Z-b.height+C,Z+=C);break;case Dp:case tp:d?q=1<i?q+(rb+y/2-b.K.x):q+(e[0].K.x-b.K.x+e[0].Ca.x):D=1<i?D+(rb+y/2-b.K.y):D+(e[0].K.y-b.K.y+e[0].Ca.y);break;case Ep:d?q+=N+y/2-b.K.x:D+=Z+y/2-b.K.y;break;case Fp:break;default:w.m("Unhandled alignment value "+l.toString())}for(j=0;j<i;j++)k=e[j],d?k.aa.U(k.aa.x+k.Ca.x-q,k.aa.y+(135<c?(r?-Z:-k.Pa.height)+k.Ca.y-v:M+v+k.Ca.y)):k.aa.U(k.aa.x+(135<c?(r?-N:-k.Pa.width)+k.Ca.x-v:m+v+k.Ca.x),k.aa.y+k.Ca.y-D);d?(N=Yp(b,N,q),
0>q&&(q=0),135<c&&(D+=Z+v),Z+=M+v):(135<c&&(q+=N+v),N+=m+v,Z=Zp(b,Z,D),0>D&&(D=0));b.Ca.U(q,D);b.Pa.U(N,Z)}}
function Qp(a,b,c,d,e){u&&w.i(a,Y,W,"layoutBusChildrenPosDir:v");var g=b.length;if(0===g)return[c,d,e];if(1===g){var i=b[0],d=i.Pa.width,e=i.Pa.height;return[c,d,e]}for(var j=a.td,k=a.Je,l=90===Lp(a),m=0,q=0,r=0,s=0;s<g;s++)if(!(0!==s%2||1<g&&s===g-1)){var i=b[s],v=i.Pa,y=0===m?0:k;if(l){var C=aq(i)-j;i.aa.U(c-(v.width+C),r+y);d=Math.max(d,v.width+C);e=Math.max(e,r+y+v.height);r+=y+v.height}else C=aq(i)-j,i.aa.U(q+y,c-(v.height+C)),e=Math.max(e,v.height+C),d=Math.max(d,q+y+v.width),q+=y+v.width;m++}var m=
0,E=q,I=r;l?(q=c+j,r=0):(q=0,r=c+j);for(s=0;s<g;s++)0!==s%2&&(i=b[s],v=i.Pa,y=0===m?0:k,l?(C=aq(i)-j,i.aa.U(q+C,r+y),d=Math.max(d,q+v.width+C),e=Math.max(e,r+y+v.height),r+=y+v.height):(C=aq(i)-j,i.aa.U(q+y,r+C),d=Math.max(d,q+y+v.width),e=Math.max(e,r+v.height+C),q+=y+v.width),m++);1<g&&1===g%2&&(i=b[g-1],v=i.Pa,b=bq(i,l?Math.max(Math.abs(I),Math.abs(r)):Math.max(Math.abs(E),Math.abs(q))),l?(i.aa.U(c+j/2-i.K.x-i.Ca.x,e+b),l=c+j/2-i.K.x-i.Ca.x,d=Math.max(d,l+v.width),0>l&&(d-=l),e=Math.max(e,Math.max(I,
r)+b+v.height),0>i.aa.x&&(c=cq(a,i.aa.x,p,c,j))):(i.aa.U(d+b,c+j/2-i.K.y-i.Ca.y),d=Math.max(d,Math.max(E,q)+b+v.width),l=c+j/2-i.K.y-i.Ca.y,e=Math.max(e,l+v.height),0>l&&(e-=l),0>i.aa.y&&(c=cq(a,i.aa.y,h,c,j))));return[c,d,e]}
function Rp(a,b,c,d,e){u&&w.i(a,Y,W,"layoutBusChildrenNegDir:v");var g=b.length;if(0===g)return[c,d,e];if(1===g){var i=b[0],d=i.Pa.width,e=i.Pa.height;return[c,d,e]}for(var j=a.td,k=a.Je,l=270===Lp(a),m=0,q=0,r=0,s=0;s<g;s++)if(!(0!==s%2||1<g&&s===g-1)){var i=b[s],v=i.Pa,y=0===m?0:k;if(l){var C=aq(i)-j,r=r-(y+v.height);i.aa.U(c-(v.width+C),r);d=Math.max(d,v.width+C);e=Math.max(e,Math.abs(r))}else C=aq(i)-j,q-=y+v.width,i.aa.U(q,c-(v.height+C)),e=Math.max(e,v.height+C),d=Math.max(d,Math.abs(q));m++}var m=
0,E=q,I=r;l?(q=c+j,r=0):(q=0,r=c+j);for(s=0;s<g;s++)0!==s%2&&(i=b[s],v=i.Pa,y=0===m?0:k,l?(C=aq(i)-j,r-=y+v.height,i.aa.U(q+C,r),d=Math.max(d,q+v.width+C),e=Math.max(e,Math.abs(r))):(C=aq(i)-j,q-=y+v.width,i.aa.U(q,r+C),e=Math.max(e,r+v.height+C),d=Math.max(d,Math.abs(q))),m++);1<g&&1===g%2&&(i=b[g-1],v=i.Pa,k=bq(i,l?Math.max(Math.abs(I),Math.abs(r)):Math.max(Math.abs(E),Math.abs(q))),l?(i.aa.U(c+j/2-i.K.x-i.Ca.x,-e-v.height-k),q=c+j/2-i.K.x-i.Ca.x,d=Math.max(d,q+v.width),0>q&&(d-=q),e=Math.max(e,
Math.abs(Math.min(I,r))+k+v.height),0>i.aa.x&&(c=cq(a,i.aa.x,p,c,j))):(i.aa.U(-d-v.width-k,c+j/2-i.K.y-i.Ca.y),d=Math.max(d,Math.abs(Math.min(E,q))+k+v.width),q=c+j/2-i.K.y-i.Ca.y,e=Math.max(e,q+v.height),0>q&&(e-=q),0>i.aa.y&&(c=cq(a,i.aa.y,h,c,j))));for(s=0;s<g;s++)i=b[s],l?i.aa.U(i.aa.x,i.aa.y+e):i.aa.U(i.aa.x+d,i.aa.y);return[c,d,e]}function aq(a){u&&w.i(a,Y,W,"fixRelativePostions:child");return a.parent===n?0:a.parent.Pv}
function bq(a){u&&w.i(a,Y,W,"fixRelativePostions:lastchild");return a.parent===n?0:a.parent.Yv}function cq(a,b,c,d,e){u&&w.i(a,Y,W,"fixRelativePostions:v");for(var a=a.Yb,g=a.length,i=0;i<g;i++)c?a[i].aa.U(a[i].aa.x,a[i].aa.y-b):a[i].aa.U(a[i].aa.x-b,a[i].aa.y);b=a[g-1];return Math.max(d,c?b.Ca.y+b.K.y-e/2:b.Ca.x+b.K.x-e/2)}
function Yp(a,b,c){u&&w.i(a,Y,W,"calculateSubwidth:v");switch(a.Ba){case Bp:case Xp:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case Mp:return a.width>b?a.width:b;case Np:return 2*a.K.x>b?a.width:b+a.width-2*a.K.x;case Dp:case tp:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case Ep:return a.width-a.K.x+a.td/2+b;case Fp:return Math.max(a.width,a.K.x+a.td/2+b);default:return b}}
function Zp(a,b,c){u&&w.i(a,Y,W,"calculateSubheight:v");switch(a.Ba){case Bp:case Xp:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case Mp:return a.height>b?a.height:b;case Np:return 2*a.K.y>b?a.height:b+a.height-2*a.K.y;case Dp:case tp:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case Ep:return a.height-a.K.y+a.td/2+b;case Fp:return Math.max(a.height,a.K.y+a.td/2+b);default:return b}}
function $p(a,b,c){u&&w.i(a,ja,W,"alignOffset:align");switch(a){case Xp:b/=2;c/=2;break;case Bp:b/=2;c/=2;break;case Mp:c=b=0;break;case Np:break;default:w.m("Unhandled alignment value "+a.toString())}return[b,c]}function Sp(a,b,c,d,e,g){u&&w.i(a,Y,W,"shiftRelPosAlign:v");u&&w.i(b,ja,W,"shiftRelPosAlign:align");b=$p(b,c,d);Vp(a,b[0],b[1],e,g)}function Vp(a,b,c,d,e){u&&w.i(a,Y,W,"shiftRelPos:v");if(!(0===b&&0===c))for(a=a.Yb;d<=e;d++){var g=a[d].aa;g.x+=b;g.y+=c}}
function Tp(a,b,c,d){u&&(w.i(b,Y,W,"recordMidPoints:v"),w.k(c,"number",W,"recordMidPoints:x"),w.k(d,"number",W,"recordMidPoints:y"));var e=b.hb;switch(a.ef){case cp:for(a=b.Hb;a.next();)b=a.value,b.W===e&&b.Jq.U(c,d);break;case jp:for(a=b.Gb;a.next();)b=a.value,b.S===e&&b.Jq.U(c,d);break;default:w.m("Unhandled path value "+a.ef.toString())}}function Wp(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b;e.y+=c}}
function Up(a,b,c,d,e,g){u&&w.i(a,Y,W,"mergeFringes:parent");u&&w.i(b,Y,W,"mergeFringes:child");var i=Lp(a),j=90===i||270===i,k=a.td,l=e,m=g,q=b.cq,e=b.Rq,g=b.Pa,a=j?Math.max(m,g.height):Math.max(l,g.width);if(q===n||i!==Lp(b))q=[],e=[],j?(q[0]=new F(0,0),q[1]=new F(0,g.height),e[0]=new F(g.width,0),e[1]=new F(e[0].x,q[1].y)):(q[0]=new F(0,0),q[1]=new F(g.width,0),e[0]=new F(0,g.height),e[1]=new F(q[1].x,e[0].y));if(j){b=j=l;i=q;l=9999999;if(!(d===n||2>d.length||i===n||2>i.length))for(var r=m=0;m<
d.length&&r<i.length;){var s=d[m],v=i[r].copy();v.x+=j;var y=s;m+1<d.length&&(y=d[m+1]);var C=v;r+1<i.length&&(C=i[r+1].copy(),C.x+=j);var E=l;s.y===v.y?E=v.x-s.x:s.y>v.y&&s.y<C.y?E=v.x+(s.y-v.y)/(C.y-v.y)*(C.x-v.x)-s.x:v.y>s.y&&v.y<y.y&&(E=v.x-(s.x+(v.y-s.y)/(y.y-s.y)*(y.x-s.x)));E<l&&(l=E);y.y<=s.y?m++:C.y<=v.y?r++:(y.y<=C.y&&m++,C.y<=y.y&&r++)}b-=l;b+=k;k=q;q=b;if(c===n||2>c.length||k===n||2>k.length)c=n;else{i=[];for(l=j=r=0;j<k.length&&k[j].y<c[0].y;)m=k[j++].copy(),m.x+=q,i[l++]=m;for(;r<c.length;)m=
c[r++].copy(),i[l++]=m;for(c=c[c.length-1].y;j<k.length&&k[j].y<=c;)j++;for(;j<k.length&&k[j].y>c;)m=k[j++].copy(),m.x+=q,i[l++]=m;c=i}j=e;l=b;if(d===n||2>d.length||j===n||2>j.length)d=n;else{e=[];for(q=m=k=0;k<d.length&&d[k].y<j[0].y;)i=d[k++].copy(),e[q++]=i;for(;m<j.length;)i=j[m++].copy(),i.x+=l,e[q++]=i;for(j=j[j.length-1].y;k<d.length&&d[k].y<=j;)k++;for(;k<d.length&&d[k].y>j;)i=d[k++].copy(),e[q++]=i;d=e}e=Math.max(0,b)+g.width;g=a}else{b=j=m;i=q;l=9999999;if(!(d===n||2>d.length||i===n||2>
i.length))for(r=m=0;m<d.length&&r<i.length;)s=d[m],v=i[r].copy(),v.y+=j,y=s,m+1<d.length&&(y=d[m+1]),C=v,r+1<i.length&&(C=i[r+1].copy(),C.y+=j),E=l,s.x===v.x?E=v.y-s.y:s.x>v.x&&s.x<C.x?E=v.y+(s.x-v.x)/(C.x-v.x)*(C.y-v.y)-s.y:v.x>s.x&&v.x<y.x&&(E=v.y-(s.y+(v.x-s.x)/(y.x-s.x)*(y.y-s.y))),E<l&&(l=E),y.x<=s.x?m++:C.x<=v.x?r++:(y.x<=C.x&&m++,C.x<=y.x&&r++);b-=l;b+=k;k=q;q=b;if(c===n||2>c.length||k===n||2>k.length)c=n;else{i=[];for(l=j=r=0;j<k.length&&k[j].x<c[0].x;)m=k[j++].copy(),m.y+=q,i[l++]=m;for(;r<
c.length;)m=c[r++].copy(),i[l++]=m;for(c=c[c.length-1].x;j<k.length&&k[j].x<=c;)j++;for(;j<k.length&&k[j].x>c;)m=k[j++].copy(),m.y+=q,i[l++]=m;c=i}j=e;l=b;if(d===n||2>d.length||j===n||2>j.length)d=n;else{e=[];for(q=m=k=0;k<d.length&&d[k].x<j[0].x;)i=d[k++].copy(),e[q++]=i;for(;m<j.length;)i=j[m++].copy(),i.y+=l,e[q++]=i;for(j=j[j.length-1].x;k<d.length&&d[k].x<=j;)k++;for(;k<d.length&&d[k].x>j;)i=d[k++].copy(),e[q++]=i;d=e}e=a;g=Math.max(0,b)+g.height}return[b,c,d,e,g]}
function pp(a,b,c,d){if(b!==n){u&&w.i(b,Y,W,"assignAbsolutePositions:v");b.x=c;b.y=d;for(var b=b.Yb,e=b.length,g=0;g<e;g++){var i=b[g];pp(a,i,c+i.aa.x,d+i.aa.y)}}}W.prototype.commitLayout=W.prototype.iv=function(){this.Zz();this.commitNodes();this.ks&&this.commitLinks()};W.prototype.commitNodes=W.prototype.Vy=function(){for(var a=this.B.ka.l,b;a.next();)b=a.value,b.commit();for(a.reset();a.next();)b=a.value,this.layoutComments(b)};W.prototype.commitLinks=W.prototype.Uy=function(){for(var a=this.B.mc.l;a.next();)a.value.commit()};
W.prototype.Zz=function(){for(var a=this.gd.l;a.next();){var b=this.B.Re(a.value);iq(this,b)}};
function iq(a,b){if(b!==n){u&&w.i(b,Y,W,"setPortSpotsTree:v");u&&w.i(b,Y,W,"setPortSpots:v");var c=b.Ba;if(Cp(c)){u&&w.i(b,Y,W,"setPortSpotsBus:v");u&&w.i(c,ja,W,"setPortSpots:align");var d=a.ef===cp,e=Lp(b),g;switch(e){case 0:g=Zb;break;case 90:g=$b;break;case 180:g=Tb;break;default:g=Sb}var i=b.Yb,j=i.length;switch(c){case Dp:case tp:for(c=0;c<j;c++){var k=i[c],k=d?k.Hb:k.Gb;if(k.next()){var l=k.value,l=l.Ra;if(l!==n){var m=90===e||270===e?Tb:Sb;if(1===j||c===j-1&&1===j%2)switch(e){case 0:m=Tb;
break;case 90:m=Sb;break;case 180:m=Zb;break;default:m=$b}else 0===c%2&&(m=90===e||270===e?Zb:$b);d?(b.Mj&&(l.jb=g),b.Lj&&(l.nb=m)):(b.Mj&&(l.jb=m),b.Lj&&(l.nb=g))}}}break;case Ep:m=90===e||270===e?Zb:$b;for(k=d?b.Gb:b.Hb;k.next();)l=k.value,l=l.Ra,l!==n&&(d?(b.Mj&&(l.jb=g),b.Lj&&(l.nb=m)):(b.Mj&&(l.jb=m),b.Lj&&(l.nb=g)));break;case Fp:m=90===e||270===e?Tb:Sb;for(k=d?b.Gb:b.Hb;k.next();)l=k.value,l=l.Ra,l!==n&&(d?(b.Mj&&(l.jb=g),b.Lj&&(l.nb=m)):(b.Mj&&(l.jb=m),b.Lj&&(l.nb=g)))}}else if(d=Lp(b),a.ef===
cp)for(e=b.Gb;e.next();){if(g=e.value,g=g.Ra,g!==n){if(b.Lg)if(Eb(b.of))switch(d){case 0:g.jb=Zb;break;case 90:g.jb=$b;break;case 180:g.jb=Tb;break;default:g.jb=Sb}else g.jb=b.of;if(b.Kg)if(Eb(b.cf))switch(d){case 0:g.nb=Tb;break;case 90:g.nb=Sb;break;case 180:g.nb=Zb;break;default:g.nb=$b}else g.nb=b.cf}}else for(e=b.Hb;e.next();)if(g=e.value,g=g.Ra,g!==n){if(b.Lg)if(Eb(b.of))switch(d){case 0:g.nb=Zb;break;case 90:g.nb=$b;break;case 180:g.nb=Tb;break;default:g.nb=Sb}else g.nb=b.of;if(b.Kg)if(Eb(b.cf))switch(d){case 0:g.jb=
Tb;break;case 90:g.jb=Sb;break;case 180:g.jb=Zb;break;default:g.jb=$b}else g.jb=b.cf}d=b.Yb;e=d.length;for(g=0;g<e;g++)iq(a,d[g])}}function Lp(a){a=a.oc;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}function Op(a){u&&w.i(a,Y,W,"computeLayerSpacing:v");var b=Lp(a),b=90===b||270===b,c=a.Jd;if(0<a.Eg)var d=Math.min(1,a.Eg),c=c-(b?a.height*d:a.width*d);if(c<(b?-a.height:-a.width))c=b?-a.height:-a.width;return c}
function Pp(a){u&&w.i(a,Y,W,"computeNodeIndent:v");var b=Lp(a),b=90===b||270===b,c=a.lh;if(0<a.Hg)var d=Math.min(1,a.Hg),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}w.g(W,"roots",W.prototype.UH);w.defineProperty(W,{UH:"roots"},t("gd"),function(a){this.gd!==a&&(this.gd=a,this.F())});w.g(W,"path",W.prototype.path);w.defineProperty(W,{path:"path"},t("mh"),function(a){this.mh!==a&&(w.i(a,ja,W,"path"),this.mh=a,this.F())});w.g(W,"treeStyle",W.prototype.SE);
w.defineProperty(W,{SE:"treeStyle"},t("mr"),function(a){if(this.Tc!==a&&(u&&w.i(a,ja,W,"treeStyle"),a===dp||a===vp||a===wp||a===up))this.mr=a,this.F()});w.g(W,"arrangement",W.prototype.le);w.defineProperty(W,{le:"arrangement"},t("Tc"),function(a){if(this.Tc!==a&&(u&&w.i(a,ja,W,"arrangement"),a===ep||a===qp||a===ip))this.Tc=a,this.F()});w.g(W,"arrangementSpacing",W.prototype.av);w.defineProperty(W,{av:"arrangementSpacing"},t("Jf"),function(a){this.Jf.I(a)||(this.Jf.Ua(a),this.F())});
w.g(W,"rootDefaults",W.prototype.TH);w.defineProperty(W,{TH:"rootDefaults"},t("ia"),function(a){this.ia!==a&&(u&&w.i(a,Y,W,"rootDefaults"),this.ia=a,this.F())});w.g(W,"alternateDefaults",W.prototype.RF);w.defineProperty(W,{RF:"alternateDefaults"},t("ha"),function(a){this.ha!==a&&(u&&w.i(a,Y,W,"alternateDefaults"),this.ha=a,this.F())});w.g(W,"sorting",W.prototype.ng);
w.defineProperty(W,{ng:"sorting"},function(){return this.ia.uc},function(a){if(this.ia.uc!==a&&(u&&w.i(a,ja,W,"sorting"),a===xp||a===yp||a===zp||Ap))this.ia.uc=a,this.F()});w.g(W,"comparer",W.prototype.zh);w.defineProperty(W,{zh:"comparer"},function(){return this.ia.rc},function(a){this.ia.rc!==a&&(u&&w.k(a,"function",W,"comparer"),this.ia.rc=a,this.F())});w.g(W,"angle",W.prototype.angle);
w.defineProperty(W,{angle:"angle"},function(){return this.ia.oc},function(a){if(this.ia.oc!==a&&(0===a||90===a||180===a||270===a))this.ia.oc=a,this.F()});w.g(W,"alignment",W.prototype.Db);w.defineProperty(W,{Db:"alignment"},function(){return this.ia.Ba},function(a){this.ia.Ba!==a&&(u&&w.ib(a,W,W,"alignment"),this.ia.Ba=a,this.F())});w.g(W,"nodeIndent",W.prototype.Hz);w.defineProperty(W,{Hz:"nodeIndent"},function(){return this.ia.lh},function(a){this.ia.lh!==a&&0<=a&&(this.ia.lh=a,this.F())});
w.g(W,"nodeIndentPastParent",W.prototype.Iz);w.defineProperty(W,{Iz:"nodeIndentPastParent"},function(){return this.ia.Hg},function(a){this.ia.Hg!==a&&(0<=a&&1>=a)&&(this.ia.Hg=a,this.F())});w.g(W,"nodeSpacing",W.prototype.Pv);w.defineProperty(W,{Pv:"nodeSpacing"},function(){return this.ia.td},function(a){this.ia.td!==a&&(this.ia.td=a,this.F())});w.g(W,"layerSpacing",W.prototype.ns);w.defineProperty(W,{ns:"layerSpacing"},function(){return this.ia.Jd},function(a){this.ia.Jd!==a&&(this.ia.Jd=a,this.F())});
w.g(W,"layerSpacingParentOverlap",W.prototype.wz);w.defineProperty(W,{wz:"layerSpacingParentOverlap"},function(){return this.ia.Eg},function(a){this.ia.Eg!==a&&(0<=a&&1>=a)&&(this.ia.Eg=a,this.F())});w.g(W,"compaction",W.prototype.jv);w.defineProperty(W,{jv:"compaction"},function(){return this.ia.wg},function(a){if(this.ia.wg!==a&&(u&&w.i(a,ja,W,"compaction"),a===Ip||a===Kp))this.ia.wg=a,this.F()});w.g(W,"breadthLimit",W.prototype.My);
w.defineProperty(W,{My:"breadthLimit"},function(){return this.ia.tg},function(a){this.ia.tg!==a&&0<=a&&(this.ia.tg=a,this.F())});w.g(W,"rowSpacing",W.prototype.Yv);w.defineProperty(W,{Yv:"rowSpacing"},function(){return this.ia.Je},function(a){this.ia.Je!==a&&(this.ia.Je=a,this.F())});w.g(W,"rowIndent",W.prototype.Sz);w.defineProperty(W,{Sz:"rowIndent"},function(){return this.ia.hd},function(a){this.ia.hd!==a&&0<=a&&(this.ia.hd=a,this.F())});w.g(W,"commentSpacing",W.prototype.Sy);
w.defineProperty(W,{Sy:"commentSpacing"},function(){return this.ia.Fd},function(a){this.ia.Fd!==a&&(this.ia.Fd=a,this.F())});w.g(W,"commentMargin",W.prototype.Ry);w.defineProperty(W,{Ry:"commentMargin"},function(){return this.ia.qc},function(a){this.ia.qc!==a&&(this.ia.qc=a,this.F())});w.g(W,"setsPortSpot",W.prototype.Mj);w.defineProperty(W,{Mj:"setsPortSpot"},function(){return this.ia.Lg},function(a){this.ia.Lg!==a&&(this.ia.Lg=a,this.F())});w.g(W,"portSpot",W.prototype.Lz);
w.defineProperty(W,{Lz:"portSpot"},function(){return this.ia.of},function(a){this.ia.of.I(a)||(this.ia.of=a,this.F())});w.g(W,"setsChildPortSpot",W.prototype.Lj);w.defineProperty(W,{Lj:"setsChildPortSpot"},function(){return this.ia.Kg},function(a){this.ia.Kg!==a&&(this.ia.Kg=a,this.F())});w.g(W,"childPortSpot",W.prototype.Py);w.defineProperty(W,{Py:"childPortSpot"},function(){return this.ia.cf},function(a){this.ia.cf.I(a)||(this.ia.cf=a,this.F())});w.g(W,"alternateSorting",W.prototype.bG);
w.defineProperty(W,{bG:"alternateSorting"},function(){return this.ha.uc},function(a){if(this.ha.uc!==a&&(u&&w.i(a,ja,W,"alternateSorting"),a===xp||a===yp||a===zp||Ap))this.ha.uc=a,this.F()});w.g(W,"alternateComparer",W.prototype.PF);w.defineProperty(W,{PF:"alternateComparer"},function(){return this.ha.rc},function(a){this.ha.rc!==a&&(u&&w.k(a,"function",W,"alternateComparer"),this.ha.rc=a,this.F())});w.g(W,"alternateAngle",W.prototype.JF);
w.defineProperty(W,{JF:"alternateAngle"},function(){return this.ha.oc},function(a){if(this.ha.oc!==a&&(0===a||90===a||180===a||270===a))this.ha.oc=a,this.F()});w.g(W,"alternateAlignment",W.prototype.IF);w.defineProperty(W,{IF:"alternateAlignment"},function(){return this.ha.Ba},function(a){this.ha.Ba!==a&&(u&&w.ib(a,W,W,"alternateAlignment"),this.ha.Ba=a,this.F())});w.g(W,"alternateNodeIndent",W.prototype.UF);
w.defineProperty(W,{UF:"alternateNodeIndent"},function(){return this.ha.lh},function(a){this.ha.lh!==a&&0<=a&&(this.ha.lh=a,this.F())});w.g(W,"alternateNodeIndentPastParent",W.prototype.VF);w.defineProperty(W,{VF:"alternateNodeIndentPastParent"},function(){return this.ha.Hg},function(a){this.ha.Hg!==a&&(0<=a&&1>=a)&&(this.ha.Hg=a,this.F())});w.g(W,"alternateNodeSpacing",W.prototype.WF);
w.defineProperty(W,{WF:"alternateNodeSpacing"},function(){return this.ha.td},function(a){this.ha.td!==a&&(this.ha.td=a,this.F())});w.g(W,"alternateLayerSpacing",W.prototype.SF);w.defineProperty(W,{SF:"alternateLayerSpacing"},function(){return this.ha.Jd},function(a){this.ha.Jd!==a&&(this.ha.Jd=a,this.F())});w.g(W,"alternateLayerSpacingParentOverlap",W.prototype.TF);
w.defineProperty(W,{TF:"alternateLayerSpacingParentOverlap"},function(){return this.ha.Eg},function(a){this.ha.Eg!==a&&(0<=a&&1>=a)&&(this.ha.Eg=a,this.F())});w.g(W,"alternateCompaction",W.prototype.OF);w.defineProperty(W,{OF:"alternateCompaction"},function(){return this.ha.wg},function(a){if(this.ha.wg!==a&&(u&&w.i(a,ja,W,"alternateCompaction"),a===Ip||a===Kp))this.ha.wg=a,this.F()});w.g(W,"alternateBreadthLimit",W.prototype.KF);
w.defineProperty(W,{KF:"alternateBreadthLimit"},function(){return this.ha.tg},function(a){this.ha.tg!==a&&0<=a&&(this.ha.tg=a,this.F())});w.g(W,"alternateRowSpacing",W.prototype.ZF);w.defineProperty(W,{ZF:"alternateRowSpacing"},function(){return this.ha.Je},function(a){this.ha.Je!==a&&(this.ha.Je=a,this.F())});w.g(W,"alternateRowIndent",W.prototype.YF);w.defineProperty(W,{YF:"alternateRowIndent"},function(){return this.ha.hd},function(a){this.ha.hd!==a&&0<=a&&(this.ha.hd=a,this.F())});
w.g(W,"alternateCommentSpacing",W.prototype.NF);w.defineProperty(W,{NF:"alternateCommentSpacing"},function(){return this.ha.Fd},function(a){this.ha.Fd!==a&&(this.ha.Fd=a,this.F())});w.g(W,"alternateCommentMargin",W.prototype.MF);w.defineProperty(W,{MF:"alternateCommentMargin"},function(){return this.ha.qc},function(a){this.ha.qc!==a&&(this.ha.qc=a,this.F())});w.g(W,"alternateSetsPortSpot",W.prototype.aG);
w.defineProperty(W,{aG:"alternateSetsPortSpot"},function(){return this.ha.Lg},function(a){this.ha.Lg!==a&&(this.ha.Lg=a,this.F())});w.g(W,"alternatePortSpot",W.prototype.XF);w.defineProperty(W,{XF:"alternatePortSpot"},function(){return this.ha.of},function(a){this.ha.of.I(a)||(this.ha.of=a,this.F())});w.g(W,"alternateSetsChildPortSpot",W.prototype.$F);w.defineProperty(W,{$F:"alternateSetsChildPortSpot"},function(){return this.ha.Kg},function(a){this.ha.Kg!==a&&(this.ha.Kg=a,this.F())});
w.g(W,"alternateChildPortSpot",W.prototype.LF);w.defineProperty(W,{LF:"alternateChildPortSpot"},function(){return this.ha.cf},function(a){this.ha.cf.I(a)||(this.ha.cf=a,this.F())});var bp;W.PathDefault=bp=w.s(W,"PathDefault",-1);var cp;W.PathDestination=cp=w.s(W,"PathDestination",0);var jp;W.PathSource=jp=w.s(W,"PathSource",1);var xp;W.SortingForwards=xp=w.s(W,"SortingForwards",10);var yp;W.SortingReverse=yp=w.s(W,"SortingReverse",11);var zp;W.SortingAscending=zp=w.s(W,"SortingAscending",12);var Ap;
W.SortingDescending=Ap=w.s(W,"SortingDescending",13);var Xp;W.AlignmentCenterSubtrees=Xp=w.s(W,"AlignmentCenterSubtrees",20);var Bp;W.AlignmentCenterChildren=Bp=w.s(W,"AlignmentCenterChildren",21);var Mp;W.AlignmentStart=Mp=w.s(W,"AlignmentStart",22);var Np;W.AlignmentEnd=Np=w.s(W,"AlignmentEnd",23);var Dp;W.AlignmentBus=Dp=w.s(W,"AlignmentBus",24);var tp;W.AlignmentBusBranching=tp=w.s(W,"AlignmentBusBranching",25);var Ep;W.AlignmentTopLeftBus=Ep=w.s(W,"AlignmentTopLeftBus",26);var Fp;
W.AlignmentBottomRightBus=Fp=w.s(W,"AlignmentBottomRightBus",27);var Ip;W.CompactionNone=Ip=w.s(W,"CompactionNone",30);var Kp;W.CompactionBlock=Kp=w.s(W,"CompactionBlock",31);var dp;W.StyleLayered=dp=w.s(W,"StyleLayered",40);var wp;W.StyleLastParents=wp=w.s(W,"StyleLastParents",41);var vp;W.StyleAlternating=vp=w.s(W,"StyleAlternating",42);var up;W.StyleRootOnly=up=w.s(W,"StyleRootOnly",43);var ep;W.ArrangementVertical=ep=w.s(W,"ArrangementVertical",50);var qp;
W.ArrangementHorizontal=qp=w.s(W,"ArrangementHorizontal",51);var ip;W.ArrangementFixedRoots=ip=w.s(W,"ArrangementFixedRoots",52);function gp(){Wm.call(this)}w.Q("TreeNetwork",gp);w.Ea(gp,Wm);gp.prototype.createVertex=gp.prototype.Bj=function(){return new Y};gp.prototype.createEdge=gp.prototype.Un=function(){return new jq};
function Y(){$m.call(this);this.rk=p;this.hb=n;this.Yb=[];this.fi=this.Vt=this.tt=this.Dl=this.tI=0;this.aa=new F(0,0);this.Pa=new bb(0,0);this.Ca=new F(0,0);this.Rq=this.cq=this.Gd=n;this.Ck=this.Bk=this.Xx=p;this.uc=xp;this.rc=en;this.oc=0;this.Ba=Bp;this.Hg=this.lh=0;this.td=20;this.Jd=50;this.Eg=0;this.wg=Kp;this.tg=0;this.Je=25;this.Fd=this.hd=10;this.qc=20;this.Lg=h;this.of=Hb;this.Kg=h;this.cf=Hb}w.Q("TreeVertex",Y);w.Ea(Y,$m);
function fp(a,b){b!==n&&(a.uc=b.uc,a.rc=b.rc,a.oc=b.oc,a.Ba=b.Ba,a.lh=b.lh,a.Hg=b.Hg,a.td=b.td,a.Jd=b.Jd,a.Eg=b.Eg,a.wg=b.wg,a.tg=b.tg,a.Je=b.Je,a.hd=b.hd,a.Fd=b.Fd,a.qc=b.qc,a.Lg=b.Lg,a.of=b.of,a.Kg=b.Kg,a.cf=b.cf)}w.g(Y,"initialized",Y.prototype.SG);w.defineProperty(Y,{SG:"initialized"},t("rk"),ba("rk"));w.g(Y,"parent",Y.prototype.parent);w.defineProperty(Y,{parent:"parent"},t("hb"),ba("hb"));w.g(Y,"children",Y.prototype.children);w.defineProperty(Y,{children:"children"},t("Yb"),ba("Yb"));
w.u(Y,{Wl:"childrenCount"},function(){return this.Yb.length});w.g(Y,"level",Y.prototype.iH);w.defineProperty(Y,{iH:"level"},t("Dl"),ba("Dl"));w.g(Y,"descendantCount",Y.prototype.rG);w.defineProperty(Y,{rG:"descendantCount"},t("tt"),ba("tt"));w.g(Y,"maxChildrenCount",Y.prototype.pH);w.defineProperty(Y,{pH:"maxChildrenCount"},t("Vt"),ba("Vt"));w.g(Y,"maxGenerationCount",Y.prototype.qH);w.defineProperty(Y,{qH:"maxGenerationCount"},t("fi"),ba("fi"));w.g(Y,"relativePosition",Y.prototype.MH);
w.defineProperty(Y,{MH:"relativePosition"},t("aa"),function(a){w.i(a,F,Y,"relativePosition");this.aa.set(a)});w.g(Y,"subtreeSize",Y.prototype.kI);w.defineProperty(Y,{kI:"subtreeSize"},t("Pa"),function(a){w.i(a,bb,Y,"subtreeSize");this.Pa.set(a)});w.g(Y,"subtreeOffset",Y.prototype.jI);w.defineProperty(Y,{jI:"subtreeOffset"},t("Ca"),function(a){w.i(a,F,Y,"subtreeOffset");this.Ca.set(a)});w.g(Y,"comments",Y.prototype.Ty);w.defineProperty(Y,{Ty:"comments"},t("Gd"),ba("Gd"));w.g(Y,"sorting",Y.prototype.ng);
w.defineProperty(Y,{ng:"sorting"},t("uc"),ba("uc"));w.g(Y,"comparer",Y.prototype.zh);w.defineProperty(Y,{zh:"comparer"},t("rc"),ba("rc"));w.g(Y,"angle",Y.prototype.angle);w.defineProperty(Y,{angle:"angle"},t("oc"),ba("oc"));w.g(Y,"alignment",Y.prototype.Db);w.defineProperty(Y,{Db:"alignment"},t("Ba"),ba("Ba"));w.g(Y,"nodeIndent",Y.prototype.Hz);w.defineProperty(Y,{Hz:"nodeIndent"},t("lh"),ba("lh"));w.g(Y,"nodeIndentPastParent",Y.prototype.Iz);
w.defineProperty(Y,{Iz:"nodeIndentPastParent"},t("Hg"),ba("Hg"));w.g(Y,"nodeSpacing",Y.prototype.Pv);w.defineProperty(Y,{Pv:"nodeSpacing"},t("td"),ba("td"));w.g(Y,"layerSpacing",Y.prototype.ns);w.defineProperty(Y,{ns:"layerSpacing"},t("Jd"),ba("Jd"));w.g(Y,"layerSpacingParentOverlap",Y.prototype.wz);w.defineProperty(Y,{wz:"layerSpacingParentOverlap"},t("Eg"),ba("Eg"));w.g(Y,"compaction",Y.prototype.jv);w.defineProperty(Y,{jv:"compaction"},t("wg"),ba("wg"));w.g(Y,"breadthLimit",Y.prototype.My);
w.defineProperty(Y,{My:"breadthLimit"},t("tg"),ba("tg"));w.g(Y,"rowSpacing",Y.prototype.Yv);w.defineProperty(Y,{Yv:"rowSpacing"},t("Je"),ba("Je"));w.g(Y,"rowIndent",Y.prototype.Sz);w.defineProperty(Y,{Sz:"rowIndent"},t("hd"),ba("hd"));w.g(Y,"commentSpacing",Y.prototype.Sy);w.defineProperty(Y,{Sy:"commentSpacing"},t("Fd"),ba("Fd"));w.g(Y,"commentMargin",Y.prototype.Ry);w.defineProperty(Y,{Ry:"commentMargin"},t("qc"),ba("qc"));w.g(Y,"setsPortSpot",Y.prototype.Mj);
w.defineProperty(Y,{Mj:"setsPortSpot"},t("Lg"),ba("Lg"));w.g(Y,"portSpot",Y.prototype.Lz);w.defineProperty(Y,{Lz:"portSpot"},t("of"),ba("of"));w.g(Y,"setsChildPortSpot",Y.prototype.Lj);w.defineProperty(Y,{Lj:"setsChildPortSpot"},t("Kg"),ba("Kg"));w.g(Y,"childPortSpot",Y.prototype.Py);w.defineProperty(Y,{Py:"childPortSpot"},t("cf"),ba("cf"));w.g(Y,"routeFirstRow",Y.prototype.YH);w.defineProperty(Y,{YH:"routeFirstRow"},t("Xx"),ba("Xx"));w.g(Y,"routeAroundCentered",Y.prototype.WH);
w.defineProperty(Y,{WH:"routeAroundCentered"},t("Bk"),ba("Bk"));w.g(Y,"routeAroundLastParent",Y.prototype.XH);w.defineProperty(Y,{XH:"routeAroundLastParent"},t("Ck"),ba("Ck"));function jq(){an.call(this);this.Jq=new F(0,0)}w.Q("TreeEdge",jq);w.Ea(jq,an);
jq.prototype.commit=jq.prototype.hv=function(){var a=this.Ra;if(a!==n&&a.Gh!==$f){var b=this.B.Pb,c=n,d=n;switch(b.ef){case cp:c=this.W;d=this.S;break;case jp:c=this.S;d=this.W;break;default:w.m("Unhandled path value "+b.ef.toString())}if(!(c===n||d===n))if(b=this.Jq,0===b.x&&0===b.y&&!c.Xx){var e=c,g=d;u&&w.i(e,Y,jq,"adjustRouteForAngleChange:parent");u&&w.i(g,Y,jq,"adjustRouteForAngleChange:child");a=this.Ra;c=Lp(e);if(c!==Lp(g)&&(b=Op(e),d=e.Fb,e=g.Fb,!(0===c&&e.left-d.right<b+1||90===c&&e.top-
d.bottom<b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1))){a.iA();var e=a.yf===hk,g=a.fc,i=Cp(this.W.Ba);a.fl();0===c?(c=d.right+b/2,e?4===a.ja&&(b=a.p(3).y,a.J(1,new F(c-20,a.p(1).y)),a.A(2,new F(c-20,b)),a.A(3,new F(c,b)),a.A(4,new F(c+20,b)),a.J(5,new F(a.p(5).x,b))):g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ja&&(a.J(2,new F(c,a.p(2).y)),a.J(3,new F(c,a.p(3).y))):4===a.ja?a.A(2,new F(c,a.p(2).y)):3===a.ja?a.J(1,new F(c,a.p(2).y)):2===a.ja&&a.A(1,new F(c,a.p(1).y))):90===c?(b=d.bottom+
b/2,e?4===a.ja&&(c=a.p(3).x,a.J(1,new F(a.p(1).x,b-20)),a.A(2,new F(c,b-20)),a.A(3,new F(c,b)),a.A(4,new F(c,b+20)),a.J(5,new F(c,a.p(5).y))):g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ja&&(a.J(2,new F(a.p(2).x,b)),a.J(3,new F(a.p(3).x,b))):4===a.ja?a.A(2,new F(a.p(2).x,b)):3===a.ja?a.J(1,new F(a.p(2).x,b)):2===a.ja&&a.A(1,new F(a.p(1).x,b))):180===c?(c=d.left-b/2,e?4===a.ja&&(b=a.p(3).y,a.J(1,new F(c+20,a.p(1).y)),a.A(2,new F(c+20,b)),a.A(3,new F(c,b)),a.A(4,new F(c-20,b)),a.J(5,new F(a.p(5).x,b))):
g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ja&&(a.J(2,new F(c,a.p(2).y)),a.J(3,new F(c,a.p(3).y))):4===a.ja?a.A(2,new F(c,a.p(2).y)):3===a.ja?a.J(1,new F(c,a.p(2).y)):2===a.ja&&a.A(1,new F(c,a.p(1).y))):270===c&&(b=d.top-b/2,e?4===a.ja&&(c=a.p(3).x,a.J(1,new F(a.p(1).x,b+20)),a.A(2,new F(c,b+20)),a.A(3,new F(c,b)),a.A(4,new F(c,b-20)),a.J(5,new F(c,a.p(5).y))):g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ja&&(a.J(2,new F(a.p(2).x,b)),a.J(3,new F(a.p(3).x,b))):4===a.ja?a.A(2,new F(a.p(2).x,b)):3===a.ja?
a.J(1,new F(a.p(2).x,b)):2===a.ja&&a.A(1,new F(a.p(1).x,b)));a.zi()}}else{var d=c.Fb,j=Lp(c),e=Op(c),g=c.Je;a.iA();var i=a.yf===hk,k=a.fc,l,m,q,r;a.fl();if(k||i){for(l=2;4<a.ja;)a.fE(2);m=a.p(1);q=a.p(2)}else{for(l=1;3<a.ja;)a.fE(1);m=a.p(0);q=a.p(a.ja-1)}r=a.p(a.ja-1);0===j?(c.Ba===Np?(j=d.bottom+b.y,0===b.y&&m.y>r.y+c.hd&&(j=Math.min(j,Math.max(m.y,j-Pp(c))))):c.Ba===Mp?(j=d.top+b.y,0===b.y&&m.y<r.y-c.hd&&(j=Math.max(j,Math.min(m.y,j+Pp(c))))):j=c.Bk||c.Ck&&1===c.fi?d.top-c.Ca.y+b.y:d.y+d.height/
2+b.y,i?(a.A(l,new F(m.x,j)),l++,a.A(l,new F(d.right+e,j)),l++,a.A(l,new F(d.right+e+(b.x-g)/3,j)),l++,a.A(l,new F(d.right+e+2*(b.x-g)/3,j)),l++,a.A(l,new F(d.right+e+(b.x-g),j)),l++,a.A(l,new F(q.x,j))):(k&&(a.A(l,new F(d.right+e/2,m.y)),l++),a.A(l,new F(d.right+e/2,j)),l++,a.A(l,new F(d.right+e+b.x-(k?g/2:g),j)),l++,k&&a.A(l,new F(a.p(l-1).x,q.y)))):90===j?(c.Ba===Np?(j=d.right+b.x,0===b.x&&m.x>r.x+c.hd&&(j=Math.min(j,Math.max(m.x,j-Pp(c))))):c.Ba===Mp?(j=d.left+b.x,0===b.x&&m.x<r.x-c.hd&&(j=Math.max(j,
Math.min(m.x,j+Pp(c))))):j=c.Bk||c.Ck&&1===c.fi?d.left-c.Ca.x+b.x:d.x+d.width/2+b.x,i?(a.A(l,new F(j,m.y)),l++,a.A(l,new F(j,d.bottom+e)),l++,a.A(l,new F(j,d.bottom+e+(b.y-g)/3)),l++,a.A(l,new F(j,d.bottom+e+2*(b.y-g)/3)),l++,a.A(l,new F(j,d.bottom+e+(b.y-g))),l++,a.A(l,new F(j,q.y))):(k&&(a.A(l,new F(m.x,d.bottom+e/2)),l++),a.A(l,new F(j,d.bottom+e/2)),l++,a.A(l,new F(j,d.bottom+e+b.y-(k?g/2:g))),l++,k&&a.A(l,new F(q.x,a.p(l-1).y)))):180===j?(c.Ba===Np?(j=d.bottom+b.y,0===b.y&&m.y>r.y+c.hd&&(j=Math.min(j,
Math.max(m.y,j-Pp(c))))):c.Ba===Mp?(j=d.top+b.y,0===b.y&&m.y<r.y-c.hd&&(j=Math.max(j,Math.min(m.y,j+Pp(c))))):j=c.Bk||c.Ck&&1===c.fi?d.top-c.Ca.y+b.y:d.y+d.height/2+b.y,i?(a.A(l,new F(m.x,j)),l++,a.A(l,new F(d.left-e,j)),l++,a.A(l,new F(d.left-e+(b.x+g)/3,j)),l++,a.A(l,new F(d.left-e+2*(b.x+g)/3,j)),l++,a.A(l,new F(d.left-e+(b.x+g),j)),l++,a.A(l,new F(q.x,j))):(k&&(a.A(l,new F(d.left-e/2,m.y)),l++),a.A(l,new F(d.left-e/2,j)),l++,a.A(l,new F(d.left-e+b.x+(k?g/2:g),j)),l++,k&&a.A(l,new F(a.p(l-1).x,
q.y)))):270===j?(c.Ba===Np?(j=d.right+b.x,0===b.x&&m.x>r.x+c.hd&&(j=Math.min(j,Math.max(m.x,j-Pp(c))))):c.Ba===Mp?(j=d.left+b.x,0===b.x&&m.x<r.x-c.hd&&(j=Math.max(j,Math.min(m.x,j+Pp(c))))):j=c.Bk||c.Ck&&1===c.fi?d.left-c.Ca.x+b.x:d.x+d.width/2+b.x,i?(a.A(l,new F(j,m.y)),l++,a.A(l,new F(j,d.top-e)),l++,a.A(l,new F(j,d.top-e+(b.y+g)/3)),l++,a.A(l,new F(j,d.top-e+2*(b.y+g)/3)),l++,a.A(l,new F(j,d.top-e+(b.y+g))),l++,a.A(l,new F(j,q.y))):(k&&(a.A(l,new F(m.x,d.top-e/2)),l++),a.A(l,new F(j,d.top-e/2)),
l++,a.A(l,new F(j,d.top-e+b.y+(k?g/2:g))),l++,k&&a.A(l,new F(q.x,a.p(l-1).y)))):w.m("Invalid angle "+j);a.zi()}}};w.g(jq,"relativePoint",jq.prototype.LH);w.defineProperty(jq,{LH:"relativePoint"},t("Jq"),function(a){this.Jq.set(a)});function kq(){this.Qm=[]}
function bk(a){var b=new kq,c;if("string"===typeof a)c=(new DOMParser).parseFromString(a,"text/xml");else if(a instanceof Document)c=a.implementation.createDocument("http://www.w3.org/2000/svg","svg",n),c.appendChild(c.importNode(a.documentElement,h));else return n;a=c.getElementsByTagName("svg");if(0===a.length)return n;for(var d=a[0],e=c.getElementsByTagName("linearGradient"),g=c.getElementsByTagName("radialGradient"),a=0;a<e.length;a++){for(var i=e[a],j=ck(Fe,Ie,{start:ac,end:bc}),k=i.childNodes,
l=0;l<k.length;l++)if("stop"===k[l].tagName){var m=k[l].getAttribute("stop-color"),q=k[l].getAttribute("offset");-1!==q.indexOf("%")?j.addColorStop(0.01*parseFloat(q),m):j.addColorStop(parseFloat(q),m)}i=i.getAttribute("id");"string"===typeof i&&(b["_brush"+i]=j)}for(a=0;a<g.length;a++){i=g[a];j=ck(Fe,Je,{start:Ob,end:Ob});k=i.childNodes;for(l=0;l<k.length;l++)"stop"===k[l].tagName&&(m=k[l].getAttribute("stop-color"),q=k[l].getAttribute("offset"),-1!==q.indexOf("%")?j.addColorStop(0.01*parseFloat(q),
m):j.addColorStop(parseFloat(q),m));i=i.getAttribute("id");"string"===typeof i&&(b["_brush"+i]=j)}for(e=h;e;){e=p;g=c.getElementsByTagName("use");for(a=0;a<g.length;a++)j=g[a],0===j.childNodes.length&&(i=j.href,i!==f&&(i=c.getElementById(i.baseVal.substring(1)),i!==n&&(i=i.cloneNode(h),i.removeAttribute("id"),k=parseFloat(j.getAttribute("x")),l=parseFloat(j.getAttribute("y")),isNaN(k)&&(k=0),isNaN(l)&&(l=0),m=j.getAttribute("transform"),m===n&&(m=""),j.setAttribute("transform",m+" translate("+k+","+
l+")"),j.appendChild(i),"use"===i.tagName&&(e=h))))}lq(b,d,n);if(0===b.Qm.length)return n;if(1===b.Qm.length)return b.Qm[0];c=new x;for(a=0;a<b.Qm.length;a++)c.add(b.Qm[a]);return c}
function lq(a,b,c){var d=b.tagName;if(!("g"!==d&&"svg"!==d&&"use"!==d&&"symbol"!==d))for(var d=b.childNodes,e=0;e<d.length;e++){var g=d[e],i=n;if(g.getAttribute!==f){var j=g.getAttribute("transform");switch(g.tagName){case "g":j===n?lq(a,g,n):(i=new x,lq(a,g,i));break;case "use":j===n?lq(a,g,n):(i=new x,lq(a,g,i));break;case "symbol":if("use"!==b.tagName)break;i=new x;lq(a,g,i);var k=i,l=g;l.getAttribute("preserveAspectRatio");l.getAttribute("viewBox");k.scale=1;break;case "path":k=g;i=new V;k=k.getAttribute("d");
"string"===typeof k&&(i.WC=wd(k));break;case "line":var m=g,i=new V,k=parseFloat(m.getAttribute("x1")),l=parseFloat(m.getAttribute("y1")),q=parseFloat(m.getAttribute("x2")),m=parseFloat(m.getAttribute("y2"));isNaN(k)&&(k=0);isNaN(l)&&(l=0);isNaN(q)&&(q=0);isNaN(m)&&(m=0);var r=new hd(md);i.position=new F(Math.min(k,q),Math.min(l,m));0<(q-k)/(m-l)?(r.ma=0,r.na=0,r.C=Math.abs(q-k),r.D=Math.abs(m-l)):(r.ma=0,r.na=Math.abs(m-l),r.C=Math.abs(q-k),r.D=0);i.Xc=r;break;case "circle":q=g;i=new V;k=parseFloat(q.getAttribute("r"));
l=parseFloat(q.getAttribute("cx"));q=parseFloat(q.getAttribute("cy"));isNaN(k)?i=n:(isNaN(l)&&(l=0),isNaN(q)&&(q=0),m=new hd(rd),m.ma=0,m.na=0,m.C=2*k,m.D=2*k,i.position=new F(l-k,q-k),i.Xc=m);break;case "ellipse":m=g;i=new V;k=parseFloat(m.getAttribute("rx"));l=parseFloat(m.getAttribute("ry"));q=parseFloat(m.getAttribute("cx"));m=parseFloat(m.getAttribute("cy"));isNaN(q)&&(q=0);isNaN(m)&&(m=0);isNaN(k)||isNaN(l)?i=n:(r=new hd(rd),r.ma=0,r.na=0,r.C=2*k,r.D=2*l,i.position=new F(q-k,m-l),i.Xc=r);break;
case "rect":m=g;i=new V;k=parseFloat(m.getAttribute("height"));l=parseFloat(m.getAttribute("width"));q=parseFloat(m.getAttribute("x"));m=parseFloat(m.getAttribute("y"));isNaN(k)||isNaN(l)?i=n:(isNaN(q)&&(q=0),isNaN(m)&&(m=0),r=new hd(qd),r.ma=0,r.na=0,r.C=l,r.D=k,i.position=new F(q,m),i.Xc=r);break;case "polygon":i=mq(g);break;case "polyline":i=mq(g)}if(i!==n){i instanceof V&&(k=parseFloat(nq(a,g,"stroke-width")),isNaN(k)||(i.Za=k),k=nq(a,g,"stroke-linecap"),k!==n&&(i.DE=k),k=nq(a,g,"fill"),k!==n&&
-1!==k.indexOf("url")?(k=k.substring(k.indexOf("#")+1,k.length-1),k=a["_brush"+k],i.fill=k instanceof Fe?k:"black"):i.fill=k===n?"black":"none"===k?n:k,g=nq(a,g,"stroke"),g!==n&&-1!==g.indexOf("url")?(k=g.substring(g.indexOf("#")+1,g.length-1),k=a["_brush"+k],i.stroke=k instanceof Fe?k:"black"):i.stroke="none"===g?n:g,i.pz=h);if(j!==n){j=j.split(")");k=h;for(g=0;g<j.length;g++)/\(.*[^0-9\.,\s-]/.test(j[g])&&(k=p),/\(.*[0-9]-[0-9]/.test(j[g])&&(k=p);if(k)for(g=j.length-1;0<=g;g--)if(l=j[g],""!==l)switch(q=
l.indexOf("("),k=l.substring(0,q).replace(/\s*/,""),q=l.substring(q+1).split(/\s*[\s,]\s*/),k){case "rotate":oq(a,i,q);break;case "translate":k=i;l=parseFloat(q[0]);q=parseFloat(q[1]);if(!isNaN(l)||!isNaN(q))m=k.position.copy(),isNaN(m.x)&&(m.x=0),isNaN(m.y)&&(m.y=0),k.position=new F(l+m.x,q+m.y);break;case "scale":pq(a,i,q);break;case "skewX":qq(a,i,parseFloat(q[0])*Math.PI/180);break;case "skewY":rq(a,i,parseFloat(q[0])*Math.PI/180);break;case "matrix":sq(a,i,q)}}if(i instanceof x){j=i.elements.l;
k=g=0;l=i.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);for(;j.next();)q=j.value.position.copy(),isNaN(q.x)&&(q.x=0),isNaN(q.y)&&(q.y=0),q.x<g&&(g=q.x),q.y<k&&(k=q.y);l.x+=g;l.y+=k;i.position=l}c===n?a.Qm.push(i):c.add(i)}}}}
function sq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),g=parseFloat(c[2]),i=parseFloat(c[3]),j=parseFloat(c[4]),k=parseFloat(c[5]);if(!isNaN(d+e+g+i+j+k)){var l=b.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);if(b instanceof V){c=b.Xc.copy();if(c.type===qd)c=a.wr(c);else if(c.type===rd)c=tq(c);else if(c.type===md){c.type=id;var a=new jd(c.ma,c.na),m=new Ed(td,c.C,c.D);a.Aa.add(m);c.sb.add(a)}c.offset(l.x,l.y);c.transform(d,e,g,i,j-l.x,k-l.y);a=c.normalize();b.Xc=c;l.x-=a.x;l.y-=a.y;
b.position=l}else{for(b=b.elements.l;b.next();)d=b.value.position.copy(),d.x+=l.x,d.y+=l.y,b.value.position=d;for(b.reset();b.next();)sq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=l.x,d.y-=l.y,b.value.position=d}}}
function oq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),g=parseFloat(c[2]);isNaN(e)&&(e=0);isNaN(g)&&(g=0);if(!isNaN(d)){var i=d*Math.PI/180,j=b.position.copy();isNaN(j.x)&&(j.x=0);isNaN(j.y)&&(j.y=0);if(b instanceof V){c=b.Xc.copy();c.type===rd?c=tq(c):c.type===qd&&(c=a.wr(c));if(c.type===id)c.rotate(d,e-j.x,g-j.y),g=c.normalize(),b.Xc=c,j.x-=g.x,j.y-=g.y,b.position=j;else{var d=c.ma-e+j.x,k=c.na-g+j.y,l=c.C-e+j.x,m=c.D-g+j.y,a=d*Math.cos(i)-k*Math.sin(i)+e-j.x,d=k*Math.cos(i)+d*Math.sin(i)+
g-j.y,e=l*Math.cos(i)-m*Math.sin(i)+e-j.x,g=m*Math.cos(i)+l*Math.sin(i)+g-j.y,l=Math.min(a,e),m=Math.min(d,g);c.ma=a-l;c.na=d-m;c.C=e-l;c.D=g-m;j.x+=l;j.y+=m;b.position=j;b.Xc=c}b.fill instanceof Fe&&(j=b.fill.copy(),c=Math.atan((0.5-j.start.y)/(0.5-j.start.x)),c+=i,j.start=new H((1-Math.cos(c))/2,(1-Math.sin(c))/2),j.end=new H((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.fill=j);b.stroke instanceof Fe&&(j=b.stroke.copy(),c=Math.atan((0.5-j.start.y)/(0.5-j.start.x)),c+=i,j.start=new H((1-Math.cos(c))/2,
(1-Math.sin(c))/2),j.end=new H((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.stroke=j)}else{for(b=b.elements.l;b.next();)i=b.value.position.copy(),i.x+=j.x,i.y+=j.y,b.value.position=i;for(b.reset();b.next();)oq(a,b.value,c);for(b.reset();b.next();)i=b.value.position.copy(),i.x-=j.x,i.y-=j.y,b.value.position=i}}}
function pq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]);if(!isNaN(d)){isNaN(e)&&(e=d);var g=b.position.copy();isNaN(g.x)&&(g.x=0);isNaN(g.y)&&(g.y=0);if(b instanceof V)a=b.Xc.copy(),g.x*=d,g.y*=e,b.position=g,a.scale(d,e),b.Xc=a;else{for(b=b.elements.l;b.next();)d=b.value.position.copy(),d.x+=g.x,d.y+=g.y,b.value.position=d;for(b.reset();b.next();)pq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=g.x,d.y-=g.y,b.value.position=d}}}
function qq(a,b,c){if(!isNaN(c)){var d=b.position.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);if(b instanceof V){var e=b.Xc.copy();if(e.type===qd)e=a.wr(e);else if(e.type===rd)e=tq(e);else if(e.type===md){e.type=id;var a=new jd(e.ma,e.na),g=new Ed(td,e.C,e.D);a.Aa.add(g);e.sb.add(a)}e.offset(d.x,d.y);e.transform(1,0,Math.tan(c),1,-d.x,-d.y);c=e.normalize();b.Xc=e;d.x-=c.x;d.y-=c.y;b.position=d}else{for(b=b.elements.l;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)qq(a,
b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}}
function rq(a,b,c){if(!isNaN(c)){var d=b.position.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);if(b instanceof V){var e=b.Xc.copy();if(e.type===qd)e=a.wr(e);else if(e.type===rd)e=tq(e);else if(e.type===md){e.type=id;var a=new jd(e.ma,e.na),g=new Ed(td,e.C,e.D);a.Aa.add(g);e.sb.add(a)}e.offset(d.x,d.y);e.transform(1,Math.tan(c),0,1,-d.x,-d.y);c=e.normalize();b.Xc=e;d.x-=c.x;d.y-=c.y;b.position=d}else{for(b=b.elements.l;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)rq(a,
b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}}
function mq(a){var b=p;if("polygon"===a.tagName)b=h;else if("polyline"!==a.tagName)return n;var c=new V,d=a.getAttribute("points"),a=new hd,e=new z(jd),g=d.split(/\s*[\s,]\s*/);if(4>g.length)return n;for(var i,d=new z(Ed),j,k,l=1;l<g.length;l+=2){j=eval(g[l-1]);k=eval(g[l]);if("number"!==typeof j||isNaN(j)||"number"!==typeof k||isNaN(k))return n;1===l?i=new jd(j,k):d.add(new Ed(td,j,k))}b&&(b=new Ed(td,i.ma,i.na),b.close(),d.add(b));i.Aa=d;e.add(i);a.sb=e;i=a.normalize();c.position=new F(-i.x,-i.y);
c.Xc=a;return c}function nq(a,b,c){var d=b.getAttribute(c);"string"!==typeof d&&(d=b.style[c]);return"string"!==typeof d||""===d?(b=b.parentNode,"g"===b.tagName||"use"===b.tagName?nq(a,b,c):n):d}
function tq(a){var b=a.ma,c=a.na,d=a.C,e=a.D,g=Math.abs(d-b)/2,i=Math.abs(e-c)/2,b=Math.min(b,d)+g,c=Math.min(c,e)+i;new F;e=new jd(b,c-i);d=new Ed(Kd);d.Ub=b+ic*g;d.Ac=c-i;d.lg=b+g;d.mg=c-ic*i;d.C=b+g;d.D=c;e.Aa.add(d);d=new Ed(Kd);d.Ub=b+g;d.Ac=c+ic*i;d.lg=b+ic*g;d.mg=c+i;d.C=b;d.D=c+i;e.Aa.add(d);d=new Ed(Kd);d.Ub=b-ic*g;d.Ac=c+i;d.lg=b-g;d.mg=c+ic*i;d.C=b-g;d.D=c;e.Aa.add(d);d=new Ed(Kd);d.Ub=b-g;d.Ac=c-ic*i;d.lg=b-ic*g;d.mg=c-i;d.C=b;d.D=c-i;e.Aa.add(d);a.type=id;a.sb.add(e);return a}
kq.prototype.wr=function(a){var b=a.ma,c=a.na,d=a.C,e=a.D,g=Math.min(b,d),i=Math.min(c,e),b=Math.abs(d-b),c=Math.abs(e-c),e=new jd(g,i);e.Aa.add(new Ed(td,g+b,i));e.Aa.add(new Ed(td,g+b,i+c));e.Aa.add((new Ed(td,g,i+c)).close());a.type=id;a.sb.add(e);return a};window.go=ea;ea.version="1.1.11"; })(window);
